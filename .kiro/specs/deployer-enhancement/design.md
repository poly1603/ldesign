# è®¾è®¡æ–‡æ¡£

## æ¦‚è¿°

æœ¬è®¾è®¡æ–‡æ¡£æè¿°äº† @ldesign/deployer éƒ¨ç½²å·¥å…·çš„å¢å¼ºæ–¹æ¡ˆï¼ŒåŒ…æ‹¬æ–°å¢å¼€æºæ‰˜ç®¡å¹³å°æ”¯æŒã€ä¼˜åŒ–å‘½ä»¤è¡Œäº¤äº’ä½“éªŒã€æä¾›å¯è§†åŒ–æ“ä½œç•Œé¢ç­‰åŠŸèƒ½ã€‚è®¾è®¡éµå¾ªç°æœ‰é¡¹ç›®çš„åˆ†å±‚æ¶æ„ï¼Œä¿æŒé«˜å†…èšä½è€¦åˆçš„åŸåˆ™ã€‚

## æ¶æ„è®¾è®¡

### æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Presentation Layer                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ CLI Module  â”‚  â”‚ Web Dashboardâ”‚  â”‚ API Server         â”‚  â”‚
â”‚  â”‚ (Enhanced)  â”‚  â”‚ (Vue 3)      â”‚  â”‚ (Express/Fastify)  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    Business Layer                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Deployer    â”‚  â”‚ Platform    â”‚  â”‚ Config Manager     â”‚  â”‚
â”‚  â”‚ Core        â”‚  â”‚ Registry    â”‚  â”‚ (Enhanced)         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Preview     â”‚  â”‚ Notificationâ”‚  â”‚ Report Generator   â”‚  â”‚
â”‚  â”‚ Manager     â”‚  â”‚ Manager     â”‚  â”‚ (Enhanced)         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    Platform Adapters                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Vercel â”‚ â”‚Netlify â”‚ â”‚ GitHub â”‚ â”‚Cloudflareâ”‚ â”‚ Surge     â”‚ â”‚
â”‚  â”‚Adapter â”‚ â”‚Adapter â”‚ â”‚ Pages  â”‚ â”‚ Pages   â”‚ â”‚ Adapter   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚  â”‚  SSH   â”‚ â”‚  ECS   â”‚ â”‚CloudRunâ”‚                           â”‚
â”‚  â”‚Deployerâ”‚ â”‚Deployerâ”‚ â”‚Deployerâ”‚                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    Infrastructure Layer                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Credential  â”‚  â”‚ Logger      â”‚  â”‚ Progress Reporter   â”‚  â”‚
â”‚  â”‚ Store       â”‚  â”‚ (Enhanced)  â”‚  â”‚ (Enhanced)          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ¨¡å—ä¾èµ–å…³ç³»

```mermaid
graph TD
    CLI[CLI Module] --> Core[Deployer Core]
    Dashboard[Web Dashboard] --> API[API Server]
    API --> Core
    Core --> Registry[Platform Registry]
    Core --> Config[Config Manager]
    Core --> Preview[Preview Manager]
    Core --> Notify[Notification Manager]
    Registry --> Adapters[Platform Adapters]
    Adapters --> Vercel[Vercel Adapter]
    Adapters --> Netlify[Netlify Adapter]
    Adapters --> GitHub[GitHub Pages Adapter]
    Adapters --> Cloudflare[Cloudflare Pages Adapter]
    Adapters --> Surge[Surge Adapter]
    Config --> CredStore[Credential Store]
```

## ç»„ä»¶å’Œæ¥å£

### 1. å¹³å°é€‚é…å™¨æ¥å£

æ‰€æœ‰å¹³å°é€‚é…å™¨å®ç°ç»Ÿä¸€çš„ `PlatformAdapter` æ¥å£ï¼š

```typescript
/**
 * å¹³å°é€‚é…å™¨åŸºç¡€æ¥å£
 */
interface PlatformAdapter {
  /** å¹³å°æ ‡è¯† */
  readonly id: string
  /** å¹³å°åç§° */
  readonly name: string
  /** å¹³å°å›¾æ ‡ */
  readonly icon: string
  
  /**
   * éªŒè¯å‡­è¯
   */
  validateCredentials(credentials: PlatformCredentials): Promise<ValidationResult>
  
  /**
   * æ‰§è¡Œéƒ¨ç½²
   */
  deploy(options: DeployOptions): Promise<DeployResult>
  
  /**
   * åˆ›å»ºé¢„è§ˆéƒ¨ç½²
   */
  createPreview(options: PreviewOptions): Promise<PreviewResult>
  
  /**
   * æå‡é¢„è§ˆåˆ°ç”Ÿäº§
   */
  promotePreview(previewId: string): Promise<DeployResult>
  
  /**
   * è·å–éƒ¨ç½²çŠ¶æ€
   */
  getStatus(deploymentId: string): Promise<DeploymentStatus>
  
  /**
   * å›æ»šéƒ¨ç½²
   */
  rollback(deploymentId: string): Promise<RollbackResult>
  
  /**
   * åˆ é™¤éƒ¨ç½²
   */
  delete(deploymentId: string): Promise<void>
}
```

### 2. Vercel é€‚é…å™¨

```typescript
/**
 * Vercel å¹³å°é€‚é…å™¨
 */
class VercelAdapter implements PlatformAdapter {
  readonly id = 'vercel'
  readonly name = 'Vercel'
  readonly icon = 'â–²'
  
  private apiClient: VercelAPIClient
  
  constructor(config: VercelConfig) {
    this.apiClient = new VercelAPIClient(config.token)
  }
  
  async deploy(options: DeployOptions): Promise<DeployResult> {
    // 1. åˆ›å»ºéƒ¨ç½²
    // 2. ä¸Šä¼ æ–‡ä»¶
    // 3. ç­‰å¾…æ„å»ºå®Œæˆ
    // 4. è¿”å›éƒ¨ç½² URL
  }
}

interface VercelConfig {
  token: string
  teamId?: string
  projectId?: string
}
```

### 3. Netlify é€‚é…å™¨

```typescript
/**
 * Netlify å¹³å°é€‚é…å™¨
 */
class NetlifyAdapter implements PlatformAdapter {
  readonly id = 'netlify'
  readonly name = 'Netlify'
  readonly icon = 'â—†'
  
  private apiClient: NetlifyAPIClient
  
  constructor(config: NetlifyConfig) {
    this.apiClient = new NetlifyAPIClient(config.token)
  }
  
  async deploy(options: DeployOptions): Promise<DeployResult> {
    // 1. è·å–æˆ–åˆ›å»ºç«™ç‚¹
    // 2. åˆ›å»ºéƒ¨ç½²
    // 3. ä¸Šä¼ æ–‡ä»¶ï¼ˆæ”¯æŒå¢é‡éƒ¨ç½²ï¼‰
    // 4. è¿”å›éƒ¨ç½² URL
  }
}

interface NetlifyConfig {
  token: string
  siteId?: string
}
```

### 4. GitHub Pages é€‚é…å™¨

```typescript
/**
 * GitHub Pages å¹³å°é€‚é…å™¨
 */
class GitHubPagesAdapter implements PlatformAdapter {
  readonly id = 'github-pages'
  readonly name = 'GitHub Pages'
  readonly icon = 'ğŸ™'
  
  private octokit: Octokit
  
  constructor(config: GitHubPagesConfig) {
    this.octokit = new Octokit({ auth: config.token })
  }
  
  async deploy(options: DeployOptions): Promise<DeployResult> {
    // 1. æ£€æŸ¥ä»“åº“é…ç½®
    // 2. åˆ›å»ºæˆ–æ›´æ–° gh-pages åˆ†æ”¯
    // 3. æ¨é€æ–‡ä»¶
    // 4. è§¦å‘ Pages æ„å»º
    // 5. è¿”å› Pages URL
  }
}

interface GitHubPagesConfig {
  token: string
  owner: string
  repo: string
  branch?: string  // é»˜è®¤ gh-pages
}
```

### 5. Cloudflare Pages é€‚é…å™¨

```typescript
/**
 * Cloudflare Pages å¹³å°é€‚é…å™¨
 */
class CloudflarePagesAdapter implements PlatformAdapter {
  readonly id = 'cloudflare-pages'
  readonly name = 'Cloudflare Pages'
  readonly icon = 'â˜ï¸'
  
  private apiClient: CloudflareAPIClient
  
  constructor(config: CloudflarePagesConfig) {
    this.apiClient = new CloudflareAPIClient(config.apiToken, config.accountId)
  }
  
  async deploy(options: DeployOptions): Promise<DeployResult> {
    // 1. è·å–æˆ–åˆ›å»ºé¡¹ç›®
    // 2. åˆ›å»ºéƒ¨ç½²
    // 3. ä¸Šä¼ æ–‡ä»¶
    // 4. è¿”å›éƒ¨ç½² URL
  }
}

interface CloudflarePagesConfig {
  apiToken: string
  accountId: string
  projectName?: string
}
```

### 6. Surge é€‚é…å™¨

```typescript
/**
 * Surge.sh å¹³å°é€‚é…å™¨
 */
class SurgeAdapter implements PlatformAdapter {
  readonly id = 'surge'
  readonly name = 'Surge.sh'
  readonly icon = 'âš¡'
  
  constructor(config: SurgeConfig) {
    // Surge ä½¿ç”¨ CLI è®¤è¯
  }
  
  async deploy(options: DeployOptions): Promise<DeployResult> {
    // 1. è°ƒç”¨ surge CLI
    // 2. è§£æè¾“å‡ºè·å– URL
    // 3. è¿”å›éƒ¨ç½²ç»“æœ
  }
}

interface SurgeConfig {
  domain?: string  // è‡ªå®šä¹‰åŸŸå
  token?: string   // å¯é€‰çš„ token
}
```

### 7. å¹³å°æ³¨å†Œè¡¨

```typescript
/**
 * å¹³å°æ³¨å†Œè¡¨ - ç®¡ç†æ‰€æœ‰å¹³å°é€‚é…å™¨
 */
class PlatformRegistry {
  private static instance: PlatformRegistry
  private adapters: Map<string, PlatformAdapter> = new Map()
  
  static getInstance(): PlatformRegistry {
    if (!this.instance) {
      this.instance = new PlatformRegistry()
    }
    return this.instance
  }
  
  /**
   * æ³¨å†Œå¹³å°é€‚é…å™¨
   */
  register(adapter: PlatformAdapter): void {
    this.adapters.set(adapter.id, adapter)
  }
  
  /**
   * è·å–å¹³å°é€‚é…å™¨
   */
  get(platformId: string): PlatformAdapter | undefined {
    return this.adapters.get(platformId)
  }
  
  /**
   * è·å–æ‰€æœ‰å¹³å°
   */
  getAll(): PlatformAdapter[] {
    return Array.from(this.adapters.values())
  }
  
  /**
   * åˆå§‹åŒ–å†…ç½®å¹³å°
   */
  initializeBuiltIn(credentials: CredentialStore): void {
    // æ ¹æ®å·²é…ç½®çš„å‡­è¯åˆå§‹åŒ–é€‚é…å™¨
  }
}
```

### 8. å‡­è¯å­˜å‚¨

```typescript
/**
 * å‡­è¯å®‰å…¨å­˜å‚¨
 */
class CredentialStore {
  private encryptionKey: string
  private storePath: string
  
  constructor(options: CredentialStoreOptions) {
    this.storePath = options.storePath || '~/.ldesign/credentials.enc'
    this.encryptionKey = this.deriveKey(options.masterPassword)
  }
  
  /**
   * å­˜å‚¨å‡­è¯
   */
  async set(platformId: string, credentials: PlatformCredentials): Promise<void> {
    // åŠ å¯†å¹¶å­˜å‚¨
  }
  
  /**
   * è·å–å‡­è¯
   */
  async get(platformId: string): Promise<PlatformCredentials | null> {
    // è§£å¯†å¹¶è¿”å›
  }
  
  /**
   * åˆ é™¤å‡­è¯
   */
  async delete(platformId: string): Promise<void> {
    // åˆ é™¤æŒ‡å®šå¹³å°å‡­è¯
  }
  
  /**
   * å¯¼å‡ºé…ç½®ï¼ˆä¸å«æ•æ„Ÿä¿¡æ¯ï¼‰
   */
  async exportSafe(): Promise<SafeConfig> {
    // å¯¼å‡ºä¸å«å‡­è¯çš„é…ç½®
  }
}
```

### 9. å¢å¼ºçš„ CLI ç•Œé¢

```typescript
/**
 * å¢å¼ºçš„ CLI è¾“å‡ºç®¡ç†å™¨
 */
class EnhancedCLI {
  private spinner: Ora
  private progressBar: ProgressBar
  
  /**
   * æ˜¾ç¤ºè¿›åº¦æ¡
   */
  showProgress(options: ProgressOptions): void {
    // æ˜¾ç¤ºå¸¦ç™¾åˆ†æ¯”å’Œ ETA çš„è¿›åº¦æ¡
  }
  
  /**
   * æ›´æ–°è¿›åº¦
   */
  updateProgress(current: number, total: number, message?: string): void {
    // æ›´æ–°è¿›åº¦æ¡
  }
  
  /**
   * æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
   */
  success(message: string): void {
    console.log(chalk.green('âœ“'), message)
  }
  
  /**
   * æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯
   */
  error(message: string, suggestion?: string): void {
    console.log(chalk.red('âœ—'), message)
    if (suggestion) {
      console.log(chalk.yellow('ğŸ’¡'), suggestion)
    }
  }
  
  /**
   * æ˜¾ç¤ºéƒ¨ç½²æ‘˜è¦
   */
  showDeploySummary(result: DeployResult): void {
    // æ ¼å¼åŒ–æ˜¾ç¤ºéƒ¨ç½²ç»“æœ
  }
  
  /**
   * è¾“å‡º JSON æ ¼å¼
   */
  outputJSON(data: any): void {
    console.log(JSON.stringify(data, null, 2))
  }
}
```

### 10. Web Dashboard

```typescript
/**
 * Web Dashboard æœåŠ¡å™¨
 */
class DashboardServer {
  private app: Express
  private port: number
  
  constructor(options: DashboardOptions) {
    this.port = options.port || 3456
    this.app = this.createApp()
  }
  
  /**
   * å¯åŠ¨æœåŠ¡å™¨
   */
  async start(): Promise<void> {
    // å¯åŠ¨ Express æœåŠ¡å™¨
    // æä¾›é™æ€æ–‡ä»¶
    // è®¾ç½® API è·¯ç”±
    // æ‰“å¼€æµè§ˆå™¨
  }
  
  /**
   * åˆ›å»º Express åº”ç”¨
   */
  private createApp(): Express {
    const app = express()
    
    // é™æ€æ–‡ä»¶
    app.use(express.static(path.join(__dirname, 'dashboard/dist')))
    
    // API è·¯ç”±
    app.use('/api', this.createAPIRouter())
    
    // WebSocket ç”¨äºå®æ—¶æ›´æ–°
    this.setupWebSocket(app)
    
    return app
  }
}
```

## æ•°æ®æ¨¡å‹

### éƒ¨ç½²é…ç½®æ‰©å±•

```typescript
/**
 * æ‰©å±•çš„éƒ¨ç½²é…ç½®
 */
interface ExtendedDeployConfig extends DeployConfig {
  /** ç›®æ ‡å¹³å° */
  targetPlatform: PlatformType
  
  /** å¹³å°ç‰¹å®šé…ç½® */
  platformConfig?: PlatformSpecificConfig
  
  /** é¢„è§ˆé…ç½® */
  preview?: PreviewConfig
  
  /** æ–‡æ¡£ç«™ç‚¹é…ç½® */
  docs?: DocsConfig
}

type PlatformType = 
  | 'vercel' 
  | 'netlify' 
  | 'github-pages' 
  | 'cloudflare-pages' 
  | 'surge'
  | 'ssh'
  | 'docker'
  | 'kubernetes'

interface PreviewConfig {
  enabled: boolean
  autoExpire?: number  // é¢„è§ˆè¿‡æœŸæ—¶é—´ï¼ˆå°æ—¶ï¼‰
  requireApproval?: boolean
}

interface DocsConfig {
  type: 'vitepress' | 'docusaurus' | 'custom'
  buildCommand?: string
  outputDir?: string
  customDomain?: string
  versioning?: {
    enabled: boolean
    versions: string[]
  }
}
```

### éƒ¨ç½²ç»“æœæ‰©å±•

```typescript
/**
 * æ‰©å±•çš„éƒ¨ç½²ç»“æœ
 */
interface ExtendedDeployResult extends DeployResult {
  /** éƒ¨ç½² URL */
  url: string
  
  /** é¢„è§ˆ URLï¼ˆå¦‚æœæ˜¯é¢„è§ˆéƒ¨ç½²ï¼‰ */
  previewUrl?: string
  
  /** éƒ¨ç½² ID */
  deploymentId: string
  
  /** æ–‡ä»¶ç»Ÿè®¡ */
  fileStats: {
    total: number
    uploaded: number
    skipped: number
    size: number
  }
  
  /** æ„å»ºä¿¡æ¯ */
  buildInfo?: {
    duration: number
    logs: string[]
  }
}
```

## æ­£ç¡®æ€§å±æ€§

*æ­£ç¡®æ€§å±æ€§æ˜¯ç³»ç»Ÿåœ¨æ‰€æœ‰æœ‰æ•ˆæ‰§è¡Œä¸­éƒ½åº”ä¿æŒä¸ºçœŸçš„ç‰¹å¾æˆ–è¡Œä¸ºã€‚å±æ€§ä½œä¸ºäººç±»å¯è¯»è§„èŒƒå’Œæœºå™¨å¯éªŒè¯æ­£ç¡®æ€§ä¿è¯ä¹‹é—´çš„æ¡¥æ¢ã€‚*

### å±æ€§ 1ï¼šå¹³å°é€‚é…å™¨éƒ¨ç½²ä¸€è‡´æ€§

*å¯¹äºä»»æ„* å¹³å°é€‚é…å™¨å’Œæœ‰æ•ˆçš„éƒ¨ç½²é…ç½®ï¼Œæ‰§è¡Œéƒ¨ç½²æ“ä½œååº”è¿”å›åŒ…å« URL å’ŒçŠ¶æ€çš„ DeployResult å¯¹è±¡ã€‚

**éªŒè¯: éœ€æ±‚ 1.6**

### å±æ€§ 2ï¼šå¹³å°è®¤è¯é”™è¯¯å¤„ç†

*å¯¹äºä»»æ„* å¹³å°é€‚é…å™¨å’Œæ— æ•ˆçš„å‡­è¯ï¼ŒéªŒè¯å‡­è¯æ“ä½œåº”è¿”å›åŒ…å«é”™è¯¯æè¿°å’Œä¿®å¤å»ºè®®çš„ ValidationResult å¯¹è±¡ã€‚

**éªŒè¯: éœ€æ±‚ 1.7**

### å±æ€§ 3ï¼šSSH è®¤è¯æ–¹å¼æ”¯æŒ

*å¯¹äºä»»æ„* SSH éƒ¨ç½²é…ç½®ï¼Œæ— è®ºä½¿ç”¨å¯†é’¥è®¤è¯è¿˜æ˜¯å¯†ç è®¤è¯ï¼Œéƒ¨ç½²å™¨éƒ½åº”æˆåŠŸå»ºç«‹è¿æ¥æˆ–è¿”å›æ˜ç¡®çš„è®¤è¯é”™è¯¯ã€‚

**éªŒè¯: éœ€æ±‚ 2.1**

### å±æ€§ 4ï¼šé‡è¯•æœºåˆ¶æŒ‡æ•°é€€é¿

*å¯¹äºä»»æ„* å¤±è´¥çš„éƒ¨ç½²æ“ä½œï¼Œé‡è¯•é—´éš”åº”éµå¾ªæŒ‡æ•°é€€é¿ç­–ç•¥ï¼Œå³ç¬¬ n æ¬¡é‡è¯•çš„ç­‰å¾…æ—¶é—´åº”å¤§äºç¬¬ n-1 æ¬¡ã€‚

**éªŒè¯: éœ€æ±‚ 2.4**

### å±æ€§ 5ï¼šå¹¶è¡Œéƒ¨ç½²å¹¶å‘æ§åˆ¶

*å¯¹äºä»»æ„* å¤šæœåŠ¡å™¨å¹¶è¡Œéƒ¨ç½²ï¼ŒåŒæ—¶è¿›è¡Œçš„éƒ¨ç½²æ•°é‡ä¸åº”è¶…è¿‡é…ç½®çš„æœ€å¤§å¹¶å‘æ•°ã€‚

**éªŒè¯: éœ€æ±‚ 2.5**

### å±æ€§ 6ï¼šCLI è¾“å‡ºæ ¼å¼å®Œæ•´æ€§

*å¯¹äºä»»æ„* éƒ¨ç½²å®Œæˆäº‹ä»¶ï¼ŒCLI è¾“å‡ºçš„æ‘˜è¦åº”åŒ…å«éƒ¨ç½² URLã€è€—æ—¶å’Œæ–‡ä»¶æ•°é‡ä¸‰ä¸ªå¿…éœ€å­—æ®µã€‚

**éªŒè¯: éœ€æ±‚ 3.3**

### å±æ€§ 7ï¼šCLI çŠ¶æ€é¢œè‰²ç¼–ç 

*å¯¹äºä»»æ„* éƒ¨ç½²çŠ¶æ€è¾“å‡ºï¼ŒæˆåŠŸçŠ¶æ€åº”ä½¿ç”¨ç»¿è‰²ï¼Œé”™è¯¯çŠ¶æ€åº”ä½¿ç”¨çº¢è‰²ï¼Œè­¦å‘ŠçŠ¶æ€åº”ä½¿ç”¨é»„è‰²ã€‚

**éªŒè¯: éœ€æ±‚ 3.2**

### å±æ€§ 8ï¼šJSON è¾“å‡ºæœ‰æ•ˆæ€§

*å¯¹äºä»»æ„* ä½¿ç”¨ --json æ ‡å¿—çš„å‘½ä»¤è¾“å‡ºï¼Œè¾“å‡ºå†…å®¹åº”ä¸ºæœ‰æ•ˆçš„ JSON æ ¼å¼ï¼Œè§£æåå†åºåˆ—åŒ–åº”å¾—åˆ°ç­‰ä»·çš„å¯¹è±¡ã€‚

**éªŒè¯: éœ€æ±‚ 3.6**

### å±æ€§ 9ï¼šå‡­è¯å®‰å…¨å­˜å‚¨

*å¯¹äºä»»æ„* å­˜å‚¨çš„å¹³å°å‡­è¯ï¼Œä»å­˜å‚¨ä¸­è¯»å–ååº”èƒ½æ­£ç¡®è§£å¯†å¹¶ä¸åŸå§‹å‡­è¯ç›¸ç­‰ã€‚

**éªŒè¯: éœ€æ±‚ 5.1**

### å±æ€§ 10ï¼šé…ç½®å¯¼å‡ºå®‰å…¨æ€§

*å¯¹äºä»»æ„* å¯¼å‡ºçš„é…ç½®ï¼Œå¯¼å‡ºç»“æœä¸åº”åŒ…å«ä»»ä½•æ•æ„Ÿå‡­è¯å­—æ®µï¼ˆå¦‚ tokenã€passwordã€secretï¼‰ã€‚

**éªŒè¯: éœ€æ±‚ 5.6**

### å±æ€§ 11ï¼šé¢„è§ˆ URL å”¯ä¸€æ€§

*å¯¹äºä»»æ„* ä¸¤ä¸ªä¸åŒçš„é¢„è§ˆéƒ¨ç½²ï¼Œå®ƒä»¬çš„é¢„è§ˆ URL åº”è¯¥æ˜¯ä¸åŒçš„ã€‚

**éªŒè¯: éœ€æ±‚ 6.2**

### å±æ€§ 12ï¼šéƒ¨ç½²å‰éªŒè¯é˜»æ–­

*å¯¹äºä»»æ„* éƒ¨ç½²å‰éªŒè¯å¤±è´¥çš„æƒ…å†µï¼Œéƒ¨ç½²æ“ä½œåº”è¢«é˜»æ­¢ä¸”ä¸åº”æœ‰ä»»ä½•æ–‡ä»¶è¢«ä¸Šä¼ åˆ°ç›®æ ‡å¹³å°ã€‚

**éªŒè¯: éœ€æ±‚ 6.5**

### å±æ€§ 13ï¼šæ–‡æ¡£ç«™ç‚¹è‡ªåŠ¨æ£€æµ‹

*å¯¹äºä»»æ„* åŒ…å« VitePress æˆ– Docusaurus é…ç½®æ–‡ä»¶çš„é¡¹ç›®ï¼Œéƒ¨ç½²å™¨åº”æ­£ç¡®è¯†åˆ«æ–‡æ¡£ç±»å‹å¹¶ä½¿ç”¨ç›¸åº”çš„æ„å»ºå‘½ä»¤ã€‚

**éªŒè¯: éœ€æ±‚ 7.1, 7.2**

### å±æ€§ 14ï¼šé€šçŸ¥å‘é€å®Œæ•´æ€§

*å¯¹äºä»»æ„* éƒ¨ç½²å®Œæˆäº‹ä»¶å’Œå·²é…ç½®çš„é€šçŸ¥æ¸ é“ï¼Œæ‰€æœ‰æ¸ é“éƒ½åº”æ”¶åˆ°åŒ…å«éƒ¨ç½²çŠ¶æ€çš„é€šçŸ¥ã€‚

**éªŒè¯: éœ€æ±‚ 8.1**

### å±æ€§ 15ï¼šéƒ¨ç½²æŠ¥å‘Šå†…å®¹å®Œæ•´æ€§

*å¯¹äºä»»æ„* ç”Ÿæˆçš„éƒ¨ç½²æŠ¥å‘Šï¼ŒæŠ¥å‘Šåº”åŒ…å«éƒ¨ç½²è€—æ—¶ã€æ–‡ä»¶å˜æ›´æ•°é‡å’Œç¯å¢ƒè¯¦æƒ…ä¸‰ä¸ªå¿…éœ€å­—æ®µã€‚

**éªŒè¯: éœ€æ±‚ 8.2**

## é”™è¯¯å¤„ç†

### é”™è¯¯ç±»å‹å±‚æ¬¡

```typescript
/**
 * éƒ¨ç½²é”™è¯¯åŸºç±»
 */
class DeployError extends Error {
  code: string
  suggestion?: string
  
  constructor(message: string, code: string, suggestion?: string) {
    super(message)
    this.code = code
    this.suggestion = suggestion
  }
}

/**
 * è®¤è¯é”™è¯¯
 */
class AuthenticationError extends DeployError {
  constructor(platform: string, message: string) {
    super(
      `${platform} è®¤è¯å¤±è´¥: ${message}`,
      'AUTH_FAILED',
      `è¯·æ£€æŸ¥ ${platform} çš„ API Token æ˜¯å¦æ­£ç¡®ï¼Œå¯ä½¿ç”¨ 'ldesign-deployer platforms test ${platform}' æµ‹è¯•è¿æ¥`
    )
  }
}

/**
 * ç½‘ç»œé”™è¯¯
 */
class NetworkError extends DeployError {
  constructor(message: string) {
    super(
      `ç½‘ç»œé”™è¯¯: ${message}`,
      'NETWORK_ERROR',
      'è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼Œæˆ–ç¨åé‡è¯•'
    )
  }
}

/**
 * é…ç½®é”™è¯¯
 */
class ConfigurationError extends DeployError {
  constructor(field: string, message: string) {
    super(
      `é…ç½®é”™è¯¯ [${field}]: ${message}`,
      'CONFIG_ERROR',
      `è¯·æ£€æŸ¥é…ç½®æ–‡ä»¶ä¸­çš„ '${field}' å­—æ®µ`
    )
  }
}

/**
 * éªŒè¯é”™è¯¯
 */
class ValidationError extends DeployError {
  issues: ValidationIssue[]
  
  constructor(issues: ValidationIssue[]) {
    super(
      `éƒ¨ç½²å‰éªŒè¯å¤±è´¥: å‘ç° ${issues.length} ä¸ªé—®é¢˜`,
      'VALIDATION_FAILED'
    )
    this.issues = issues
  }
}
```

### é”™è¯¯æ¢å¤ç­–ç•¥

```typescript
/**
 * é”™è¯¯æ¢å¤ç­–ç•¥
 */
interface RecoveryStrategy {
  /** æ˜¯å¦å¯é‡è¯• */
  retryable: boolean
  /** æœ€å¤§é‡è¯•æ¬¡æ•° */
  maxRetries: number
  /** é‡è¯•å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰ */
  retryDelay: number
  /** é€€é¿ç­–ç•¥ */
  backoff: 'linear' | 'exponential'
}

const ERROR_RECOVERY_STRATEGIES: Record<string, RecoveryStrategy> = {
  NETWORK_ERROR: {
    retryable: true,
    maxRetries: 3,
    retryDelay: 1000,
    backoff: 'exponential'
  },
  AUTH_FAILED: {
    retryable: false,
    maxRetries: 0,
    retryDelay: 0,
    backoff: 'linear'
  },
  RATE_LIMITED: {
    retryable: true,
    maxRetries: 5,
    retryDelay: 5000,
    backoff: 'exponential'
  }
}
```

## æµ‹è¯•ç­–ç•¥

### å•å…ƒæµ‹è¯•

- æµ‹è¯•å„å¹³å°é€‚é…å™¨çš„ API è°ƒç”¨é€»è¾‘
- æµ‹è¯•å‡­è¯åŠ å¯†/è§£å¯†åŠŸèƒ½
- æµ‹è¯•é…ç½®è§£æå’ŒéªŒè¯
- æµ‹è¯• CLI è¾“å‡ºæ ¼å¼åŒ–

### å±æ€§æµ‹è¯•

- ä½¿ç”¨ fast-check è¿›è¡Œå±æ€§æµ‹è¯•
- æ¯ä¸ªå±æ€§æµ‹è¯•è‡³å°‘è¿è¡Œ 100 æ¬¡è¿­ä»£
- æµ‹è¯•æ ‡ç­¾æ ¼å¼: **Feature: deployer-enhancement, Property {number}: {property_text}**

### é›†æˆæµ‹è¯•

- æµ‹è¯•å®Œæ•´çš„éƒ¨ç½²æµç¨‹ï¼ˆä½¿ç”¨æ¨¡æ‹ŸæœåŠ¡å™¨ï¼‰
- æµ‹è¯• Dashboard API ç«¯ç‚¹
- æµ‹è¯• WebSocket å®æ—¶æ›´æ–°

### ç«¯åˆ°ç«¯æµ‹è¯•

- ä½¿ç”¨ Playwright æµ‹è¯• Dashboard UI
- æµ‹è¯• CLI å‘½ä»¤çš„å®Œæ•´æ‰§è¡Œæµç¨‹

