# 简单正交连线方案

## ✅ 核心改进

根据您的要求，实现了一个**简洁可靠**的连线系统：

### 1. **纯直角线条**
- ✅ 只使用水平和垂直线段
- ✅ 没有斜线
- ✅ 适度圆角（10px）

### 2. **统一入口在顶部**
- ✅ 所有节点的入口都在顶部（TOP）
- ✅ 流程从上到下清晰
- ✅ 符合标准流程图规范

### 3. **智能出口选择**
- 正常流程：从底部（BOTTOM）出发
- 回路：从侧面（LEFT/RIGHT）出发，走大弧线

### 4. **多线自动分散**
- 2条线：间距 80px（-40, +40）
- 3条线：间距 100px（-50, 0, +50）
- 根据目标位置自动排序

## 📁 文件变化

### 新增
- `src/renderer/SimpleOrthogonalRouter.ts` - 简单正交路由器（核心）

### 删除
- 所有复杂的路由器（7个文件全部删除）
- 只保留一个简单有效的

### 修改
- `src/renderer/EdgeRenderer.ts` - 精简到100行左右

## 🎯 效果

```
审批流程示例：

提交申请
    ↓（底部出）
部门主管审批
    ├→ 同意（底部出，偏移-40）
    │   ↓（顶部入）
    │  金额判断
    │   ├→ 小额（底部出，偏移-50）
    │   └→ 大额（底部出，偏移+50）
    │
    ├→ 拒绝（底部出，偏移+40）
    │   ↓（顶部入）
    │  审批拒绝
    │
    └→ 退回（右侧出，走超大弧线）
        ↓（顶部入）
       提交申请
```

## 🔑 关键参数

```typescript
MIN_DISTANCE = 70      // 最小距离
LOOP_OFFSET = 200      // 回路外边距
CORNER_RADIUS = 10     // 圆角
SIDE_OFFSET = 40       // 多线间距
```

## 📊 路径类型

### 正常流程（底部→顶部）
```
Source (底部出)
    ↓ 向下70px
    →→→ 水平移动到目标X
    ↓ 向上到目标
Target (顶部入)
```

### 回路（侧面→顶部）
```
Source (左侧或右侧出)
    → 向外60px
    ↓ 垂直走外侧200px
    ← 水平到目标X
    ↓ 进入目标
Target (顶部入)
```

## 🎮 查看效果

访问：`http://localhost:8000`

刷新页面查看新效果！

## ✨ 特点

1. ✅ **简洁** - 一个路由器，200行代码
2. ✅ **直角** - 纯水平+垂直线段
3. ✅ **统一** - 入口都在顶部
4. ✅ **清晰** - 回路走大弧线
5. ✅ **智能** - 自动分散多条线

---

**核心文件**: `src/renderer/SimpleOrthogonalRouter.ts`
**代码行数**: ~200行
**复杂度**: 低
**效果**: 简洁清晰

