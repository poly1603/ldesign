<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>é«˜çº§è¿çº¿ç³»ç»Ÿæ¼”ç¤º - FlowChart</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    header {
      background: rgba(255, 255, 255, 0.95);
      padding: 20px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    h1 {
      color: #333;
      font-size: 28px;
      margin-bottom: 10px;
    }

    .subtitle {
      color: #666;
      font-size: 14px;
    }

    .container {
      flex: 1;
      display: flex;
      padding: 20px;
      gap: 20px;
    }

    .sidebar {
      width: 300px;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      overflow-y: auto;
    }

    .main-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    #flowchart-container {
      flex: 1;
      background: white;
      border-radius: 10px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      position: relative;
      overflow: hidden;
    }

    .controls {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 10px;
      padding: 15px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    }

    .control-group {
      margin-bottom: 15px;
    }

    .control-group:last-child {
      margin-bottom: 0;
    }

    .control-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: 500;
      color: #333;
      font-size: 14px;
    }

    button {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.3s;
      width: 100%;
      margin-bottom: 10px;
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 10px rgba(102, 126, 234, 0.4);
    }

    button:active {
      transform: translateY(0);
    }

    button.secondary {
      background: #e0e0e0;
      color: #333;
    }

    button.secondary:hover {
      background: #d0d0d0;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    .feature-list {
      list-style: none;
    }

    .feature-list li {
      padding: 8px 0;
      border-bottom: 1px solid #eee;
      font-size: 14px;
      color: #555;
    }

    .feature-list li:last-child {
      border-bottom: none;
    }

    .feature-list li::before {
      content: 'âœ“';
      color: #4caf50;
      font-weight: bold;
      margin-right: 8px;
    }

    .info-box {
      background: #e3f2fd;
      border-left: 4px solid #2196f3;
      padding: 12px;
      border-radius: 4px;
      margin-bottom: 15px;
      font-size: 13px;
      line-height: 1.6;
    }

    .stats {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-bottom: 15px;
    }

    .stat-item {
      background: #f5f5f5;
      padding: 10px;
      border-radius: 5px;
      text-align: center;
    }

    .stat-value {
      font-size: 24px;
      font-weight: bold;
      color: #667eea;
    }

    .stat-label {
      font-size: 12px;
      color: #666;
      margin-top: 5px;
    }

    .log {
      background: #f5f5f5;
      border-radius: 5px;
      padding: 10px;
      max-height: 200px;
      overflow-y: auto;
      font-size: 12px;
      font-family: 'Courier New', monospace;
    }

    .log-entry {
      padding: 4px 0;
      border-bottom: 1px solid #e0e0e0;
    }

    .log-entry:last-child {
      border-bottom: none;
    }

    .log-time {
      color: #999;
      margin-right: 5px;
    }

    .log-message {
      color: #333;
    }

    h2 {
      font-size: 18px;
      margin-bottom: 15px;
      color: #333;
      border-bottom: 2px solid #667eea;
      padding-bottom: 8px;
    }

    h3 {
      font-size: 16px;
      margin-bottom: 10px;
      color: #555;
    }
  </style>
</head>

<body>
  <header>
    <h1>ğŸ¯ é«˜çº§è¿çº¿ç³»ç»Ÿæ¼”ç¤º</h1>
    <p class="subtitle">å‚è€ƒ bpmn.js å®ç°çš„æ™ºèƒ½è¿çº¿ç³»ç»Ÿ | æ”¯æŒæ‹–æ‹½æŠ˜ç‚¹ã€è¿æ¥ç‚¹ç®¡ç†ã€æœ€å°‘æŠ˜ç‚¹è·¯ç”±</p>
  </header>

  <div class="container">
    <div class="sidebar">
      <h2>ç³»ç»Ÿç‰¹æ€§</h2>
      <ul class="feature-list">
        <li>æ™ºèƒ½è¿æ¥ç‚¹åˆ†é…</li>
        <li>æœ€å°‘æŠ˜ç‚¹è·¯ç”±ç®—æ³•</li>
        <li>è±å½¢èŠ‚ç‚¹ä¼˜åŒ–</li>
        <li>è¿æ¥ç‚¹æ‹–æ‹½</li>
        <li>æŠ˜ç‚¹æ‹–æ‹½è°ƒæ•´</li>
        <li>ç½‘æ ¼å¯¹é½</li>
        <li>è‡ªåŠ¨è·¯å¾„ä¼˜åŒ–</li>
      </ul>

      <h2 style="margin-top: 20px;">ç»Ÿè®¡ä¿¡æ¯</h2>
      <div class="stats">
        <div class="stat-item">
          <div class="stat-value" id="node-count">0</div>
          <div class="stat-label">èŠ‚ç‚¹æ•°</div>
        </div>
        <div class="stat-item">
          <div class="stat-value" id="edge-count">0</div>
          <div class="stat-label">è¿çº¿æ•°</div>
        </div>
      </div>

      <h2>æ“ä½œæ—¥å¿—</h2>
      <div class="log" id="log-container">
        <div class="log-entry">
          <span class="log-time">00:00:00</span>
          <span class="log-message">ç³»ç»Ÿå·²å¯åŠ¨</span>
        </div>
      </div>
    </div>

    <div class="main-content">
      <div id="flowchart-container"></div>

      <div class="controls">
        <h3>æ§åˆ¶é¢æ¿</h3>
        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;">
          <button onclick="loadSimpleExample()">ç®€å•æµç¨‹</button>
          <button onclick="loadComplexExample()">å¤æ‚æµç¨‹</button>
          <button onclick="loadDiamondExample()">è±å½¢æµ‹è¯•</button>
          <button onclick="enableInteraction()" class="secondary">å¯ç”¨äº¤äº’</button>
          <button onclick="disableInteraction()" class="secondary">ç¦ç”¨äº¤äº’</button>
          <button onclick="clearCanvas()" class="secondary">æ¸…ç©ºç”»å¸ƒ</button>
        </div>

        <div class="info-box" style="margin-top: 15px;">
          <strong>ğŸ’¡ æç¤ºï¼š</strong>
          å¯ç”¨äº¤äº’åï¼Œå¯ä»¥æ‹–æ‹½è¿çº¿ä¸Šçš„è“è‰²åœ†ç‚¹ï¼ˆæŠ˜ç‚¹ï¼‰å’Œç»¿è‰²è±å½¢ï¼ˆè¿æ¥ç‚¹ï¼‰æ¥è°ƒæ•´è¿çº¿ã€‚
          åŒå‡»æŠ˜ç‚¹å¯åˆ é™¤ã€‚
        </div>
      </div>
    </div>
  </div>

  <script type="module">
    import { FlowChart } from '../dist/flowchart.esm.js';

    let flowChart = null;
    let interactionEnabled = false;

    function log(message) {
      const logContainer = document.getElementById('log-container');
      const time = new Date().toLocaleTimeString();
      const entry = document.createElement('div');
      entry.className = 'log-entry';
      entry.innerHTML = `<span class="log-time">${time}</span><span class="log-message">${message}</span>`;
      logContainer.insertBefore(entry, logContainer.firstChild);

      // é™åˆ¶æ—¥å¿—æ¡ç›®æ•°é‡
      if (logContainer.children.length > 50) {
        logContainer.removeChild(logContainer.lastChild);
      }
    }

    function updateStats(nodeCount, edgeCount) {
      document.getElementById('node-count').textContent = nodeCount;
      document.getElementById('edge-count').textContent = edgeCount;
    }

    function initFlowChart() {
      if (flowChart) {
        flowChart.destroy();
      }

      flowChart = new FlowChart({
        container: '#flowchart-container',
        autoLayout: false,
        enableZoom: true,
        enablePan: true,
        zoom: {
          initialScale: 0.8,
          minScale: 0.3,
          maxScale: 2,
          centerOnInit: true
        }
      });

      log('æµç¨‹å›¾åˆå§‹åŒ–å®Œæˆ');
    }

    window.loadSimpleExample = function () {
      const nodes = [
        { id: '1', type: 'start', label: 'å¼€å§‹', position: { x: 300, y: 100 } },
        { id: '2', type: 'process', label: 'å¤„ç†æ­¥éª¤', position: { x: 300, y: 220 } },
        { id: '3', type: 'condition', label: 'åˆ¤æ–­æ¡ä»¶', position: { x: 300, y: 340 } },
        { id: '4', type: 'process', label: 'åˆ†æ”¯A', position: { x: 150, y: 460 } },
        { id: '5', type: 'process', label: 'åˆ†æ”¯B', position: { x: 450, y: 460 } },
        { id: '6', type: 'end', label: 'ç»“æŸ', position: { x: 300, y: 580 } }
      ];

      const edges = [
        { id: 'e1', source: '1', target: '2' },
        { id: 'e2', source: '2', target: '3' },
        { id: 'e3', source: '3', target: '4', label: 'æ˜¯' },
        { id: 'e4', source: '3', target: '5', label: 'å¦' },
        { id: 'e5', source: '4', target: '6' },
        { id: 'e6', source: '5', target: '6' }
      ];

      initFlowChart();
      flowChart.load(nodes, edges);
      updateStats(nodes.length, edges.length);
      log(`åŠ è½½ç®€å•æµç¨‹: ${nodes.length}ä¸ªèŠ‚ç‚¹, ${edges.length}æ¡è¿çº¿`);
    };

    window.loadComplexExample = function () {
      const nodes = [
        { id: '1', type: 'start', label: 'ç”³è¯·æäº¤', position: { x: 300, y: 80 } },
        { id: '2', type: 'process', label: 'éƒ¨é—¨å®¡æ‰¹', position: { x: 300, y: 180 } },
        { id: '3', type: 'condition', label: 'é‡‘é¢åˆ¤æ–­', position: { x: 300, y: 280 } },
        { id: '4', type: 'process', label: 'å°é¢å®¡æ‰¹', position: { x: 150, y: 380 } },
        { id: '5', type: 'process', label: 'å¤§é¢å®¡æ‰¹', position: { x: 450, y: 380 } },
        { id: '6', type: 'parallel', label: 'å¹¶è¡Œä¼šç­¾', position: { x: 450, y: 480 } },
        { id: '7', type: 'process', label: 'HRå®¡æ‰¹', position: { x: 350, y: 580 } },
        { id: '8', type: 'process', label: 'è´¢åŠ¡å®¡æ‰¹', position: { x: 550, y: 580 } },
        { id: '9', type: 'merge', label: 'æ±‡æ€»ç»“æœ', position: { x: 450, y: 680 } },
        { id: '10', type: 'end', label: 'æµç¨‹ç»“æŸ', position: { x: 300, y: 780 } }
      ];

      const edges = [
        { id: 'e1', source: '1', target: '2' },
        { id: 'e2', source: '2', target: '3' },
        { id: 'e3', source: '3', target: '4', label: '<10ä¸‡' },
        { id: 'e4', source: '3', target: '5', label: 'â‰¥10ä¸‡' },
        { id: 'e5', source: '4', target: '10' },
        { id: 'e6', source: '5', target: '6' },
        { id: 'e7', source: '6', target: '7' },
        { id: 'e8', source: '6', target: '8' },
        { id: 'e9', source: '7', target: '9' },
        { id: 'e10', source: '8', target: '9' },
        { id: 'e11', source: '9', target: '10' }
      ];

      initFlowChart();
      flowChart.load(nodes, edges);
      updateStats(nodes.length, edges.length);
      log(`åŠ è½½å¤æ‚æµç¨‹: ${nodes.length}ä¸ªèŠ‚ç‚¹, ${edges.length}æ¡è¿çº¿`);
    };

    window.loadDiamondExample = function () {
      const nodes = [
        { id: '1', type: 'start', label: 'å¼€å§‹', position: { x: 300, y: 100 } },
        { id: '2', type: 'condition', label: 'æ¡ä»¶1', position: { x: 300, y: 220 } },
        { id: '3', type: 'process', label: 'ç»“æœA', position: { x: 150, y: 340 } },
        { id: '4', type: 'process', label: 'ç»“æœB', position: { x: 300, y: 340 } },
        { id: '5', type: 'process', label: 'ç»“æœC', position: { x: 450, y: 340 } },
        { id: '6', type: 'condition', label: 'æ¡ä»¶2', position: { x: 300, y: 460 } },
        { id: '7', type: 'end', label: 'ç»“æŸ', position: { x: 300, y: 580 } }
      ];

      const edges = [
        { id: 'e1', source: '1', target: '2' },
        { id: 'e2', source: '2', target: '3', label: 'å·¦' },
        { id: 'e3', source: '2', target: '4', label: 'ä¸‹' },
        { id: 'e4', source: '2', target: '5', label: 'å³' },
        { id: 'e5', source: '3', target: '6' },
        { id: 'e6', source: '4', target: '6' },
        { id: 'e7', source: '5', target: '6' },
        { id: 'e8', source: '6', target: '7' }
      ];

      initFlowChart();
      flowChart.load(nodes, edges);
      updateStats(nodes.length, edges.length);
      log(`åŠ è½½è±å½¢æµ‹è¯•: ${nodes.length}ä¸ªèŠ‚ç‚¹, ${edges.length}æ¡è¿çº¿ - å±•ç¤ºæ¯ä¸ªè§’åªæœ‰ä¸€æ ¹çº¿`);
    };

    window.enableInteraction = function () {
      if (flowChart) {
        // å¯ç”¨äº¤äº’åŠŸèƒ½
        interactionEnabled = true;
        log('âœ… äº¤äº’åŠŸèƒ½å·²å¯ç”¨ - å¯ä»¥æ‹–æ‹½æŠ˜ç‚¹å’Œè¿æ¥ç‚¹');
      } else {
        log('âŒ è¯·å…ˆåŠ è½½ä¸€ä¸ªç¤ºä¾‹');
      }
    };

    window.disableInteraction = function () {
      interactionEnabled = false;
      log('ğŸš« äº¤äº’åŠŸèƒ½å·²ç¦ç”¨');
    };

    window.clearCanvas = function () {
      if (flowChart) {
        flowChart.clear();
        updateStats(0, 0);
        log('ğŸ—‘ï¸ ç”»å¸ƒå·²æ¸…ç©º');
      }
    };

    // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
    window.addEventListener('DOMContentLoaded', () => {
      loadSimpleExample();
    });
  </script>
</body>

</html>











