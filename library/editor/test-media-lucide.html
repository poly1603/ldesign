<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>媒体插入功能（Lucide图标）- LDesign Editor</title>
  <style>
    body {
      margin: 0;
      padding: 20px;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
      min-height: 100vh;
    }
    
    .container {
      max-width: 1400px;
      margin: 0 auto;
    }
    
    .header {
      text-align: center;
      color: white;
      margin-bottom: 30px;
    }
    
    .header h1 {
      font-size: 36px;
      margin: 0 0 10px 0;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
    }
    
    .header-icon {
      width: 40px;
      height: 40px;
    }
    
    .header p {
      font-size: 18px;
      opacity: 0.95;
    }
    
    .main-content {
      background: white;
      border-radius: 16px;
      padding: 40px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
    }
    
    .editor-wrapper {
      border: 2px solid #e5e7eb;
      border-radius: 12px;
      overflow: hidden;
      margin-bottom: 30px;
    }
    
    .editor-container {
      min-height: 500px;
      background: white;
    }
    
    .features-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-top: 30px;
    }
    
    .feature-card {
      background: #f9fafb;
      border-radius: 12px;
      padding: 20px;
      transition: all 0.3s;
      border: 1px solid transparent;
    }
    
    .feature-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
      border-color: #3b82f6;
    }
    
    .feature-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 12px;
    }
    
    .feature-icon {
      width: 32px;
      height: 32px;
      color: #3b82f6;
    }
    
    .feature-title {
      font-size: 18px;
      font-weight: 600;
      color: #1f2937;
    }
    
    .feature-description {
      color: #6b7280;
      line-height: 1.6;
    }
    
    .test-section {
      background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
      border-radius: 12px;
      padding: 30px;
      margin-top: 30px;
    }
    
    .test-section h3 {
      margin: 0 0 20px 0;
      color: #78350f;
      font-size: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .test-buttons {
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
    }
    
    .test-button {
      padding: 12px 24px;
      background: white;
      border: 2px solid #f59e0b;
      color: #92400e;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .test-button svg {
      width: 18px;
      height: 18px;
    }
    
    .test-button:hover {
      background: #f59e0b;
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);
    }
    
    .test-button:hover svg {
      color: white;
    }
    
    .info-banner {
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      color: white;
      padding: 20px 30px;
      border-radius: 12px;
      margin-bottom: 30px;
      display: flex;
      align-items: center;
      gap: 20px;
    }
    
    .info-banner svg {
      width: 32px;
      height: 32px;
      flex-shrink: 0;
    }
    
    .info-content {
      flex: 1;
    }
    
    .info-content h4 {
      margin: 0 0 8px 0;
      font-size: 18px;
    }
    
    .info-content p {
      margin: 0;
      opacity: 0.95;
      line-height: 1.6;
    }
    
    /* 图标样式 */
    .lucide-icon {
      stroke: currentColor;
      stroke-width: 2;
      stroke-linecap: round;
      stroke-linejoin: round;
      fill: none;
    }
    
    .media-samples {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      margin-top: 30px;
    }
    
    .sample-box {
      border: 2px dashed #e5e7eb;
      border-radius: 8px;
      padding: 20px;
      text-align: center;
      background: #f9fafb;
    }
    
    .sample-box svg {
      width: 48px;
      height: 48px;
      color: #9ca3af;
      margin-bottom: 10px;
    }
    
    .sample-label {
      color: #6b7280;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>
        <svg class="header-icon lucide-icon" viewBox="0 0 24 24">
          <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
          <circle cx="8.5" cy="8.5" r="1.5"/>
          <polyline points="21 15 16 10 5 21"/>
        </svg>
        媒体插入功能（Lucide 图标版）
      </h1>
      <p>使用专业的 SVG 图标系统，提供更清晰的视觉体验</p>
    </div>
    
    <div class="main-content">
      <div class="info-banner">
        <svg class="lucide-icon" viewBox="0 0 24 24">
          <circle cx="12" cy="12" r="10"/>
          <path d="M12 16v-4"/>
          <path d="M12 8h.01"/>
        </svg>
        <div class="info-content">
          <h4>Lucide 图标系统</h4>
          <p>所有图标均采用 Lucide Icons，这是一个开源的、精心设计的 SVG 图标库，提供统一的视觉风格和出色的可访问性。</p>
        </div>
      </div>
      
      <div class="editor-wrapper">
        <div class="editor-container" id="editor"></div>
      </div>
      
      <div class="features-grid">
        <div class="feature-card">
          <div class="feature-header">
            <svg class="feature-icon lucide-icon" viewBox="0 0 24 24">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
              <circle cx="8.5" cy="8.5" r="1.5"/>
              <polyline points="21 15 16 10 5 21"/>
            </svg>
            <h3 class="feature-title">图片插入</h3>
          </div>
          <p class="feature-description">
            支持本地上传和网络图片URL。使用 Upload 图标表示本地上传，Globe 图标表示网络地址。
          </p>
        </div>
        
        <div class="feature-card">
          <div class="feature-header">
            <svg class="feature-icon lucide-icon" viewBox="0 0 24 24">
              <polygon points="23 7 16 12 23 17 23 7"/>
              <rect x="1" y="5" width="15" height="14" rx="2" ry="2"/>
            </svg>
            <h3 class="feature-title">视频插入</h3>
          </div>
          <p class="feature-description">
            支持MP4、WebM等视频格式。可以从本地上传或输入视频URL地址。
          </p>
        </div>
        
        <div class="feature-card">
          <div class="feature-header">
            <svg class="feature-icon lucide-icon" viewBox="0 0 24 24">
              <path d="M9 18V5l12-2v13"/>
              <circle cx="6" cy="18" r="3"/>
              <circle cx="18" cy="16" r="3"/>
            </svg>
            <h3 class="feature-title">音频插入</h3>
          </div>
          <p class="feature-description">
            支持MP3、WAV等音频格式。包含播放控制条，支持本地和网络音频。
          </p>
        </div>
      </div>
      
      <div class="test-section">
        <h3>
          <svg class="lucide-icon" viewBox="0 0 24 24" width="24" height="24">
            <rect x="3" y="3" width="18" height="18" rx="2"/>
            <polyline points="9 11 12 14 15 11"/>
            <polyline points="9 17 12 14 15 17"/>
          </svg>
          独立测试区
        </h3>
        <div class="test-buttons">
          <button class="test-button" id="testImage">
            <svg class="lucide-icon" viewBox="0 0 24 24">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
              <circle cx="8.5" cy="8.5" r="1.5"/>
              <polyline points="21 15 16 10 5 21"/>
            </svg>
            插入图片
          </button>
          
          <button class="test-button" id="testVideo">
            <svg class="lucide-icon" viewBox="0 0 24 24">
              <polygon points="23 7 16 12 23 17 23 7"/>
              <rect x="1" y="5" width="15" height="14" rx="2" ry="2"/>
            </svg>
            插入视频
          </button>
          
          <button class="test-button" id="testAudio">
            <svg class="lucide-icon" viewBox="0 0 24 24">
              <path d="M9 18V5l12-2v13"/>
              <circle cx="6" cy="18" r="3"/>
              <circle cx="18" cy="16" r="3"/>
            </svg>
            插入音频
          </button>
        </div>
      </div>
      
      <div class="media-samples">
        <div class="sample-box">
          <svg class="lucide-icon" viewBox="0 0 24 24">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
            <polyline points="17 8 12 3 7 8"/>
            <line x1="12" y1="3" x2="12" y2="15"/>
          </svg>
          <div class="sample-label">本地上传</div>
        </div>
        
        <div class="sample-box">
          <svg class="lucide-icon" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="10"/>
            <line x1="2" y1="12" x2="22" y2="12"/>
            <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
          </svg>
          <div class="sample-label">网络地址</div>
        </div>
        
        <div class="sample-box">
          <svg class="lucide-icon" viewBox="0 0 24 24">
            <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"/>
            <polyline points="13 2 13 9 20 9"/>
          </svg>
          <div class="sample-label">支持多种格式</div>
        </div>
      </div>
    </div>
  </div>

  <script type="module">
    import { LDesignEditor } from './src/index.ts'
    import { showMediaInsert, insertMedia } from './src/ui/MediaInsert.ts'
    
    // 初始化编辑器
    const container = document.getElementById('editor')
    const editor = new LDesignEditor(container, {
      placeholder: '开始输入内容，使用工具栏上的媒体插入按钮...',
      content: `
        <h2>Lucide 图标系统</h2>
        <p>这个编辑器现在使用 <strong>Lucide Icons</strong> 替代 emoji，提供更专业的界面体验。</p>
        <p>点击工具栏上的按钮，您会看到：</p>
        <ul>
          <li><strong>Upload 图标</strong> - 表示本地文件上传</li>
          <li><strong>Globe 图标</strong> - 表示网络地址输入</li>
          <li><strong>Image/Video/Audio 图标</strong> - 清晰标识不同媒体类型</li>
        </ul>
        <blockquote>
          <p>提示：Lucide 图标是矢量图形，可以无损缩放，并支持自定义颜色。</p>
        </blockquote>
      `
    })
    
    // 测试插入图片
    document.getElementById('testImage').addEventListener('click', (e) => {
      showMediaInsert(e.currentTarget, {
        type: 'image',
        onInsert: (urls) => {
          console.log('插入图片:', urls)
          insertMedia('image', urls)
        },
        multiple: true
      })
    })
    
    // 测试插入视频
    document.getElementById('testVideo').addEventListener('click', (e) => {
      showMediaInsert(e.currentTarget, {
        type: 'video',
        onInsert: (urls) => {
          console.log('插入视频:', urls)
          insertMedia('video', urls)
        },
        multiple: false
      })
    })
    
    // 测试插入音频
    document.getElementById('testAudio').addEventListener('click', (e) => {
      showMediaInsert(e.currentTarget, {
        type: 'audio',
        onInsert: (urls) => {
          console.log('插入音频:', urls)
          insertMedia('audio', urls)
        },
        multiple: false
      })
    })
    
    console.log('✅ 媒体插入功能（Lucide图标版）测试页面加载完成')
    console.log('🎯 使用 Lucide Icons 提供专业的 SVG 图标')
  </script>
</body>
</html>