<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>è¡¨æƒ…é€‰æ‹©å™¨æµ‹è¯• - LDesign Editor</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 40px 20px;
    }
    
    .container {
      max-width: 1000px;
      margin: 0 auto;
    }
    
    .header {
      text-align: center;
      color: white;
      margin-bottom: 30px;
    }
    
    .header h1 {
      font-size: 36px;
      margin-bottom: 10px;
      text-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }
    
    .header p {
      font-size: 18px;
      opacity: 0.9;
    }
    
    .info-card {
      background: white;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    
    .info-card h3 {
      color: #667eea;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .info-card ul {
      list-style: none;
      padding-left: 0;
    }
    
    .info-card li {
      padding: 8px 0;
      border-bottom: 1px solid #f0f0f0;
    }
    
    .info-card li:last-child {
      border-bottom: none;
    }
    
    .info-card li:before {
      content: "âœ“";
      color: #667eea;
      font-weight: bold;
      margin-right: 8px;
    }
    
    #editor-wrapper {
      background: white;
      border-radius: 12px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      overflow: hidden;
      min-height: 500px;
    }
    
    .status {
      margin-top: 20px;
      padding: 16px;
      border-radius: 8px;
      text-align: center;
      font-weight: 500;
    }
    
    .status.loading {
      background: #fef3c7;
      color: #92400e;
    }
    
    .status.success {
      background: #d1fae5;
      color: #065f46;
    }
    
    .status.error {
      background: #fee2e2;
      color: #991b1b;
    }
    
    .emoji-hint {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: white;
      padding: 16px 20px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      max-width: 300px;
      animation: slideIn 0.5s ease-out;
    }
    
    @keyframes slideIn {
      from {
        transform: translateX(400px);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }
    
    .emoji-hint h4 {
      color: #667eea;
      margin-bottom: 8px;
      font-size: 16px;
    }
    
    .emoji-hint p {
      color: #666;
      font-size: 14px;
      line-height: 1.5;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ğŸ˜Š è¡¨æƒ…é€‰æ‹©å™¨æµ‹è¯•</h1>
      <p>æµ‹è¯•è‡ªå®šä¹‰è¡¨æƒ…å¼¹å‡ºå±‚åŠŸèƒ½</p>
    </div>
    
    <div class="info-card">
      <h3>ğŸ“‹ æµ‹è¯•æ­¥éª¤</h3>
      <ul>
        <li>ç­‰å¾…ç¼–è¾‘å™¨åŠ è½½å®Œæˆï¼ˆçœ‹åˆ°ç»¿è‰²æç¤ºï¼‰</li>
        <li>ç‚¹å‡»å·¥å…·æ ä¸­çš„è¡¨æƒ…æŒ‰é’®ï¼ˆç¬‘è„¸å›¾æ ‡ ğŸ˜Šï¼‰</li>
        <li>åº”è¯¥ä¼šåœ¨æŒ‰é’®ä¸‹æ–¹æ˜¾ç¤ºè‡ªå®šä¹‰çš„è¡¨æƒ…é€‰æ‹©å™¨å¼¹å‡ºå±‚</li>
        <li>é€‰æ‹©å™¨åŒ…å«å¤šä¸ªåˆ†ç±»æ ‡ç­¾å’Œä¸°å¯Œçš„è¡¨æƒ…é€‰é¡¹</li>
        <li>ç‚¹å‡»ä»»æ„è¡¨æƒ…å³å¯æ’å…¥åˆ°æ–‡æ¡£ä¸­</li>
      </ul>
    </div>
    
    <div id="editor-wrapper"></div>
    
    <div id="status" class="status loading">
      â³ æ­£åœ¨åŠ è½½ç¼–è¾‘å™¨...
    </div>
  </div>
  
  <div class="emoji-hint" style="display: none;" id="hint">
    <h4>ğŸ’¡ æç¤º</h4>
    <p>æ‰¾åˆ°å·¥å…·æ ä¸­çš„ç¬‘è„¸å›¾æ ‡ ğŸ˜Šï¼Œç‚¹å‡»å®ƒå°±èƒ½æ‰“å¼€è¡¨æƒ…é€‰æ‹©å™¨äº†ï¼</p>
  </div>

  <script type="module">
    const status = document.getElementById('status');
    const hint = document.getElementById('hint');
    
    try {
      // åŠ¨æ€å¯¼å…¥ç¼–è¾‘å™¨
      const { Editor } = await import('./src/index.ts');
      
      console.log('%cğŸš€ å¼€å§‹åˆ›å»ºç¼–è¾‘å™¨...', 'color: #667eea; font-size: 14px; font-weight: bold;');
      
      // åˆ›å»ºç¼–è¾‘å™¨å®ä¾‹
      const editor = new Editor({
        element: '#editor-wrapper',
        content: `
          <h2>æ¬¢è¿æµ‹è¯•è¡¨æƒ…é€‰æ‹©å™¨ï¼ ğŸ‰</h2>
          <p>è¿™æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ã€‚ç°åœ¨ä½ å¯ä»¥ï¼š</p>
          <ul>
            <li>ç‚¹å‡»å·¥å…·æ çš„è¡¨æƒ…æŒ‰é’®æ’å…¥è¡¨æƒ…</li>
            <li>ä½¿ç”¨å„ç§æ–‡æœ¬æ ¼å¼åŒ–åŠŸèƒ½</li>
            <li>æ’å…¥å›¾ç‰‡ã€é“¾æ¥ã€è¡¨æ ¼ç­‰</li>
          </ul>
          <p><strong>è¯•è¯•åœ¨è¿™é‡Œæ’å…¥ä¸€äº›è¡¨æƒ…ï¼š</strong></p>
          <p><br></p>
        `,
        placeholder: 'å¼€å§‹è¾“å…¥å†…å®¹...',
        autofocus: true
      });
      
      // ç­‰å¾…ä¸€ä¸‹è®©æ’ä»¶åŠ è½½
      setTimeout(() => {
        const plugins = editor.plugins.getAll();
        const emojiPlugin = plugins.find(p => p.name === 'emoji');
        const commands = editor.commands.getCommands();
        
        console.log('%cğŸ“¦ å·²åŠ è½½æ’ä»¶åˆ—è¡¨:', 'color: #667eea; font-weight: bold;', 
          plugins.map(p => p.name));
        console.log('%cğŸ“ å·²æ³¨å†Œå‘½ä»¤åˆ—è¡¨:', 'color: #667eea; font-weight: bold;', commands);
        
        if (emojiPlugin && commands.includes('insertEmoji')) {
          console.log('%câœ… è¡¨æƒ…æ’ä»¶åŠ è½½æˆåŠŸï¼', 'color: #10b981; font-size: 16px; font-weight: bold;');
          status.className = 'status success';
          status.textContent = 'âœ… ç¼–è¾‘å™¨åŠ è½½æˆåŠŸï¼è¡¨æƒ…æ’ä»¶å·²å°±ç»ªï¼Œç‚¹å‡»å·¥å…·æ çš„è¡¨æƒ…æŒ‰é’®è¯•è¯•å§ï¼';
          
          // æ˜¾ç¤ºæç¤º
          setTimeout(() => {
            hint.style.display = 'block';
          }, 1000);
          
          // 5ç§’åéšè—æç¤º
          setTimeout(() => {
            hint.style.display = 'none';
          }, 8000);
        } else {
          console.error('%câŒ è¡¨æƒ…æ’ä»¶æœªåŠ è½½ï¼', 'color: #ef4444; font-size: 16px; font-weight: bold;');
          console.error('EmojiPlugin found:', emojiPlugin);
          console.error('insertEmoji command registered:', commands.includes('insertEmoji'));
          
          status.className = 'status error';
          status.innerHTML = `
            âš ï¸ è¡¨æƒ…æ’ä»¶æœªæ­£ç¡®åŠ è½½<br>
            <small>è¯·æ£€æŸ¥æ§åˆ¶å°äº†è§£è¯¦ç»†ä¿¡æ¯</small>
          `;
        }
      }, 1000);
      
      // ç›‘å¬ç¼–è¾‘å™¨äº‹ä»¶
      editor.on('update', () => {
        console.log('ğŸ“„ å†…å®¹å·²æ›´æ–°');
      });
      
      // æš´éœ²åˆ°å…¨å±€ä»¥ä¾¿è°ƒè¯•
      window.editor = editor;
      
    } catch (error) {
      console.error('%câŒ åŠ è½½å¤±è´¥:', 'color: #ef4444; font-size: 14px; font-weight: bold;', error);
      status.className = 'status error';
      status.innerHTML = `
        âŒ åŠ è½½å¤±è´¥<br>
        <small>${error.message}</small>
      `;
    }
  </script>
</body>
</html>