<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ç¼–è¾‘å™¨è°ƒè¯•æµ‹è¯•</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    
    .test-container {
      border: 2px solid #333;
      padding: 20px;
      margin: 20px 0;
    }
    
    h1 {
      color: #333;
    }
    
    .instructions {
      background: #f0f0f0;
      padding: 15px;
      border-radius: 5px;
      margin: 20px 0;
    }
    
    .test-buttons {
      margin: 20px 0;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    
    .test-buttons button {
      padding: 10px 20px;
      font-size: 14px;
      cursor: pointer;
      border: 1px solid #ccc;
      background: #fff;
      border-radius: 4px;
    }
    
    .test-buttons button:hover {
      background: #f0f0f0;
    }
    
    #editor-container {
      border: 1px solid #ddd;
      min-height: 300px;
    }
    
    .console-output {
      background: #1e1e1e;
      color: #d4d4d4;
      padding: 15px;
      margin: 20px 0;
      border-radius: 5px;
      max-height: 300px;
      overflow-y: auto;
      font-family: 'Courier New', monospace;
      font-size: 12px;
    }
    
    .console-output div {
      margin: 2px 0;
    }
  </style>
</head>
<body>
  <h1>ğŸ” å¯Œæ–‡æœ¬ç¼–è¾‘å™¨è°ƒè¯•æµ‹è¯•</h1>
  
  <div class="instructions">
    <h3>ğŸ“‹ æµ‹è¯•æ­¥éª¤ï¼š</h3>
    <ol>
      <li>æ‰“å¼€æµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰</li>
      <li>åˆ‡æ¢åˆ° Console æ ‡ç­¾é¡µ</li>
      <li>åœ¨ç¼–è¾‘å™¨ä¸­è¾“å…¥ä¸€äº›æ–‡å­—ï¼Œä¾‹å¦‚ï¼š"æµ‹è¯•æ–‡å­—"</li>
      <li>é€‰ä¸­æ–‡å­—</li>
      <li>ç‚¹å‡»ä¸‹é¢çš„æµ‹è¯•æŒ‰é’®</li>
      <li>æŸ¥çœ‹æ§åˆ¶å°çš„æ—¥å¿—è¾“å‡º</li>
    </ol>
    <p><strong>âš ï¸ é‡è¦ï¼š</strong>è¯·æˆªå›¾æˆ–å¤åˆ¶æ§åˆ¶å°çš„æ‰€æœ‰æ—¥å¿—ä¿¡æ¯å‘ç»™æˆ‘ï¼</p>
  </div>

  <div class="test-buttons">
    <button onclick="testFontSize()">ğŸ”¤ æµ‹è¯•å­—ä½“å¤§å°</button>
    <button onclick="testFontFamily()">ğŸ”¤ æµ‹è¯•å­—ä½“å®¶æ—</button>
    <button onclick="testTable()">ğŸ“‹ æµ‹è¯•æ’å…¥è¡¨æ ¼</button>
    <button onclick="testLineHeight()">ğŸ“ æµ‹è¯•è¡Œé«˜</button>
    <button onclick="testTextTransform()">ğŸ”„ æµ‹è¯•æ–‡æœ¬è½¬æ¢</button>
    <button onclick="clearConsole()">ğŸ—‘ï¸ æ¸…ç©ºæ—¥å¿—</button>
  </div>

  <div class="test-container">
    <h3>ç¼–è¾‘å™¨</h3>
    <div id="editor-container"></div>
  </div>

  <div class="console-output" id="console-output">
    <div><strong>Console æ—¥å¿—å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...</strong></div>
  </div>

  <script type="module">
    // æ•è·console.logè¾“å‡º
    const consoleOutput = document.getElementById('console-output');
    const originalLog = console.log;
    const originalWarn = console.warn;
    const originalError = console.error;
    
    function addToConsole(type, ...args) {
      const div = document.createElement('div');
      div.style.color = type === 'error' ? '#f48771' : 
                        type === 'warn' ? '#dcdcaa' : '#d4d4d4';
      div.textContent = args.map(arg => 
        typeof arg === 'object' ? JSON.stringify(arg, null, 2) : String(arg)
      ).join(' ');
      consoleOutput.appendChild(div);
      consoleOutput.scrollTop = consoleOutput.scrollHeight;
    }
    
    console.log = function(...args) {
      originalLog.apply(console, args);
      addToConsole('log', ...args);
    };
    
    console.warn = function(...args) {
      originalWarn.apply(console, args);
      addToConsole('warn', ...args);
    };
    
    console.error = function(...args) {
      originalError.apply(console, args);
      addToConsole('error', ...args);
    };

    // å¯¼å…¥ç¼–è¾‘å™¨ - æ³¨æ„ï¼šè¿™éœ€è¦ä½ å…ˆè¿è¡Œ npm run dev
    console.log('â³ Loading editor...');
    
    // æš‚æ—¶ä½¿ç”¨å…¨å±€å˜é‡ï¼Œå®é™…ä½¿ç”¨æ—¶éœ€è¦æ ¹æ®ä½ çš„æ„å»ºè®¾ç½®è°ƒæ•´
    window.editorInstance = null;
    
    console.log('â„¹ï¸ è¯·ç¡®ä¿å·²è¿è¡Œ npm run dev');
    console.log('â„¹ï¸ ç„¶ååœ¨å¼€å‘æœåŠ¡å™¨ä¸Šè®¿é—®æ­¤é¡µé¢');
  </script>

  <script>
    function clearConsole() {
      document.getElementById('console-output').innerHTML = 
        '<div><strong>Console cleared...</strong></div>';
    }
    
    function testFontSize() {
      console.log('\n=== ğŸ§ª å¼€å§‹æµ‹è¯•å­—ä½“å¤§å° ===');
      if (!window.editorInstance) {
        console.error('âŒ ç¼–è¾‘å™¨å®ä¾‹ä¸å­˜åœ¨ï¼');
        return;
      }
      
      const selection = window.getSelection();
      if (!selection || !selection.toString()) {
        console.warn('âš ï¸ è¯·å…ˆé€‰ä¸­ä¸€äº›æ–‡å­—ï¼');
        alert('è¯·å…ˆåœ¨ç¼–è¾‘å™¨ä¸­é€‰ä¸­ä¸€äº›æ–‡å­—');
        return;
      }
      
      console.log('ğŸ“ é€‰ä¸­çš„æ–‡å­—:', selection.toString());
      console.log('ğŸ¯ å°è¯•è®¾ç½®å­—ä½“å¤§å°ä¸º 24px');
      
      try {
        const result = window.editorInstance.commands.execute('setFontSize', '24px');
        console.log('âœ… å‘½ä»¤æ‰§è¡Œç»“æœ:', result);
      } catch (err) {
        console.error('âŒ æ‰§è¡Œå‡ºé”™:', err);
      }
    }
    
    function testFontFamily() {
      console.log('\n=== ğŸ§ª å¼€å§‹æµ‹è¯•å­—ä½“å®¶æ— ===');
      if (!window.editorInstance) {
        console.error('âŒ ç¼–è¾‘å™¨å®ä¾‹ä¸å­˜åœ¨ï¼');
        return;
      }
      
      const selection = window.getSelection();
      if (!selection || !selection.toString()) {
        console.warn('âš ï¸ è¯·å…ˆé€‰ä¸­ä¸€äº›æ–‡å­—ï¼');
        alert('è¯·å…ˆåœ¨ç¼–è¾‘å™¨ä¸­é€‰ä¸­ä¸€äº›æ–‡å­—');
        return;
      }
      
      console.log('ğŸ“ é€‰ä¸­çš„æ–‡å­—:', selection.toString());
      console.log('ğŸ¯ å°è¯•è®¾ç½®å­—ä½“ä¸º Microsoft YaHei');
      
      try {
        const result = window.editorInstance.commands.execute('setFontFamily', 'Microsoft YaHei, sans-serif');
        console.log('âœ… å‘½ä»¤æ‰§è¡Œç»“æœ:', result);
      } catch (err) {
        console.error('âŒ æ‰§è¡Œå‡ºé”™:', err);
      }
    }
    
    function testTable() {
      console.log('\n=== ğŸ§ª å¼€å§‹æµ‹è¯•æ’å…¥è¡¨æ ¼ ===');
      if (!window.editorInstance) {
        console.error('âŒ ç¼–è¾‘å™¨å®ä¾‹ä¸å­˜åœ¨ï¼');
        return;
      }
      
      console.log('ğŸ¯ å°è¯•æ’å…¥è¡¨æ ¼');
      
      try {
        const result = window.editorInstance.commands.execute('insertTable');
        console.log('âœ… å‘½ä»¤æ‰§è¡Œç»“æœ:', result);
        console.log('â„¹ï¸ ç°åœ¨åº”è¯¥ä¼šå¼¹å‡ºè¡¨æ ¼å¯¹è¯æ¡†ï¼Œè¯·é€‰æ‹©è¡Œåˆ—æ•°å¹¶ç¡®è®¤');
      } catch (err) {
        console.error('âŒ æ‰§è¡Œå‡ºé”™:', err);
      }
    }
    
    function testLineHeight() {
      console.log('\n=== ğŸ§ª å¼€å§‹æµ‹è¯•è¡Œé«˜ ===');
      if (!window.editorInstance) {
        console.error('âŒ ç¼–è¾‘å™¨å®ä¾‹ä¸å­˜åœ¨ï¼');
        return;
      }
      
      console.log('ğŸ¯ å°è¯•è®¾ç½®è¡Œé«˜ä¸º 2.0');
      
      try {
        const result = window.editorInstance.commands.execute('setLineHeight', '2.0');
        console.log('âœ… å‘½ä»¤æ‰§è¡Œç»“æœ:', result);
      } catch (err) {
        console.error('âŒ æ‰§è¡Œå‡ºé”™:', err);
      }
    }
    
    function testTextTransform() {
      console.log('\n=== ğŸ§ª å¼€å§‹æµ‹è¯•æ–‡æœ¬è½¬æ¢ ===');
      if (!window.editorInstance) {
        console.error('âŒ ç¼–è¾‘å™¨å®ä¾‹ä¸å­˜åœ¨ï¼');
        return;
      }
      
      const selection = window.getSelection();
      if (!selection || !selection.toString()) {
        console.warn('âš ï¸ è¯·å…ˆé€‰ä¸­ä¸€äº›æ–‡å­—ï¼');
        alert('è¯·å…ˆåœ¨ç¼–è¾‘å™¨ä¸­é€‰ä¸­ä¸€äº›è‹±æ–‡å­—æ¯');
        return;
      }
      
      console.log('ğŸ“ é€‰ä¸­çš„æ–‡å­—:', selection.toString());
      console.log('ğŸ¯ å°è¯•è½¬æ¢ä¸ºå¤§å†™');
      
      try {
        const result = window.editorInstance.commands.execute('toUpperCase');
        console.log('âœ… å‘½ä»¤æ‰§è¡Œç»“æœ:', result);
      } catch (err) {
        console.error('âŒ æ‰§è¡Œå‡ºé”™:', err);
      }
    }
  </script>

  <div style="margin-top: 40px; padding: 20px; background: #fff3cd; border: 1px solid #ffc107; border-radius: 5px;">
    <h3>ğŸ“Œ ä½¿ç”¨è¯´æ˜ï¼š</h3>
    <p>è¿™æ˜¯ä¸€ä¸ªè°ƒè¯•é¡µé¢ï¼Œéœ€è¦ä¸å¼€å‘æœåŠ¡å™¨ä¸€èµ·ä½¿ç”¨ã€‚</p>
    <p><strong>æ­¥éª¤ï¼š</strong></p>
    <ol>
      <li>åœ¨ç»ˆç«¯è¿è¡Œ: <code>npm run dev</code></li>
      <li>è®¿é—®å¼€å‘æœåŠ¡å™¨æä¾›çš„URLï¼ˆé€šå¸¸æ˜¯ http://localhost:5174ï¼‰</li>
      <li>å¯¼èˆªåˆ°è¿™ä¸ªæµ‹è¯•é¡µé¢æˆ–åœ¨ç¤ºä¾‹é¡µé¢ä¸­æµ‹è¯•</li>
      <li>æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºï¼Œæ‰¾å‡ºé—®é¢˜æ‰€åœ¨</li>
    </ol>
  </div>
</body>
</html>
