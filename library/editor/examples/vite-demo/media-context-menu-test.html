<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Media Context Menu Test - LDesign Editor</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      background: #f5f5f5;
    }
    
    h1 {
      color: #333;
      border-bottom: 2px solid #2196F3;
      padding-bottom: 10px;
    }
    
    .editor-container {
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      padding: 20px;
      margin: 20px 0;
    }
    
    #editor {
      min-height: 400px;
      border: 1px solid #e0e0e0;
      border-radius: 4px;
      padding: 20px;
    }
    
    .instructions {
      background: #e3f2fd;
      border-left: 4px solid #2196F3;
      padding: 15px;
      margin: 20px 0;
      border-radius: 4px;
    }
    
    .instructions h3 {
      margin-top: 0;
      color: #1976D2;
    }
    
    .instructions ul {
      margin: 10px 0;
    }
    
    .instructions li {
      margin: 5px 0;
    }
    
    .test-controls {
      margin: 20px 0;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    
    .test-controls button {
      padding: 10px 20px;
      background: #2196F3;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      transition: background 0.2s;
    }
    
    .test-controls button:hover {
      background: #1976D2;
    }
    
    .status {
      padding: 10px;
      background: #fff3cd;
      border: 1px solid #ffc107;
      border-radius: 4px;
      margin: 10px 0;
      display: none;
    }
    
    .status.success {
      background: #d4edda;
      border-color: #28a745;
    }
    
    .status.error {
      background: #f8d7da;
      border-color: #dc3545;
    }
  </style>
</head>
<body>
  <h1>ğŸ¨ åª’ä½“å³é”®èœå•åŠŸèƒ½æµ‹è¯•</h1>
  
  <div class="instructions">
    <h3>åŠŸèƒ½è¯´æ˜ï¼š</h3>
    <ul>
      <li><strong>å›¾ç‰‡å³é”®èœå•ï¼š</strong>åŒ…å«æ»¤é•œã€å°ºå¯¸ã€å¯¹é½ã€æ–‡å­—ç¯ç»•ã€è¾¹æ¡†ã€é˜´å½±ç­‰é€‰é¡¹</li>
      <li><strong>è§†é¢‘å³é”®èœå•ï¼š</strong>åŒ…å«æ’­æ”¾æ§åˆ¶ã€é€Ÿåº¦è°ƒèŠ‚ã€å¾ªç¯æ’­æ”¾ç­‰é€‰é¡¹</li>
      <li><strong>éŸ³é¢‘å³é”®èœå•ï¼š</strong>åŒ…å«æ’­æ”¾æ§åˆ¶ã€é™éŸ³ã€å¾ªç¯ç­‰é€‰é¡¹</li>
      <li><strong>åŒå‡»åª’ä½“å…ƒç´ ï¼š</strong>æ‰“å¼€å±æ€§å¯¹è¯æ¡†è¿›è¡Œè¯¦ç»†ç¼–è¾‘</li>
    </ul>
    
    <h3>æµ‹è¯•æ­¥éª¤ï¼š</h3>
    <ol>
      <li>ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®æ’å…¥ä¸åŒç±»å‹çš„åª’ä½“å…ƒç´ </li>
      <li>å³é”®ç‚¹å‡»æ’å…¥çš„åª’ä½“å…ƒç´ ï¼ŒæŸ¥çœ‹ä¸Šä¸‹æ–‡èœå•</li>
      <li>æµ‹è¯•å„ç§æ»¤é•œæ•ˆæœï¼ˆå›¾ç‰‡ï¼‰</li>
      <li>æµ‹è¯•å¤§å°è°ƒæ•´å’Œå¯¹é½åŠŸèƒ½</li>
      <li>æµ‹è¯•æ–‡å­—ç¯ç»•æ•ˆæœ</li>
      <li>æµ‹è¯•è¾¹æ¡†å’Œé˜´å½±æ•ˆæœ</li>
      <li>åŒå‡»åª’ä½“å…ƒç´ æ‰“å¼€å±æ€§å¯¹è¯æ¡†</li>
      <li>æµ‹è¯•è§†é¢‘/éŸ³é¢‘çš„æ’­æ”¾æ§åˆ¶åŠŸèƒ½</li>
    </ol>
  </div>
  
  <div class="test-controls">
    <button onclick="insertTestImage()">æ’å…¥æµ‹è¯•å›¾ç‰‡</button>
    <button onclick="insertTestVideo()">æ’å…¥æµ‹è¯•è§†é¢‘</button>
    <button onclick="insertTestAudio()">æ’å…¥æµ‹è¯•éŸ³é¢‘</button>
    <button onclick="insertMultipleMedia()">æ’å…¥å¤šä¸ªåª’ä½“</button>
    <button onclick="clearEditor()">æ¸…ç©ºç¼–è¾‘å™¨</button>
  </div>
  
  <div id="status" class="status"></div>
  
  <div class="editor-container">
    <div id="toolbar"></div>
    <div id="editor"></div>
  </div>
  
  <script type="module">
    import { Editor } from '../../dist/editor.es.js';
    
    // Initialize editor with media context menu plugin
    const editor = new Editor('#editor', {
      toolbar: '#toolbar',
      placeholder: 'å³é”®ç‚¹å‡»åª’ä½“å…ƒç´ æŸ¥çœ‹ä¸Šä¸‹æ–‡èœå•...',
      content: '<p>æ¬¢è¿æµ‹è¯•åª’ä½“å³é”®èœå•åŠŸèƒ½ï¼è¯·å…ˆæ’å…¥ä¸€äº›åª’ä½“å…ƒç´ ï¼Œç„¶åå³é”®ç‚¹å‡»å®ƒä»¬ã€‚</p>'
    });
    
    window.editor = editor;
    
    // Test functions
    window.insertTestImage = function() {
      const imageHtml = `
        <img src="https://via.placeholder.com/400x300/2196F3/ffffff?text=Test+Image" 
             alt="æµ‹è¯•å›¾ç‰‡" 
             title="è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•å›¾ç‰‡" 
             style="width: 400px; height: auto;">
      `;
      editor.insertHTML(imageHtml);
      showStatus('å·²æ’å…¥æµ‹è¯•å›¾ç‰‡ï¼Œå³é”®ç‚¹å‡»å›¾ç‰‡æŸ¥çœ‹èœå•', 'success');
    };
    
    window.insertTestVideo = function() {
      const videoHtml = `
        <video controls style="width: 400px; height: auto;">
          <source src="https://www.w3schools.com/html/mov_bbb.mp4" type="video/mp4">
          Your browser does not support the video tag.
        </video>
      `;
      editor.insertHTML(videoHtml);
      showStatus('å·²æ’å…¥æµ‹è¯•è§†é¢‘ï¼Œå³é”®ç‚¹å‡»è§†é¢‘æŸ¥çœ‹èœå•', 'success');
    };
    
    window.insertTestAudio = function() {
      const audioHtml = `
        <audio controls>
          <source src="https://www.w3schools.com/html/horse.mp3" type="audio/mpeg">
          Your browser does not support the audio element.
        </audio>
      `;
      editor.insertHTML(audioHtml);
      showStatus('å·²æ’å…¥æµ‹è¯•éŸ³é¢‘ï¼Œå³é”®ç‚¹å‡»éŸ³é¢‘æŸ¥çœ‹èœå•', 'success');
    };
    
    window.insertMultipleMedia = function() {
      const html = `
        <h2>åª’ä½“å…ƒç´ å±•ç¤º</h2>
        <p>ä¸‹é¢æ˜¯å„ç§åª’ä½“å…ƒç´ çš„ç¤ºä¾‹ï¼Œæ‚¨å¯ä»¥å³é”®ç‚¹å‡»å®ƒä»¬æŸ¥çœ‹ä¸åŒçš„ä¸Šä¸‹æ–‡èœå•é€‰é¡¹ï¼š</p>
        
        <h3>å›¾ç‰‡ç¤ºä¾‹</h3>
        <img src="https://via.placeholder.com/300x200/4CAF50/ffffff?text=Green+Image" 
             alt="ç»¿è‰²å›¾ç‰‡" 
             style="width: 300px;">
        <p>è¿™æ˜¯ä¸€æ®µæ–‡å­—ï¼Œç”¨äºæµ‹è¯•å›¾ç‰‡çš„æ–‡å­—ç¯ç»•æ•ˆæœã€‚æ‚¨å¯ä»¥å³é”®ç‚¹å‡»ä¸Šé¢çš„å›¾ç‰‡ï¼Œé€‰æ‹©"æ–‡å­—ç¯ç»•"é€‰é¡¹æ¥æµ‹è¯•ä¸åŒçš„ç¯ç»•æ–¹å¼ã€‚æ–‡å­—ä¼šæ ¹æ®æ‚¨çš„é€‰æ‹©è‡ªåŠ¨ç¯ç»•åœ¨å›¾ç‰‡å‘¨å›´ã€‚</p>
        
        <h3>è§†é¢‘ç¤ºä¾‹</h3>
        <video controls style="width: 400px;">
          <source src="https://www.w3schools.com/html/mov_bbb.mp4" type="video/mp4">
        </video>
        
        <h3>éŸ³é¢‘ç¤ºä¾‹</h3>
        <audio controls>
          <source src="https://www.w3schools.com/html/horse.mp3" type="audio/mpeg">
        </audio>
        
        <p>ç»§ç»­ç¼–è¾‘æ‚¨çš„å†…å®¹...</p>
      `;
      editor.setContent(html);
      showStatus('å·²æ’å…¥å¤šä¸ªåª’ä½“å…ƒç´ ï¼Œåˆ†åˆ«å³é”®ç‚¹å‡»æŸ¥çœ‹ä¸åŒçš„èœå•é€‰é¡¹', 'success');
    };
    
    window.clearEditor = function() {
      editor.setContent('<p>ç¼–è¾‘å™¨å·²æ¸…ç©ºï¼Œæ‚¨å¯ä»¥é‡æ–°å¼€å§‹æµ‹è¯•ã€‚</p>');
      showStatus('ç¼–è¾‘å™¨å·²æ¸…ç©º', 'success');
    };
    
    function showStatus(message, type = '') {
      const status = document.getElementById('status');
      status.textContent = message;
      status.className = 'status ' + type;
      status.style.display = 'block';
      
      setTimeout(() => {
        status.style.display = 'none';
      }, 3000);
    }
    
    // Log events for debugging
    editor.on('contextmenu', (e) => {
      const target = e.target;
      if (target.tagName === 'IMG' || target.tagName === 'VIDEO' || target.tagName === 'AUDIO') {
        console.log('Context menu opened for:', target.tagName);
      }
    });
    
    // Initial content with sample media
    setTimeout(() => {
      insertMultipleMedia();
    }, 500);
  </script>
</body>
</html>