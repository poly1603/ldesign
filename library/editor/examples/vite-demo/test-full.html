<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LDesign Editor - å®Œæ•´åŠŸèƒ½æµ‹è¯•</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft YaHei', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    
    .header {
      text-align: center;
      color: white;
      margin-bottom: 30px;
    }
    
    .header h1 {
      font-size: 2.5rem;
      margin-bottom: 10px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
    }
    
    .header p {
      font-size: 1.1rem;
      opacity: 0.95;
    }
    
    .editor-card {
      background: white;
      border-radius: 16px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      padding: 30px;
      margin-bottom: 30px;
    }
    
    .editor-title {
      font-size: 1.5rem;
      color: #333;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .editor-container {
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      overflow: hidden;
      min-height: 500px;
    }
    
    .test-controls {
      background: white;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    
    .control-group {
      margin-bottom: 20px;
    }
    
    .control-group h3 {
      color: #555;
      margin-bottom: 10px;
      font-size: 1.1rem;
    }
    
    .btn-group {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    
    .btn {
      padding: 8px 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.3s;
      font-weight: 500;
    }
    
    .btn-primary {
      background: #667eea;
      color: white;
    }
    
    .btn-primary:hover {
      background: #5a67d8;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
    }
    
    .btn-secondary {
      background: #48bb78;
      color: white;
    }
    
    .btn-secondary:hover {
      background: #38a169;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(72, 187, 120, 0.4);
    }
    
    .btn-warning {
      background: #ed8936;
      color: white;
    }
    
    .btn-warning:hover {
      background: #dd6b20;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(237, 137, 54, 0.4);
    }
    
    .btn-info {
      background: #4299e1;
      color: white;
    }
    
    .btn-info:hover {
      background: #3182ce;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(66, 153, 225, 0.4);
    }
    
    .status-bar {
      margin-top: 20px;
      padding: 15px;
      background: #f7fafc;
      border-radius: 8px;
      border-left: 4px solid #667eea;
    }
    
    .status-bar h4 {
      color: #2d3748;
      margin-bottom: 5px;
    }
    
    .status-bar p {
      color: #718096;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ğŸš€ LDesign Editor</h1>
      <p>åŠŸèƒ½å®Œæ•´çš„ç°ä»£åŒ–å¯Œæ–‡æœ¬ç¼–è¾‘å™¨</p>
    </div>
    
    <div class="editor-card">
      <h2 class="editor-title">
        <span>ğŸ“</span>
        <span>ç¼–è¾‘å™¨å®ä¾‹</span>
      </h2>
      <div id="editor" class="editor-container"></div>
    </div>
    
    <div class="test-controls">
      <div class="control-group">
        <h3>ğŸ¨ å†…å®¹æ“ä½œ</h3>
        <div class="btn-group">
          <button class="btn btn-primary" onclick="insertSampleContent()">æ’å…¥ç¤ºä¾‹å†…å®¹</button>
          <button class="btn btn-secondary" onclick="insertTable()">æ’å…¥è¡¨æ ¼</button>
          <button class="btn btn-info" onclick="insertCodeBlock()">æ’å…¥ä»£ç å—</button>
          <button class="btn btn-warning" onclick="clearContent()">æ¸…ç©ºå†…å®¹</button>
        </div>
      </div>
      
      <div class="control-group">
        <h3>ğŸ“¸ åª’ä½“æ’å…¥</h3>
        <div class="btn-group">
          <button class="btn btn-primary" onclick="insertImage()">æ’å…¥å›¾ç‰‡</button>
          <button class="btn btn-secondary" onclick="insertVideo()">æ’å…¥è§†é¢‘</button>
          <button class="btn btn-info" onclick="insertAudio()">æ’å…¥éŸ³é¢‘</button>
        </div>
      </div>
      
      <div class="control-group">
        <h3>ğŸ”§ ç¼–è¾‘å™¨æ§åˆ¶</h3>
        <div class="btn-group">
          <button class="btn btn-primary" onclick="getHTML()">è·å–HTML</button>
          <button class="btn btn-secondary" onclick="getText()">è·å–çº¯æ–‡æœ¬</button>
          <button class="btn btn-info" onclick="setReadOnly()">è®¾ä¸ºåªè¯»</button>
          <button class="btn btn-warning" onclick="setEditable()">è®¾ä¸ºå¯ç¼–è¾‘</button>
        </div>
      </div>
      
      <div class="status-bar">
        <h4>çŠ¶æ€ä¿¡æ¯</h4>
        <p id="status">ç¼–è¾‘å™¨å·²å°±ç»ª</p>
      </div>
    </div>
  </div>
  
  <script type="module">
    // åŠ¨æ€å¯¼å…¥ç¼–è¾‘å™¨æ¨¡å—
    async function initEditor() {
      try {
        // å¯¼å…¥ç¼–è¾‘å™¨æ ·å¼
        const styleModules = [
          '/src/styles/editor.css',
          '/src/styles/reset.css',
          '/src/styles/table.css'
        ];
        
        for (const module of styleModules) {
          const link = document.createElement('link');
          link.rel = 'stylesheet';
          link.href = module;
          document.head.appendChild(link);
        }
        
        // å¯¼å…¥ç¼–è¾‘å™¨æ ¸å¿ƒæ¨¡å—
        const { Editor } = await import('/src/core/Editor.ts');
        
        // åˆ›å»ºç¼–è¾‘å™¨å®ä¾‹ï¼ˆæ— éœ€æŒ‡å®šæ’ä»¶ï¼Œé»˜è®¤åŠ è½½æ‰€æœ‰åŠŸèƒ½ï¼‰
        const editor = new Editor({
          element: '#editor',
          placeholder: 'å¼€å§‹è¾“å…¥å†…å®¹...',
          autofocus: true,
          onChange: (html) => {
            updateStatus('å†…å®¹å·²æ›´æ–°');
          }
        });
        
        // è®¾ç½®åˆå§‹å†…å®¹
        editor.setHTML(`
          <h1>æ¬¢è¿ä½¿ç”¨ LDesign Editor</h1>
          <p>è¿™æ˜¯ä¸€ä¸ªåŠŸèƒ½é½å…¨çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œæ”¯æŒå„ç§æ–‡æœ¬æ ¼å¼å’Œåª’ä½“å†…å®¹ã€‚</p>
          <h2>ä¸»è¦ç‰¹æ€§</h2>
          <ul>
            <li><strong>ä¸°å¯Œçš„æ ¼å¼é€‰é¡¹</strong> - æ”¯æŒåŠ ç²—ã€æ–œä½“ã€ä¸‹åˆ’çº¿ç­‰</li>
            <li><strong>å¤šçº§æ ‡é¢˜</strong> - ä»H1åˆ°H6çš„æ ‡é¢˜æ”¯æŒ</li>
            <li><strong>åˆ—è¡¨åŠŸèƒ½</strong> - æœ‰åºå’Œæ— åºåˆ—è¡¨</li>
            <li><strong>è¡¨æ ¼ç¼–è¾‘</strong> - åˆ›å»ºå’Œç¼–è¾‘å¤æ‚è¡¨æ ¼</li>
            <li><strong>åª’ä½“æ”¯æŒ</strong> - å›¾ç‰‡ã€è§†é¢‘ã€éŸ³é¢‘åµŒå…¥</li>
            <li><strong>ä»£ç é«˜äº®</strong> - æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€</li>
          </ul>
          <p>è¯•è¯•å·¥å…·æ ä¸Šçš„å„ç§åŠŸèƒ½å§ï¼</p>
        `);
        
        // å°†ç¼–è¾‘å™¨å®ä¾‹æš´éœ²åˆ°å…¨å±€
        window.editor = editor;
        
        // å®šä¹‰æµ‹è¯•å‡½æ•°
        window.insertSampleContent = () => {
          const html = `
            <h2>ç¤ºä¾‹æ–‡ç« </h2>
            <p>è¿™æ˜¯ä¸€æ®µåŒ…å«å„ç§æ ¼å¼çš„ç¤ºä¾‹æ–‡æœ¬ã€‚<strong>è¿™æ˜¯åŠ ç²—æ–‡å­—</strong>ï¼Œ<em>è¿™æ˜¯æ–œä½“æ–‡å­—</em>ï¼Œ
            <u>è¿™æ˜¯ä¸‹åˆ’çº¿æ–‡å­—</u>ï¼Œ<s>è¿™æ˜¯åˆ é™¤çº¿æ–‡å­—</s>ã€‚</p>
            <blockquote>
              <p>è¿™æ˜¯ä¸€æ®µå¼•ç”¨æ–‡å­—ï¼Œé€šå¸¸ç”¨äºå¼•ç”¨ä»–äººçš„è¯è¯­æˆ–é‡è¦è§‚ç‚¹ã€‚</p>
            </blockquote>
            <h3>ä»£ç ç¤ºä¾‹</h3>
            <pre><code>function hello() {
  console.log("Hello, LDesign Editor!");
}</code></pre>
          `;
          editor.insertHTML(html);
          updateStatus('å·²æ’å…¥ç¤ºä¾‹å†…å®¹');
        };
        
        window.insertTable = () => {
          const table = `
            <table>
              <tr><th>å§“å</th><th>å¹´é¾„</th><th>èŒä¸š</th></tr>
              <tr><td>å¼ ä¸‰</td><td>28</td><td>å·¥ç¨‹å¸ˆ</td></tr>
              <tr><td>æå››</td><td>32</td><td>è®¾è®¡å¸ˆ</td></tr>
              <tr><td>ç‹äº”</td><td>25</td><td>äº§å“ç»ç†</td></tr>
            </table>
          `;
          editor.insertHTML(table);
          updateStatus('å·²æ’å…¥è¡¨æ ¼');
        };
        
        window.insertCodeBlock = () => {
          const code = `<pre><code class="language-javascript">
// LDesign Editor ç¤ºä¾‹ä»£ç 
const editor = new Editor({
  element: '#editor',
  plugins: ['formatting', 'heading', 'list'],
  placeholder: 'å¼€å§‹è¾“å…¥...'
});

editor.on('change', (html) => {
  console.log('Content changed:', html);
});</code></pre>`;
          editor.insertHTML(code);
          updateStatus('å·²æ’å…¥ä»£ç å—');
        };
        
        window.clearContent = () => {
          editor.clear();
          updateStatus('å·²æ¸…ç©ºå†…å®¹');
        };
        
        window.insertImage = () => {
          editor.commands.execute('insertImage');
          updateStatus('æ‰“å¼€å›¾ç‰‡æ’å…¥å¯¹è¯æ¡†');
        };
        
        window.insertVideo = () => {
          editor.commands.execute('insertVideo');
          updateStatus('æ‰“å¼€è§†é¢‘æ’å…¥å¯¹è¯æ¡†');
        };
        
        window.insertAudio = () => {
          editor.commands.execute('insertAudio');
          updateStatus('æ‰“å¼€éŸ³é¢‘æ’å…¥å¯¹è¯æ¡†');
        };
        
        window.getHTML = () => {
          const html = editor.getHTML();
          console.log('HTMLå†…å®¹:', html);
          alert('HTMLå†…å®¹å·²è¾“å‡ºåˆ°æ§åˆ¶å°');
          updateStatus('å·²è·å–HTMLå†…å®¹');
        };
        
        window.getText = () => {
          const text = editor.getText();
          console.log('çº¯æ–‡æœ¬å†…å®¹:', text);
          alert(`çº¯æ–‡æœ¬å†…å®¹: ${text.substring(0, 100)}...`);
          updateStatus('å·²è·å–çº¯æ–‡æœ¬å†…å®¹');
        };
        
        window.setReadOnly = () => {
          editor.setReadOnly(true);
          updateStatus('ç¼–è¾‘å™¨å·²è®¾ä¸ºåªè¯»');
        };
        
        window.setEditable = () => {
          editor.setReadOnly(false);
          updateStatus('ç¼–è¾‘å™¨å·²è®¾ä¸ºå¯ç¼–è¾‘');
        };
        
        window.updateStatus = (message) => {
          document.getElementById('status').textContent = message;
        };
        
        updateStatus('ç¼–è¾‘å™¨åˆå§‹åŒ–æˆåŠŸ');
        
      } catch (error) {
        console.error('ç¼–è¾‘å™¨åˆå§‹åŒ–å¤±è´¥:', error);
        document.getElementById('status').textContent = 'ç¼–è¾‘å™¨åˆå§‹åŒ–å¤±è´¥: ' + error.message;
      }
    }
    
    // åˆå§‹åŒ–ç¼–è¾‘å™¨
    initEditor();
  </script>
</body>
</html>