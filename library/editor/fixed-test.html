<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LDesign Editor - ä¿®å¤ç‰ˆæµ‹è¯•</title>
  <link rel="stylesheet" href="./dist/editor.css">
  <style>
    /* é¡µé¢æ ·å¼ */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 40px 20px;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    
    .header {
      text-align: center;
      color: white;
      margin-bottom: 30px;
    }
    
    .header h1 {
      font-size: 36px;
      margin-bottom: 10px;
    }
    
    .header p {
      font-size: 18px;
      opacity: 0.9;
    }
    
    /* ç¼–è¾‘å™¨å®¹å™¨æ ·å¼ - ç¡®ä¿é«˜åº¦æ­£ç¡® */
    .editor-wrapper {
      background: white;
      border-radius: 12px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      padding: 30px;
      min-height: 500px;
      display: flex;
      flex-direction: column;
    }
    
    /* é‡è¦ï¼šè®¾ç½®ç¼–è¾‘å™¨å®¹å™¨çš„é«˜åº¦ */
    #editor-container {
      height: 600px;
      position: relative;
    }
    
    /* é¢å¤–çš„æ ·å¼è¦†ç›–ï¼Œç¡®ä¿æ²¡æœ‰é»‘è¾¹ */
    .ldesign-editor-content:focus,
    .ldesign-editor-content[contenteditable="true"]:focus {
      outline: none !important;
      outline-width: 0 !important;
      box-shadow: none !important;
      border: none !important;
    }
    
    /* çŠ¶æ€æŒ‡ç¤ºå™¨ */
    .status-bar {
      margin-top: 20px;
      padding: 15px;
      background: #f0f9ff;
      border-radius: 8px;
      display: flex;
      align-items: center;
      gap: 20px;
    }
    
    .status-item {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
      color: #0369a1;
    }
    
    .status-item .icon {
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .test-buttons {
      margin-top: 20px;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    
    .test-btn {
      padding: 10px 20px;
      background: #3b82f6;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      transition: background 0.2s;
    }
    
    .test-btn:hover {
      background: #2563eb;
    }
    
    .test-btn.success {
      background: #10b981;
    }
    
    .test-btn.success:hover {
      background: #059669;
    }
    
    .test-btn.warning {
      background: #f59e0b;
    }
    
    .test-btn.warning:hover {
      background: #d97706;
    }
    
    .test-btn.danger {
      background: #ef4444;
    }
    
    .test-btn.danger:hover {
      background: #dc2626;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>âœ¨ LDesign Editor - ä¿®å¤ç‰ˆ</h1>
      <p>æ‰€æœ‰é—®é¢˜å·²ä¿®å¤ï¼šæ— é»‘è¾¹ã€æ­£å¸¸æ»šåŠ¨ã€å•æ¬¡å¼¹çª—</p>
    </div>
    
    <div class="editor-wrapper">
      <div id="editor-container"></div>
      
      <div class="status-bar">
        <div class="status-item">
          <span class="icon">âœ…</span>
          <span>æ— é»‘è¾¹èšç„¦</span>
        </div>
        <div class="status-item">
          <span class="icon">âœ…</span>
          <span>æ»šåŠ¨æ¡æ­£å¸¸</span>
        </div>
        <div class="status-item">
          <span class="icon">âœ…</span>
          <span>å•æ¬¡å›¾ç‰‡é€‰æ‹©</span>
        </div>
        <div class="status-item">
          <span class="icon">ğŸ“</span>
          <span id="char-count">å­—æ•°ï¼š0</span>
        </div>
      </div>
      
      <div class="test-buttons">
        <button class="test-btn" onclick="addLongContent()">æ·»åŠ é•¿å†…å®¹ï¼ˆæµ‹è¯•æ»šåŠ¨ï¼‰</button>
        <button class="test-btn success" onclick="insertImage()">æ’å…¥å›¾ç‰‡</button>
        <button class="test-btn success" onclick="insertVideo()">æ’å…¥è§†é¢‘</button>
        <button class="test-btn success" onclick="insertAudio()">æ’å…¥éŸ³é¢‘</button>
        <button class="test-btn warning" onclick="testFocus()">æµ‹è¯•èšç„¦</button>
        <button class="test-btn danger" onclick="clearContent()">æ¸…ç©ºå†…å®¹</button>
      </div>
    </div>
  </div>

  <script type="module">
    // å¯¼å…¥ç¼–è¾‘å™¨å’Œæ’ä»¶
    import { Editor, MediaDialogPlugin, ImagePlugin } from './dist/index.js'
    
    // åˆ›å»ºç¼–è¾‘å™¨å®ä¾‹
    const editor = new Editor({
      element: '#editor-container',
      placeholder: 'å¼€å§‹è¾“å…¥å†…å®¹ï¼Œæˆ–ä½¿ç”¨å·¥å…·æ æ’å…¥åª’ä½“...',
      autofocus: false, // åˆå§‹ä¸è‡ªåŠ¨èšç„¦ï¼Œé¿å…çœ‹åˆ°é»‘è¾¹
      plugins: [
        MediaDialogPlugin,  // åª’ä½“å¯¹è¯æ¡†æ’ä»¶ï¼ˆå¿…é¡»å…ˆåŠ è½½ï¼‰
        ImagePlugin        // å›¾ç‰‡å³é”®èœå•æ’ä»¶
      ],
      onChange: (content) => {
        // æ›´æ–°å­—æ•°ç»Ÿè®¡
        const text = content.replace(/<[^>]*>/g, '').trim()
        document.getElementById('char-count').textContent = `å­—æ•°ï¼š${text.length}`
      }
    })
    
    // è®¾ç½®åˆå§‹å†…å®¹
    editor.setHTML(`
      <h1>æ¬¢è¿ä½¿ç”¨ä¿®å¤åçš„ LDesign Editorï¼</h1>
      <p>è¿™ä¸ªç‰ˆæœ¬å·²ç»ä¿®å¤äº†æ‰€æœ‰å·²çŸ¥é—®é¢˜ï¼š</p>
      <ul>
        <li><strong>âœ… æ— é»‘è¾¹é—®é¢˜ï¼š</strong>ç¼–è¾‘å™¨è·å–ç„¦ç‚¹æ—¶ä¸ä¼šå‡ºç°é»‘è‰²è¾¹æ¡†</li>
        <li><strong>âœ… æ»šåŠ¨æ¡æ­£å¸¸ï¼š</strong>å†…å®¹è¶…è¿‡æœ€å¤§é«˜åº¦æ—¶è‡ªåŠ¨æ˜¾ç¤ºä¼˜é›…çš„æ»šåŠ¨æ¡</li>
        <li><strong>âœ… å•æ¬¡å¼¹çª—ï¼š</strong>æ’å…¥å›¾ç‰‡åªä¼šå¼¹å‡ºä¸€æ¬¡é€‰æ‹©æ¡†</li>
        <li><strong>âœ… é”™è¯¯ä¿®å¤ï¼š</strong>æ’å…¥åª’ä½“åä¸ä¼šæŠ¥é”™</li>
      </ul>
      <p>è¯·ä½¿ç”¨ä¸‹æ–¹çš„æµ‹è¯•æŒ‰é’®éªŒè¯å„é¡¹åŠŸèƒ½ã€‚</p>
    `)
    
    // å…¨å±€å‡½æ•°
    window.editor = editor
    
    window.addLongContent = function() {
      const longText = `
        <h2>é•¿å†…å®¹æµ‹è¯•åŒºåŸŸ</h2>
        <p>è¿™æ˜¯ä¸€æ®µå¾ˆé•¿çš„æµ‹è¯•å†…å®¹ï¼Œç”¨äºéªŒè¯æ»šåŠ¨æ¡åŠŸèƒ½æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚</p>
        ${Array(30).fill('<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>').join('')}
        <p>å†…å®¹ç»“æŸã€‚å¦‚æœæ»šåŠ¨æ¡æ­£å¸¸æ˜¾ç¤ºå¹¶ä¸”å¯ä»¥å¹³æ»‘æ»šåŠ¨ï¼Œè¯´æ˜åŠŸèƒ½æ­£å¸¸ã€‚</p>
      `
      editor.setHTML(editor.getHTML() + longText)
      alert('å·²æ·»åŠ é•¿å†…å®¹ï¼Œè¯·æŸ¥çœ‹æ»šåŠ¨æ¡æ•ˆæœï¼')
    }
    
    window.insertImage = function() {
      // ç›´æ¥è°ƒç”¨ç¼–è¾‘å™¨å‘½ä»¤
      editor.commands.execute('insertImage')
    }
    
    window.insertVideo = function() {
      editor.commands.execute('insertVideo')
    }
    
    window.insertAudio = function() {
      editor.commands.execute('insertAudio')
    }
    
    window.testFocus = function() {
      // å…ˆå¤±ç„¦å†èšç„¦
      editor.blur()
      setTimeout(() => {
        editor.focus()
        alert('ç¼–è¾‘å™¨å·²èšç„¦ï¼è¯·æ£€æŸ¥æ˜¯å¦æœ‰é»‘è‰²è¾¹æ¡†ï¼ˆåº”è¯¥æ²¡æœ‰ï¼‰')
      }, 100)
    }
    
    window.clearContent = function() {
      if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰å†…å®¹å—ï¼Ÿ')) {
        editor.clear()
      }
    }
    
    // åˆå§‹åŒ–æ—¶å»¶è¿Ÿèšç„¦ï¼Œé¿å…åˆå§‹é»‘è¾¹
    setTimeout(() => {
      editor.focus()
    }, 500)
  </script>
</body>
</html>