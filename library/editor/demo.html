<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LDesign Editor - 增强的富文本编辑器演示</title>
  <!-- 编辑器核心样式 -->
  <link rel="stylesheet" href="./dist/editor.css">
  <!-- Demo 页面增强样式 -->
  <link rel="stylesheet" href="demo-styles.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>✨ LDesign Editor</h1>
      <p class="subtitle">功能强大、扩展性强的现代富文本编辑器</p>
      <div class="features">
        <div class="feature">
          <span class="feature-icon">📸</span>
          <span>优化的图片插入</span>
        </div>
        <div class="feature">
          <span class="feature-icon">🎬</span>
          <span>视频嵌入支持</span>
        </div>
        <div class="feature">
          <span class="feature-icon">🎵</span>
          <span>音频播放器</span>
        </div>
        <div class="feature">
          <span class="feature-icon">📜</span>
          <span>智能滚动条</span>
        </div>
        <div class="feature">
          <span class="feature-icon">🎨</span>
          <span>无黑边聚焦</span>
        </div>
      </div>
    </header>
    
    <div class="editor-wrapper">
      <div class="editor-title">
        <span>📝</span>
        <span>编辑器演示</span>
      </div>
      <div id="editor"></div>
      
      <div class="tips">
        <h3>💡 增强功能说明：</h3>
        <ul>
          <li><strong>智能滚动条：</strong>内容区域超出最大高度（600px）时，自动显示优雅的滚动条，支持平滑滚动</li>
          <li><strong>无黑边聚焦：</strong>编辑器获取焦点时没有默认的黑色边框，保持清爽的视觉效果</li>
          <li><strong>增强的媒体插入：</strong>
            <ul style="margin-top: 8px;">
              <li>🖼️ <strong>图片：</strong>支持本地上传、URL链接，拖拽上传，右键菜单编辑</li>
              <li>🎥 <strong>视频：</strong>支持本地文件、YouTube、Bilibili等平台嵌入</li>
              <li>🔊 <strong>音频：</strong>支持各种音频格式，美观的播放器样式</li>
            </ul>
          </li>
        </ul>
      </div>
      
      <div class="demo-content">
        <h3>快速测试：</h3>
        <div class="demo-buttons">
          <button class="demo-button" onclick="insertSampleImage()">插入示例图片</button>
          <button class="demo-button" onclick="insertSampleVideo()">插入示例视频</button>
          <button class="demo-button" onclick="insertSampleAudio()">插入示例音频</button>
          <button class="demo-button secondary" onclick="addLongContent()">添加长内容（测试滚动）</button>
          <button class="demo-button secondary" onclick="clearEditor()">清空内容</button>
        </div>
      </div>
    </div>
  </div>

  <!-- 加载编辑器 -->
  <script type="module">
    import { Editor, MediaDialogPlugin, ImagePlugin } from './dist/index.js'
    
    // 创建编辑器实例
    const editor = new Editor({
      element: '#editor',
      placeholder: '开始输入内容，或使用工具栏插入媒体...',
      autofocus: true,
      plugins: [
        MediaDialogPlugin,  // 增强的媒体对话框插件
        ImagePlugin,        // 图片右键菜单插件
        'formatting',       // 格式化插件
        'heading',          // 标题插件
        'list',             // 列表插件
        'link',             // 链接插件
        'table',            // 表格插件
        'color',            // 颜色插件
        'align',            // 对齐插件
        'history'           // 历史记录插件
      ],
      onChange: (html) => {
        // 内容变化回调
      }
    })
    
    // 将编辑器实例暴露到全局，方便测试
    window.editor = editor
    
    // 测试函数
    window.insertSampleImage = function() {
      editor.commands.execute('insertImage')
    }
    
    window.insertSampleVideo = function() {
      editor.commands.execute('insertVideo')
    }
    
    window.insertSampleAudio = function() {
      editor.commands.execute('insertAudio')
    }
    
    window.addLongContent = function() {
      const currentContent = editor.getHTML()
      const longContent = `
        <h2>长内容测试 - 滚动条演示</h2>
        <p>这是一段用于测试滚动条功能的长内容。当内容超过编辑器的最大高度（600px）时，会自动显示优雅的滚动条。</p>
        <h3>特性列表</h3>
        <ul>
          <li>自定义滚动条样式，与编辑器主题协调</li>
          <li>平滑滚动体验</li>
          <li>响应式设计，适配各种屏幕尺寸</li>
          <li>细腻的hover效果</li>
        </ul>
        <blockquote>
          <p>引用文本示例：优秀的用户体验来自于对细节的关注。</p>
        </blockquote>
        <h3>代码示例</h3>
        <pre><code>// JavaScript 示例代码
function createEditor() {
  const editor = new Editor({
    element: '#editor',
    plugins: ['formatting', 'media']
  })
  return editor
}</code></pre>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
        <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
        <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
        <p>Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        <hr>
        <p>继续添加更多内容以触发滚动条...</p>
        ${Array(10).fill('<p>这是额外的段落内容，用于填充空间并展示滚动效果。每个段落都包含足够的文本来占据一定的垂直空间。</p>').join('')}
      `
      editor.setHTML(currentContent + longContent)
    }
    
    window.clearEditor = function() {
      editor.clear()
    }
    
    // 初始内容
    editor.setHTML(`
      <h1>欢迎使用 LDesign Editor！</h1>
      <p>这是一个功能丰富的富文本编辑器，具有以下增强特性：</p>
      <ul>
        <li><strong>优雅的滚动条：</strong>当内容超出最大高度时自动显示</li>
        <li><strong>无黑边聚焦：</strong>获取焦点时保持清爽的视觉效果</li>
        <li><strong>增强的媒体插入：</strong>现代化的对话框，支持拖拽上传</li>
      </ul>
      <p>点击工具栏中的图片、视频、音频按钮来体验增强的媒体插入功能，或使用下方的快速测试按钮。</p>
    `)
  </script>
</body>
</html>