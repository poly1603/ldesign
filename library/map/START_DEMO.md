# 🚀 启动演示项目

## ✅ 当前状态

### 已完成
- ✅ 主库已构建成功 (`dist/` 目录已生成)
- ✅ 示例依赖已安装 (`@deck.gl/aggregation-layers` 已添加)
- ✅ TypeScript 类型检查通过（0错误）
- ✅ 新的演示页面已创建
- ✅ 所有功能代码已实现

### 构建输出
```
✓ dist/index.esm.js    (ES Module)
✓ dist/index.cjs.js    (CommonJS)
✓ dist/index.d.ts      (TypeScript 定义)
✓ dist/*.map           (Source Maps)
```

## 📋 启动步骤（Windows PowerShell）

### 方法1: 分步执行（推荐）

```powershell
# 1. 确保在项目根目录
cd D:\WorkBench\ldesign\library\map

# 2. 构建主库（如果还没构建）
npm run build

# 3. 进入示例目录
cd example

# 4. 安装依赖（如果还没安装）
npm install

# 5. 启动开发服务器
npm run dev
```

### 方法2: 一键启动（PowerShell）

```powershell
# 在项目根目录创建并运行启动脚本
npm run build; if ($?) { cd example; npm install; npm run dev }
```

## 🌐 访问地址

启动成功后，浏览器会自动打开以下地址：

- **主页**: http://localhost:3000/
- **高级功能**: http://localhost:3000/advanced-features.html

如果浏览器没有自动打开，请手动访问上述地址。

## 📸 预期效果

### 主页 (index.html)

您应该看到：
1. ✅ 美观的页面头部（渐变紫色背景）
2. ✅ 功能特性卡片（4个）
3. ✅ 7个功能标签页
4. ✅ 默认显示"配色方案"标签页
5. ✅ 地图正常渲染广州市的11个区
6. ✅ 所有交互按钮可点击

### 功能标签页

1. **配色方案**
   - 下拉选择配色
   - 实时应用效果
   - 切换标签显示/隐藏

2. **区域选择**
   - 单选/多选模式切换
   - 点击区域选中（金色高亮）
   - 显示选中区域信息

3. **标记点**
   - 添加地标（星形标记）
   - 添加随机标记
   - 水波纹动画效果
   - 显示/隐藏控制

4. **热力图**
   - 添加热点（彩色圆点）
   - 模拟密度分布
   - 清除功能

5. **智能聚类**
   - 添加大量数据点
   - 自动聚类显示
   - 显示聚类数量

6. **测量工具**
   - 距离测量演示
   - 面积测量演示
   - 标记测量点

7. **地图导出**
   - 导出功能说明
   - 地图预览

## 🔍 验证清单

### 启动验证

- [ ] PowerShell 窗口显示 "VITE v5.x.x ready"
- [ ] 显示 "Local: http://localhost:3000/"
- [ ] 浏览器自动打开（或手动打开成功）
- [ ] 页面加载无白屏
- [ ] 控制台无红色错误

### 功能验证

#### 配色方案标签页
- [ ] 默认显示单色模式地图
- [ ] 选择"渐变色模式"并点击"应用配色"，地图颜色改变
- [ ] 选择"分类色模式"，每个区颜色不同
- [ ] 点击"切换标签"，区域名称显示/隐藏

#### 区域选择标签页
- [ ] 选择"单选模式"并点击"应用模式"
- [ ] 点击任意区域，显示金色高亮
- [ ] 信息栏显示选中区域名称
- [ ] 再次点击同一区域，取消选中
- [ ] 切换到"多选模式"，能选中多个区域
- [ ] 点击"清除选择"，所有选中清除

#### 标记点标签页
- [ ] 点击"添加地标"，显示5个星形标记（带标签）
- [ ] 点击"添加随机标记"，显示10个随机形状标记
- [ ] 点击"添加水波纹标记"，显示3个水波纹动画
- [ ] 点击"显示/隐藏"，标记消失/出现
- [ ] 点击"清除标记"，所有标记清除

#### 热力图标签页
- [ ] 点击"添加500个热点"，显示彩色圆点
- [ ] 点击"添加1000个热点"，显示更多点
- [ ] 点击"清除热力图"，所有点清除

#### 聚类标签页
- [ ] 点击"添加1000个点"，显示聚类圆圈（带数字）
- [ ] 单个点显示为小橙点
- [ ] 点击"添加5000个点"，聚类更新
- [ ] 点击"清除聚类"，所有点清除

#### 测量工具标签页
- [ ] 点击"测试距离计算"，显示两个星形标记
- [ ] 信息栏显示计算的距离（如 "15.32 km"）
- [ ] 点击"测试面积计算"，显示4个菱形标记
- [ ] 信息栏显示计算的面积

#### 地图导出标签页
- [ ] 地图正常显示（带地标标记）
- [ ] 点击各个导出按钮，显示相应提示

### 交互验证

- [ ] 可以用鼠标拖动地图
- [ ] 鼠标在地图区域上时，可以用滚轮缩放
- [ ] 鼠标在地图区域外时，滚轮不影响地图
- [ ] 标签页切换流畅
- [ ] 按钮点击响应及时

## 🐛 常见问题

### 问题1: 页面空白

**检查**:
```powershell
# 检查 dist 目录是否存在
ls ../dist

# 如果不存在，重新构建
cd ..
npm run build
cd example
npm run dev
```

### 问题2: 地图不显示

**检查**:
1. 打开浏览器控制台 (F12)
2. 查看 Console 标签是否有错误
3. 查看 Network 标签，确认 GeoJSON 加载成功

**解决**:
- 刷新页面 (F5)
- 清除缓存后刷新 (Ctrl+F5)

### 问题3: 功能按钮不工作

**检查**:
- 控制台是否有 JavaScript 错误
- 确认 main.js 加载成功

## 📊 性能检查

在浏览器控制台执行：

```javascript
// 检查地图实例
console.log(window.mapRendererDemo);

// 检查当前标签页
console.log(window.mapRendererDemo.state.currentTab);

// 检查地图实例
console.log(window.mapRendererDemo.mapInstances);
```

## ✅ 成功标志

当一切正常时，控制台应显示：

```
Map Renderer v2.0 - 完整功能演示
MapRenderer loaded: ƒ MapRenderer(container, options)
Data loaded, features: 11
=== 开始初始化所有演示 ===
DOM 加载完成，开始初始化...
初始化配色方案演示...
Container dimensions: xxx x 700
Initializing deck with container: ...
Deck.gl initialized successfully
配色方案演示初始化完成
初始化区域选择演示...
区域选择演示初始化完成
初始化标记点演示...
标记点演示初始化完成
初始化热力图演示...
热力图演示初始化完成
初始化聚类演示...
聚类演示初始化完成
初始化测量工具演示...
测量工具演示初始化完成
初始化地图导出演示...
地图导出演示初始化完成
=== 所有演示初始化完成 ===
main.js 加载完成
```

## 🎉 下一步

启动成功后：

1. **测试基础功能** - 切换各个标签页，尝试所有按钮
2. **测试交互** - 缩放、平移、点击选择
3. **查看性能** - 打开开发者工具的 Performance 标签
4. **尝试修改** - 编辑 `src/main.js`，查看热重载效果

## 📚 相关文档

- [示例 README](./example/README.md)
- [快速启动指南](./QUICK_START.md)
- [示例验证指南](./EXAMPLE_GUIDE.md)
- [功能文档](./docs/ENHANCEMENTS.md)

---

**状态**: ✅ 就绪
**更新时间**: 2025-01-20
**版本**: v2.0.0








