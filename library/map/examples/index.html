<!DOCTYPE                                                                                html>
<html                                                                                lang="zh-CN">
<head>
                                                                                <meta                                                                                charset="UTF-8">
                                                                                <meta                                                                                name="viewport"                                                                                content="width=device-width,                                                                                initial-scale=1.0">
                                                                                <title>GeoJSON                                                                                地图渲染示例</title>
                                                                                <style>
                                                                                                *                                                                                {
                                                                                                                margin:                                                                                0;
                                                                                                                padding:                                                                                0;
                                                                                                                box-sizing:                                                                                border-box;
                                                                                                }

                                                                                                body                                                                                {
                                                                                                                font-family:                                                                                -apple-system,                                                                                BlinkMacSystemFont,                                                                                'Segoe                                                                                UI',                                                                                sans-serif;
                                                                                                                background:                                                                                linear-gradient(135deg,                                                                                #667eea                                                                                0%,                                                                                #764ba2                                                                                100%);
                                                                                                                min-height:                                                                                100vh;
                                                                                                                display:                                                                                flex;
                                                                                                                flex-direction:                                                                                column;
                                                                                                                padding:                                                                                20px;
                                                                                                }

                                                                                                .container                                                                                {
                                                                                                                max-width:                                                                                1400px;
                                                                                                                width:                                                                                100%;
                                                                                                                margin:                                                                                0                                                                                auto;
                                                                                                }

                                                                                                h1                                                                                {
                                                                                                                color:                                                                                white;
                                                                                                                text-align:                                                                                center;
                                                                                                                margin-bottom:                                                                                30px;
                                                                                                                font-size:                                                                                2.5rem;
                                                                                                                text-shadow:                                                                                2px                                                                                2px                                                                                4px                                                                                rgba(0,                                                                                0,                                                                                0,                                                                                0.2);
                                                                                                }

                                                                                                .controls                                                                                {
                                                                                                                background:                                                                                white;
                                                                                                                border-radius:                                                                                12px;
                                                                                                                padding:                                                                                20px;
                                                                                                                margin-bottom:                                                                                20px;
                                                                                                                box-shadow:                                                                                0                                                                                10px                                                                                30px                                                                                rgba(0,                                                                                0,                                                                                0,                                                                                0.2);
                                                                                                }

                                                                                                .button-group                                                                                {
                                                                                                                display:                                                                                flex;
                                                                                                                gap:                                                                                10px;
                                                                                                                flex-wrap:                                                                                wrap;
                                                                                                                margin-bottom:                                                                                15px;
                                                                                                }

                                                                                                button                                                                                {
                                                                                                                padding:                                                                                10px                                                                                20px;
                                                                                                                border:                                                                                none;
                                                                                                                border-radius:                                                                                6px;
                                                                                                                background:                                                                                linear-gradient(135deg,                                                                                #667eea                                                                                0%,                                                                                #764ba2                                                                                100%);
                                                                                                                color:                                                                                white;
                                                                                                                font-size:                                                                                14px;
                                                                                                                font-weight:                                                                                600;
                                                                                                                cursor:                                                                                pointer;
                                                                                                                transition:                                                                                all                                                                                0.3s                                                                                ease;
                                                                                                                box-shadow:                                                                                0                                                                                4px                                                                                15px                                                                                rgba(102,                                                                                126,                                                                                234,                                                                                0.4);
                                                                                                }

                                                                                                button:hover                                                                                {
                                                                                                                transform:                                                                                translateY(-2px);
                                                                                                                box-shadow:                                                                                0                                                                                6px                                                                                20px                                                                                rgba(102,                                                                                126,                                                                                234,                                                                                0.6);
                                                                                                }

                                                                                                button:active                                                                                {
                                                                                                                transform:                                                                                translateY(0);
                                                                                                }

                                                                                                .style-controls                                                                                {
                                                                                                                display:                                                                                grid;
                                                                                                                grid-template-columns:                                                                                repeat(auto-fit,                                                                                minmax(200px,                                                                                1fr));
                                                                                                                gap:                                                                                15px;
                                                                                                                margin-top:                                                                                15px;
                                                                                                                padding-top:                                                                                15px;
                                                                                                                border-top:                                                                                2px                                                                                solid                                                                                #f0f0f0;
                                                                                                }

                                                                                                .style-control                                                                                {
                                                                                                                display:                                                                                flex;
                                                                                                                flex-direction:                                                                                column;
                                                                                                                gap:                                                                                8px;
                                                                                                }

                                                                                                .style-control                                                                                label                                                                                {
                                                                                                                font-size:                                                                                13px;
                                                                                                                font-weight:                                                                                600;
                                                                                                                color:                                                                                #333;
                                                                                                }

                                                                                                .style-control                                                                                input                                                                                {
                                                                                                                padding:                                                                                8px                                                                                12px;
                                                                                                                border:                                                                                2px                                                                                solid                                                                                #e0e0e0;
                                                                                                                border-radius:                                                                                6px;
                                                                                                                font-size:                                                                                13px;
                                                                                                                transition:                                                                                border-color                                                                                0.3s;
                                                                                                }

                                                                                                .style-control                                                                                input:focus                                                                                {
                                                                                                                outline:                                                                                none;
                                                                                                                border-color:                                                                                #667eea;
                                                                                                }

                                                                                                .style-control                                                                                input[type="color"]                                                                                {
                                                                                                                height:                                                                                40px;
                                                                                                                cursor:                                                                                pointer;
                                                                                                }

                                                                                                .map-container                                                                                {
                                                                                                                background:                                                                                white;
                                                                                                                border-radius:                                                                                12px;
                                                                                                                padding:                                                                                20px;
                                                                                                                box-shadow:                                                                                0                                                                                10px                                                                                30px                                                                                rgba(0,                                                                                0,                                                                                0,                                                                                0.2);
                                                                                                                display:                                                                                flex;
                                                                                                                justify-content:                                                                                center;
                                                                                                                align-items:                                                                                center;
                                                                                                }

                                                                                                canvas                                                                                {
                                                                                                                border-radius:                                                                                8px;
                                                                                                                box-shadow:                                                                                0                                                                                4px                                                                                15px                                                                                rgba(0,                                                                                0,                                                                                0,                                                                                0.1);
                                                                                                }

                                                                                                .info                                                                                {
                                                                                                                background:                                                                                rgba(255,                                                                                255,                                                                                255,                                                                                0.95);
                                                                                                                border-radius:                                                                                8px;
                                                                                                                padding:                                                                                15px;
                                                                                                                margin-top:                                                                                20px;
                                                                                                                color:                                                                                #333;
                                                                                                                line-height:                                                                                1.6;
                                                                                                }

                                                                                                .info                                                                                h3                                                                                {
                                                                                                                margin-bottom:                                                                                10px;
                                                                                                                color:                                                                                #667eea;
                                                                                                }

                                                                                                .info                                                                                ul                                                                                {
                                                                                                                margin-left:                                                                                20px;
                                                                                                }

                                                                                                .info                                                                                code                                                                                {
                                                                                                                background:                                                                                #f5f5f5;
                                                                                                                padding:                                                                                2px                                                                                6px;
                                                                                                                border-radius:                                                                                4px;
                                                                                                                font-family:                                                                                'Courier                                                                                New',                                                                                monospace;
                                                                                                                color:                                                                                #667eea;
                                                                                                }
                                                                                </style>
</head>
<body>
                                                                                <div                                                                                class="container">
                                                                                                <h1>🗺️                                                                                GeoJSON                                                                                地图渲染器</h1>

                                                                                                <div                                                                                class="controls">
                                                                                                                <div                                                                                class="button-group">
                                                                                                                                <button                                                                                                onclick="loadChinaMap()">加载中国地图</button>
                                                                                                                                <button                                                                                                onclick="loadMixedGeometry()">加载混合几何</button>
                                                                                                                                <button                                                                                                onclick="resetView()">重置视图</button>
                                                                                                                </div>

                                                                                                                <div                                                                                class="style-controls">
                                                                                                                                <div                                                                                class="style-control">
                                                                                                                                                <label>填充颜色</label>
                                                                                                                                                <input                                                                                                type="color"                                                                                                id="fillColor"                                                                                                value="#e0f2fe">
                                                                                                                                </div>
                                                                                                                                <div                                                                                class="style-control">
                                                                                                                                                <label>边框颜色</label>
                                                                                                                                                <input                                                                                                type="color"                                                                                                id="strokeColor"                                                                                                value="#0284c7">
                                                                                                                                </div>
                                                                                                                                <div                                                                                class="style-control">
                                                                                                                                                <label>边框宽度</label>
                                                                                                                                                <input                                                                                                type="number"                                                                                                id="strokeWidth"                                                                                                value="1"                                                                                                min="0"                                                                                                max="10"                                                                                                step="0.5">
                                                                                                                                </div>
                                                                                                                                <div                                                                                class="style-control">
                                                                                                                                                <label>点半径</label>
                                                                                                                                                <input                                                                                                type="number"                                                                                                id="pointRadius"                                                                                                value="5"                                                                                                min="1"                                                                                                max="20">
                                                                                                                                </div>
                                                                                                                                <div                                                                                class="style-control">
                                                                                                                                                <label>点颜色</label>
                                                                                                                                                <input                                                                                                type="color"                                                                                                id="pointColor"                                                                                                value="#dc2626">
                                                                                                                                </div>
                                                                                                                                <div                                                                                class="style-control">
                                                                                                                                                <label>背景颜色</label>
                                                                                                                                                <input                                                                                                type="color"                                                                                                id="backgroundColor"                                                                                                value="#f0f9ff">
                                                                                                                                </div>
                                                                                                                </div>
                                                                                                </div>

                                                                                                <div                                                                                class="map-container">
                                                                                                                <canvas                                                                                                id="mapCanvas"                                                                                                width="1200"                                                                                                height="700"></canvas>
                                                                                                </div>

                                                                                                <div                                                                                class="info">
                                                                                                                <h3>使用说明</h3>
                                                                                                                <ul>
                                                                                                                                <li><strong>鼠标滚轮</strong>：缩放地图</li>
                                                                                                                                <li><strong>鼠标拖拽</strong>：平移地图</li>
                                                                                                                                <li><strong>鼠标悬停</strong>：高亮显示区域</li>
                                                                                                                                <li><strong>颜色选择器</strong>：实时修改地图样式</li>
                                                                                                                                <li><strong>数据按钮</strong>：切换不同的                                                                                GeoJSON                                                                                数据集</li>
                                                                                                                </ul>

                                                                                                                <h3                                                                                style="margin-top:                                                                                20px;">功能特性</h3>
                                                                                                                <ul>
                                                                                                                                <li>✅                                                                                支持所有                                                                                GeoJSON                                                                                几何类型（Point,                                                                                LineString,                                                                                Polygon,                                                                                Multi*）</li>
                                                                                                                                <li>✅                                                                                支持带孔多边形（Polygon                                                                                with                                                                                holes）</li>
                                                                                                                                <li>✅                                                                                自动计算地理边界并适应画布</li>
                                                                                                                                <li>✅                                                                                平滑的缩放和平移交互</li>
                                                                                                                                <li>✅                                                                                鼠标悬停高亮效果</li>
                                                                                                                                <li>✅                                                                                完全可定制的样式系统</li>
                                                                                                                                <li>✅                                                                                基于                                                                                Canvas                                                                                的高性能渲染</li>
                                                                                                                </ul>

                                                                                                                <h3                                                                                style="margin-top:                                                                                20px;">代码示例</h3>
                                                                                                                <pre                                                                                style="background:                                                                                #f5f5f5;                                                                                padding:                                                                                15px;                                                                                border-radius:                                                                                6px;                                                                                overflow-x:                                                                                auto;"><code>import                                                                                {                                                                                GeoMapRenderer                                                                                }                                                                                from                                                                                './GeoMapRenderer';

const                                                                                renderer                                                                                =                                                                                new                                                                                GeoMapRenderer({
                                                                                container:                                                                                document.getElementById('mapCanvas'),
                                                                                style:                                                                                {
                                                                                                fillColor:                                                                                '#e0f2fe',
                                                                                                strokeColor:                                                                                '#0284c7',
                                                                                                strokeWidth:                                                                                1
                                                                                }
});

renderer.loadGeoJSON(geoJsonData);</code></pre>
                                                                                                </div>
                                                                                </div>

                                                                                <script                                                                                type="module">
                                                                                                import                                                                                {                                                                                GeoMapRenderer                                                                                }                                                                                from                                                                                '../src/GeoMapRenderer.ts';

                                                                                                let                                                                                renderer                                                                                =                                                                                null;
                                                                                                const                                                                                canvas                                                                                =                                                                                document.getElementById('mapCanvas');

                                                                                                //                                                                                初始化渲染器
                                                                                                function                                                                                initRenderer()                                                                                {
                                                                                                                renderer                                                                                =                                                                                new                                                                                GeoMapRenderer({
                                                                                                                                container:                                                                                canvas,
                                                                                                                                style:                                                                                {
                                                                                                                                                fillColor:                                                                                document.getElementById('fillColor').value,
                                                                                                                                                strokeColor:                                                                                document.getElementById('strokeColor').value,
                                                                                                                                                strokeWidth:                                                                                parseFloat(document.getElementById('strokeWidth').value),
                                                                                                                                                pointRadius:                                                                                parseFloat(document.getElementById('pointRadius').value),
                                                                                                                                                pointColor:                                                                                document.getElementById('pointColor').value,
                                                                                                                                },
                                                                                                                                backgroundColor:                                                                                document.getElementById('backgroundColor').value
                                                                                                                });
                                                                                                }

                                                                                                //                                                                                加载中国地图
                                                                                                window.loadChinaMap                                                                                =                                                                                async                                                                                function()                                                                                {
                                                                                                                const                                                                                response                                                                                =                                                                                await                                                                                fetch('./data/china-simple.json');
                                                                                                                const                                                                                geoData                                                                                =                                                                                await                                                                                response.json();
                                                                                                                if                                                                                (!renderer)                                                                                initRenderer();
                                                                                                                renderer.loadGeoJSON(geoData);
                                                                                                };

                                                                                                //                                                                                加载混合几何
                                                                                                window.loadMixedGeometry                                                                                =                                                                                async                                                                                function()                                                                                {
                                                                                                                const                                                                                response                                                                                =                                                                                await                                                                                fetch('./data/mixed-geometry.json');
                                                                                                                const                                                                                geoData                                                                                =                                                                                await                                                                                response.json();
                                                                                                                if                                                                                (!renderer)                                                                                initRenderer();
                                                                                                                renderer.loadGeoJSON(geoData);
                                                                                                };

                                                                                                //                                                                                重置视图
                                                                                                window.resetView                                                                                =                                                                                function()                                                                                {
                                                                                                                if                                                                                (renderer)                                                                                {
                                                                                                                                renderer.reset();
                                                                                                                }
                                                                                                };

                                                                                                //                                                                                监听样式变化
                                                                                                ['fillColor',                                                                                'strokeColor',                                                                                'strokeWidth',                                                                                'pointRadius',                                                                                'pointColor'].forEach(id                                                                                =>                                                                                {
                                                                                                                document.getElementById(id).addEventListener('input',                                                                                function()                                                                                {
                                                                                                                                if                                                                                (renderer)                                                                                {
                                                                                                                                                const                                                                                style                                                                                =                                                                                {
                                                                                                                                                                fillColor:                                                                                document.getElementById('fillColor').value,
                                                                                                                                                                strokeColor:                                                                                document.getElementById('strokeColor').value,
                                                                                                                                                                strokeWidth:                                                                                parseFloat(document.getElementById('strokeWidth').value),
                                                                                                                                                                pointRadius:                                                                                parseFloat(document.getElementById('pointRadius').value),
                                                                                                                                                                pointColor:                                                                                document.getElementById('pointColor').value,
                                                                                                                                                };
                                                                                                                                                renderer.updateStyle(style);
                                                                                                                                }
                                                                                                                });
                                                                                                });

                                                                                                //                                                                                监听背景颜色变化
                                                                                                document.getElementById('backgroundColor').addEventListener('input',                                                                                function()                                                                                {
                                                                                                                if                                                                                (renderer)                                                                                {
                                                                                                                                renderer.destroy();
                                                                                                                                initRenderer();
                                                                                                                                //                                                                                重新加载当前数据
                                                                                                                                loadChinaMap();
                                                                                                                }
                                                                                                });

                                                                                                //                                                                                默认加载中国地图
                                                                                                loadChinaMap();
                                                                                </script>
</body>
</html>
