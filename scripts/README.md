# LDesign Packages æ‰¹é‡æ‰“åŒ…å·¥å…·

è¿™æ˜¯ä¸€ä¸ªæ™ºèƒ½çš„ TypeScript å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºè‡ªåŠ¨åˆ†æå’Œæ„å»º LDesign monorepo ä¸­çš„æ‰€æœ‰åŒ…ã€‚

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

- **è‡ªåŠ¨åŒ…å‘ç°**: æ‰«æ `packages` ç›®å½•ä¸‹çš„æ‰€æœ‰ `@ldesign` åŒ…
- **ä¾èµ–å…³ç³»åˆ†æ**: æ™ºèƒ½åˆ†æåŒ…ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œæ„å»ºå®Œæ•´çš„ä¾èµ–å›¾
- **æ‹“æ‰‘æ’åº**: ä½¿ç”¨æ‹“æ‰‘æ’åºç®—æ³•ç¡®å®šæ­£ç¡®çš„æ„å»ºé¡ºåº
- **å¾ªç¯ä¾èµ–æ£€æµ‹**: è‡ªåŠ¨æ£€æµ‹å¹¶æŠ¥å‘Šå¾ªç¯ä¾èµ–é—®é¢˜
- **å¹¶è¡Œæ„å»º**: æ”¯æŒåŒä¸€å±‚çº§åŒ…çš„å¹¶è¡Œæ„å»ºï¼Œæé«˜æ„å»ºæ•ˆç‡
- **è¯¦ç»†æ—¥å¿—**: æä¾›ä¸°å¯Œçš„æ—¥å¿—è¾“å‡ºå’Œè¿›åº¦æ˜¾ç¤º
- **å¹²è¿è¡Œæ¨¡å¼**: æ”¯æŒåªåˆ†æä¸æ„å»ºçš„é¢„è§ˆæ¨¡å¼
- **é”™è¯¯å¤„ç†**: å®Œå–„çš„é”™è¯¯å¤„ç†å’Œæ¢å¤æœºåˆ¶

## ğŸ“¦ ä¾èµ–å…³ç³»åˆ†æ

å·¥å…·ä¼šè‡ªåŠ¨åˆ†æä»¥ä¸‹ä¾èµ–å…³ç³»ï¼š

1. **dependencies**: ç”Ÿäº§ç¯å¢ƒä¾èµ–çš„å…¶ä»– `@ldesign` åŒ…
2. **devDependencies**: å¼€å‘ç¯å¢ƒä¾èµ–çš„å…¶ä»– `@ldesign` åŒ…ï¼ˆæ’é™¤ `@ldesign/builder`ï¼‰

### å½“å‰é¡¹ç›®çš„ä¾èµ–å±‚çº§

æ ¹æ®åˆ†æï¼Œå½“å‰é¡¹ç›®çš„åŒ…ä¾èµ–å±‚çº§å¦‚ä¸‹ï¼š

```
ç¬¬1å±‚ï¼ˆåŸºç¡€åŒ…ï¼‰:
â”œâ”€â”€ @ldesign/kit
â”œâ”€â”€ @ldesign/launcher  
â”œâ”€â”€ @ldesign/http
â”œâ”€â”€ @ldesign/cache
â”œâ”€â”€ @ldesign/device
â”œâ”€â”€ @ldesign/store
â”œâ”€â”€ @ldesign/size
â”œâ”€â”€ @ldesign/i18n
â”œâ”€â”€ @ldesign/crypto
â””â”€â”€ @ldesign/webcomponent

ç¬¬2å±‚:
â”œâ”€â”€ @ldesign/builder (ä¾èµ– kit)
â””â”€â”€ @ldesign/config-editor

ç¬¬3å±‚:
â”œâ”€â”€ @ldesign/shared (ä¾èµ– builder)
â””â”€â”€ @ldesign/engine (ä¾èµ– builder)

ç¬¬4å±‚:
â”œâ”€â”€ @ldesign/color (ä¾èµ– shared)
â”œâ”€â”€ @ldesign/api (ä¾èµ– http)
â””â”€â”€ @ldesign/router (ä¾èµ– device)

ç¬¬5å±‚:
â””â”€â”€ @ldesign/theme (ä¾èµ– color)

ç¬¬6å±‚:
â””â”€â”€ @ldesign/template (ä¾èµ– cache, device, engine, shared)
```

## ğŸ› ï¸ ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ç”¨æ³•

```bash
# ä¸²è¡Œæ„å»ºæ‰€æœ‰åŒ…
tsx scripts/build-packages.ts

# å¹¶è¡Œæ„å»ºåŒä¸€å±‚çº§çš„åŒ…ï¼ˆæ¨èï¼‰
tsx scripts/build-packages.ts --parallel

# åªåˆ†æä¾èµ–å…³ç³»ï¼Œä¸æ‰§è¡Œæ„å»º
tsx scripts/build-packages.ts --dry-run

# æ˜¾ç¤ºè¯¦ç»†æ—¥å¿—
tsx scripts/build-packages.ts --verbose

# ç»„åˆä½¿ç”¨
tsx scripts/build-packages.ts --parallel --verbose
```

### å‘½ä»¤è¡Œé€‰é¡¹

| é€‰é¡¹ | æè¿° |
|------|------|
| `--dry-run` | åªåˆ†æä¾èµ–å…³ç³»ï¼Œä¸æ‰§è¡Œå®é™…çš„æ‰“åŒ…æ“ä½œ |
| `--verbose` | æ˜¾ç¤ºè¯¦ç»†çš„æ—¥å¿—è¾“å‡º |
| `--parallel` | å¹¶è¡Œæ„å»ºåŒä¸€å±‚çº§çš„åŒ…ï¼ˆæé«˜æ„å»ºé€Ÿåº¦ï¼‰ |
| `--help`, `-h` | æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ |

## ğŸ“Š è¾“å‡ºç¤ºä¾‹

### æ­£å¸¸æ„å»ºè¾“å‡º

```
ğŸ—ï¸  LDesign Packages æ‰¹é‡æ‰“åŒ…å·¥å…·
â„¹ å·¥ä½œç›®å½•: /path/to/ldesign
â„¹ åŒ…ç›®å½•: /path/to/ldesign/packages

ğŸ“¦ æ‰«æ packages ç›®å½•...
âœ“ æ‰«æå®Œæˆï¼Œå…±å‘ç° 20 ä¸ªåŒ…

ğŸ” éªŒè¯ä¾èµ–å…³ç³»...
âœ“ ä¾èµ–å…³ç³»éªŒè¯é€šè¿‡

ğŸ”— æ„å»ºä¾èµ–å…³ç³»å›¾...
âœ“ ä¾èµ–å›¾æ„å»ºå®Œæˆï¼Œå…± 20 ä¸ªèŠ‚ç‚¹

ğŸ“Š æ‰§è¡Œæ‹“æ‰‘æ’åº...
âœ“ æ‹“æ‰‘æ’åºå®Œæˆï¼Œå…± 6 ä¸ªå±‚çº§

ğŸ“‹ æ„å»ºè®¡åˆ’
ç¬¬ 1 å±‚:
  æ„å»º: @ldesign/kit, @ldesign/launcher, @ldesign/http, @ldesign/cache, @ldesign/device, @ldesign/store
ç¬¬ 2 å±‚:
  æ„å»º: @ldesign/builder
ç¬¬ 3 å±‚:
  æ„å»º: @ldesign/shared, @ldesign/engine
...

ğŸš€ å¼€å§‹æ„å»ºåŒ…...

ç¬¬ 1 å±‚æ„å»º (6 ä¸ªåŒ…): @ldesign/kit, @ldesign/launcher, @ldesign/http, @ldesign/cache, @ldesign/device, @ldesign/store
âœ“ @ldesign/kit æ„å»ºæˆåŠŸ (12.3s)
âœ“ @ldesign/launcher æ„å»ºæˆåŠŸ (8.7s)
...

ğŸ‰ æ„å»ºå®Œæˆï¼å…±æ„å»º 18 ä¸ªåŒ…ï¼Œè€—æ—¶ 156.7s
```

### å¹²è¿è¡Œè¾“å‡º

```bash
tsx scripts/build-packages.ts --dry-run --verbose
```

ä¼šæ˜¾ç¤ºå®Œæ•´çš„ä¾èµ–åˆ†æè¿‡ç¨‹ï¼Œä½†ä¸æ‰§è¡Œå®é™…æ„å»ºã€‚

## ğŸ”§ æŠ€æœ¯å®ç°

### æ ¸å¿ƒç»„ä»¶

1. **PackageScanner**: è´Ÿè´£æ‰«æå’Œåˆ†æåŒ…ä¿¡æ¯
2. **DependencyAnalyzer**: è´Ÿè´£æ„å»ºä¾èµ–å›¾å’Œæ‹“æ‰‘æ’åº
3. **PackageBuilder**: è´Ÿè´£æ‰§è¡Œå®é™…çš„æ‰“åŒ…æ“ä½œ
4. **Logger**: æä¾›ä¸°å¯Œçš„æ—¥å¿—è¾“å‡º

### ç®—æ³•ç‰¹æ€§

- **æ‹“æ‰‘æ’åº**: ä½¿ç”¨ Kahn ç®—æ³•è¿›è¡Œæ‹“æ‰‘æ’åº
- **å¾ªç¯ä¾èµ–æ£€æµ‹**: åœ¨æ’åºè¿‡ç¨‹ä¸­è‡ªåŠ¨æ£€æµ‹å¾ªç¯ä¾èµ–
- **å¹¶è¡Œä¼˜åŒ–**: åŒä¸€å±‚çº§çš„åŒ…å¯ä»¥å¹¶è¡Œæ„å»º
- **é”™è¯¯æ¢å¤**: å•ä¸ªåŒ…æ„å»ºå¤±è´¥ä¸ä¼šå½±å“å…¶ä»–åŒ…

## ğŸš¨ æ³¨æ„äº‹é¡¹

1. **æ„å»ºè„šæœ¬è¦æ±‚**: åªæœ‰åŒ…å« `build` è„šæœ¬çš„åŒ…æ‰ä¼šè¢«æ„å»º
2. **ä¾èµ–èŒƒå›´**: åªåˆ†æ `@ldesign` å‘½åç©ºé—´ä¸‹çš„åŒ…ä¾èµ–
3. **æ„å»ºå·¥å…·**: ä½¿ç”¨ `pnpm run build` æ‰§è¡Œæ„å»º
4. **Windows å…¼å®¹**: è‡ªåŠ¨å¤„ç† Windows å¹³å°çš„å‘½ä»¤æ‰§è¡Œ

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **å¾ªç¯ä¾èµ–é”™è¯¯**
   ```
   æ£€æµ‹åˆ°å¾ªç¯ä¾èµ–: @ldesign/a, @ldesign/b
   ```
   è§£å†³æ–¹æ¡ˆ: æ£€æŸ¥å¹¶ä¿®å¤åŒ…ä¹‹é—´çš„å¾ªç¯ä¾èµ–å…³ç³»

2. **åŒ…æ„å»ºå¤±è´¥**
   ```
   @ldesign/xxx æ„å»ºå¤±è´¥: å‘½ä»¤æ‰§è¡Œå¤±è´¥ (é€€å‡ºç : 1)
   ```
   è§£å†³æ–¹æ¡ˆ: ä½¿ç”¨ `--verbose` é€‰é¡¹æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯

3. **æ‰¾ä¸åˆ°åŒ…**
   ```
   @ldesign/xxx ä¾èµ–çš„ @ldesign/yyy ä¸å­˜åœ¨äºå½“å‰åŒ…åˆ—è¡¨ä¸­
   ```
   è§£å†³æ–¹æ¡ˆ: ç¡®ä¿æ‰€æœ‰ä¾èµ–çš„åŒ…éƒ½å­˜åœ¨äº packages ç›®å½•ä¸­

## ğŸ“ å¼€å‘è¯´æ˜

å¦‚éœ€ä¿®æ”¹æˆ–æ‰©å±•æ­¤å·¥å…·ï¼Œè¯·æ³¨æ„ï¼š

1. æ‰€æœ‰ç±»éƒ½æœ‰å®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰
2. ä»£ç ç»“æ„é‡‡ç”¨é¢å‘å¯¹è±¡è®¾è®¡ï¼Œæ˜“äºæ‰©å±•
3. è¯¦ç»†çš„æ³¨é‡Šè¯´æ˜äº†æ¯ä¸ªæ–¹æ³•çš„åŠŸèƒ½
4. é”™è¯¯å¤„ç†è¦†ç›–äº†æ‰€æœ‰å¯èƒ½çš„å¼‚å¸¸æƒ…å†µ

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Request æ¥æ”¹è¿›è¿™ä¸ªå·¥å…·ï¼
