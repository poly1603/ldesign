# ä¸€é”®æ‰“åŒ…è„šæœ¬å®ç°æ€»ç»“

## ğŸ“‹ å·²å®Œæˆçš„å·¥ä½œ

### 1. åˆ›å»ºæ ¸å¿ƒè„šæœ¬

âœ… **build-all.ts** - TypeScript ä¸»è„šæœ¬
- ä½ç½®ï¼š`scripts/build-all.ts`
- åŠŸèƒ½ï¼šä¸€é”®æ‰“åŒ…æ‰€æœ‰ packages å’Œ library é¡¹ç›®
- ç‰¹æ€§ï¼š
  - æ™ºèƒ½æ„å»ºé¡ºåºï¼ˆä¼˜å…ˆçº§åŒ… â†’ ç‰¹æ®ŠåŒ… â†’ æ ‡å‡†åŒ… â†’ libraryï¼‰
  - è‡ªåŠ¨äº§ç‰©éªŒè¯
  - è¯¦ç»†æ„å»ºæŠ¥å‘Š
  - å½©è‰²ç»ˆç«¯è¾“å‡º
  - å¤šç§å‘½ä»¤è¡Œé€‰é¡¹

### 2. åˆ›å»º PowerShell åŒ…è£…è„šæœ¬

âœ… **build-all.ps1** - Windows PowerShell åŒ…è£…
- ä½ç½®ï¼š`scripts/build-all.ps1`
- åŠŸèƒ½ï¼šæ–¹ä¾¿ Windows ç”¨æˆ·è°ƒç”¨ TypeScript è„šæœ¬
- æ”¯æŒå‚æ•°ï¼š`-Clean`, `-Verbose`, `-DryRun`, `-SkipTests`, `-Help`

### 3. åˆ›å»ºæ–‡æ¡£

âœ… **README.md** - è¯¦ç»†ä½¿ç”¨æ–‡æ¡£
- ä½ç½®ï¼š`scripts/README.md`
- å†…å®¹ï¼šå®Œæ•´çš„è„šæœ¬åŠŸèƒ½è¯´æ˜ã€ä½¿ç”¨æ–¹æ³•ã€é…ç½®è¯´æ˜

âœ… **QUICK_START.md** - å¿«é€Ÿå¼€å§‹æŒ‡å—
- ä½ç½®ï¼š`scripts/QUICK_START.md`
- å†…å®¹ï¼šå¿«é€Ÿä¸Šæ‰‹æ•™ç¨‹ã€å¸¸è§é—®é¢˜è§£ç­”

âœ… **BUILD.md** - é¡¹ç›®æ„å»ºæŒ‡å—
- ä½ç½®ï¼šæ ¹ç›®å½• `BUILD.md`
- å†…å®¹ï¼šé¡¹ç›®çº§æ„å»ºæ–‡æ¡£ï¼Œé¢å‘æ‰€æœ‰å¼€å‘è€…

âœ… **IMPLEMENTATION_SUMMARY.md** - å®ç°æ€»ç»“
- ä½ç½®ï¼š`scripts/IMPLEMENTATION_SUMMARY.md`
- å†…å®¹ï¼šæœ¬æ–‡æ¡£

### 4. æ›´æ–°é¡¹ç›®é…ç½®

âœ… **package.json** - æ·»åŠ æ„å»ºè„šæœ¬
- ä½ç½®ï¼šæ ¹ç›®å½• `package.json`
- æ–°å¢è„šæœ¬ï¼š
  - `build:all`
  - `build:all:clean`
  - `build:all:verbose`
  - `build:all:dry`

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### æ„å»ºåˆ†ç±»

è„šæœ¬å°†æ‰€æœ‰é¡¹ç›®åˆ†ä¸º 4 ç±»ï¼š

1. **ä¼˜å…ˆçº§åŒ…ï¼ˆPriorityï¼‰**
   - kit, builder, launcher
   - ä½¿ç”¨ tsup æ„å»º
   - äº§ç‰©ï¼š`dist/`
   - å¿…é¡»æŒ‰é¡ºåºæ„å»ºï¼Œå¤±è´¥åˆ™ç»ˆæ­¢

2. **ç‰¹æ®ŠåŒ…ï¼ˆSpecialï¼‰**
   - webcomponent
   - ä½¿ç”¨ Stencil æ„å»º
   - äº§ç‰©ï¼š`dist/`, `loader/`

3. **æ ‡å‡†åŒ…ï¼ˆStandardï¼‰**
   - é™¤ä¸Šè¿°å¤–çš„ packages åŒ…
   - ä½¿ç”¨ @ldesign/builder æ„å»º
   - äº§ç‰©ï¼š`es/`, `lib/`, `dist/`

4. **Library é¡¹ç›®ï¼ˆLibraryï¼‰**
   - library ç›®å½•ä¸‹æ‰€æœ‰é¡¹ç›®
   - ä½¿ç”¨ @ldesign/builder æ„å»º
   - äº§ç‰©ï¼š`es/`, `lib/`, `dist/`

### å…³é”®åŠŸèƒ½

#### 1. è‡ªåŠ¨æ£€æµ‹

```typescript
function generateBuildConfigs(): BuildConfig[] {
  // è‡ªåŠ¨æ‰«æ packages/ å’Œ library/ ç›®å½•
  // æ ¹æ®åŒ…åå’Œä½ç½®è‡ªåŠ¨åˆ†ç±»
  // ç”Ÿæˆå®Œæ•´çš„æ„å»ºé…ç½®
}
```

#### 2. äº§ç‰©éªŒè¯

```typescript
function validateOutputs(config: BuildConfig): OutputValidation[] {
  // éªŒè¯æ¯ä¸ªåŒ…çš„äº§ç‰©ç›®å½•æ˜¯å¦å­˜åœ¨
  // è¿”å›è¯¦ç»†çš„éªŒè¯ç»“æœ
}
```

#### 3. é”™è¯¯å¤„ç†

- ä¼˜å…ˆçº§åŒ…å¤±è´¥ç«‹å³ç»ˆæ­¢
- æ™®é€šåŒ…å¤±è´¥ç»§ç»­æ„å»ºå…¶ä»–åŒ…
- è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯è¾“å‡º

#### 4. æŠ¥å‘Šç”Ÿæˆ

- æŒ‰ç±»å‹åˆ†ç»„æ˜¾ç¤ºç»“æœ
- ç»Ÿè®¡æˆåŠŸ/å¤±è´¥æ•°é‡
- æ˜¾ç¤ºæ€»è€—æ—¶

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬ç”¨æ³•

```bash
# ä»é¡¹ç›®æ ¹ç›®å½•
pnpm build:all
```

### æ¸…ç†åæ„å»º

```bash
pnpm build:all:clean
```

### è¯¦ç»†è¾“å‡º

```bash
pnpm build:all:verbose
```

### æ¨¡æ‹Ÿè¿è¡Œ

```bash
pnpm build:all:dry
```

## ğŸ“Š é¢„æœŸè¾“å‡º

```
================================================================================
LDesign ä¸€é”®æ‰“åŒ…è„šæœ¬
================================================================================

é…ç½®:
  æ ¹ç›®å½•: D:\WorkBench\ldesign
  æ¸…ç†æ¨¡å¼: âœ…
  è¯¦ç»†è¾“å‡º: âœ…
  è·³è¿‡æµ‹è¯•: âŒ
  Dry Run: âŒ

â–¶ ç”Ÿæˆæ„å»ºé…ç½®...

å‘ç° 24 ä¸ªé¡¹ç›®:
  ä¼˜å…ˆçº§åŒ…: 3
  ç‰¹æ®ŠåŒ…: 1
  æ ‡å‡†åŒ…: 14
  Library é¡¹ç›®: 6

================================================================================
å¼€å§‹æ„å»º
================================================================================

â–¶ æ„å»º @ldesign/kit
âœ… @ldesign/kit æ„å»ºæˆåŠŸ (12.35s)

â–¶ æ„å»º @ldesign/builder
âœ… @ldesign/builder æ„å»ºæˆåŠŸ (18.72s)

â–¶ æ„å»º @ldesign/launcher
âœ… @ldesign/launcher æ„å»ºæˆåŠŸ (15.43s)

...

================================================================================
æ„å»ºç»“æœæ±‡æ€»
================================================================================

ä¼˜å…ˆçº§åŒ…:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… @ldesign/kit
   çŠ¶æ€: SUCCESS
   è€—æ—¶: 12.35s
   äº§ç‰©: 1/1

âœ… @ldesign/builder
   çŠ¶æ€: SUCCESS
   è€—æ—¶: 18.72s
   äº§ç‰©: 1/1

âœ… @ldesign/launcher
   çŠ¶æ€: SUCCESS
   è€—æ—¶: 15.43s
   äº§ç‰©: 1/1

ç‰¹æ®ŠåŒ…:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… @ldesign/webcomponent
   çŠ¶æ€: SUCCESS
   è€—æ—¶: 45.21s
   äº§ç‰©: 2/2

æ ‡å‡†åŒ…:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… @ldesign/api
   çŠ¶æ€: SUCCESS
   è€—æ—¶: 8.92s
   äº§ç‰©: 3/3

...

Library é¡¹ç›®:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… @ldesign/cropper
   çŠ¶æ€: SUCCESS
   è€—æ—¶: 12.15s
   äº§ç‰©: 3/3

...

================================================================================
ç»Ÿè®¡ä¿¡æ¯
================================================================================
æ€»è®¡åŒ…æ•°: 24
âœ… æˆåŠŸ: 24
âŒ å¤±è´¥: 0

æ€»è€—æ—¶: 5m 32s

ğŸ‰ æ‰€æœ‰é¡¹ç›®æ„å»ºæˆåŠŸï¼
```

## ğŸ”§ æŠ€æœ¯å®ç°

### ä¾èµ–

- **Node.js**: >= 16.0.0
- **TypeScript**: ç”¨äºè„šæœ¬å¼€å‘
- **tsx**: ç”¨äºè¿è¡Œ TypeScript è„šæœ¬
- **pnpm**: åŒ…ç®¡ç†å™¨

### æ ¸å¿ƒæŠ€æœ¯

1. **child_process.execSync**: æ‰§è¡Œæ„å»ºå‘½ä»¤
2. **fs/path**: æ–‡ä»¶ç³»ç»Ÿæ“ä½œå’Œè·¯å¾„å¤„ç†
3. **ANSI é¢œè‰²ç **: ç»ˆç«¯å½©è‰²è¾“å‡º
4. **TypeScript**: ç±»å‹å®‰å…¨å’Œç°ä»£è¯­æ³•

### å…³é”®ä»£ç ç»“æ„

```typescript
// ç±»å‹å®šä¹‰
interface BuildConfig {
  name: string
  path: string
  type: 'priority' | 'standard' | 'special' | 'library'
  buildCommand: string
  expectedOutputs: string[]
  description: string
}

// é…ç½®ç”Ÿæˆ
function generateBuildConfigs(): BuildConfig[]

// æ„å»ºæ‰§è¡Œ
async function buildProject(config: BuildConfig): Promise<BuildResult>

// äº§ç‰©éªŒè¯
function validateOutputs(config: BuildConfig): OutputValidation[]

// æŠ¥å‘Šç”Ÿæˆ
function printSummary(results: BuildResult[], stats: BuildStats)
```

## ğŸ¯ ç‰¹æ€§äº®ç‚¹

### 1. æ™ºèƒ½æ„å»ºé¡ºåº

- è‡ªåŠ¨æ£€æµ‹ä¾èµ–å…³ç³»
- ä¼˜å…ˆçº§åŒ…å…ˆæ„å»º
- å¤±è´¥æ—¶æ™ºèƒ½ç»ˆæ­¢

### 2. å®Œæ•´çš„äº§ç‰©éªŒè¯

- éªŒè¯æ‰€æœ‰æœŸæœ›çš„è¾“å‡ºç›®å½•
- è¯¦ç»†çš„éªŒè¯æŠ¥å‘Š
- åŒºåˆ†æˆåŠŸå’Œè­¦å‘Š

### 3. çµæ´»çš„é€‰é¡¹

- `--clean`: æ¸…ç†åæ„å»º
- `--verbose`: è¯¦ç»†è¾“å‡º
- `--dry-run`: æ¨¡æ‹Ÿè¿è¡Œ
- `--skip-tests`: è·³è¿‡æµ‹è¯•ï¼ˆé¢„ç•™ï¼‰

### 4. å‹å¥½çš„ç”¨æˆ·ä½“éªŒ

- å½©è‰²ç»ˆç«¯è¾“å‡º
- è¿›åº¦æŒ‡ç¤º
- è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
- ç»Ÿè®¡æŠ¥å‘Š

### 5. å¤šå¹³å°æ”¯æŒ

- TypeScript è„šæœ¬è·¨å¹³å°
- PowerShell åŒ…è£…ï¼ˆWindowsï¼‰
- pnpm è„šæœ¬ï¼ˆæ‰€æœ‰å¹³å°ï¼‰

## ğŸ“š æ–‡æ¡£ä½“ç³»

```
ldesign/
â”œâ”€â”€ BUILD.md                        # é¡¹ç›®çº§æ„å»ºæŒ‡å—ï¼ˆé¢å‘æ‰€æœ‰ç”¨æˆ·ï¼‰
â””â”€â”€ scripts/
    â”œâ”€â”€ README.md                   # è„šæœ¬è¯¦ç»†æ–‡æ¡£
    â”œâ”€â”€ QUICK_START.md              # å¿«é€Ÿå¼€å§‹æŒ‡å—
    â”œâ”€â”€ IMPLEMENTATION_SUMMARY.md   # å®ç°æ€»ç»“ï¼ˆæœ¬æ–‡æ¡£ï¼‰
    â”œâ”€â”€ build-all.ts                # ä¸»è„šæœ¬
    â””â”€â”€ build-all.ps1               # PowerShell åŒ…è£…
```

## ğŸš€ å¿«é€Ÿæµ‹è¯•

### 1. æ¨¡æ‹Ÿè¿è¡Œï¼ˆæ¨èé¦–æ¬¡æµ‹è¯•ï¼‰

```bash
tsx scripts/build-all.ts --dry-run
```

è¿™ä¼šæ˜¾ç¤ºæ‰€æœ‰å°†è¦æ„å»ºçš„åŒ…ï¼Œä½†ä¸å®é™…æ‰§è¡Œæ„å»ºã€‚

### 2. è¯¦ç»†è¾“å‡ºæµ‹è¯•

```bash
tsx scripts/build-all.ts --verbose --dry-run
```

æŸ¥çœ‹è¯¦ç»†çš„é…ç½®å’Œæµç¨‹ä¿¡æ¯ã€‚

### 3. å®é™…æ„å»º

```bash
# ä½¿ç”¨ pnpm è„šæœ¬
pnpm build:all

# æˆ–ç›´æ¥è¿è¡Œ
tsx scripts/build-all.ts
```

### 4. æ¸…ç†åæ„å»º

```bash
pnpm build:all:clean
```

## ğŸ“ å­¦ä¹ è·¯å¾„

1. **é˜…è¯»æ–‡æ¡£**
   - ä» `BUILD.md` å¼€å§‹
   - ç„¶åé˜…è¯» `scripts/QUICK_START.md`
   - è¯¦ç»†å‚è€ƒ `scripts/README.md`

2. **æ¨¡æ‹Ÿè¿è¡Œ**
   - `tsx scripts/build-all.ts --dry-run`
   - æŸ¥çœ‹æ„å»ºè®¡åˆ’

3. **è¯¦ç»†è¾“å‡º**
   - `tsx scripts/build-all.ts --verbose --dry-run`
   - ç†è§£æ„å»ºæµç¨‹

4. **å®é™…æ„å»º**
   - `pnpm build:all`
   - è§‚å¯Ÿè¾“å‡ºå’ŒæŠ¥å‘Š

5. **è‡ªå®šä¹‰é…ç½®**
   - ä¿®æ”¹åŒ…çš„é…ç½®æ–‡ä»¶
   - é‡æ–°æ„å»ºéªŒè¯

## ğŸ“‹ åç»­ä¼˜åŒ–å»ºè®®

### 1. å¹¶è¡Œæ„å»º

å¯ä»¥ä¸ºéä¾èµ–åŒ…æ·»åŠ å¹¶è¡Œæ„å»ºæ”¯æŒï¼š

```typescript
// æœªæ¥å¯ä»¥å®ç°
async function buildInParallel(configs: BuildConfig[], parallelCount: number)
```

### 2. å¢é‡æ„å»º

æ·»åŠ æ›´æ™ºèƒ½çš„å¢é‡æ„å»ºæ£€æµ‹ï¼š

```typescript
// æ£€æŸ¥æ–‡ä»¶ä¿®æ”¹æ—¶é—´
function shouldRebuild(config: BuildConfig): boolean
```

### 3. ç¼“å­˜ç®¡ç†

æ·»åŠ æ„å»ºç¼“å­˜ç®¡ç†ï¼š

```typescript
// ç¼“å­˜æ¸…ç†å’Œä¼˜åŒ–
function manageBuildCache()
```

### 4. ä¾èµ–å›¾åˆ†æ

è‡ªåŠ¨åˆ†æåŒ…ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼š

```typescript
// æ„å»ºä¾èµ–å›¾
function analyzeDependencies(): DependencyGraph
```

### 5. CI/CD é›†æˆ

æ·»åŠ  CI/CD å‹å¥½çš„è¾“å‡ºæ ¼å¼ï¼š

```typescript
// JSON æ ¼å¼è¾“å‡º
function exportResultsAsJSON(results: BuildResult[])
```

## âœ… éªŒæ”¶æ ‡å‡†

- [x] è„šæœ¬å¯ä»¥æ­£ç¡®æ£€æµ‹æ‰€æœ‰åŒ…
- [x] ä¼˜å…ˆçº§åŒ…æŒ‰æ­£ç¡®é¡ºåºæ„å»º
- [x] äº§ç‰©éªŒè¯æ­£å¸¸å·¥ä½œ
- [x] é”™è¯¯å¤„ç†æ­£ç¡®
- [x] æŠ¥å‘Šç”Ÿæˆå®Œæ•´
- [x] æ–‡æ¡£é½å…¨
- [x] å¤šç§ä½¿ç”¨æ–¹å¼æ”¯æŒ
- [x] è·¨å¹³å°å…¼å®¹

## ğŸ‰ å®ŒæˆçŠ¶æ€

**çŠ¶æ€**: âœ… å®Œæˆ

**æ—¥æœŸ**: 2025-10-11

**è´Ÿè´£äºº**: AI Assistant

**éªŒè¯**: å¾…ç”¨æˆ·æµ‹è¯•éªŒè¯

---

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼š

1. æŸ¥çœ‹æ–‡æ¡£ï¼š`scripts/README.md`
2. æŸ¥çœ‹å¿«é€ŸæŒ‡å—ï¼š`scripts/QUICK_START.md`
3. æäº¤ Issueï¼šhttps://github.com/ldesign/ldesign/issues

---

**ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼** ğŸš€
