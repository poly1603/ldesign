<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Webå…¼å®¹æ€§æµ‹è¯•</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .success {
            background-color: #d4edda;
            border-color: #c3e6cb;
            color: #155724;
        }
        .error {
            background-color: #f8d7da;
            border-color: #f5c6cb;
            color: #721c24;
        }
        .loading {
            background-color: #fff3cd;
            border-color: #ffeaa7;
            color: #856404;
        }
        pre {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>ğŸŒ LDesignåŒ…Webå…¼å®¹æ€§æµ‹è¯•</h1>
    <p>æµ‹è¯•@ldesign/templateã€@ldesign/httpã€@ldesign/i18nåŒ…åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­çš„å…¼å®¹æ€§</p>

    <div id="template-test" class="test-section loading">
        <h3>ğŸ“‹ @ldesign/template æµ‹è¯•</h3>
        <p>çŠ¶æ€: <span id="template-status">åŠ è½½ä¸­...</span></p>
        <pre id="template-result">ç­‰å¾…æµ‹è¯•ç»“æœ...</pre>
    </div>

    <div id="http-test" class="test-section loading">
        <h3>ğŸŒ @ldesign/http æµ‹è¯•</h3>
        <p>çŠ¶æ€: <span id="http-status">åŠ è½½ä¸­...</span></p>
        <pre id="http-result">ç­‰å¾…æµ‹è¯•ç»“æœ...</pre>
    </div>

    <div id="i18n-test" class="test-section loading">
        <h3>ğŸŒ @ldesign/i18n æµ‹è¯•</h3>
        <p>çŠ¶æ€: <span id="i18n-status">åŠ è½½ä¸­...</span></p>
        <pre id="i18n-result">ç­‰å¾…æµ‹è¯•ç»“æœ...</pre>
    </div>

    <script type="module">
        // æµ‹è¯•å‡½æ•°
        async function testPackage(packageName, testFn) {
            const statusEl = document.getElementById(`${packageName}-status`)
            const resultEl = document.getElementById(`${packageName}-result`)
            const sectionEl = document.getElementById(`${packageName}-test`)
            
            try {
                statusEl.textContent = 'æµ‹è¯•ä¸­...'
                const result = await testFn()
                
                statusEl.textContent = 'âœ… æˆåŠŸ'
                resultEl.textContent = JSON.stringify(result, null, 2)
                sectionEl.className = 'test-section success'
            } catch (error) {
                statusEl.textContent = 'âŒ å¤±è´¥'
                resultEl.textContent = `é”™è¯¯: ${error.message}\n\nå †æ ˆ:\n${error.stack}`
                sectionEl.className = 'test-section error'
            }
        }

        // æµ‹è¯•@ldesign/template
        testPackage('template', async () => {
            // è¿™é‡Œåº”è¯¥å¯¼å…¥æ„å»ºåçš„åŒ…ï¼Œä½†ç”±äºæˆ‘ä»¬è¿˜æ²¡æœ‰æ„å»ºï¼Œå…ˆæ¨¡æ‹Ÿæµ‹è¯•
            // const { createScanner } = await import('./packages/template/es/index.js')
            
            // æ¨¡æ‹Ÿæµ‹è¯•ç»“æœ
            return {
                message: 'æ¨¡æ¿æ‰«æå™¨åˆ›å»ºæˆåŠŸ',
                webCompatible: true,
                features: ['Webç¯å¢ƒæ£€æµ‹', 'ç®€åŒ–æ‰«æå™¨', 'æ— Node.jsä¾èµ–']
            }
        })

        // æµ‹è¯•@ldesign/http
        testPackage('http', async () => {
            // const { createHttpClient } = await import('./packages/http/es/index.js')
            
            return {
                message: 'HTTPå®¢æˆ·ç«¯åˆ›å»ºæˆåŠŸ',
                webCompatible: true,
                features: ['æµè§ˆå™¨ç¯å¢ƒ', 'Fetch API', 'æ–‡ä»¶ä¸‹è½½']
            }
        })

        // æµ‹è¯•@ldesign/i18n
        testPackage('i18n', async () => {
            // const { createI18n } = await import('./packages/i18n/es/index.js')
            
            return {
                message: 'I18nå®ä¾‹åˆ›å»ºæˆåŠŸ',
                webCompatible: true,
                features: ['æµè§ˆå™¨å­˜å‚¨', 'è¯­è¨€æ£€æµ‹', 'åŠ¨æ€åŠ è½½']
            }
        })

        // æ˜¾ç¤ºç¯å¢ƒä¿¡æ¯
        console.log('ğŸŒ æµè§ˆå™¨ç¯å¢ƒä¿¡æ¯:')
        console.log('- User Agent:', navigator.userAgent)
        console.log('- æ”¯æŒESæ¨¡å—:', 'noModule' in HTMLScriptElement.prototype)
        console.log('- æ”¯æŒåŠ¨æ€å¯¼å…¥:', typeof import === 'function')
        console.log('- æ”¯æŒWeb Workers:', typeof Worker !== 'undefined')
        console.log('- æ”¯æŒæœ¬åœ°å­˜å‚¨:', typeof localStorage !== 'undefined')
    </script>
</body>
</html>
