var index12=function(){this.mainmenuli='<li flag="1"  ptitlename="@ptitle" resid="@mid" expendtreenode="@expendtree"><a  ptitlename="@ptitle" isfirstmenu="1" class="ZHBG_row ZHBG_w @updown" style="cursor: pointer;@height" controltype="1" restype="@restype" imageback="1" resid="@mid"><span restype="@restype"  ptitlename="@ptitle" class="ZHBG_col ZHBG_v_m ZHBG_iconfont" controltype="1" resid="@mid"><img src="@src" alt="" restype="@restype"  ptitlename="@ptitle" width=16 heigth=16 controltype="1" resid="@mid"></span><span class="ZHBG_col ZHBG_v_m" style="white-space:nowrap;" restype="@restype" ptitlename="@ptitle" controltype="1" resid="@mid">@showname@countinfo</span><i controltype="1"></i></a></li>';
this.secondMenu='<li flag="2"  ptitlename="@ptitle" resid="@mid"><a  restype="@restype" ptitlename="@ptitle" style="cursor: pointer;" class="@class" imageback="1" style="white-space:nowrap;"  resid="@mid" controltype="1"><i controltype="1"></i>@showname@countinfo</a></li>';this.thirdmenu='<a  restype="@restype" ptitlename="@ptitle" controltype="1" resid="@mid" style="cursor: pointer;white-space:nowrap;">@showname@countinfo</a>';
this.menuItemStr='<li style="width:auto;"  title="@title" utf="@utf" value="@value" class="lg2menu_item"><a style="cursor: pointer;white-space:nowrap;" title="@title" utf="@utf" value="@value">@text</a></li>';this.selectmenu='<div class="LC_areaselect LC_menu_select index_select" ct="select2" btfns="getchild=getChildData"  md="aa" mainid="@mid" mid="@mid" code="" sct="" ml="1" style="border: none;height: 50px;*padding-bottom:10px" ismenu="1" ><div class="LC_select_search" ctf="select2_value" style="display: none"><input class="LC_select_text" type="text" readonly="readonly" ctf="select2_value" value="" canbak></div><div class="LC_select_search" valueid="@mid" ctf="select2_value" style="background: none;border:0px;padding:12px;border-radius:0px;" linkid="valuelink"><a class="LC_nav_link" href="javascript:" mid="@mid" ctf="select2_value" style="height:auto;" linkid="navlink"><img src="@src" mid="@mid" style="border:none;width:16px;height:16px;margin-bottom:5px;" linkid="imglink"/><span class="LC_square" ctf="select2_square"></span></a></div><div class="LC_select_main LC_menu_select_main LC_select_index" ctf="select2_box"><div class="LC_select_hd" ctf="select2_title" style="display: none"><a class="LC_select_home" href="javascript:" ctf="select2_home"></a><div class="LC_select_haved" ctf="select2_title_values"><a href="javascript:" class="LC_select_none" ctf="select2_title_value"></a></div><a class="LC_select_help" href="javascript:" ctf="select2_help"></a><input type="button" class="LC_button_conner LC_button_blue LC_button_mini" ctf="select2_btn" lcv="2" value="确定"/></div><div class="LC_select_bd" canbak><div class="LC_select_wrap" ctf="select2_body" canbak><dl class="LC_select_row" ctf="select2_row" canbak><dt class="LC_select_tag" canbak><span ctf="select2_letter" canbak></span><a class="LC_select_hide LC_menu_tag_link" href="javascript:" ctfe="select2_item" ctf="select2_parent" canbak></a></dt><dd class="LC_select_item" ctf="select2_row_items" canbak><a href="javascript:" ctf="select2_item" ctfe="select2_item"  value="" canbak></a></dd></dl></div></div></div><img style="display:none" src="data:image:png,base64" onerror="LEAP.select2.initControl(0);" style="float:left;" ></div>';
window.index12=this;this.menudata=new hashtable();this.posmenu=null;this.topmenupd=null;this.lastModule=null;this.pageLoad=function(arg){this.checkExpired();if(!window.userinfomodule){window.userinfomodule="LEAPModule_infomation";}if(window.newusermodule===false){window.userinfomodule=null;}this.processUserDefine();
var name=LEAP.userInfo.postrName;if(name==null){name=LEAP.userInfo.firstName;}if(name==null){name=LEAP.userInfo.fullName;}if(name==null){name=LEAP.userInfo.userflag;}var menu=document.createElement("UL");menu.className="lg2menu_ul";menu.setAttribute("utf","menu_index_poslit");menu.style.position="fixed";
document.body.appendChild(menu);this.posmenu=menu;this.initTree();this.addEvent(this.getUT("main_left_split"),"click",this.hideOroenMenu);if(!window.userinfomodule){this.ut("topdiv").show();this.ut("topdiv_new").hide();var welcome=this.getUT("welcome");welcome.innerHTML='<span class="ZHBG_iconfont" ut="welcome"><img src='+leapconfig.server+'LEAP/Resource/SystemTemplate/images_index23/user.png ut="welcome"></span>'+name+"，欢迎您";
this.initPosChange();this.addEvent(LEAP.getElements("[ut=changpwd]",this.getUT("maindiv")),"click",this.onchangepwd,null,false);this.addEvent(LEAP.getElements("[ut=logout]",this.getUT("maindiv")),"click",this.logout,null,false);this.addEvent(this.ut("dragconfig").element,"click",this.dragconfig);if(LEAP.getElements("[ut=erweima]",this.getUT("maindiv"))){this.addEvent(LEAP.getElements("[ut=erweima]",this.getUT("maindiv")),"click",this.showEwm,null,false);
}if(LEAP.getElements("[ut=paderweima]",this.getUT("maindiv"))){this.addEvent(LEAP.getElements("[ut=paderweima]",this.getUT("maindiv")),"click",this.showPADEwm,null,false);}}else{this.ut("topdiv").hide();this.addEvent(LEAP.getElement("[ut=bar_qrdown]"),"click",this.showEwm,null,false);this.addEvent(LEAP.getElement("[ut=bar_padqrdown]"),"click",this.showPADEwm,null,false);
this.addEvent(LEAP.getElement("[ut=bar_desk]"),"click",this.DeskWork,null,false);this.addEvent(LEAP.getElement("[ut=pop_desk_num]"),"click",this.DeskWork,null,false);this.addEvent(LEAP.getElements("[ut=bar_addressbook]"),"click",this.AddressBook,null,false);this.addEvent(LEAP.getElements("[ut=bar_loginout]"),"click",this.logout,null,false);
this.addEvent(LEAP.getElements("[ut=bar_maxscreen]"),"click",this.maxScreen,null,false);LEAP.asyn(this.showFacePhoto,this,50);this.TopBarMenu=LEAP.getElement("[ut=top_bar_menu]");LEAP.asyn(this.InitTrusteeUserAndPos,this,100);this.addEvent(this.TopBarMenu,"click",this.onTopBarMenu,null,true);this.addEvent(LEAP.getElements("[ut=bar_dragconfig]"),"click",this.dragconfig,null,false);
}if(location&&location.href){this.initParameter(location.href);}LEAP.asyn(this.initMsgValidate,this,100);LEAP.setIndexModule(this);document.onkeydown=this.keyDown;LEAP.asynfoo(this._checkSid,this,3*60*1000);LEAP.asyn(this.initIndex,this,300);LEAP.changeZoom(LEAP.getUserZoomSize());LEAP.asyn(this.checkExtService,this,100);
this.registOutTime();};this.ListenState=function(){if(window.history&&window.history.pushState){window.onpopstate=function(arg){window.history.replaceState("_currState",null,"Login.html");location.replace("Login.html");};var indexStr="Index.html";if(this.lidStr!=null){indexStr=indexStr+"?lid="+this.lidStr;
}window.history.pushState("_currState",null,indexStr);}};this.keyDown=function(e){if(window.event){var a=window.event.keyCode;if((a==65)&&(event.ctrlKey)){var src=window.event.target;if(!src){src=window.event.srcElement;}if(src){if(src.tagName!="INPUT"&&src.tagName!="TEXTAREA"){window.event.returnValue=false;
if(window.event.preventDefault){window.event.preventDefault();}}}}}};this.showFacePhoto=function(arg){var logoc=LEAP.getElement("[ut=bar_face]");var photo=LEAP.userInfo.photo;if(photo!=null){if(photo.indexOf("{")==0){try{var obj=JSON.parse(photo);if(obj!=null){photo="LEAP/Download/"+obj.nameedPath+"/"+obj.name;
}}finally{}}}if(photo){if(photo.indexOf("Download")!=-1){logoc.src=leapconfig.server+photo;}else{logoc.src=leapconfig.server+"imageview/64_64/"+photo;}}var fullname=!LEAP.userInfo.fullName?LEAP.userInfo.userflag:LEAP.userInfo.fullName;this.ut("bar_userflag").setValue(fullname);};this.onTopBarMenu=function(arg){var ele=arg.e.srcElement;
var bctf=ele.getAttribute("bctf");if(bctf){if(bctf=="bar_personlchange"){this.onchangepwd();}else{if(bctf=="bar_user_inner"){var userid=ele.getAttribute("userid");if(userid){var b=this.request("studiov2_changeAccout",{userid:userid});if(b){__s__3.href=__s__3.href;return;}else{LEAP.messagebox.alert("用户切换失败！",1,"用户切换");
}}}else{if(bctf=="bar_pos_inner"){var posid=ele.getAttribute("posid");if(posid==LEAP.userInfo.positionid){LEAP.messagebox.alert("选择项已经是当前岗位,不需要切换",1,"岗位切换");}else{this.request("studio_changeIndexPosition",{par:posid});__s__3.href=__s__3.href;LEAP.stopEvent(arg.e);return;}}else{if(bctf=="bar_indexset"){this.indexSet();
}}}}}};this.TopBarTrusteeUserStr='<li><a href="javascript:;" class="ZHBG_top_bar_item"><span class="ZHBG_new_iconfont icon-change"></span><span>账号切换</span><span class="ZHBG_new_iconfont more icon-more"></span></a><div class="ZHBG_top_bar_sub"><div class="inner" bctf="bar_user_inner">';this.TrusteeUserStr='<a href="javascript:;" userid=@userid bctf="bar_user_inner"><span class="ZHBG_new_iconfont icon-user" userid=@userid bctf="bar_user_inner"></span>@value</a>';
this.TopBarPosStr='<li><a href="javascript:;" class="ZHBG_top_bar_item"><span class="ZHBG_new_iconfont icon-change"></span><span>岗位切换</span><span class="ZHBG_new_iconfont more icon-more"></span></a><div class="ZHBG_top_bar_sub"><div class="inner" bctf="bar_pos_inner">';this.Posstr='<a href="javascript:;" class="@class" posid=@posid bctf="bar_pos_inner"><span class="ZHBG_new_iconfont icon-user" bctf="bar_pos_inner" posid=@posid></span>@value</a>';
this.InitTrusteeUserAndPos=function(arg){var beans=this.request("studiov2_searchDepositAccount",{userid:LEAP.userInfo.userid});var str=this.TopBarTrusteeUserStr;if(beans!=null){for(var i=0;i<beans.length;i++){if(beans[i].trusteeship=="1"){str+=this.TrusteeUserStr.replaceall("@value",!beans[i].fullname?beans[i].userflag:beans[i].fullname).replaceall("@userid",beans[i].id);
}}if(str!=this.TopBarTrusteeUserStr){str+="</div></div></li>";this.TopBarMenu.innerHTML+=str;}}if(LEAP.userInfo!=null&&LEAP.userInfo.positions!=null&&LEAP.userInfo.positions.length>1){var str=this.TopBarPosStr;var mianposid=LEAP.userInfo.positionid;for(var i=0;i<LEAP.userInfo.positions.length;i++){var selectedclassname="";
if(LEAP.userInfo.positions[i].id==mianposid){selectedclassname="ZHBG_top_bar_active";}str+=this.Posstr.replaceall("@class",selectedclassname).replaceall("@value",LEAP.userInfo.positions[i].cnname).replaceall("@posid",LEAP.userInfo.positions[i].id);}str+="</div></div></li>";this.TopBarMenu.innerHTML+=str;
}var box=LEAP.getAbsolutePos(this.getUT("bar_userflag"));if(box){var dx=document.body.clientWidth;var bx=box.x;if(dx-bx<200){var subEls=LEAP.getElements("[class=ZHBG_top_bar_sub]",this.TopBarMenu);if(subEls){for(var i=0;i<subEls.length;i++){subEls[i].style.left="-156px";}}}}};this.DeskWork=function(arg){};
this.BookForm=null;this.AddressBook=function(){this.lastid=null;var marg=null;var loadObject={path:"leapaasaddressbookpart",moduleLoadArg:null};if(this.bookorgid!=null||this.bookdesname){marg={};if(this.bookorgid!=null){marg.orgid=this.bookorgid;}if(this.bookdesname){marg.desusername=true;}loadObject.moduleLoadArg={par:JSON.stringify(marg)};
}var module=LEAP.modulebar.addBarItem(this.getUT("lg_modulebar"),"通讯录","leapaas_addressbook",loadObject,true,false,this,window._mreload!="0");if(module&&module.hideExport){module.hideExport();}};this.initPosChange=function(){if(LEAP.getElements("[ut=welcome]",this.getUT("maindiv"))){this.addEvent(LEAP.getElements("[ut=welcome]",this.getUT("maindiv")),"click",this.onchangegw,null,false);
}var menu=document.createElement("UL");menu.className="lg2menu_ul";menu.setAttribute("utf","menu_index_poslit");menu.style.position="fixed";document.body.appendChild(menu);this.posmenu=menu;var strs=new StringBuffer();if(LEAP.userInfo!=null&&LEAP.userInfo.positions!=null&&LEAP.userInfo.positions.length>1){var l=LEAP.userInfo.positions.length;
for(var i=0;i<l;i++){var c=LEAP.userInfo.positions[i];var text=c.cnname;var value=c.id;var title=c.orgcnname;var utf="index_changepositon";strs.append(this.menuItemStr.replaceall("@utf",utf).replaceall("@value",value).replaceall("@text","<img style='border:none' src='"+leapconfig.server+"LEAP/Resource/SystemTemplate/images_index23/position.png' class='bg_pos'>&nbsp"+text).replaceall("@title",title));
}}strs.append(this.menuItemStr.replaceall("@utf","index_deposit_set").replaceall("@value","setDeposit").replaceall("@text",'账户切换<img style="border:none;float:right" src="'+leapconfig.server+'LEAP/Resource/SystemTemplate/images_index23/change.png" class="bg_pos" utf=index_change_user title="账户切换">').replaceall("@title","托管设置"));
menu.innerHTML=strs.toString();this.addEvent(LEAP.getElements("[utf]",menu),"click",this.menuClick);menu.style.display="none";menu=null;};this.logout=function(){if(this.passForm!=null){this.passForm.module.hideForm();}if(this.posmenu!=null){this.posmenu.style.display="none";}if(!this.isauto){if(!window.confirm("确定退出系统?")){return;
}}if(window._userDefine){window._userDefine(LEAP.userInfo);}if(window._quitevent&&window._quitevent=="1"||this.isclose==true){window.close();}else{if(window._hasnav){window.close();}else{var istip=this.request("IsLogoutTip");if(istip===true){if(!window.confirm("检测到您当前浏览器登录多个业务系统，退出后可能影响其他业务系统功能，请确保信息都已保存。是否继续退出操作？")){return;
}}this.request("logout");}if(window._lgopage){window.location.href=window._lgopage;}else{___logout();}}};this.onchangegw=function(arg){var welcomeEl=this.getUT("welcome");var box2=LEAP.getAbsolutePos(welcomeEl);if(this.posmenu&&box2){if(this.posmenu.style.display=="none"){this.posmenu.style.top=(box2.y+20)+"px";
this.posmenu.style.left=box2.x+"px";this.posmenu.style.border="0px";this.posmenu.style.display="block";}else{this.posmenu.style.display="none";var El=LEAP.getElement("[ut=user_menu]");if(El){El.style.display="none";}}}if(this.passForm!=null){this.passForm.module.hideForm();}};this.clickCurrentMenu=function(){if(this.topmenupd!=null){this._loadModule(this.topmenupd,true);
}};this.passForm=null;this.onchangepwd=function(arg){if(window.userinfomodule){this.lastid=null;var loadObject={path:window.userinfomodule,moduleLoadArg:null};var module=LEAP.modulebar.addBarItem(this.getUT("lg_modulebar"),"个人设置","leapaas_curruserinfo",loadObject,true,false,this,window._mreload!="0");
if(module){module.regEvent("onIndexPhoto",this.showFacePhoto,this);}}else{this.changePWD(false);}};this.changePWD=function(bool){if(this.passForm==null){var def={name:"changePass",title:"修改用户信息",width:"330",height:"380",formtype:"3"};this.passForm=this.loadForm3(def);if(this.passForm.module.dyncUserDefine){this.passForm.module.dyncUserDefine(this.passForm.form);
}if(this.passForm.module.forceChange){this.passForm.module.forceChange(bool);}}else{this.passForm.module.clearPageData();LEAP.form.show(this.passForm.form);}this.passForm.module.setData(LEAP.userInfo);if(this.posmenu!=null){this.posmenu.style.display="none";}};this.changeTips=function(msg){alert(msg);
if(!LEAP._cpf){this.changePWD(true);}};this.codelist=new hashtable();this.topmenu=[];this.parentmap=new hashtable();this.childmap=new hashtable();this.searchAlLUIResource=function(){var beans=this.searchResource(null,1);if(beans==null){this.checknum++;if(this.checknum<3){LEAP.asyn(this.searchAlLUIResource,this,2000);
}else{this.jumpToLogin();}}else{this.checknum=0;this.processData(beans);}};this.processData=function(beans){if(beans==null){return;}var datas=new Array();for(var i=0;i<beans.length;i++){var data=beans[i];datas.add(data);if(!this.menudata.contains(data.id)){this.menudata.add(data.id,data);}var realCode=LEAP.getRealSyscode(data.syscode);
if(realCode){this.codelist.add(realCode,data);beans[i].realcode=realCode;}}for(var i=0;i<datas.length;i++){var data=datas[i];var realCode=data.realcode;if(!realCode){continue;}var parentCode=LEAP.getParentSyscode(realCode);if(!parentCode){continue;}var pdata=this.codelist.getvalue(parentCode);if(!pdata){this.topmenu.add(data);
}else{this.parentmap.add(data.id,pdata);var pid=pdata.id;var childdata=this.childmap.getvalue(pid);if(childdata==null){childdata=[data];}else{childdata.add(data);}this.childmap.add(pid,childdata);}}};this.searchResource=function(parentid,level){var serviceName="app_getUIResource2";if(window._joinAuth!=null&&window._joinAuth=="1"){serviceName="app_getAllUIResource";
}var result=this.request2({name:serviceName,par:{id:parentid,includeParentResource:false,getDeep:level,fields:["datasourcename","clustername","indexpagemodulestyle","indexpagemodulemargin","expendtreenode","haschild","resourcetype","icon","officon"]},router:"leap"});if(result==null){return null;}var beans=LEAP.convertResult(result);
return beans;};this.hs=new Array();this.getChildResource=function(resid){var datas=this.childmap.getvalue(resid);if(datas!=null){return datas;}if(this.hs.contains(resid)){return null;}datas=this.searchResource(resid,3);this.processData(datas);if(datas!=null){for(var i=0;i<datas.length;i++){var dataid=datas[i].id;
if(this.hs.contains(resid)){continue;}this.hs.add(dataid);}}return this.childmap.getvalue(resid);};this.initTree=function(){var cookstr=window.document.cookie;var isHide=(cookstr&&cookstr.indexOf("_menuhide=1")>-1);this.searchAlLUIResource();var mdatas=this.topmenu;if(mdatas==null||mdatas.length==0){return;
}var LC_menu=this.getUT("LC_menu");var title=null;if(document.title!=null){title=document.title.split("-")[0];}if(mdatas==null){return;}var buffer=new StringBuffer();var arr=null;for(var i=0;i<mdatas.length;i++){var cur=mdatas[i];if(cur.resourcetype==18){continue;}var icon=cur.icon;if(!icon){icon=cur.officon;
}if(!icon){icon="LEAP/Resource/SystemTemplate/image15/defaultnav.png";}var showname=cur.showname;var customize=cur.customize;var countinfo="";if(customize&&customize.indexof("servicename")>-1){if(arr==null){arr=[];}var r=eval("("+customize+")");if(r){var servicename=r.servicename;if(servicename){arr.add({servicename:servicename,data:cur});
}}}var restype=cur.resourcetype;if(restype!="2"){restype="3";}var str=this.mainmenuli.replaceall("@mid",cur.id).replaceall("@showname",showname).replace("@src",leapconfig.server+icon).replaceall("@restype",restype).replaceall("@expendtree",cur.expendtreenode).replaceall("@ptitle",showname).replaceall("@countinfo",countinfo);
if(this.definemenu&&this.definemenu.lih){str=str.replace("@height","height:"+this.definemenu.lih);}else{str=str.replace("@height","");}if(cur.haschild=="1"&&cur.resourcetype!="22"){str=str.replace("@updown","ZHBG_updown");}else{str=str.replace("@updown","");}buffer.append(str);}LC_menu.innerHTML=buffer.toString();
if(arr!=null){for(var i=0;i<arr.length;i++){var servicename=arr[i].servicename;var cur=arr[i].data;LEAP.asynrequest(servicename,{data:[cur]},null,this.syncCount,this,cur.id);}}var outEle=this.getUT("menu");this.removeEvent(LEAP.getElements("[controltype=1]",this.getUT("LC_menu")),"click",this.initChildMenu,null,false);
this.addEvent(LEAP.getElements("[controltype=1]",this.getUT("LC_menu")),"click",this.initChildMenu,null,false);LEAP.scrollbar.showScrollBar(outEle,LC_menu,5,"index","#8EB1DE");this.changeScroll();var ele=LEAP.getElement("a[resid="+mdatas[0].id+"]",this.getUT("LC_menu"));var ptname=mdatas[0].showname;
LEAP.addCSS(ele,"ZHBG_alive");this.addEvent(this.getUT("LC_menu"),"mouseover",this.menuover,null,true);this.iscodestyle=true;if(this.iscodestyle){this.initCodeTree();}var fixBeans=this.getFixModule();if(fixBeans!=null){this.loadFixModule(fixBeans);}else{if(mdatas[0].resourcetype==22){this.topmenupd=mdatas[0];
this._loadModule(mdatas[0],!this.hasSelect);var ele=LEAP.getElement("[resid="+mdatas[0].id+"]",this.getUT("LC_menu"));if(ele){LEAP.addCSS(ele,"ZHBG_active");}if(isHide){var splitEl=LEAP.getElement("[ut=btn_menu_split]",this.getUT("top_menu"));this.splitBtnClick({caller:splitEl});}LEAP.asyn(this.CheckAllPoint,this,50);
return;}var cmdatas=this.getChildResource(mdatas[0].id);if(cmdatas!=null&&cmdatas.length>0){ptname=ptname+">"+cmdatas[0].showname;if(cmdatas[0].resourcetype==22){this.topmenupd=cmdatas[0];this.expendNodes();this._loadModule(cmdatas[0],!this.hasSelect,false);var ele=LEAP.getElement("[resid="+cmdatas[0].id+"]",this.getUT("LC_menu"));
if(ele){LEAP.addCSS(ele,"ZHBG_active");}}else{var cmdatas2=this.getChildResource(cmdatas[0].id);if(cmdatas2!=null&&cmdatas2.length>0){if(!title){document.title=cmdatas2[0].showname;}this.topmenupd=cmdatas2[0];this.expendNodes();this._loadModule(cmdatas2[0],!this.hasSelect);var ele=LEAP.getElement("[resid="+cmdatas2[0].id+"]",this.getUT("LC_menu"));
if(ele){LEAP.addCSS(ele,"ZHBG_active");}}else{if(!title){document.title=cmdatas[0].showname;}this.topmenupd=cmdatas[0];this.expendNodes();this._loadModule(cmdatas[0],!this.hasSelect,false);var ele=LEAP.getElement("[resid="+cmdatas[0].id+"]",this.getUT("LC_menu"));if(ele){LEAP.addCSS(ele,"ZHBG_active");
}}}}else{if(!title){document.title=mdatas[0].showname;}this.topmenupd=mdatas[0];this.expendNodes();this._loadModule(mdatas[0],!this.hasSelect);var ele=LEAP.getElement("[resid="+mdatas[0].id+"]",this.getUT("LC_menu"));if(ele){LEAP.addCSS(ele,"ZHBG_active");}}}if(isHide){var splitEl=LEAP.getElement("[ut=btn_menu_split]",this.getUT("top_menu"));
this.splitBtnClick({caller:splitEl});}LEAP.asyn(this.CheckAllPoint,this,50);};this.syncCount=function(count,resid){if(!resid){return;}this.changeCountInfo(resid,count);};this.topmenudata=new hashtable();this.initCodeTree=function(){this.addEvent(this.getUT("LC_menu"),"click",this.menuCodeClick,null,true);
this.createCloseBtn();var LC_menu=this.getUT("LC_menu");var mdatas=this.topmenu;for(var i=0;i<mdatas.length;i++){var cur=mdatas[i];if(cur&&cur.resourcetype==18){continue;}var icon=cur.icon;if(!icon){icon=cur.officon;}if(!icon){icon="LEAP/Resource/SystemTemplate/image15/defaultnav.png";}var liEl=document.createElement("li");
liEl.setAttribute("mid",cur.id);liEl.setAttribute("title",cur.showname);liEl.setAttribute("flag",9);liEl.style.display="none";liEl.className="LC_code_leftmenu";var str=this.selectmenu.replaceall("@mid",cur.id).replace("@src",leapconfig.server+icon);var str1=LEAP.bindControl(str,this);liEl.innerHTML=str1;
LC_menu.appendChild(liEl);if(!this.topmenudata.contains(cur.id)){this.topmenudata.add(cur.id,cur);}}};this._showScrollBar=function(bool){var barEl=LEAP.getElement("[ctf=scrollBarindex]",this.getUT("menu"));if(!barEl){return;}var cname=barEl.className;var hasHide=(cname&&cname.indexOf("LC_scrollBarDis")<0);
if(hasHide){return;}else{if(bool==true){barEl.style.display="inline-block";}else{if(LEAP.isIE){barEl.style.removeAttribute("display");}else{delete barEl.style.display;}}}};this.createCloseBtn=function(){var top_menu=this.getUT("top_menu");var LC_menu=this.getUT("menu");var btn=document.createElement("div");
btn.className="ZHBG_split_btn_open";btn.setAttribute("ut","btn_menu_split");if(this.expandbtn&&this.expandbtn=="top"){btn.style.left="10px";btn.style.top="25px";btn.style.height="20px";var url=leapconfig.server+"LEAP/Resource/SystemTemplate/index12/img/expand.png";btn.style.background="url("+url+") no-repeat";
}else{var h=LC_menu.offsetHeight;var w=LC_menu.offsetWidth;btn.style.left=w+"px";btn.style.top=(h/2)+"px";}top_menu.appendChild(btn);this.addEvent(btn,"click",this.splitBtnClick,null,true);};this.hasclose=false;this.lwidth=null;this.splitBtnClick=function(arg){if(!this.lwidth){this.lwidth=this.getUT("leftmenu").style.width;
}this.hasclose=!this.hasclose;var hideFlag=9;var showFlag=1;if(this.hasclose){var hideFlag=1;var showFlag=9;}var elements=LEAP.getElements("LI[flag="+hideFlag+"]",this.getUT("LC_menu"));if(elements!=null){for(var i=0;i<elements.length;i++){elements[i].style.display="none";}}elements=LEAP.getElements("LI[flag="+showFlag+"]",this.getUT("LC_menu"));
if(elements!=null){for(var i=0;i<elements.length;i++){elements[i].style.display="";}}var src=arg.caller;if(!this.hasclose){this.getUT("leftmenu").style.width=this.lwidth;if(!this.expandbtn||this.expandbtn!="top"){src.className="ZHBG_split_btn_open";src.style.left=this.lwidth;}}else{this.getUT("leftmenu").style.width="40px";
if(!this.expandbtn||this.expandbtn!="top"){src.className="ZHBG_split_btn_close";src.style.left="40px";}}var D=new Date();D.setTime(D.getTime()+30*24*3600000);window.document["cookie"]="_menuhide="+hideFlag+";expires="+D.toGMTString();LEAP.scrollbar.showScrollBar(this.getUT("menu"),this.getUT("LC_menu"),5,"index","#8EB1DE");
this.changeScroll();};this.changeScroll=function(){var barEl=LEAP.getElement("[ctf=scrollBarindex]",this.getUT("menu"));if(!barEl){return;}var scrolEl=LEAP.getElement("[ctf=scrollBar_btnindex]",barEl);if(!scrolEl){return;}if(!this.hasclose){barEl.style.width="10px";barEl.style.right="0px";scrolEl.style.width="5px";
scrolEl.style.left="5px";}else{barEl.style.width="4px";barEl.style.right="3px";scrolEl.style.width="4px";scrolEl.style.left="3px";}};this.codedata=new hashtable();this.getChildData=function(arg){var pdata=arg.pdata;if(pdata==null){if(this.codedata.contains(this.menuid)){var mdata=this.codedata.getvalue(this.menuid);
return mdata;}var serviceName="app_getUIResource2";if(window._joinAuth!=null&&window._joinAuth=="1"){serviceName="app_getAllUIResource";}var result=this.request2({name:serviceName,par:{id:this.menuid,includeParentResource:false,getDeep:3,fields:["datasourcename","clustername","indexpagemodulestyle","indexpagemodulemargin","expendtreenode","nodestring","resourcetype","icon","officon"]}});
if(result!=null){var data=LEAP.convertResult(result);this.buildResult(this.menuid,data);return this.codedata.getvalue(this.menuid);}else{if(!this.codedata.contains(this.menuid)){this.codedata.add(this.menuid,null);}return null;}}else{var cadedata=pdata.codedata;if(cadedata&&cadedata.customize){try{var c=eval("("+cadedata.customize+")");
if(c.showchild==false){return;}}finally{}}if(this.codedata.contains(pdata.codeid)){var mdata=this.codedata.getvalue(pdata.codeid);return mdata;}var result=this.request2({name:"studiov6_getUIResource1",par:{id:pdata.codeid},router:"leap"});if(result!=null){var data=LEAP.convertResult(result);if(!this.menusource.contains(pdata.codeid)){this.menusource.add(pdata.codeid,data);
}var dsData=[];for(var i=0;i<data.length;i++){json={};json.codeid=data[i].id;json.codeparentid=pdata.codeid;json.codevalue=data[i].showname;json.codedata=data[i];dsData.add(json);}if(!this.codedata.contains(pdata.codeid)){this.codedata.add(pdata.codeid,dsData);}return dsData;}else{if(!this.codedata.contains(pdata.codeid)){this.codedata.add(pdata.codeid,null);
}return null;}}};this.buildResult=function(resoureid,datas){if(datas==null){return;}var pdata=this.topmenudata.getvalue(resoureid);if(!pdata){return;}var pcode=pdata.nodestring;var dhash=new hashtable();for(var i=0;i<datas.length;i++){var d=datas[i];var nodeStr=d.nodestring;dhash.add(d.nodestring,d);
this.codedata.add(d.id,null);}for(var i=0;i<datas.length;i++){var d=datas[i];var nodeStr=d.nodestring;var data={};data.codeid=d.id;data.codevalue=d.showname;data.codedata=d;var parentCode=nodeStr.substring(0,nodeStr.length-3);var parentid=null;if(parentCode==pcode){data.codeparentid=resoureid;parentid=resoureid;
}else{pdata=dhash.getvalue(parentCode);if(pdata!=null){data.codeparentid=pdata.id;parentid=pdata.id;}}if(parentid!=null){var cdatas=null;if(this.codedata.contains(parentid)){cdatas=this.codedata.getvalue(parentid);this.codedata.remove(parentid);}if(cdatas==null){cdatas=[];}cdatas.add(data);this.codedata.add(parentid,cdatas);
}}};this.mouseout=function(){};this.menuover=function(arg){var src=arg.e.srcElement;if(src){}if(!this.hasclose){return;}var src=arg.e.srcElement;var type=arg.e.type;var tag=src.tagName;var mid=src.getAttribute("mid");if(mid!=null){this.menuid=mid;var cur=this.topmenudata.getvalue(mid);if(cur){if(cur.resourcetype==3&&(cur.haschild==null||cur.haschild==0)){return;
}if(cur.resourcetype==22){return;}var customize=cur.customize;if(customize){var c=eval("("+customize+")");if(c.showchild==false){return;}}}var select2_value=LEAP.getElement("div[valueid="+mid+"]",LEAP.getElement("div[mainid="+mid+"]"));var bl=LEAP.select2.initValue(LEAP.getElement("div[mainid="+mid+"]"),"select2_value",select2_value,null,"getchild=getChildData",null,null);
var LC_menu=this.getUT("LC_menu");var children=LC_menu.children;if(children!=null){var len=children.length;for(var i=0;i<len;i++){var limid=children[i].getAttribute("mid");if(limid==mid){if(bl){LEAP.addCSS(LEAP.getElement("[ctf=select2_square]",children[i]),"LC_squaremouseover");}}else{LEAP.removeCSS(LEAP.getElement("[ctf=select2_square]",children[i]),"LC_squaremouseover",false);
}}}if(this.oldmenuid!=null&&this.oldmenuid!=mid){LEAP.select2.hide(LEAP.getElement("div[mainid="+this.oldmenuid+"]"));this.removeEvent(LEAP.getElement("div[mainid="+this.oldmenuid+"]"),"valueChange",this.boxvalueChange);}var codeFrom=null;if(bl==true){this.addEvent(LEAP.getElement("div[mainid="+mid+"]"),"valueChange",this.boxvalueChange);
this.addEvent(LEAP.getElement("div[mainid="+mid+"]"),"hidebox",this.hidebox);var con=LEAP.getElement(".LC_select_main",LEAP.getElement("div[mainid="+mid+"]"));this.addEvent(con,"mouseleave",this.conmouseleave,null,true);LEAP.select2.show(LEAP.getElement("div[mainid="+mid+"]"));LEAP.select2.orientate(LEAP.getElement("div[mainid="+mid+"]"),con,select2_value,"-55","38");
var rowEls=LEAP.getElements("dl[ctf=select2_row]",con);if(rowEls&&rowEls.length>0){for(var m=0;m<rowEls.length;m++){var ddEl=LEAP.getElement("dd[ctf=select2_row_items]",rowEls[m]);if(ddEl&&ddEl.innerHTML){continue;}var dtEl=LEAP.getElement(".LC_menu_tag_link",rowEls[m]);if(dtEl){dtEl.style["border-right"]="0px";
}}}codeFrom=con;}this.caculateForm(codeFrom);this.oldmenuid=mid;}};this.caculateForm=function(codeFrom){if(!codeFrom){return;}var T=codeFrom.offsetTop;var H=codeFrom.offsetHeight;var screenH=this.getUT("LC_menu").scrollHeight;if(T+H>screenH){T=screenH-H;}codeFrom.style.top=T+"px";};this.menuCodeClick=function(arg){var src=arg.e.srcElement;
var type=arg.e.type;var tag=src.tagName;var mid=src.getAttribute("mid");if(mid!=null){this.menuid=mid;this.oldmenuid=mid;var pdata=this.topmenudata.getvalue(mid);if(pdata){if(pdata.resourcetype==3||pdata.resourcetype==22){this._loadModule(pdata,true);this.buileTitle(pdata);}}}};this.buileTitle=function(data){};
this.boxvalueChange=function(arg){var element=arg.arg2.element;var pdata=arg.arg2.data.codedata;LEAP.select2.hide(element);this.removeEvent(element,"valueChange",this.boxvalueChange);var mid=element.getAttribute("mid");var LC_menu=this.getUT("LC_menu");var children=LC_menu.children;if(children!=null){var len=children.length;
for(var i=0;i<len;i++){var limid=children[i].getAttribute("mid");if(limid==mid){var select2_value=LEAP.getElement("a[ctf=select2_value]",children[i]);if(select2_value){select2_value.style.background="#1A6AC5";}}else{var select2_value=LEAP.getElement("a[ctf=select2_value]",children[i]);if(select2_value){select2_value.style.background="";
}}}}if(pdata!=null){this._loadModule(pdata,true);this.buileTitle(pdata);}};this.hidebox=function(arg){this.removeEvent(element,"hidebox",this.hidebox);var element=arg.arg2.element;LEAP.removeCSS(LEAP.getElement("[ctf=select2_square]",element),"LC_squaremouseover",false);};this.conmouseleave=function(arg){var con=arg.caller;
if(this.oldmenuid!=null){var element=LEAP.getElement("div[mainid="+this.oldmenuid+"]");if(element){var select2_square=LEAP.getElement("[ctf=select2_square]",element);LEAP.removeCSS(select2_square,"LC_squaremouseover",false);LEAP.select2.hide(element);this.removeEvent(element,"valueChange",this.boxvalueChange);
}}this.removeEvent(con,"mouseleave",this.conmouseleave);};this.ResMapPid=new hashtable();this.pointSourceArr=new hashtable();this.CallBackCache=new hashtable();this.RedPointCallBack=function(reid,resultflag){if(!resultflag||resultflag==false){return;}var data=this.pointSourceArr.getvalue(reid);var ele=LEAP.getElement("A[resid="+data.id+"]",this.getUT("LC_menu"));
if(ele){this.ShowSourcePoint(ele,data);}else{var parentidandtop=this.ResMapPid.getvalue(data.id);if(parentidandtop){var parentid=parentidandtop.split("&")[0];var topipd=parentidandtop.split("&")[1];this.ShowParentPoint(parentid);this.ShowParentPoint(topipd);}}this.CallBackCache.add(reid,reid);};this.ShowCachePoint=function(arg){for(var key in this.CallBackCache.keys){var reid=this.CallBackCache.getvalue(key);
var data=this.pointSourceArr.getvalue(reid);if(!data){this.ShowParentPoint(reid);}else{var ele=LEAP.getElement("A[resid="+data.id+"]",this.getUT("LC_menu"));if(ele){this.ShowSourcePoint(ele,data);}}}};this.ShowSourcePoint=function(ele,data){var controltype=LEAP.getElement("i[controltype=1]",ele);if(!controltype){controltype=ele;
}if(LEAP.getElement("[point=1]",controltype)){return;}var span=document.createElement("SPAN");span.setAttribute("class","ZHBG_countinfo_num1");span.setAttribute("ctype","showcountinfo");span.setAttribute("point","1");span.style.right="20px";controltype.appendChild(span);var parentidandtop=this.ResMapPid.getvalue(data.id);
if(parentidandtop){var parentid=parentidandtop.split("&")[0];var topipd=parentidandtop.split("&")[1];this.ShowParentPoint(parentid);this.ShowParentPoint(topipd);}span=controltype=null;};this.ShowParentPoint=function(parentid){var parentele=LEAP.getElement("A[resid="+parentid+"]",this.getUT("LC_menu"));
if(!parentele){return;}if(parentele.tagName=="A"&&!LEAP.getElement("[point=1]",parentele.firstChild)){var tmp=parentele.firstChild.lastChild;var span=null;if(!tmp){span=document.createElement("SPAN");span.setAttribute("class","ZHBG_countinfo_num1");span.setAttribute("ctype","showcountinfo");span.setAttribute("point","1");
span.style.right="30px";parentele.appendChild(span);}else{parentele.firstChild.removeChild(tmp);span=document.createElement("SPAN");span.setAttribute("class","ZHBG_countinfo_num1");span.setAttribute("ctype","showcountinfo");span.setAttribute("point","1");span.style.right="30px";parentele.firstChild.appendChild(span);
parentele.firstChild.appendChild(tmp);}tmp=span=parentele=null;}};this.CheckAllPoint=function(arg){if(this.topmenu==null||this.topmenu.length==0){return;}for(var i=0;i<this.topmenu.length;i++){var data=this.topmenu[i];var resid=data.id;if(data.customize&&data.customize.indexof("point")>-1){this.pointSourceArr.add(resid,data);
}var datas=this.childmap.getvalue(resid);if(datas!=null&&datas.length>0){var nodelevel=null;var nodestring=null;var pid=null;for(var y=0;y<datas.length;y++){if(!nodelevel){nodelevel=datas[y].nodelevel;}if(!nodestring){nodestring=datas[y].nodestring;}if(!pid){pid=datas[y].id;}var truepid=null;if(datas[y].nodelevel>nodelevel){if(datas[y].nodestring.indexOf(nodestring)>-1){truepid=pid;
}}else{nodelevel=datas[y].nodelevel;nodestring=datas[y].nodestring;pid=datas[y].id;truepid=resid;}if(datas[y].customize&&datas[y].customize.indexOf("point")>-1){this.pointSourceArr.add(datas[y].id,datas[y]);this.ResMapPid.add(datas[y].id,truepid+"&"+resid);}}nodelevel=nodestring=pid=null;}}LEAP.asyn(this.RedPointCustomizeRun,this,50);
};this.RedPointCustomizeRun=function(arg){LEAP.RedPointDomain=this;for(var key in this.pointSourceArr.keys){var data=this.pointSourceArr.getvalue(key);if(data.customize&&data.customize.indexof("point")>-1){try{var args=data.customize.split(";");var customize=null;for(var i=0;i<args.length;i++){if(args[i].indexof("point")>-1){customize=args[i];
break;}}if(!customize){return;}var arr=customize.split(":");LEAP.asyn(eval("("+arr[1]+"('"+arr[2]+"','"+data.id+"'))"),this,50);}catch(e){LEAP.messagebox.alert("资源自定义参数错误",3,"参数错误");}}}};this.dispose=function(arg){this.ResMapPid.clear();this.pointSourceArr.clear();this.CallBackCache.clear();this.ResMapPid=this.CallBackCache=this.pointSourceArr=null;
if(LEAP.ValidRestMsgFlag){window.clearInterval(LEAP.ValidRestMsgFlag);}};this.loaddata=null;this.lastid=null;this.initChildMenu=function(arg){if(!arg||!arg.caller){return;}var e=arg.caller;if(e.tagName=="SPAN"||e.tagName=="I"){e=e.parentElement;}if(e.tagName=="IMG"){e=e.parentElement.parentElement;}var resid=e.getAttribute("resid");
var liEle=e;while(liEle.tagName!="LI"){liEle=liEle.parentElement;}var flag=liEle.getAttribute("flag");var data=this.menudata.getvalue(resid);if(!data){return;}var customize=data.customize;if(customize&&customize.indexOf("{")>-1&&customize.indexOf("}")>0){try{var c=eval("("+customize+")");if(c&&c.showchild==false){this.loadResModule(data);
return;}}catch(e){}}var resourcetype=data.resourcetype;if(!resid){return;}var ptitlename=this.buileTitle(data);var eles=LEAP.getElements("[isfirstmenu=1]",this.getUT("LC_menu"));if(eles&&eles.length>0){for(var i=0;i<eles.length;i++){if(e.tagName=="A"){LEAP.removeCSS(eles[i],"ZHBG_alive",false);LEAP.removeCSS(eles[i],"ZHBG_active1",false);
}}}if(resourcetype=="2"){var eles=LEAP.getElements("[restype=3]",this.getUT("LC_menu"));if(eles&&eles.length>0){for(var i=0;i<eles.length;i++){LEAP.removeCSS(eles[i],"ZHBG_coloractive",false);LEAP.removeCSS(eles[i],"ZHBG_active1",false);}}var seeles=LEAP.getElements("[restype=2]",this.getUT("LC_menu"));
if(seeles&&seeles.length>0){for(var i=0;i<seeles.length;i++){LEAP.removeCSS(seeles[i],"ZHBG_coloractive",false);LEAP.removeCSS(seeles[i],"ZHBG_active1",false);}}}var topli=liEle;while(topli.getAttribute("flag")!="1"){if(!topli){break;}topli=topli.parentElement;}if(topli){var p=LEAP.getElement("[isfirstmenu=1]",topli);
LEAP.addCSS(p,"ZHBG_alive");}this.loaddata=null;var resName=_leap_systemname+"_indexpart";if(resourcetype!="2"){var eles=LEAP.getElements("[restype=3]",this.getUT("LC_menu"));if(eles&&eles.length>0){for(var i=0;i<eles.length;i++){LEAP.removeCSS(eles[i],"ZHBG_coloractive",false);LEAP.removeCSS(eles[i],"ZHBG_active1",false);
}}var seeles=LEAP.getElements("[restype=2]",this.getUT("LC_menu"));if(seeles&&seeles.length>0){var secondmenu=this.getSecondMenuBYthirdMenu(e);for(var i=0;i<seeles.length;i++){LEAP.removeCSS(seeles[i],"ZHBG_coloractive",false);}LEAP.removeCSS(secondmenu,"ZHBG_coloractive",false);LEAP.addCSS(secondmenu,"ZHBG_coloractive");
}if(flag!="1"){LEAP.addCSS(e,"ZHBG_coloractive");LEAP.addCSS(e,"ZHBG_active1");}this.loaddata=data;}var level=0;var parentdata=data;while(parentdata&&parentdata.id){parentdata=this.getChildResource(parentdata.id);level++;}if(level<4){if(LEAP.userInfo.orgid=="super"){var pele=e.parentElement;this._initChildMenu(resid,flag,pele,ptitlename);
}else{if(resourcetype!="22"){var pele=e.parentElement;this._initChildMenu(resid,flag,pele,ptitlename);}}}if(this.loaddata!=null){var currid=this.loaddata.id;LEAP.asyn(this.loadCurrModule,this,30);}LEAP.asyn(this.ShowCachePoint,this,50);};this.loadCurrModule=function(){this.loadResModule(this.loaddata);
};this.getSecondMenuBYthirdMenu=function(ele){if(!ele||!ele.parentElement||!ele.parentElement.parentElement){return null;}var liele=ele.parentElement.parentElement;if(liele.tagName.toLowerCase()!="li"){return null;}var secondMenu=liele.children;if(secondMenu&&secondMenu.length>0){return secondMenu[0];
}return null;};this._initChildMenu=function(resid,flag,pele,ptitlename){var hasappend=pele.getAttribute("hasappend");var datas=this.childmap.getvalue(resid);if(!datas||datas.length==0){if(hasappend=="1"){pele.setAttribute("hasappend","0");var imageback=LEAP.getElement("[imageback = 1]",pele);LEAP.removeCSS(imageback,"ZHBG_active");
}else{pele.setAttribute("hasappend","1");var imageback=LEAP.getElement("[imageback = 1]",pele);LEAP.addCSS(imageback,"ZHBG_active");}return;}var childEle=document.createElement("UL");var buffer=new StringBuffer();if(flag=="1"){childEle=document.createElement("UL");childEle.className="ZHBG_sub_menu";}else{if(flag=="2"){childEle=document.createElement("DIV");
childEle.className="ZHBG_sub_menu ZHBG_sub_menu2";}}if(this.definemenu&&this.definemenu.mbgcolor){childEle.style.background=this.definemenu.mbgcolor;}if(hasappend=="1"){var childNodes=pele.children;if(childNodes&&childNodes.length>1){for(var i=1;i<childNodes.length;i++){pele.removeChild(childNodes[i]);
}var outEle=this.getUT("menu");var LCEle=this.getUT("LC_menu");LEAP.scrollbar.showScrollBar(outEle,LCEle,5,"index","#8EB1DE");}pele.setAttribute("hasappend","0");var imageback=LEAP.getElement("[imageback = 1]",pele);LEAP.removeCSS(imageback,"ZHBG_active");return;}var dd=this.menudata.getvalue(resid);
if(!dd){return;}var resName=_leap_systemname+"_indexpart";var arr=null;for(var i=0;i<datas.length;i++){var pname=null;var cur=datas[i];if(cur&&cur.resourcetype==22&&dd&&dd.name!=resName){continue;}var icon=cur.icon;if(!icon){icon=cur.officon;}if(!icon){icon="LEAP/Resource/SystemTemplate/image15/defaultnav.png";
}var customize=cur.customize;var countinfo="";if(customize&&customize.indexof("servicename")>-1){if(arr==null){arr=[];}var r=eval("("+customize+")");if(r){var servicename=r.servicename;if(servicename){arr.add({servicename:servicename,data:cur});}}}var str=null;var showname=cur.showname;var rtype=cur.resourcetype;
if(rtype!="2"){rtype="3";}if(flag=="1"){pname=ptitlename+">"+showname;str=this.secondMenu.replaceall("@mid",cur.id).replaceall("@showname",showname).replace("@src",leapconfig.server+icon).replaceall("@restype",rtype).replaceall("@ptitle",pname).replaceall("@countinfo",countinfo);if(cur.resourcetype=="2"||this.checkHasChildren(cur.id)){str=str.replace("@class","ZHBG_addminus");
}else{str=str.replace("@class","");}}else{if(flag=="2"){pname=ptitlename+">"+showname;str=this.thirdmenu.replaceall("@mid",cur.id).replaceall("@showname",showname).replace("@src",leapconfig.server+icon).replaceall("@restype",rtype).replaceall("@ptitle",pname).replaceall("@countinfo",countinfo);}}buffer.append(str);
}childEle.innerHTML=buffer.toString();if(arr!=null){for(var i=0;i<arr.length;i++){var servicename=arr[i].servicename;var cur=arr[i].data;LEAP.asynrequest(servicename,{data:[cur]},null,this.syncCount,this,cur.id);}}var outEle=this.getUT("menu");var LCEle=this.getUT("LC_menu");pele.appendChild(childEle);
pele.setAttribute("hasappend",1);var imageback=LEAP.getElement("[imageback = 1]",pele);LEAP.addCSS(imageback,"ZHBG_active");if(flag!="1"){LEAP.addCSS(imageback,"ZHBG_coloractive");}this.removeEvent(LEAP.getElements("[controltype=1]",pele),"click",this.initChildMenu,null,false);this.addEvent(LEAP.getElements("[controltype=1]",pele),"click",this.initChildMenu,null,false);
LEAP.scrollbar.showScrollBar(outEle,LCEle,5,"index","#8EB1DE");};this.expendNodes=function(){var firsteles=LEAP.getElements("[flag=1]",this.getUT("LC_menu"));if(firsteles&&firsteles.length>0){for(var i=0;i<firsteles.length;i++){if(firsteles[i].getAttribute("expendtreenode")=="1"){this.initSecondExtendNode(firsteles[i]);
}}}};this.initSecondExtendNode=function(fele){var resid=fele.getAttribute("resid");var flag=fele.getAttribute("flag");this._initChildMenu(resid,flag,fele);var secondeles=LEAP.getElements("[flag=2]",fele);if(secondeles&&secondeles.length>0){for(var i=0;i<secondeles.length;i++){this.initThirdExtendNode(secondeles[i]);
}}};this.initThirdExtendNode=function(fele){var resid=fele.getAttribute("resid");var flag=fele.getAttribute("flag");this._initChildMenu(resid,flag,fele);};this.checkHasChildren=function(resid){var datas=this.childmap.getvalue(resid);return datas!=null;};this.definemenu=null;this.iscodestyle=true;this.expandbtn="top";
this.bookorgid=null;this.bookdesname=null;this.processUserDefine=function(){var defStr=window._userdefine;if(!defStr){return;}if(defStr.indexOf("{")<0||defStr.indexOf("}")<0){return null;}var defJson=null;try{defJson=eval("(["+defStr+"])");if(!defJson||defJson.length==0){return null;}for(var i=0;i<defJson.length;
i++){var ismenu=defJson[i].ismenu;var quitevent=defJson[i].quitevent;if(quitevent&&quitevent==1){window._quitevent="1";}if(!ismenu){continue;}this.definemenu=defJson[i];break;}if(this.definemenu){var width=this.definemenu.mwidth;if(width){this.getUT("leftmenu").style.width=width;}var mbgcolor=this.definemenu.mbgcolor;
if(mbgcolor){this.getUT("leftmenu").style.background=mbgcolor;}var isextend=this.definemenu.isextend;if(isextend){this.getUT("main_center_spliter").style.display="";}var showindexbtn=this.definemenu.showindexbtn;if(showindexbtn==false&&this.getUT("bar_dragconfig")){this.getUT("bar_dragconfig").style.display="none";
}var showaddressbtn=this.definemenu.showaddressbook;if(showaddressbtn==false&&this.getUT("bar_addressbook")){this.getUT("bar_addressbook").style.display="none";}this.iscodestyle=this.definemenu.iscodestyle;var exbtn=this.definemenu.expandbtn;if(exbtn){this.expandbtn=exbtn;}this.expandbtn="top";if(this.definemenu.addbookorgid){this.bookorgid=this.definemenu.addbookorgid;
}if(this.definemenu.addressbookdesname){this.bookdesname=this.definemenu.addressbookdesname;}}}catch(e){}if(window._ewcode){try{var def=JSON.parse(window._ewcode);var showphone=false;var showpad=false;if(def&&def.phone){showphone=true;}if(def&&def.pad){showpad=true;}if(!window.userinfomodule){if(!showphone){this.ut("erweima").hide();
}if(!showpad){this.ut("paderweima").hide();}}else{if(!showphone){this.ut("btn_pad").hide();}if(!showpad){this.ut("btn_erweima").hide();}}}catch(e){return;}}};this.loadResModule=function(data){if(data==null){return;}if(document.title!=null){}else{document.title=data.showname;}this.topmenupd=data;this._loadModule(data,true);
};this.initMsgValidate=function(){this.request("studio_initMsgValid");};this.ShowMsgValidate=function(pdata){if(!pdata.customize){return true;}var args=pdata.customize.split(";");var msgvalid=null;for(var i=0;i<args.length;i++){if(args[i].indexof("msgvalid")>-1){msgvalid=args[i];break;}}if(!msgvalid){return true;
}msgvalid=msgvalid.split(":")[1];if(msgvalid==false){return true;}this.MsgValidSourceTemp=pdata;var ret=this.request("studio_MsgValid",{reid:pdata.id});if(ret=="0"){if(!document.getElementById("msgvalidate")){LEAP.showMask();if(!document.getElementById("msgvalidate")){var div=document.createElement("DIV");
div.setAttribute("id","msgvalidate");div.style.position="fixed";div.style.display="inline-block";div.style.borderRadius="5px";div.style.width="400px";div.style.height="100px";div.style.backgroundColor="#ededed";div.style.zIndex="99999999";div.style.left=(document.body.clientWidth/2)-200+"px";div.style.top=(document.body.clientHeight/2)-100+"px";
div.innerHTML='<input class="LC_input_conner" bt="text" mdtype="text" reid="'+pdata.id+'" id="valid_code" ht="input" style="margin:20px 0 0 20px;display:inline-block;width:150px" ><input class="LC_button_conner LC_button_grew" id="valid_restmsg" reid="'+pdata.id+'" canrest="0" type="button" timernums="60" value="重新获取60S" style="width:110px;cursor:default"><input class="LC_button_conner" id="valid_confirm" type="button" reid="'+pdata.id+'" ctf="msgvalid" value="确定" style="width:90px;color: rgb(255, 255, 255); background-color: rgb(255, 103, 102);">';
document.body.appendChild(div);div=null;LEAP.ValidRestMsgFlag=LEAP.asynfoo(this.MsgRestfoo,this,1000);LEAP.addEvent(document.getElementById("valid_confirm"),"click",this.MsgCodeValid,null,this,true);LEAP.addEvent(document.getElementById("valid_restmsg"),"click",this.MsgCodeRest,null,this,true);}else{}}return false;
}else{if(ret=="1"){return true;}else{return false;}}return true;};this.MsgCodeRest=function(arg){var canrest=arg.caller.getAttribute("canrest","1");if(!canrest||canrest=="0"){return;}else{var reid=arg.caller.getAttribute("reid");var ret=this.request("studio_MsgRreshCode",{reid:reid});if(ret==true){var valid_restmsg=document.getElementById("valid_restmsg");
valid_restmsg.style.cursor="default";valid_restmsg.setAttribute("class","LC_button_conner LC_button_grew");valid_restmsg.setAttribute("canrest","0");valid_restmsg.setAttribute("timernums","60");LEAP.ValidRestMsgFlag=LEAP.asynfoo(this.MsgRestfoo,this,1000);}else{LEAP.messagebox.alert("重新获取验证码失败!",3,"重新获取失败");
}}};this.MsgCodeValid=function(arg){var valid_code=document.getElementById("valid_code");if(valid_code){var reid=valid_code.getAttribute("reid");var code=valid_code.value;if(!code||!reid){return;}else{var ret=LEAP.request("studio_ConfirmMsgValid",{reid:reid,code:code});if(ret==true){document.getElementById("msgvalidate").style.display="none";
LEAP.hideMask();this._loadModule(this.MsgValidSourceTemp,true);this.MsgValidSourceTemp=null;}else{LEAP.messagebox.alert("验证码错误或已失效!",3,"验证码错误");}}}};this.MsgRestfoo=function(){var msgrestBtn=document.getElementById("valid_restmsg");if(!msgrestBtn){return;}var timernums=msgrestBtn.getAttribute("timernums");
timernums=timernums-1;if(timernums>0){msgrestBtn.setAttribute("timernums",timernums);msgrestBtn.value="重新获取"+timernums+"S";}else{msgrestBtn.value="重新获取";msgrestBtn.style.cursor="pointer";msgrestBtn.setAttribute("class","LC_button_conner LC_button_blue");msgrestBtn.setAttribute("canrest","1");if(LEAP.ValidRestMsgFlag){window.clearInterval(LEAP.ValidRestMsgFlag);
}}};this.selectItemData=null;this._loadModule=function(data,isSelect,isFix){if(!isSelect){isSelect=false;}if(!isFix){isFix=false;}if(!this.ShowMsgValidate(data)){return;}this.selectItemData=data;if(this.getUT("dragconfig")){this.getUT("dragconfig").style.display="none";}var parentID=data.id;var resType=data.resourcetype;
if(resType!=null&&resType*1<3){return;}var isModule=resType!=null&&resType==4;var isModuleRef=resType!=null&&resType==3;var isPartRef=resType!=null&&resType==15;var isResourceQuote=resType!=null&&resType==19;var isStatRef=resType!=null&&resType==16;var isindexPart=resType!=null&&resType==22;var isStatGroupRef=resType!=null&&resType==17;
var idexpmstyle=data.indexpagemodulestyle;var isframemodule=idexpmstyle!=null&&idexpmstyle==3;var isResRef=resType!=null&&resType==11;var haschild=data.haschild;var url=data.url;var margin=data.indexpagemodulemargin;if(isModuleRef||isModule){haschild=null;}var moduleName=null;if(isModuleRef||isResRef){moduleName=data.url;
}else{if(isModule){moduleName=data.name;}}var lurl=null;if(moduleName!=null){lurl=moduleName.toLowerCase();}if(lurl!=null&&(lurl.startsWith("http://")||lurl.startsWith("https://"))){window.open(window.geturl(moduleName));return true;}if(idexpmstyle!=null&idexpmstyle==2){var url=window.geturl(leapconfig.server+"LEAP/Resource/HTML/trusted/trustedload.html?module="+moduleName+"&text="+encodeURIComponent(data.showname));
if(data.customize){url+="&arg="+data.customize;}window.open(url);return true;}var loadObject=null;if(isPartRef){loadObject={path:"partindex",moduleLoadArg:data.url};}else{if(isindexPart){if(this.getUT("dragconfig")){this.getUT("dragconfig").style.display="inline-block";}loadObject={path:"indexassembly",moduleLoadArg:{pagename:data.name,indexstyle:"index12",indexid:window._indexid}};
}else{if(isResourceQuote){var loadArg={resource:data,par:this.getModulecustomize(data)};loadObject={path:"LIDS_SSOModule",moduleLoadArg:loadArg};}else{if(isframemodule){data._url=url;if(url.indexOf("ipconfig")>-1&&url.indexOf("module")>-1){if(url.indexOf("isv6")>-1){var configs=url.split("&");var obj={};
for(var i=0;i<configs.length;i++){if(configs[i].indexOf("=")>0){var m=configs[i].split("=");obj[m[0]]=m[1];}}var ipaddr=obj.ipconfig.replace("https://","").replace("http://","");var _url=url+"&userflag="+encodeURIComponent(LEAP.userInfo.userflag)+"&ipaddress="+ipaddr;var str=obj.ipconfig;if(obj.context){str=str+"/"+obj.context;
}str=str+"/LEAP/Service/RPC/RPC.DO?method=studiov5_tempLogin&"+_url;data._url=str;data.isv6=true;}else{var lcontxt=leapconfig.context;pdata._url=url;if(lcontxt){url="/"+lcontxt+"/LEAP/Service/RPC/RPC.DO?method=systemauth_trustedModele&"+url;}else{url="/LEAP/Service/RPC/RPC.DO?method=systemauth_trustedModele&"+url;
}pdata.url=window.geturl(url);}data.isTrust=true;}var loadArg={resource:data,par:this.getModulecustomize(data)};loadObject={path:"framemodule",moduleLoadArg:loadArg};}else{var loadArg={resource:data,par:this.getModulecustomize(data)};loadObject={path:moduleName,moduleLoadArg:loadArg};}}}}if(data.clustername){loadObject.router=data.clustername;
}if(loadObject!=null){if(this.fixhash.contains(data.id)){isFix=true;}var mreload=(window._mreload!="0");if(data.customize!=null&&data.customize.indexOf("mreload")>-1){if(data.customize.indexOf("{")==0){try{var robj=JSON.parse(data.customize);if(robj&&robj.mreload!=null&&typeof(robj.mreload)=="boolean"){mreload=robj.mreload;
}}finally{}}}var module=LEAP.modulebar.addBarItem(this.getUT("lg_modulebar"),data.showname,data.id,loadObject,isSelect,isFix,this,mreload);if(module){module.unRegEvent("refreshindex");module.regEvent("refreshindex",this.initIndexCountInfo,this);if(data.isTrust){var d={url:data._url};module.LoadFrame(d);
}if(window._cuaction=="1"){this.fireEvent("onIndexMenuClick",data);}}this.lastModule=module;}};this.loadFixModule=function(fixBeans){if(!fixBeans){return;}for(var i=0;i<fixBeans.length;i++){this._loadModule(fixBeans[i],(i==0&&!this.hasSelect),true);}if(fixBeans.length>1){this.addEvent(this.getUT("lg_modulebar"),"moduleloaded",this.afterLoadModule,null,this);
}};this.fixhash=new hashtable();this.getFixModule=function(){var beans=this.request("studiov6_searchFixModule");if(beans==null){return null;}var hdata=this.menudata;if(hdata.size==0){return;}var list=[];for(var i=0;i<beans.length;i++){var resid=beans[i].resourceid;if(!hdata.contains(resid)){var parentid=beans[i].parentid;
if(parentid!=null){this.getChildResource(parentid);}}if(hdata.contains(resid)){var dd=hdata.getvalue(resid);list.add(dd);this.fixhash.add(resid,dd);}}if(list.length==0){return null;}return list;};this.updateParent=function(resourceid){if(resourceid==null){return;}var pmap=this.parentmap;if(!pmap.contains(resourceid)){return;
}var pdata=pmap.getvalue(resourceid);var customize=pdata.customize;if(customize&&customize.indexof("servicename")>-1){try{var serverJson=eval("("+customize+")");if(serverJson&&serverJson.servicename){var c=this.request(serverJson.servicename,{data:[pdata]});this.changeCountInfo(pdata.id,c);}}finally{}}};
this.initIndexCountInfo=function(c){if(this.selectItemData){var resid=this.selectItemData.id;this.changeCountInfo(resid,c);this.updateParent(resid);}};this.changeCountInfo=function(resid,c){var selectitem=LEAP.getElement("a[resid="+resid+"]",this.getUT("LC_menu"));if(selectitem){var celel=LEAP.getElement("[ctype=showcountinfo]",selectitem);
if(celel){if(typeof(c)=="boolean"&&c==true){LEAP.removeCSS(celel,"ZHBG_countinfo_num");LEAP.removeCSS(celel,"ZHBG_countinfo_num1");LEAP.addCSS(celel,"ZHBG_countinfo_num1");}else{if(c==null||c==0){celel.parentNode.removeChild(celel);}else{celel.innerHTML=c;}}}else{var countEl=document.createElement("SPAN");
if(typeof(c)=="boolean"&&c==true){countEl.className="ZHBG_countinfo_num1";countEl.setAttribute("ctype","showcountinfo");}else{if(c==null||c==0){countEl=null;}else{countEl.className="ZHBG_countinfo_num";countEl.setAttribute("ctype","showcountinfo");countEl.innerHTML=c;}}if(countEl!=null){selectitem.appendChild(countEl);
}}}};this.dragconfig=function(){if(this.lastModule!=null){if(this.lastModule.indexpartconfig){this.lastModule.indexpartconfig();}}};this.getModulecustomize=function(data){if(data!=null&&data.customize!=null&&!String.isEmpty(data.customize)){var _par=null;try{_par=eval("({"+data.customize+"})");}catch(e){}if(_par==null){_par=data.customize;
}return _par;}};this.menuClick=function(arg){var src=arg.e.srcElement;var utf=src.getAttribute("utf");if(utf!=null){if(utf=="index_changepositon"){if(this.posmenu){this.posmenu.style.display="none";}var value=src.getAttribute("value");if(value==LEAP.userInfo.positionid){alert("选择项已经是当前岗位,不需要切换");}else{this.request("studio_changeIndexPosition",{par:value});
__s__3.href=__s__3.href;LEAP.stopEvent(arg.e);return;}}else{if(utf=="index_change_user"){if(LEAP.getElement("[ut=user_menu]")!=null){var El=LEAP.getElement("[ut=user_menu]");if(El.style.display=="block"){El.style.display="none";return;}document.body.removeChild(LEAP.getElement("[ut=user_menu]"));}var beans=this.request("studiov2_searchDepositAccount",{userid:LEAP.userInfo.userid});
var menu=LEAP.getElement("[utf=menu_index_poslit]",document.body);if(!menu){menu=menu=document.createElement("UL");document.body.appendChild(menu);}if(beans==null){if(menu){menu.style.display="none";}alert("无托管用户!");return;}menu.className="lg2menu_ul";menu.setAttribute("utf","menu_index_poslit");menu.setAttribute("ut","user_menu");
LEAP.setStyle(menu,{position:"fixed",width:"120px",border:"0px"});menu.style.position="fixed";var p=LEAP.getAbsolutePos(this.posmenu);if(p){LEAP.setStyle(menu,{position:"fixed",top:this.posmenu.style.top,left:(p.x+158)+"px",border:"0px"});}menu.style.display="block";var buff=new StringBuffer();var utf="index_changepositon";
for(var i=0;i<beans.length;i++){buff.append(this.menuItemStr.replaceall("@utf",utf).replaceall("@value",beans[i].id).replaceall("@text","<img style='border:none' src='"+leapconfig.server+"LEAP/Resource/SystemTemplate/images_index23/position.png' class='bg_pos'>&nbsp"+beans[i].userflag).replaceall("@title",beans[i].userflag));
}menu.innerHTML=buff.toString();this.addEvent(LEAP.getElements("[utf]",menu),"click",this.usermenuClick);}else{if(utf=="index_deposit_set"){var def={name:"leaporguserselect",title:"选择用户",width:520,height:520,pageMode:"search",formtype:3};if(this.userForm==null){this.userForm=this.loadForm3(def);}this.userForm.show();
this.userForm.module.initOrgTree();}}}}src=arg=null;};this.usermenuClick=function(arg){var t=arg.caller.attributes[3].value;if(t){var b=this.request("studiov2_changeAccout",{userid:t});if(b){var ele=LEAP.getElement("[ut=user_menu]",document.body);if(ele){ele.style.display="none";}__s__3.href=__s__3.href;
return;}else{alert("用户切换失败!");}}};this.hideOroenMenu=function(){if(this.getUT("leftmenu").style.display=="none"){LEAP.removeCSS(this.getUT("main_left_split"),"ZHBG_menu_close");LEAP.addCSS(this.getUT("main_left_split"),"ZHBG_menu_open");this.getUT("leftmenu").style.display="";}else{LEAP.removeCSS(this.getUT("main_left_split"),"ZHBG_menu_open");
LEAP.addCSS(this.getUT("main_left_split"),"ZHBG_menu_close");this.getUT("leftmenu").style.display="none";}};this.showPADEwm=function(arg){if(!arg&&!arg.caller){return;}if(!window._ewcode){return;}try{var def=JSON.parse(window._ewcode);}catch(e){return;}if(def.pad){var source=def.pad.source;var context=def.pad.context;
var channel=def.pad.channel;var wh=def.pad.wh;if(!context){context=leapconfig.server;}if(!wh){wh=120;}var imgEle=LEAP.getElement("[ctype=padewcode]",document.body);if(!imgEle){imgEle=document.createElement("IMG");imgEle.style.display="";document.body.appendChild(imgEle);var imgUrl=this.request("getAppDownloadPathByAppName",{context:context,appname:source,potral:channel,wh:wh});
if(imgUrl){var pos=LEAP.getAbsolutePos(arg.caller);if(!window.userinfomodule){imgEle.style.top=(pos.y+30)+"px";imgEle.style.left=pos.x+"px";}else{imgEle.style.top=(pos.y+40)+"px";imgEle.style.left=(pos.x-40)+"px";}imgEle.style.width=wh+"px";imgEle.style.height=wh+"px";imgEle.style.position="absolute";
imgEle.style.zIndex="9999";imgEle.src=context+"imageview/"+wh+"_"+wh+"/"+imgUrl;imgEle.setAttribute("ctype","padewcode");}}else{if(imgEle.style.display=="none"){imgEle.style.display="";}else{imgEle.style.display="none";}}}};this.showEwm=function(arg){if(!arg&&!arg.caller){return;}if(!window._ewcode){return;
}try{var def=JSON.parse(window._ewcode);}catch(e){return;}if(def.phone){var source=def.phone.source;var context=def.phone.context;var channel=def.phone.channel;var title=def.phone.title;var wh=def.phone.wh;if(!context){context=leapconfig.server;}if(!wh){wh=120;}var imgEle=LEAP.getElement("[ctype=ewcode]",document.body);
if(!imgEle){var imgUrl=this.request("getAppDownloadPathByAppName",{context:context,appname:source,potral:channel,wh:wh});if(imgUrl){this.createEwmCode(arg.caller,imgUrl,wh,context,title);}}else{if(imgEle.style.display=="none"){imgEle.style.display="";}else{imgEle.style.display="none";}}}};this.createEwmCode=function(src,imgurl,wh,context,title){var divEl=document.createElement("div");
document.body.appendChild(divEl);var pos=LEAP.getAbsolutePos(src);if(!window.userinfomodule){divEl.style.top=(pos.y+30)+"px";divEl.style.left=pos.x+"px";}else{divEl.style.top=(pos.y+40)+"px";divEl.style.left=(pos.x-40)+"px";}if(!title){title="扫码下载APP";}divEl.style.width=wh+"px";divEl.style.height=(wh*1+20)+"px";
divEl.style.position="absolute";divEl.style.zIndex="9999";divEl.style.background="#FFF";divEl.style["text-align"]="center";divEl.style.border="2px solid #EEE";divEl.setAttribute("ctype","ewcode");if(imgurl){var imgEle=document.createElement("IMG");divEl.appendChild(imgEle);imgEle.style.width=wh+"px";
imgEle.style.height=wh+"px";imgEle.src=context+"imageview/"+wh+"_"+wh+"/"+imgurl;}if(imgurl){var labelEl=document.createElement("label");divEl.appendChild(labelEl);labelEl.style.width=wh+"px";labelEl.style.overflow="hidden";labelEl.style["font-size"]="16px";labelEl.style["font-weight"]="bold";labelEl.style.color="#2296E7";
labelEl.innerHTML=title;}};this.lidStr=null;this.isclose=false;this.initParameter=function(url){if(!url){return;}var str=url.split("?");if(!str||str.length!=2){return;}str=str[1];var pstr=str.split("&");if(!pstr){return;}for(var i=0;i<pstr.length;i++){var closestr=pstr[i].split("=");if(!closestr||closestr.length!=2){continue;
}var name=closestr[0];var value=decodeURIComponent(closestr[1]);if(name=="isclose"){if(value==1||value=="1"||value=="true"){this.isclose=true;}else{this.isclose=false;}}else{if(name=="lid"){this.lidStr=value;}}}};this.registOutTime=function(){if(window._stimeout){var timenum=window._stimeout*1;if(timenum>0){this.timenum=timenum;
LEAP.asynfoo(this._addTime,this,60*1000);LEAP.addEvent(document.body,"click",this.resetTime,null,this,true);LEAP.addEvent(document.body,"keyup",this.resetTime,null,this,true);}}};this.currtime=0;this._addTime=function(){this.currtime++;if(this.timenum>0&&this.currtime>=this.timenum){this.isauto=true;
this.logout();}};this.resetTime=function(){this.currtime=0;};this.isauto=false;this._checkSid=function(){var csid=null;var lc=window.createRouterClient("leap");lc==null?window.createRouterClient():leapclient;csid=XmlHttpHelper.GetTextByPost(lc.getRPCURL(),"type=997&type2=1&_z="+UUID.S4());if(!csid){this.checknum++;
if(this.checknum<10){LEAP.asyn(this._checkSid,this,3000);}else{if(window._sidtimeout=="1"){if(!window.confirm("页面长时间放置已超时，请退出重新登录！")){return;}}this.checknum=0;this.isauto=true;this.logout();}}else{this.checknum=0;}};this.jumpToLogin=function(){var el=document.createElement("div");el.className="info_permission_failed";
el.innerHTML="<p tipEl='index_tip_el'>该账户无系统资源权限，将在<font>5秒</font>内退出</p>";document.body.appendChild(el);LEAP.asynfoo(this.TimeCouter,this,1000);};this.timer=5;this.TimeCouter=function(){this.timer=this.timer-1;if(this.timer<1){this.isauto=true;this.logout();return;}else{var el=LEAP.getElement("[tipEl=index_tip_el]");
if(!el){return;}el.innerHTML="该账户无系统资源权限，将在<font>"+this.timer+"秒</font>后退出";}};this.extMenue=null;this.afterPageLoad=function(){if(window._formmax=="1"){var mainEl=this.getUT("framemain");var pos=LEAP.getAbsolutePos(mainEl);LEAP.form._setContainer(pos.x,pos.y,mainEl.offsetWidth,mainEl.offsetHeight);}if(window.__extFunction){var extFun=window.__extFunction;
var isOpen=extFun.isInit&&extFun.isInit();var liEl=null;if(isOpen!=null&&isOpen===true){var parentEl=this.getUT("LC_menu");liEl=document.createElement("LI");liEl.innerHTML='<a class="ZHBG_row ZHBG_w ZHBG_updown" style="cursor: pointer;" ><span class="ZHBG_col ZHBG_v_m ZHBG_iconfont" ></span><span class="ZHBG_col ZHBG_v_m" style="white-space:nowrap;" >智慧发改</span></a>';
var childs=parentEl.children;if(childs!=null&&childs.length>0){parentEl.insertBefore(liEl,childs[0]);}else{parentEl.appendChild(liEl);}this.extMenue=liEl;}if(liEl!=null&&extFun.initMenu){extFun.initMenu(liEl,this.hasclose);}}};this.changeExtmenue=function(){if(this.extMenue&&window.__extFunction&&window.__extFunction.initMenu){window.__extFunction.initMenu(this.extMenue,this.hasclose);
}};this.indexs=null;this.initIndex=function(){var indexs=this.request("studiov6_getRoleIndexs");if(!indexs){return;}var panelEl=this.ut("top_bar_menu").element;var liEl=document.createElement("li");liEl.innerHTML='<a href="javascript:void(0)" class="ZHBG_top_bar_item" bctf="bar_indexset"><span class="ZHBG_new_iconfont icon-setting" bctf="bar_indexset"></span><span bctf="bar_indexset">首页设置</span><span class="ZHBG_new_iconfont more" bctf="bar_indexset"></span></a>';
panelEl.appendChild(liEl);this.indexs=indexs;};this.indexForm=null;this.indexSet=function(){var lm={name:"leapindexselectlist",title:"首页风格选择",formtype:3};if(this.indexForm==null){this.indexForm=this.loadForm3(lm);}this.indexForm.module.initIndex(true,this.indexs);this.indexForm.show();};this.checkExpired=function(){if(LEAP.userInfo){var expiredstatus=LEAP.userInfo.expiredstatus;
var msgTip=null;if(expiredstatus=="-1"){msgTip="密码已过期,请及时修改密码";}else{if(expiredstatus=="1"){msgTip="密码即将过期,请及时修改密码";}else{if(expiredstatus=="10"){msgTip="相同密码登录达到限制次数，请及时修改密码！";}}}if(msgTip!=null){LEAP.asyn(this.changeTips,this,6000,msgTip);}}};this.changeTips=function(msg){alert(msg);if(!LEAP._cpf){this.changePWD(true);
}};this.ismax=false;this.maxScreen=function(){var doc=document.documentElement;var screenObj=null;if(!this.ismax){screenObj=doc.requestFullScreen||doc.webkitRequestFullScreen||doc.mozRequestFullScreen||doc.msRequestFullscreen;}else{doc=document;screenObj=doc.cancelFullScreen||doc.webkitCancelFullScreen||doc.mozCancelFullScreen||doc.msExitFullscreen;
}if(typeof screenObj!="undefined"&&screenObj){screenObj.call(doc);this.ismax=!this.ismax;return;}var wscript=null;if(typeof window.ActiveXObject!="undefined"){wscript=new ActiveXObject("WScript.Shell");if(wscript){wscript.SendKeys("{F11}");this.ismax=!this.ismax;}}};this.checkSNum=0;this.checkExtService=function(){if(!window._extservice){return;
}if(this.checkSNum>20){return;}var extService=window._extservice;if(!LEAP[extService]){this.checkSNum++;LEAP.asyn(this.checkExtService,this,500);}else{var urEl=this.getUT("btn_ulEl");LEAP[extService].call(null,urEl,this);}};};