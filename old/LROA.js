var LROA={};LROA.API={};LROA.API.calcAdd=function(i,h){i=i.toString(),h=h.toString();var g=i.split("."),b=h.split("."),c=g.length==2?g[1]:"",a=b.length==2?b[1]:"";var f=Math.max(c.length,a.length);var e=Math.pow(10,f);var k=Number(((i*e+h*e)/e).toFixed(f));var j=arguments[2];return typeof j==="number"?Number((k).toFixed(j)):k;
};LROA.API.calcSub=function(b,a){return Calc.Add(b,-Number(a),arguments[2]);};LROA.API.calcMul=function(f,e){var c=f.toString(),b=e.toString(),a,g,h=arguments[2];a=(c.split(".")[1]?c.split(".")[1].length:0)+(b.split(".")[1]?b.split(".")[1].length:0);g=Number(c.replace(".",""))*Number(b.replace(".",""))/Math.pow(10,a);
return typeof h!=="number"?Number(g):Number(g.toFixed(parseInt(h)));};LROA.API.calcDiv=function(f,e){var c=f.toString(),b=e.toString(),a,g,h=arguments[2];a=(b.split(".")[1]?b.split(".")[1].length:0)-(c.split(".")[1]?c.split(".")[1].length:0);g=Number(c.replace(".",""))/Number(b.replace(".",""))*Math.pow(10,a);
return typeof h!=="number"?Number(g):Number(g.toFixed(parseInt(h)));};function onchangedata(a){var b=a;if(a.target||a.srcElement){b=a.target||a.srcElement;}b.style.overflow="hidden";b.style.height="auto";b.style.height=parseInt(b.scrollHeight)+10+"px";}LROA.API.regularIDCard=function(d){var f=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2,1];
var e=[1,0,10,9,8,7,6,5,4,3,2];d=d.replace(/(^\s*)|(\s*$)/g,"").replace(/ /g,"");if(d.length==15){var m=d.substring(6,8);var l=d.substring(8,10);var o=d.substring(10,12);var j=new Date(m,parseFloat(l)-1,parseFloat(o));if(j.getYear()!=parseFloat(m)||j.getMonth()!=parseFloat(l)-1||j.getDate()!=parseFloat(o)){return false;
}else{return true;}}else{if(d.length==18){var g=d.split("");var k=0;var p=null;if(g[17].toLowerCase()=="x"){g[17]=10;}for(var h=0;h<17;h++){k+=f[h]*g[h];}var c=k%11;if(g[17]==e[c]){p=true;}else{p=false;}var m=d.substring(6,10);var l=d.substring(10,12);var o=d.substring(12,14);var n=null;var j=new Date(m,parseFloat(l)-1,parseFloat(o));
if(j.getFullYear()!=parseFloat(m)||j.getMonth()!=parseFloat(l)-1||j.getDate()!=parseFloat(o)){n=false;}else{n=true;}if(p&&n){return true;}else{return false;}}else{return false;}}};LROA.API.LWFPCuiban=function(c){var d=null;if(d&&d.module&&d.module.dispose){d.module.dispose();d=null;}d=null;var b={name:"lroazbjcbinfo",title:"催办详情",width:800,height:600,formtype:"3",pageMode:"insert"};
d=c.loadForm3(b);var a={};a.entryid=c.workflow.getEntry().entryid;a.lwfp_entry_eventname=c.workflow.getEntry().eventname;a.isdb=false;if(a){d.module.setEntryid(a);}};LROA.API.LWFPCuibanShowBTN=function(a,c){if(a&&a.___data&&a.___data.historySteps&&a.___data.historySteps.length>=2){if(a.___data&&a.___data.entry&&a.___data.entry.caller!=null){var b=LEAP.getUserInfo().userflag;
if(a.___data.entry.caller==b){c.getUT("btncuiban").style.display="";}}}};LROA.API.getCodeValue=function(e,a,c){if(LROA.API.checkIsNotNull(a)&&LROA.API.checkIsNotNull(c)){var b=LEAP.getCodeValue(c);if(b!=null){for(var d=0;d<b.length;d++){if(b[d].codeid==a){return b[d].codevalue;}}}}};LROA.API.compareDate=function(c,d){var b=c.split(/[- :]/);
var f=d.split(/[- :]/);var e=parseInt(b[0]+b[1]+b[2]+b[3]+b[4]);var a=parseInt(f[0]+f[1]+f[2]+f[3]+f[4]);if(a>=e){return true;}else{return false;}};LROA.API.checkDateForLWFP=function(j,u,e){if(j){var b=e.split(/[- :]/);if(e&&e.indexOf(".")>0){e=e.split(".")[0];}var l=new Date(e.replace(/-/g,"/"));l.setTime(l.getTime()-24*60*60*1000);
var r=l.getFullYear()+"-"+(l.getMonth()+1)+"-"+l.getDate();var g=r.split(/[- :]/);var i=j.substring(0,10);var c=i.split(/[- :]/);var o=parseInt(c[0]+c[1]);if(parseInt(g[1])<10){g[1]="0"+g[1];}var f=parseInt(g[0]+g[1]);var s=parseInt(c[2]);var w=parseInt(g[2]);if(o<f){var p=new Date(b[0],b[1]-1,b[2]);
var n=new Date(c[0],c[1]-1,c[2]);var h=parseInt(Math.abs(p-n)/1000/60/60/24);if(h){return{status:"流程后补期限为一天，请重新选择流程开始时间！"};}}else{if(o==f&&s<w){return{status:"流程后补期限为一天，请重新选择流程开始时间！"};}}var q=parseInt(b[2]);var d=parseInt(b[0]+b[1]);if(q==26){if(o==d&&s<26){return{status:"每月25号后不再接受流程后补，请重新选择流程开始时间！"};
}}}if(j&&u){var v=LROA.API.compareDate(j,u);var t=j.split(/[- :]/);var a=parseInt(t[0]+t[1]+t[2]+t[3]+t[4]+t[5]);var m=u.split(/[- :]/);var k=parseInt(m[0]+m[1]+m[2]+m[3]+m[4]+m[5]);if(k<=a){return{status:"结束时间不得早于等于开始时间！"};}}return{status:"pass"};};LROA.API.getSearchParameters=function(j){var e=new SearchParameters();
e.setName(j.tablename);if(undefined!=j.par){var g=j.par.metaData;var f=j.par.result;if(g.length==0||f.length==0||g.length!=f.length){return null;}for(var b=0;b<f.length;b++){var k=11;var d=null;var a=typeof(f[b])=="string"?f[b]:f[b]+"";if(a.indexOf("&")>-1){d=a.split("&");k=d[1];}a=(d==null)?a:d[0];e.addParameter(g[b],a,k);
}}if(LROA.API.checkIsNotNull(j.fields)){var c=j.fields.split(",");if(c&&c.length>0){for(var b=0;b<c.length;b++){e.addField(c[b]);}}}if(undefined!=j.order){e.setOrder(j.order);}if(undefined!=j.extendQuery){e.setExtendQuery(j.extendQuery);}if(undefined!=j.distinct){e.distinct=j.distinct;}if(!j.pageSize){e.pageSize=999;
}else{e.pageSize=j.pageSize;}if(!j.pageNum){e.pageNum=1;}else{e.pageNum=j.pageNum;}var h=LEAP.request("beanSearch",{par:e});return h;};LROA.API.getSearchData=function(a){var b=LROA.API.getSearchParameters(a);var c=null;if(b){c=LEAP.convertResult(b);}return c;};LROA.API.checkDate=function(c,a){if(LROA.API.checkIsNotNull(c)&&LROA.API.checkIsNotNull(a)){var b=new DateUtil();
try{if(b.buildDate(c)<=b.buildDate(a)){return true;}}finally{c=a=b=null;}}return false;};LROA.API.checkIsNotNull=function(a){if(typeof(a)=="undefined"||null===a||""===a){return false;}return true;};LROA.API.setPageData=function(a,e){if(LROA.API.checkIsNotNull(e)&&LROA.API.checkIsNotNull(e.__cacheMD)&&e.__cacheMD.size()>0){var d=e.__cacheMD.keys;
if(LROA.API.checkIsNotNull(a)){for(var c in d){var b=c.substring(4,c.length);var f=a[b];if(!LROA.API.checkIsNotNull(f)){continue;}e.md(b).setValue(f);}}else{for(var c in d){var b=c.substring(4,c.length);e.md(b).setValue(null);}}}};LROA.API.setHTMLData=function(a,h){if(LROA.API.checkIsNotNull(a)&&LROA.API.checkIsNotNull(h)&&LROA.API.checkIsNotNull(h.__cacheMD)&&h.__cacheMD.size()>0){var g=h.__cacheMD.keys;
if(g){for(var e in a){var d="key_"+e;if(g[d]){var f=g[d].getAttribute("code");var c=null;if(f){c=LROA.API.getCodeValue(h,a[e],f);}var b=g[d].getAttribute("mdtype");if("date"===b){a[e]=a[e].substring(0,10);}g[d].innerHTML=c?c:a[e];}}}}};LROA.API.pageUIChange=function(f){if(!LROA.API.checkIsNotNull(f)){return;
}var d=LEAP.getElement("th[tpo][instance="+f.instance+"]");if(null==d||typeof(d)=="undefined"){return;}var a=d.getAttribute("tpo");if(null==a){return;}var c=a.split("|");if(null==c||c.length==0){return;}var b=f.getParentModule().getParentModule();if("view"==f.getParentModule().pageMode||(true==b.isworkflow&&null!=b.workflow&&"审批"==b.workflow.getStepName())){for(var e=0;
e<c.length;e++){if(c[e].indexof("查看")>-1){d.setAttribute("tpo",c[e]);break;}}f.ut("btn_add").hide();}else{f.ut("btn_add").show();}};LROA.API.setFieldProperty=function(k,c){if(null==k||!LROA.API.checkIsNotNull(c)||!LROA.API.checkIsNotNull(k.md)){return null;}var h=LEAP.getElement("[_linkmd="+k.md+"]","[instance="+c.instance+"]");
if(null==h){return null;}var f=c.getMD(k.md);if(null==f){return null;}if(LROA.API.checkIsNotNull(k.notnull)){var a=f.getAttribute("check");if(a){if(a.indexOf("notnull:"+k.notnull)<0&&a.indexOf("notnull:"+(!k.notnull))<0){a+=",notnull:"+k.notnull;}else{if(a.indexOf("notnull:"+(!k.notnull))>-1){a=a.replaceall("notnull:"+(!k.notnull),"notnull:"+k.notnull);
}}LEAP.check.setCheck(f,a);var b=LEAP.getElement("font",h);if(b){b.style.display=(true==k.notnull)?"inline":"none";}}else{LEAP.check.setCheck(f,"notnull:true");}}if(LROA.API.checkIsNotNull(k.readonly)){var j=f.getAttribute("ct");if(k.readonly){if("date"==j){f.setAttribute("readOnly","1");var g=LEAP.getElements("input",f);
if(g&&g.length>0){for(var d=0;d<g.length;d++){g[d].setAttribute("readOnly",k.readonly);}}var e=LEAP.getElement("div[ctf=date_show]",f);if(e){e.style.display="none";}}else{f.setAttribute("readOnly",k.readonly);}}else{f.removeAttribute("readOnly");if("date"==j){var g=LEAP.getElements("input",f);if(g&&g.length>0){for(var d=0;
d<g.length;d++){g[d].removeAttribute("readOnly");}}var e=LEAP.getElement("div[ctf=date_show]",f);if(e){e.style.display="inline";}}}}};LROA.API.autoAddHight=function(u){var m=0;var c=0;var l=0;var d=u.getParentModule().getParentModule();var o=null;var n=0;if(d.getUT("loadTab")){o=d.getUT("loadTab").style.height;
var a=parseInt(o)<0?0:parseInt(o);n=a;if(!u.getParentModule().loadTabHeight){u.getParentModule().loadTabHeight=a;}else{a=u.getParentModule().loadTabHeight;}var s=u.getElement("[instance="+u.instance+"]");if(!s){return;}var f=LEAP.getElements("[linmodule2_row]",s);if(f&&f.length>0){for(var q=0;q<f.length;
q++){var b=f[q].scrollHeight;if(q==f.length-1){l+=parseInt(b)<0?0:parseInt(b);}else{c+=parseInt(b)<0?0:parseInt(b);}}}var k=null;if("search"==s.getAttribute("moduletype")){var h=u.getElement("div[class='lg_p2_bt_top lgresultpanel_table']",s);if(h){var r=u.getElement("table",h);if(r.scrollHeight!=0){k=r.scrollHeight;
}}}else{var r=u.getElement("table",s);if(r&&r.scrollHeight!=0){k=r.scrollHeight;}else{var g=u.getElement("div[class=lg_p2_bt_top]",s);if(!g){return;}k=g.style.height;}u.getParentModule().afterTabHeight=k;}var p=LROA.API.checkIsNotNull(k)?(parseInt(k)<0?0:parseInt(k)):0;if(0==p){if("search"!=s.getAttribute("moduletype")){var e=u.getParentModule().afterTabHeight;
if(e){var j=parseInt(e)<0?0:parseInt(e)+100;d.getUT("loadTab").style.height=j+"px";}}return;}if(f){n=(p>n)?p+100:(parseInt(o)<0?0:parseInt(o));m=p+l+50;while(m<a||m<=n){m+=50;}}else{var t=130;if("search"==s.getAttribute("moduletype")){if(n==a){if(2*n<p){p+=t;}else{if(n<p){p+=(p-n)+t;}else{if((n-p)>t){p=n;
}else{if((n-p)<50){p=n+(n-p)+t;}else{p=n+(n-p);}}}}m=p;}else{if(n<a){m=a;}else{m=p+t;}}}else{m=p+t;}}d.getUT("loadTab").style.height=m+"px";}};LROA.API.autoProvHight=function(e){var a=0;var c=0;var d=e.getParentModule().getParentModule();var b=null;if(d.getUT("loadTab")){b=d.getUT("loadTab").style.height;
fheight=parseInt(b)<0?0:parseInt(b);if(!e.getParentModule().loadTabHeight){e.getParentModule().loadTabHeight=fheight;}else{d.getUT("loadTab").style.height=e.getParentModule().loadTabHeight+"px";}}};LROA.API.showTable=function(a,g,f,h,e){if(!LROA.API.checkIsNotNull(a)||!LROA.API.checkIsNotNull(g)||!LROA.API.checkIsNotNull(e)){return;
}if(null==f||f.length==0){return;}this._rowSpan={};for(var c=0;c<f.length;c++){LROA.API.addRow(a,g,f[c],h,e);}if(this._rowSpan){for(var b in this._rowSpan){var d=this._rowSpan[b];LROA.API.rowSpan(g,0,g.rows.length,d);}}};LROA.API.addRow=function(h,p,q,m,v){if(!LROA.API.checkIsNotNull(h)||!LROA.API.checkIsNotNull(p)||!LROA.API.checkIsNotNull(v)){return;
}var c=h.getElementsByTagName("th");if(null==c){return;}var f=p.insertRow();if(f){for(var n=0;n<c.length;n++){var s=c[n].getAttribute("md");if(s){var a=f.insertCell(n);var k=c[n].getAttribute("cellclick");var t=c[n].getAttribute("textalign");var g=c[n].getAttribute("code");var b=null;var d=c[n].getAttribute("mdtype");
var l=c[n].getAttribute("_rowSpan");if("true"==l){this._rowSpan[s]=n;}for(var u in q){if(u===s){if(g){b=LROA.API.getCodeValue(v,q[s],g);}if(d&&"date"===d){q[s]=q[s].substring(0,10);}var i=LROA.API.checkIsNotNull(b)?b:q[s];var r=(i.length>11)?i.substring(0,11)+"...":i;if(k&&"true"===k){var o=document.createElement("span");
o.title=i;o.innerHTML=r;o.style.cursor="pointer";o.style.color="#1e88e5";if(m&&m.clickfn){var e="";if(m.param){e=JSON.stringify(m.param);}o.setAttribute("onclick",m.clickfn+"("+e+")");}a.appendChild(o);}else{a.style.textAlign=LROA.API.checkIsNotNull(t)?t:"center";a.title=i;a.innerHTML=r;}break;}}}}}};
LROA.API.rowSpan=function(b,d,c,e){if(e>=b.rows[d].cells.length){return;}for(var f=d;f<c;f++){if(f+1==c){break;}var a=b.rows[d].cells.length-b.rows[f+1].cells.length;if(b.rows[d].cells[e].innerHTML==b.rows[f+1].cells[e-a].innerHTML){b.rows[f+1].removeChild(b.rows[f+1].cells[e-a]);b.rows[d].cells[e].rowSpan=(b.rows[d].cells[e].rowSpan|0)+1;
}else{d=f+1;}}};LROA.API.clearTable=function(d,c){var a=d.getElementsByTagName("tr");if(a.length>0){for(var b=0;b<a.length;){d.deleteRow(0);}}};LROA.API.clearTable_row=function(b,e,d){if(!LROA.API.checkIsNotNull(b)||!LROA.API.checkIsNotNull(e)){return;}if(e.children&&e.children.length>0){if(e.children.length>1){for(var c=1;
c<e.children.length;){e.deleteRow(c);}}var a=b.getElementsByTagName("th");if(null==a){return;}for(var c=0;c<a.length;c++){e.children[0].cells[c].innerHTML="";}}};LROA.API.getPercentVal=function(b,a){if(LROA.API.checkIsNotNull(b)&&LROA.API.checkIsNotNull(a)&&0!=a&&0!=b){return(Math.round((b/a)*10000)/100+"%");
}return"0%";};LROA.API.getOrgData=function(){var a=LEAP.request("lroa_getUpperLevelOrgInfo");if(null==a){a={id:LEAP.userInfo.orgid,cnname:LEAP.userInfo.orgCNName,syscode:LEAP.userInfo.orgsyscode};}return a;};LROA.API.getRealNum=function(b,a){if(b&&a){b=parseFloat(b).toFixed(a).toString();while(b.substr(-1)=="0"){b=b.substr(0,b.length-1);
}if(b.substr(-1)=="."){b=b.substr(0,b.length-1);}}return parseFloat(b);};LROA.API.judgefjsqzk=function(g,h){var a=false;for(var e=0;e<h.length;e++){var b=h[e];if(g.getMD(b)==null){continue;}var d=LEAP.attlist.getValue(g.getMD(b));if(d!=null){var f=new SearchParameters();f.name="lwfpattachment";f.addParameter("mdid",d,11);
var c=LEAP.request("beanSearch",{searchParameters:f});if(c!=null&&c.result!=null&&c.result.length>0){a=true;break;}}}if(a){if(g.getUT("sqzk").value=="展开附件栏"){g.sqzk();}}};