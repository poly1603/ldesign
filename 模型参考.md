# LDesign 前端开发 · AI 模型选型指南

适用范围：本仓库为 pnpm monorepo（workspaces：packages/**、libraries/**、apps/*、tools/**），技术栈含 TypeScript、Rollup/Vite、ESLint、Playwright 等。本文帮助前端在不同任务下快速选用合适的大模型。

## 一句话结论
- 日常开发的默认模型：GPT-5（medium reasoning）或 Claude 4.5 Sonnet（平衡速度/质量/成本）。
- 复杂跨包重构、深度推理：GPT-5（high reasoning）或 Claude 4.5 Sonnet (thinking)。
- 极速小改、批量编辑、简单问答：Claude 4.5 Haiku。
- 多模态（图/表/设计稿到代码）：Gemini 2.5 Pro。
- 历史版本/长上下文需求很强但不追求极致速度：Claude 4.1 Opus 可作为补充。

## 快速选择清单（按前端常见场景）
- 新建组件/Hook、补全类型、写 Story/Docs：GPT-5 (medium) 或 Claude 4.5 Sonnet
- 修 Bug（重现场景+日志+少量代码）：Claude 4.5 Sonnet；若链路复杂→ GPT-5 (high)
- 跨包/跨层重构（涉及 packages、libraries、tools 同时改）：Claude 4.5 Sonnet (thinking) 或 GPT-5 (high)
- 配置类问题（Rollup、ESLint、TSConfig、CI）：GPT-5 (medium)；遇到棘手边界→ GPT-5 (high)
- 代码审查/PR 摘要/风险点提示：Claude 4.5 Sonnet（速度/判断平衡好）
- 生成单测/端测（Playwright @playwright/test）：GPT-5 (medium)；失败排查→ GPT-5 (high)
- 批量文本/注释/Changelog 生成：Claude 4.5 Haiku
- 把 UI 截图/原型转组件雏形：Gemini 2.5 Pro

## 决策树
1) 是否需要深度链路推理（跨多个包/构建链/边界条件多）？
   - 是 → Claude 4.5 Sonnet (thinking) 或 GPT-5 (high)
   - 否 →
2) 是否强多模态（图片/表格/设计稿）？
   - 是 → Gemini 2.5 Pro
   - 否 →
3) 是否追求极致响应/低成本且任务简单？
   - 是 → Claude 4.5 Haiku
   - 否 → GPT-5 (medium) 或 Claude 4.5 Sonnet

## 与本仓库脚本/工具对齐的建议
- 构建/联调：提供你将使用的脚本与目标产物
  - dev：`pnpm --filter ldesign-simple-app dev`
  - build：`pnpm run build:all`（或 `:clean`/`:verbose`/`:dry`）
  - 预览：`pnpm --filter ldesign-simple-app preview`
- 质量校验：让模型按仓库规范输出可执行命令
  - Lint：`pnpm lint` / `pnpm lint:fix`（或 `pnpm -r lint`）
  - TypeScript：约束 `tsc --noEmit`（Node >=18，TS 5.7）
  - E2E：`@playwright/test`
- 产物形式：要求生成 ESM/TS-first，遵循 Rollup 插件栈（esbuild/postcss/terser）。
- 变更边界：明确涉及 workspace（packages/**、libraries/**、apps/*、tools/**），避免误改其他包。

## Prompt 模板（可直接复用）
- 需求实现（组件/Hook）
  - 背景：功能 + 预期 API（Props/事件/类型）
  - 约束：TS 严格、可 Tree-shaking、无副作用导入、写基本测试与示例
  - 输出：文件树 + 代码 Diff（按包路径）+ 可执行脚本（`pnpm ...`）
- 构建/配置排查
  - 提供：报错文本、相关配置片段（rollup.config、tsconfig、eslint 配置）、运行脚本
  - 目标：定位原因、最小修复 PR 级 Diff、验证命令
- 重构
  - 提供：入口文件/核心模块路径、受影响包清单
  - 目标：分阶段方案、迁移脚手架（脚本）、回滚策略与校验指令
- 测试生成
  - 指定：测试框架（Playwright/@playwright/test）、运行目标页面/路由、关键断言
  - 要求：可直接运行的测试文件与数据准备

示例开场白（粘贴即可）：
- “在 LDesign monorepo 中，我需要新增一个 React 图标预览面板到 apps/ 下，要求使用 TypeScript、按需加载、通过 `pnpm dev` 可热更新。请给出文件树、每个文件的代码、以及运行验证命令。”

## 最佳实践
- 提供最小必需上下文：相关文件片段、`package.json` scripts、错误栈；避免整仓库全文粘贴。
- 让模型先给“计划/变更清单/命令”，确认后再要“完整代码”，提高可控性与可回滚性。
- 要求输出 Git 风格 Diff 或分文件代码块，便于局部应用与审查。
- 强制本地校验：在变更后执行
  - `pnpm -r lint`、`pnpm -r lint:fix`（视需要）
  - `tsc --noEmit`
  - 相关 `pnpm run build:all[:dry]`
- 安全与隐私：不要直接粘贴私密令牌/密钥；用占位名如 `{{TOKEN_NAME}}`。

## 模型切换策略（渐进式）
1) 先用 Claude 4.5 Haiku 快速成稿/原型或定位范围。
2) 用 GPT-5 (medium) 或 Claude 4.5 Sonnet 打磨为可运行版本。
3) 若遇到复杂依赖或疑难构建，再切 GPT-5 (high) 或 Claude 4.5 Sonnet (thinking)。
4) 涉及图片/设计稿输入的任务，改用 Gemini 2.5 Pro。

## 常见任务 Playbook
- 新增包或工具（tools/**）
  - 选 GPT-5 (medium) → 生成最小脚手架 + Rollup 配置 + scripts
  - 验证：`pnpm run build:all:dry` → 通过后再 `:verbose`
- 修 ESLint/TS 错误
  - 选 Claude 4.5 Sonnet → 贴错误与配置片段 → 要求“最小改动”与原因
- 跨包 API 重构（packages/** ↔ libraries/**）
  - 选 Claude 4.5 Sonnet (thinking) 或 GPT-5 (high)
  - 产出：迁移计划、批量替换脚本、兼容层与移除计划
- 写 Playwright 端测
  - 选 GPT-5 (medium) → 生成 `tests` 目录文件、数据准备与命令

——以上足以覆盖本仓库日常开发的大多数模型选型场景。祝编码顺利！