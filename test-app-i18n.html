<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LDesign App I18n æµ‹è¯•</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: #f9f9f9;
        }
        .test-title {
            color: #333;
            margin-bottom: 15px;
        }
        .test-result {
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 4px;
            border-left: 4px solid #007acc;
        }
        .success {
            border-left-color: #28a745;
            background: #f8fff9;
        }
        .error {
            border-left-color: #dc3545;
            background: #fff8f8;
        }
        .warning {
            border-left-color: #ffc107;
            background: #fffef8;
        }
        iframe {
            width: 100%;
            height: 800px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .controls {
            margin: 15px 0;
        }
        button {
            padding: 8px 16px;
            margin: 5px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background: white;
            cursor: pointer;
        }
        button:hover {
            background: #f0f0f0;
        }
        .status {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }
        .status.online {
            background: #d4edda;
            color: #155724;
        }
        .status.offline {
            background: #f8d7da;
            color: #721c24;
        }
        .checklist {
            list-style: none;
            padding: 0;
        }
        .checklist li {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        .checklist li:before {
            content: "â˜ ";
            margin-right: 8px;
            color: #666;
        }
        .checklist li.checked:before {
            content: "âœ… ";
            color: #28a745;
        }
        .checklist li.failed:before {
            content: "âŒ ";
            color: #dc3545;
        }
    </style>
</head>
<body>
    <h1>ğŸŒ LDesign App å¤šè¯­è¨€åŠŸèƒ½æµ‹è¯•</h1>
    
    <div class="test-section">
        <h2 class="test-title">ğŸ“± åº”ç”¨çŠ¶æ€æ£€æŸ¥</h2>
        <div class="test-result">
            <strong>åº”ç”¨åœ°å€:</strong> <a href="http://localhost:8889/" target="_blank">http://localhost:8889/</a>
            <span id="app-status" class="status offline">æ£€æŸ¥ä¸­...</span>
        </div>
        <div class="controls">
            <button onclick="checkAppStatus()">ğŸ”„ é‡æ–°æ£€æŸ¥åº”ç”¨çŠ¶æ€</button>
            <button onclick="openApp()">ğŸš€ åœ¨æ–°çª—å£æ‰“å¼€åº”ç”¨</button>
        </div>
    </div>

    <div class="test-section">
        <h2 class="test-title">âœ… å¤šè¯­è¨€åŠŸèƒ½æ£€æŸ¥æ¸…å•</h2>
        <div class="test-result">
            <strong>è¯·åœ¨åº”ç”¨ä¸­æ‰‹åŠ¨éªŒè¯ä»¥ä¸‹åŠŸèƒ½:</strong>
            <ul class="checklist" id="checklist">
                <li id="check-1">åº”ç”¨æ­£å¸¸å¯åŠ¨å’ŒåŠ è½½</li>
                <li id="check-2">é¡µé¢æ˜¾ç¤ºä¸­æ–‡ç¿»è¯‘å†…å®¹ï¼ˆé»˜è®¤è¯­è¨€ï¼‰</li>
                <li id="check-3">æ‰¾åˆ°è¯­è¨€åˆ‡æ¢å™¨ç»„ä»¶ï¼ˆé€šå¸¸åœ¨å¯¼èˆªæ å³ä¾§ï¼‰</li>
                <li id="check-4">è¯­è¨€åˆ‡æ¢å™¨æ˜¾ç¤ºå½“å‰è¯­è¨€ä¿¡æ¯</li>
                <li id="check-5">ç‚¹å‡»è¯­è¨€åˆ‡æ¢å™¨å¯ä»¥çœ‹åˆ°å¯ç”¨è¯­è¨€åˆ—è¡¨</li>
                <li id="check-6">åˆ‡æ¢åˆ°è‹±è¯­ï¼Œé¡µé¢å†…å®¹å˜ä¸ºè‹±æ–‡</li>
                <li id="check-7">å¯¼èˆªæ æ–‡æœ¬æ­£ç¡®åˆ‡æ¢ï¼ˆé¦–é¡µã€ç™»å½•ç­‰ï¼‰</li>
                <li id="check-8">åº•éƒ¨ç‰ˆæƒä¿¡æ¯æ­£ç¡®åˆ‡æ¢</li>
                <li id="check-9">åˆ·æ–°é¡µé¢åè¯­è¨€è®¾ç½®ä¿æŒä¸å˜</li>
                <li id="check-10">åˆ‡æ¢å›ä¸­æ–‡ï¼Œæ‰€æœ‰å†…å®¹æ¢å¤ä¸­æ–‡æ˜¾ç¤º</li>
                <li id="check-11">æ§åˆ¶å°æ— é”™è¯¯ä¿¡æ¯</li>
                <li id="check-12">è¯­è¨€åˆ‡æ¢åŠ¨ç”»æµç•…ï¼Œæ— é—ªçƒ</li>
            </ul>
        </div>
        <div class="controls">
            <button onclick="markAllChecked()">âœ… å…¨éƒ¨é€šè¿‡</button>
            <button onclick="resetChecklist()">ğŸ”„ é‡ç½®æ¸…å•</button>
        </div>
    </div>

    <div class="test-section">
        <h2 class="test-title">ğŸ“º åº”ç”¨é¢„è§ˆ</h2>
        <div class="test-result">
            <strong>è¯´æ˜:</strong> åœ¨ä¸‹æ–¹é¢„è§ˆæ¡†ä¸­æµ‹è¯•å¤šè¯­è¨€åŠŸèƒ½ï¼Œæˆ–ç‚¹å‡»"åœ¨æ–°çª—å£æ‰“å¼€"è¿›è¡Œå®Œæ•´æµ‹è¯•ã€‚
        </div>
        <iframe id="app-frame" src="http://localhost:8889/"></iframe>
        <div class="controls">
            <button onclick="refreshFrame()">ğŸ”„ åˆ·æ–°é¢„è§ˆ</button>
            <button onclick="toggleFrame()">ğŸ‘ï¸ æ˜¾ç¤º/éšè—é¢„è§ˆ</button>
        </div>
    </div>

    <div class="test-section">
        <h2 class="test-title">ğŸ“‹ æµ‹è¯•æŠ¥å‘Š</h2>
        <div id="test-report" class="test-result">
            <strong>æµ‹è¯•çŠ¶æ€:</strong> ç­‰å¾…æ‰‹åŠ¨éªŒè¯...
        </div>
        <div class="controls">
            <button onclick="generateReport()">ğŸ“Š ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š</button>
            <button onclick="exportReport()">ğŸ’¾ å¯¼å‡ºæŠ¥å‘Š</button>
        </div>
    </div>

    <script>
        let checklistStatus = {};

        // æ£€æŸ¥åº”ç”¨çŠ¶æ€
        async function checkAppStatus() {
            const statusEl = document.getElementById('app-status');
            statusEl.textContent = 'æ£€æŸ¥ä¸­...';
            statusEl.className = 'status offline';

            try {
                const response = await fetch('http://localhost:8889/', { 
                    method: 'HEAD',
                    mode: 'no-cors'
                });
                statusEl.textContent = 'åœ¨çº¿';
                statusEl.className = 'status online';
                markChecklistItem('check-1', true);
            } catch (error) {
                statusEl.textContent = 'ç¦»çº¿';
                statusEl.className = 'status offline';
                markChecklistItem('check-1', false);
            }
        }

        // æ‰“å¼€åº”ç”¨
        function openApp() {
            window.open('http://localhost:8889/', '_blank');
        }

        // åˆ·æ–°é¢„è§ˆæ¡†æ¶
        function refreshFrame() {
            const frame = document.getElementById('app-frame');
            frame.src = frame.src;
        }

        // åˆ‡æ¢é¢„è§ˆæ¡†æ¶æ˜¾ç¤º
        function toggleFrame() {
            const frame = document.getElementById('app-frame');
            frame.style.display = frame.style.display === 'none' ? 'block' : 'none';
        }

        // æ ‡è®°æ£€æŸ¥é¡¹
        function markChecklistItem(id, passed) {
            const item = document.getElementById(id);
            if (passed) {
                item.className = 'checked';
                checklistStatus[id] = true;
            } else {
                item.className = 'failed';
                checklistStatus[id] = false;
            }
        }

        // å…¨éƒ¨æ ‡è®°ä¸ºé€šè¿‡
        function markAllChecked() {
            for (let i = 1; i <= 12; i++) {
                markChecklistItem(`check-${i}`, true);
            }
            generateReport();
        }

        // é‡ç½®æ¸…å•
        function resetChecklist() {
            for (let i = 1; i <= 12; i++) {
                const item = document.getElementById(`check-${i}`);
                item.className = '';
                checklistStatus[`check-${i}`] = null;
            }
            updateReport('ç­‰å¾…æ‰‹åŠ¨éªŒè¯...');
        }

        // ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š
        function generateReport() {
            const total = 12;
            const passed = Object.values(checklistStatus).filter(status => status === true).length;
            const failed = Object.values(checklistStatus).filter(status => status === false).length;
            const pending = total - passed - failed;

            let reportText = `æµ‹è¯•å®Œæˆï¼é€šè¿‡: ${passed}/${total}`;
            if (failed > 0) {
                reportText += `, å¤±è´¥: ${failed}`;
            }
            if (pending > 0) {
                reportText += `, å¾…æµ‹è¯•: ${pending}`;
            }

            let status = 'success';
            if (failed > 0) {
                status = 'error';
            } else if (pending > 0) {
                status = 'warning';
            }

            updateReport(reportText, status);
        }

        // æ›´æ–°æŠ¥å‘Š
        function updateReport(text, type = 'info') {
            const reportEl = document.getElementById('test-report');
            reportEl.innerHTML = `<strong>æµ‹è¯•çŠ¶æ€:</strong> ${text}`;
            reportEl.className = `test-result ${type}`;
        }

        // å¯¼å‡ºæŠ¥å‘Š
        function exportReport() {
            const timestamp = new Date().toISOString().replace(/[:.]/g, '-');
            const report = {
                timestamp: new Date().toISOString(),
                testName: 'LDesign App I18n åŠŸèƒ½æµ‹è¯•',
                results: checklistStatus,
                summary: {
                    total: 12,
                    passed: Object.values(checklistStatus).filter(status => status === true).length,
                    failed: Object.values(checklistStatus).filter(status => status === false).length
                }
            };

            const blob = new Blob([JSON.stringify(report, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `i18n-test-report-${timestamp}.json`;
            a.click();
            URL.revokeObjectURL(url);
        }

        // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥åº”ç”¨çŠ¶æ€
        window.addEventListener('load', () => {
            checkAppStatus();
        });

        // ç›‘å¬ç‚¹å‡»äº‹ä»¶æ¥æ‰‹åŠ¨æ ‡è®°æ£€æŸ¥é¡¹
        document.addEventListener('click', (e) => {
            if (e.target.tagName === 'LI' && e.target.id.startsWith('check-')) {
                const currentClass = e.target.className;
                if (currentClass === '') {
                    markChecklistItem(e.target.id, true);
                } else if (currentClass === 'checked') {
                    markChecklistItem(e.target.id, false);
                } else {
                    e.target.className = '';
                    checklistStatus[e.target.id] = null;
                }
                generateReport();
            }
        });
    </script>
</body>
</html>
