# LDesign é¡¹ç›®ä¼˜åŒ–æ€»ç»“

æœ¬æ–‡æ¡£æ€»ç»“äº†å¯¹ LDesign monorepo é¡¹ç›®è¿›è¡Œçš„å…¨é¢ä¼˜åŒ–ï¼Œæ—¨åœ¨ç»Ÿä¸€åŒ…ç®¡ç†ã€ç®€åŒ–å¼€å‘æµç¨‹ã€ä¼˜åŒ–æ„å»ºå’Œå‘å¸ƒæµç¨‹ã€‚

## ğŸ¯ ä¼˜åŒ–ç›®æ ‡

- âœ… ç»Ÿä¸€æ‰€æœ‰åŒ…çš„é…ç½®å’Œä¾èµ–ç®¡ç†
- âœ… ç®€åŒ–å¼€å‘ã€æ„å»ºã€æµ‹è¯•æµç¨‹
- âœ… æ ‡å‡†åŒ–å‘å¸ƒå’Œç‰ˆæœ¬ç®¡ç†
- âœ… ä¼˜åŒ–æäº¤å’Œä»£ç è§„èŒƒæµç¨‹
- âœ… æä¾›å®Œæ•´çš„è‡ªåŠ¨åŒ–å·¥å…·é“¾

## ğŸ”§ ä¸»è¦ä¼˜åŒ–å†…å®¹

### 1. ç»Ÿä¸€åŒ…ç®¡ç†ç³»ç»Ÿ

**æ–°å¢å·¥å…·**: `tools/scripts/standardize/package-standardizer.ts`

**åŠŸèƒ½**:

- è‡ªåŠ¨æ ‡å‡†åŒ–æ‰€æœ‰åŒ…çš„ `package.json` é…ç½®
- ç»Ÿä¸€è„šæœ¬å‘½ä»¤ã€ä¾èµ–ç‰ˆæœ¬ã€å¯¼å‡ºé…ç½®
- ç¡®ä¿æ‰€æœ‰åŒ…éµå¾ªç›¸åŒçš„ç»“æ„å’Œè§„èŒƒ

**ä½¿ç”¨æ–¹æ³•**:

```bash
pnpm tools:standardize
```

### 2. ç»Ÿä¸€æ„å»ºé…ç½®

**æ–°å¢é…ç½®**: `tools/configs/rollup.base.config.js`

**åŠŸèƒ½**:

- æä¾›ç»Ÿä¸€çš„ Rollup æ„å»ºé…ç½®
- æ”¯æŒ ESMã€CommonJSã€TypeScript å£°æ˜æ–‡ä»¶ç”Ÿæˆ
- è‡ªåŠ¨å¤„ç†å¤–éƒ¨ä¾èµ–å’Œä»£ç å‹ç¼©

**ä½¿ç”¨æ–¹æ³•**:

```javascript
// åœ¨åŒ…çš„ rollup.config.js ä¸­
import { createRollupConfig } from '../../tools/configs/rollup.base.config.js'
export default createRollupConfig(process.cwd())
```

### 3. å¼€å‘å·¥ä½œæµä¼˜åŒ–

**æ–°å¢å·¥å…·**: `tools/scripts/workflow/dev-workflow.ts`

**åŠŸèƒ½**:

- ä¸€é”®å¯åŠ¨å®Œæ•´å¼€å‘ç¯å¢ƒ
- è‡ªåŠ¨ä¾èµ–æ£€æŸ¥ã€ä»£ç æ£€æŸ¥ã€ç±»å‹æ£€æŸ¥
- æ”¯æŒç›‘å¬æ¨¡å¼å’Œæµ‹è¯•é›†æˆ
- ç”Ÿäº§æ„å»ºæµç¨‹è‡ªåŠ¨åŒ–

**ä½¿ç”¨æ–¹æ³•**:

```bash
# å¯åŠ¨å¼€å‘ç¯å¢ƒ
pnpm dev

# æŒ‡å®šåŒ…å¼€å‘
pnpm dev:packages engine,color

# åŒ…å«æµ‹è¯•ç›‘å¬
pnpm dev:test

# ç”Ÿäº§æ„å»º
pnpm build:prod
```

### 4. ç»Ÿä¸€å‘å¸ƒæµç¨‹

**æ–°å¢å·¥å…·**: `tools/scripts/release/unified-release.ts`

**åŠŸèƒ½**:

- è‡ªåŠ¨åŒ–ç‰ˆæœ¬å‘å¸ƒæµç¨‹
- æ”¯æŒ patch/minor/major/prerelease ç‰ˆæœ¬
- é›†æˆæµ‹è¯•ã€æ„å»ºã€å˜æ›´æ—¥å¿—ç”Ÿæˆ
- æ”¯æŒå›æ»šå’Œé¢„è§ˆæ¨¡å¼

**ä½¿ç”¨æ–¹æ³•**:

```bash
# ç‰ˆæœ¬å‘å¸ƒ
pnpm release:patch    # è¡¥ä¸ç‰ˆæœ¬
pnpm release:minor    # æ¬¡è¦ç‰ˆæœ¬
pnpm release:major    # ä¸»è¦ç‰ˆæœ¬
pnpm release:beta     # Beta ç‰ˆæœ¬
pnpm release:dry      # é¢„è§ˆæ¨¡å¼

# å›æ»šç‰ˆæœ¬
tsx tools/scripts/release/unified-release.ts rollback 1.0.0
```

### 5. æ™ºèƒ½æäº¤åŠ©æ‰‹

**æ–°å¢å·¥å…·**: `tools/scripts/git/commit-helper.ts`

**åŠŸèƒ½**:

- äº¤äº’å¼æäº¤ä¿¡æ¯ç”Ÿæˆ
- ç¬¦åˆ Conventional Commits è§„èŒƒ
- æ”¯æŒå¿«é€Ÿæäº¤æ¨¡å¼
- è‡ªåŠ¨æ£€æŸ¥å·¥ä½œåŒºçŠ¶æ€

**ä½¿ç”¨æ–¹æ³•**:

```bash
# äº¤äº’å¼æäº¤
pnpm commit

# å¿«é€Ÿæäº¤
pnpm c feat "æ·»åŠ æ–°åŠŸèƒ½" engine
```

### 6. åŒ…æ¨¡æ¿ç”Ÿæˆå™¨

**æ–°å¢å·¥å…·**: `tools/scripts/package/package-template.ts`

**åŠŸèƒ½**:

- å¿«é€Ÿåˆ›å»ºæ ‡å‡†åŒ–çš„æ–°åŒ…
- è‡ªåŠ¨ç”Ÿæˆå®Œæ•´çš„ç›®å½•ç»“æ„
- åŒ…å«æµ‹è¯•ã€ç¤ºä¾‹ã€æ–‡æ¡£æ¨¡æ¿
- è‡ªåŠ¨é…ç½®æ„å»ºå’Œå¼€å‘ç¯å¢ƒ

**ä½¿ç”¨æ–¹æ³•**:

```bash
tsx tools/scripts/package/package-template.ts utils "å·¥å…·å‡½æ•°åº“" "utils,helpers"
```

### 7. ç»Ÿä¸€ TypeScript é…ç½®

**æ–°å¢é…ç½®**: `tools/configs/tsconfig.base.json`

**åŠŸèƒ½**:

- æä¾›åŸºç¡€ TypeScript é…ç½®
- æ‰€æœ‰åŒ…ç»§æ‰¿ç»Ÿä¸€é…ç½®
- ç¡®ä¿ç±»å‹æ£€æŸ¥ä¸€è‡´æ€§

### 8. ä¼˜åŒ–çš„è„šæœ¬å‘½ä»¤

**æ›´æ–°**: `package.json` ä¸­çš„ scripts éƒ¨åˆ†

**æ–°å¢å‘½ä»¤**:

```json
{
  "dev": "tsx tools/scripts/workflow/dev-workflow.ts dev",
  "dev:packages": "tsx tools/scripts/workflow/dev-workflow.ts dev --packages",
  "dev:test": "tsx tools/scripts/workflow/dev-workflow.ts dev --test",
  "build:prod": "tsx tools/scripts/workflow/dev-workflow.ts build",
  "release:patch": "tsx tools/scripts/release/unified-release.ts patch",
  "release:minor": "tsx tools/scripts/release/unified-release.ts minor",
  "release:major": "tsx tools/scripts/release/unified-release.ts major",
  "release:beta": "tsx tools/scripts/release/unified-release.ts prerelease --tag beta",
  "tools:standardize": "tsx tools/scripts/standardize/package-standardizer.ts",
  "commit": "tsx tools/scripts/git/commit-helper.ts"
}
```

## ğŸ“Š ä¼˜åŒ–æ•ˆæœ

### å¼€å‘æ•ˆç‡æå‡

- **ç¯å¢ƒå¯åŠ¨**: ä»å¤šæ­¥éª¤æ‰‹åŠ¨æ“ä½œç®€åŒ–ä¸ºä¸€é”®å¯åŠ¨ (`pnpm dev`)
- **åŒ…åˆ›å»º**: ä»æ‰‹åŠ¨é…ç½®ç®€åŒ–ä¸ºæ¨¡æ¿ç”Ÿæˆ (èŠ‚çœ 80% æ—¶é—´)
- **ä»£ç æäº¤**: ä»æ‰‹åŠ¨ç¼–å†™æäº¤ä¿¡æ¯åˆ°äº¤äº’å¼ç”Ÿæˆ (æé«˜è§„èŒƒæ€§)
- **ç‰ˆæœ¬å‘å¸ƒ**: ä»å¤šæ­¥éª¤æ‰‹åŠ¨æ“ä½œåˆ°ä¸€é”®å‘å¸ƒ (å‡å°‘å‡ºé”™ç‡)

### ä»£ç è´¨é‡ä¿éšœ

- **ç»Ÿä¸€é…ç½®**: æ‰€æœ‰åŒ…ä½¿ç”¨ç›¸åŒçš„æ„å»ºã€æµ‹è¯•ã€ä»£ç æ£€æŸ¥é…ç½®
- **è‡ªåŠ¨æ£€æŸ¥**: å¼€å‘å’Œå‘å¸ƒæµç¨‹ä¸­è‡ªåŠ¨è¿›è¡Œä»£ç æ£€æŸ¥å’Œæµ‹è¯•
- **ç‰ˆæœ¬ç®¡ç†**: ä½¿ç”¨ changeset ç¡®ä¿ç‰ˆæœ¬å’Œå˜æ›´æ—¥å¿—çš„ä¸€è‡´æ€§

### ç»´æŠ¤æˆæœ¬é™ä½

- **é…ç½®åŒæ­¥**: ä¸€é”®æ ‡å‡†åŒ–æ‰€æœ‰åŒ…é…ç½®ï¼Œé¿å…é…ç½®æ¼‚ç§»
- **å·¥å…·å¤ç”¨**: ç»Ÿä¸€çš„æ„å»ºå’Œå¼€å‘å·¥å…·ï¼Œå‡å°‘é‡å¤é…ç½®
- **æ–‡æ¡£å®Œå–„**: æä¾›å®Œæ•´çš„å¼€å‘æŒ‡å—å’Œæœ€ä½³å®è·µ

## ğŸš€ ä½¿ç”¨æŒ‡å—

### æ—¥å¸¸å¼€å‘æµç¨‹

1. **å¯åŠ¨å¼€å‘ç¯å¢ƒ**

   ```bash
   pnpm dev
   ```

2. **åˆ›å»ºæ–°åŒ…** (å¦‚éœ€è¦)

   ```bash
   tsx tools/scripts/package/package-template.ts <name> <description>
   ```

3. **å¼€å‘å’Œæµ‹è¯•**

   ```bash
   # ä»£ç ä¼šè‡ªåŠ¨ç›‘å¬å’Œæ„å»º
   # è¿è¡Œæµ‹è¯•
   pnpm test:run
   ```

4. **æäº¤ä»£ç **

   ```bash
   pnpm commit
   ```

5. **å‘å¸ƒç‰ˆæœ¬**
   ```bash
   pnpm release:patch  # æˆ–å…¶ä»–ç‰ˆæœ¬ç±»å‹
   ```

### ç»´æŠ¤ä»»åŠ¡

1. **æ ‡å‡†åŒ–åŒ…é…ç½®** (å®šæœŸæ‰§è¡Œ)

   ```bash
   pnpm tools:standardize
   ```

2. **æ£€æŸ¥åŒ…å¤§å°**

   ```bash
   pnpm size-check
   ```

3. **æ›´æ–°ä¾èµ–** (å®šæœŸæ‰§è¡Œ)
   ```bash
   pnpm update
   pnpm tools:standardize  # åŒæ­¥æ–°çš„ä¾èµ–ç‰ˆæœ¬
   ```

## ğŸ”® åç»­ä¼˜åŒ–å»ºè®®

### çŸ­æœŸä¼˜åŒ– (1-2 å‘¨)

1. **CI/CD é›†æˆ**
   - é›†æˆ GitHub Actions è‡ªåŠ¨åŒ–æµ‹è¯•å’Œå‘å¸ƒ
   - æ·»åŠ è‡ªåŠ¨åŒ–çš„åŒ…å¤§å°æ£€æŸ¥å’Œæ€§èƒ½æµ‹è¯•

2. **æ–‡æ¡£è‡ªåŠ¨åŒ–**
   - è‡ªåŠ¨ç”Ÿæˆ API æ–‡æ¡£
   - é›†æˆæ–‡æ¡£ç½‘ç«™çš„è‡ªåŠ¨éƒ¨ç½²

### ä¸­æœŸä¼˜åŒ– (1-2 æœˆ)

1. **æ€§èƒ½ç›‘æ§**
   - æ·»åŠ æ„å»ºæ—¶é—´å’ŒåŒ…å¤§å°çš„è¶‹åŠ¿ç›‘æ§
   - é›†æˆæ€§èƒ½å›å½’æ£€æµ‹

2. **å¼€å‘ä½“éªŒä¼˜åŒ–**
   - æ·»åŠ  VS Code æ‰©å±•å’Œé…ç½®
   - é›†æˆçƒ­é‡è½½å’Œå¿«é€Ÿåé¦ˆæœºåˆ¶

### é•¿æœŸä¼˜åŒ– (3-6 æœˆ)

1. **å¾®å‰ç«¯æ”¯æŒ**
   - æ”¯æŒåŒ…çš„ç‹¬ç«‹éƒ¨ç½²å’Œè¿è¡Œæ—¶åŠ è½½
   - æ·»åŠ åŒ…ä¹‹é—´çš„ä¾èµ–ç®¡ç†å’Œç‰ˆæœ¬å…¼å®¹æ€§æ£€æŸ¥

2. **ç”Ÿæ€ç³»ç»Ÿæ‰©å±•**
   - æ”¯æŒæ’ä»¶å¸‚åœºå’Œç¬¬ä¸‰æ–¹åŒ…é›†æˆ
   - æ·»åŠ åŒ…çš„ä½¿ç”¨ç»Ÿè®¡å’Œåé¦ˆæœºåˆ¶

## ğŸ“ æ€»ç»“

é€šè¿‡è¿™æ¬¡å…¨é¢ä¼˜åŒ–ï¼ŒLDesign é¡¹ç›®ç°åœ¨å…·å¤‡äº†ï¼š

- **ç»Ÿä¸€æ€§**: æ‰€æœ‰åŒ…ä½¿ç”¨ç›¸åŒçš„é…ç½®å’Œè§„èŒƒ
- **è‡ªåŠ¨åŒ–**: å¼€å‘ã€æ„å»ºã€æµ‹è¯•ã€å‘å¸ƒæµç¨‹å…¨é¢è‡ªåŠ¨åŒ–
- **å¯ç»´æŠ¤æ€§**: å·¥å…·åŒ–çš„é…ç½®ç®¡ç†å’Œæ ‡å‡†åŒ–æµç¨‹
- **å¼€å‘å‹å¥½**: ç®€åŒ–çš„å‘½ä»¤å’Œäº¤äº’å¼å·¥å…·
- **è´¨é‡ä¿éšœ**: å®Œæ•´çš„æ£€æŸ¥å’Œæµ‹è¯•æµç¨‹

è¿™äº›ä¼˜åŒ–å°†æ˜¾è‘—æé«˜å¼€å‘æ•ˆç‡ï¼Œé™ä½ç»´æŠ¤æˆæœ¬ï¼Œå¹¶ç¡®ä¿é¡¹ç›®çš„é•¿æœŸå¯æŒç»­å‘å±•ã€‚
