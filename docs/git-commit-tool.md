# Git 自动提交工具 🚀

一个智能的 Git 提交工具，让你告别复杂的提交历史，享受丝滑的代码提交体验！

## ✨ 特性

- 🔄 **智能 Rebase**: 自动使用 `git pull --rebase` 保持线性提交历史
- 📁 **一键添加**: 自动添加所有更改文件，无需手动 `git add`
- 💬 **交互式提交**: 友好的命令行界面，只需输入提交信息
- 🚀 **自动推送**: 提交后自动推送到远程仓库
- 🛡️ **冲突处理**: 智能检测和提示冲突解决
- 📊 **状态展示**: 清晰显示当前 Git 状态
- 🔗 **上游分支**: 自动设置上游分支（如果需要）

## 🎯 解决的问题

### 之前的痛点 😫

```
feat: 添加项目文档 swimly
│
○ Merge branch 'master' of https://git.c...
├─○ feat(router): 新增路由核心功能与示例...
├─○ feat: 添加设备检测库核心功能与示例...
├─○ feat: 完善crypto swimly
│
○ Merge branch 'master' of https://git.c...
```

### 现在的效果 ✨

```
○ feat: 添加项目文档
○ feat(router): 新增路由核心功能与示例
○ feat: 添加设备检测库核心功能与示例
○ feat: 完善crypto功能
○ feat: 优化color模块
```

## 🚀 快速开始

### 安装依赖

工具已经集成在项目中，无需额外安装！

### 使用方法

#### 方式一：使用 npm 脚本（推荐）

```bash
# 完整命令
pnpm run commit

# 或者使用简短别名
pnpm run c
```

#### 方式二：直接执行

```bash
tsx tools/git-commit.ts
```

## 📖 使用流程

### 1. 启动工具

```bash
pnpm run c
```

### 2. 查看状态

工具会自动显示当前 Git 状态：

```
📊 当前 Git 状态:
   分支: main
   有未提交更改: 是
   有未推送提交: 否
```

### 3. 自动处理

- 🔄 自动拉取最新代码并 rebase
- 📁 自动添加所有更改文件

### 4. 输入提交信息

```
📝 请输入提交信息: feat: 添加新功能
```

### 5. 自动推送

- 💾 自动提交更改
- 🚀 自动推送到远程仓库

## 🎨 使用场景

### 场景一：日常开发提交

```bash
# 修改了一些文件后
pnpm run c
# 输入: fix: 修复登录bug
# 完成！
```

### 场景二：有未推送的提交

```bash
pnpm run c
# 工具检测到未推送的提交
🚀 发现未推送的提交，是否直接推送？ (y/N): y
# 直接推送，无需重新提交
```

### 场景三：工作区干净

```bash
pnpm run c
✅ 工作区干净，无需提交
```

## 🛡️ 安全特性

### 冲突检测

当遇到 Git 冲突时，工具会：

1. 🚨 提示冲突存在
2. 💡 建议手动解决冲突
3. 🔄 等待用户解决后重新运行

### 分支保护

- 🔍 自动检测当前分支
- 🔗 智能处理上游分支设置
- 📡 安全的远程推送

## 🎯 最佳实践

### 提交信息规范

建议使用 [Conventional Commits](https://www.conventionalcommits.org/) 规范：

```bash
feat: 添加新功能
fix: 修复bug
docs: 更新文档
style: 代码格式调整
refactor: 重构代码
test: 添加测试
chore: 构建过程或辅助工具的变动
```

### 工作流程建议

1. 🔄 **频繁提交**: 小步快跑，频繁提交
2. 📝 **清晰描述**: 提交信息要清晰明了
3. 🧪 **测试先行**: 提交前确保代码通过测试
4. 📚 **文档同步**: 功能变更时同步更新文档

## 🔧 高级配置

### 自定义 Git 配置

```bash
# 设置默认的 pull 策略为 rebase
git config --global pull.rebase true

# 设置默认的 push 策略
git config --global push.default simple
```

### 团队协作建议

1. 🤝 **统一工具**: 团队成员都使用此工具
2. 📋 **规范约定**: 制定统一的提交信息规范
3. 🔄 **定期同步**: 定期拉取最新代码
4. 🛡️ **分支保护**: 在远程仓库设置分支保护规则

## 🐛 故障排除

### 常见问题

#### Q: 提示"不是 Git 仓库"

**A**: 确保在 Git 仓库根目录下运行命令

#### Q: 推送失败

**A**: 检查网络连接和远程仓库权限

#### Q: Rebase 冲突

**A**: 手动解决冲突后运行 `git rebase --continue`，然后重新运行工具

#### Q: 上游分支未设置

**A**: 工具会自动提示并帮助设置上游分支

### 获取帮助

如果遇到问题，可以：

1. 📖 查看此文档
2. 🔍 检查 Git 状态：`git status`
3. 📝 查看 Git 日志：`git log --oneline -10`
4. 🆘 寻求团队帮助

## 🎉 总结

这个 Git 自动提交工具让你：

- ⚡ **提升效率**: 一个命令完成所有操作
- 🎯 **保持专注**: 专注于代码，而不是 Git 操作
- 📈 **改善历史**: 保持清晰的提交历史
- 🤝 **团队协作**: 减少合并冲突和复杂历史

现在就开始使用吧！让代码提交变得简单而优雅！ ✨
