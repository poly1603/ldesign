<!--
  åŸºç¡€å›¾è¡¨è§†å›¾ - å±•ç¤ºæŠ˜çº¿å›¾ã€æŸ±çŠ¶å›¾ã€é¥¼å›¾ç­‰åŸºç¡€å›¾è¡¨ç±»å‹
-->

<template>
  <div class="basic-charts-view">
    <!-- é¡µé¢æ ‡é¢˜ -->
    <div class="page-header">
      <h1>ğŸ“ˆ åŸºç¡€å›¾è¡¨</h1>
      <p>å±•ç¤ºæŠ˜çº¿å›¾ã€æŸ±çŠ¶å›¾ã€é¥¼å›¾ç­‰å¸¸ç”¨çš„åŸºç¡€å›¾è¡¨ç±»å‹åŠå…¶é…ç½®é€‰é¡¹</p>
    </div>

    <!-- æŠ˜çº¿å›¾éƒ¨åˆ† -->
    <section class="chart-section">
      <h2 class="section-title">ğŸ“Š æŠ˜çº¿å›¾ (Line Chart)</h2>
      
      <div class="grid grid--cols-2">
        <!-- åŸºç¡€æŠ˜çº¿å›¾ -->
        <div class="chart-demo">
          <div class="chart-demo__header">
            <h3>åŸºç¡€æŠ˜çº¿å›¾</h3>
            <div class="chart-demo__actions">
              <button class="btn btn--text" @click="toggleCode('basicLine')">
                {{ showCode.basicLine ? 'éšè—ä»£ç ' : 'æŸ¥çœ‹ä»£ç ' }}
              </button>
            </div>
          </div>
          
          <div class="chart-demo__chart">
            <LLineChart
              :data="lineChartData.basic"
              :config="lineChartConfig.basic"
              width="100%"
              height="300px"
            />
          </div>
          
          <div v-if="showCode.basicLine" class="chart-demo__code">
            <div class="code-block">
              <div class="code-block__header">
                <span class="language">vue</span>
                <button class="copy-btn" @click="copyCode(basicLineCode)">å¤åˆ¶</button>
              </div>
              <pre><code>{{ basicLineCode }}</code></pre>
            </div>
          </div>
        </div>

        <!-- å¹³æ»‘æŠ˜çº¿å›¾ -->
        <div class="chart-demo">
          <div class="chart-demo__header">
            <h3>å¹³æ»‘æŠ˜çº¿å›¾</h3>
            <div class="chart-demo__actions">
              <button class="btn btn--text" @click="toggleCode('smoothLine')">
                {{ showCode.smoothLine ? 'éšè—ä»£ç ' : 'æŸ¥çœ‹ä»£ç ' }}
              </button>
            </div>
          </div>
          
          <div class="chart-demo__chart">
            <LLineChart
              :data="lineChartData.smooth"
              :config="lineChartConfig.smooth"
              width="100%"
              height="300px"
            />
          </div>
          
          <div v-if="showCode.smoothLine" class="chart-demo__code">
            <div class="code-block">
              <div class="code-block__header">
                <span class="language">vue</span>
                <button class="copy-btn" @click="copyCode(smoothLineCode)">å¤åˆ¶</button>
              </div>
              <pre><code>{{ smoothLineCode }}</code></pre>
            </div>
          </div>
        </div>

        <!-- é¢ç§¯å›¾ -->
        <div class="chart-demo">
          <div class="chart-demo__header">
            <h3>é¢ç§¯å›¾</h3>
            <div class="chart-demo__actions">
              <button class="btn btn--text" @click="toggleCode('areaLine')">
                {{ showCode.areaLine ? 'éšè—ä»£ç ' : 'æŸ¥çœ‹ä»£ç ' }}
              </button>
            </div>
          </div>
          
          <div class="chart-demo__chart">
            <LLineChart
              :data="lineChartData.area"
              :config="lineChartConfig.area"
              width="100%"
              height="300px"
            />
          </div>
          
          <div v-if="showCode.areaLine" class="chart-demo__code">
            <div class="code-block">
              <div class="code-block__header">
                <span class="language">vue</span>
                <button class="copy-btn" @click="copyCode(areaLineCode)">å¤åˆ¶</button>
              </div>
              <pre><code>{{ areaLineCode }}</code></pre>
            </div>
          </div>
        </div>

        <!-- å †å æŠ˜çº¿å›¾ -->
        <div class="chart-demo">
          <div class="chart-demo__header">
            <h3>å †å æŠ˜çº¿å›¾</h3>
            <div class="chart-demo__actions">
              <button class="btn btn--text" @click="toggleCode('stackLine')">
                {{ showCode.stackLine ? 'éšè—ä»£ç ' : 'æŸ¥çœ‹ä»£ç ' }}
              </button>
            </div>
          </div>
          
          <div class="chart-demo__chart">
            <LLineChart
              :data="lineChartData.stack"
              :config="lineChartConfig.stack"
              width="100%"
              height="300px"
            />
          </div>
          
          <div v-if="showCode.stackLine" class="chart-demo__code">
            <div class="code-block">
              <div class="code-block__header">
                <span class="language">vue</span>
                <button class="copy-btn" @click="copyCode(stackLineCode)">å¤åˆ¶</button>
              </div>
              <pre><code>{{ stackLineCode }}</code></pre>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- æŸ±çŠ¶å›¾éƒ¨åˆ† -->
    <section class="chart-section">
      <h2 class="section-title">ğŸ“Š æŸ±çŠ¶å›¾ (Bar Chart)</h2>
      
      <div class="grid grid--cols-2">
        <!-- åŸºç¡€æŸ±çŠ¶å›¾ -->
        <div class="chart-demo">
          <div class="chart-demo__header">
            <h3>åŸºç¡€æŸ±çŠ¶å›¾</h3>
            <div class="chart-demo__actions">
              <button class="btn btn--text" @click="toggleCode('basicBar')">
                {{ showCode.basicBar ? 'éšè—ä»£ç ' : 'æŸ¥çœ‹ä»£ç ' }}
              </button>
            </div>
          </div>
          
          <div class="chart-demo__chart">
            <LBarChart
              :data="barChartData.basic"
              :config="barChartConfig.basic"
              width="100%"
              height="300px"
            />
          </div>
          
          <div v-if="showCode.basicBar" class="chart-demo__code">
            <div class="code-block">
              <div class="code-block__header">
                <span class="language">vue</span>
                <button class="copy-btn" @click="copyCode(basicBarCode)">å¤åˆ¶</button>
              </div>
              <pre><code>{{ basicBarCode }}</code></pre>
            </div>
          </div>
        </div>

        <!-- æ°´å¹³æŸ±çŠ¶å›¾ -->
        <div class="chart-demo">
          <div class="chart-demo__header">
            <h3>æ°´å¹³æŸ±çŠ¶å›¾</h3>
            <div class="chart-demo__actions">
              <button class="btn btn--text" @click="toggleCode('horizontalBar')">
                {{ showCode.horizontalBar ? 'éšè—ä»£ç ' : 'æŸ¥çœ‹ä»£ç ' }}
              </button>
            </div>
          </div>
          
          <div class="chart-demo__chart">
            <LBarChart
              :data="barChartData.horizontal"
              :config="barChartConfig.horizontal"
              width="100%"
              height="300px"
            />
          </div>
          
          <div v-if="showCode.horizontalBar" class="chart-demo__code">
            <div class="code-block">
              <div class="code-block__header">
                <span class="language">vue</span>
                <button class="copy-btn" @click="copyCode(horizontalBarCode)">å¤åˆ¶</button>
              </div>
              <pre><code>{{ horizontalBarCode }}</code></pre>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- é¥¼å›¾éƒ¨åˆ† -->
    <section class="chart-section">
      <h2 class="section-title">ğŸ¥§ é¥¼å›¾ (Pie Chart)</h2>
      
      <div class="grid grid--cols-2">
        <!-- åŸºç¡€é¥¼å›¾ -->
        <div class="chart-demo">
          <div class="chart-demo__header">
            <h3>åŸºç¡€é¥¼å›¾</h3>
            <div class="chart-demo__actions">
              <button class="btn btn--text" @click="toggleCode('basicPie')">
                {{ showCode.basicPie ? 'éšè—ä»£ç ' : 'æŸ¥çœ‹ä»£ç ' }}
              </button>
            </div>
          </div>
          
          <div class="chart-demo__chart">
            <LPieChart
              :data="pieChartData.basic"
              :config="pieChartConfig.basic"
              width="100%"
              height="300px"
            />
          </div>
          
          <div v-if="showCode.basicPie" class="chart-demo__code">
            <div class="code-block">
              <div class="code-block__header">
                <span class="language">vue</span>
                <button class="copy-btn" @click="copyCode(basicPieCode)">å¤åˆ¶</button>
              </div>
              <pre><code>{{ basicPieCode }}</code></pre>
            </div>
          </div>
        </div>

        <!-- ç¯å½¢å›¾ -->
        <div class="chart-demo">
          <div class="chart-demo__header">
            <h3>ç¯å½¢å›¾</h3>
            <div class="chart-demo__actions">
              <button class="btn btn--text" @click="toggleCode('donutPie')">
                {{ showCode.donutPie ? 'éšè—ä»£ç ' : 'æŸ¥çœ‹ä»£ç ' }}
              </button>
            </div>
          </div>
          
          <div class="chart-demo__chart">
            <LPieChart
              :data="pieChartData.donut"
              :config="pieChartConfig.donut"
              width="100%"
              height="300px"
            />
          </div>
          
          <div v-if="showCode.donutPie" class="chart-demo__code">
            <div class="code-block">
              <div class="code-block__header">
                <span class="language">vue</span>
                <button class="copy-btn" @click="copyCode(donutPieCode)">å¤åˆ¶</button>
              </div>
              <pre><code>{{ donutPieCode }}</code></pre>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
</template>

<script setup lang="ts">
import { ref, reactive } from 'vue'
import { LLineChart, LBarChart, LPieChart } from '@ldesign/chart/vue'

/**
 * ä»£ç æ˜¾ç¤ºçŠ¶æ€
 */
const showCode = reactive({
  basicLine: false,
  smoothLine: false,
  areaLine: false,
  stackLine: false,
  basicBar: false,
  horizontalBar: false,
  basicPie: false,
  donutPie: false
})

/**
 * åˆ‡æ¢ä»£ç æ˜¾ç¤º
 */
const toggleCode = (key: keyof typeof showCode) => {
  showCode[key] = !showCode[key]
}

/**
 * å¤åˆ¶ä»£ç 
 */
const copyCode = async (code: string) => {
  try {
    await navigator.clipboard.writeText(code)
    console.log('ä»£ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿')
  } catch (error) {
    console.error('å¤åˆ¶å¤±è´¥:', error)
  }
}

/**
 * æŠ˜çº¿å›¾æ•°æ®
 */
const lineChartData = {
  basic: [
    { name: '1æœˆ', value: 120 },
    { name: '2æœˆ', value: 200 },
    { name: '3æœˆ', value: 150 },
    { name: '4æœˆ', value: 300 },
    { name: '5æœˆ', value: 250 },
    { name: '6æœˆ', value: 400 }
  ],
  smooth: [
    { name: '1æœˆ', value: 120 },
    { name: '2æœˆ', value: 200 },
    { name: '3æœˆ', value: 150 },
    { name: '4æœˆ', value: 300 },
    { name: '5æœˆ', value: 250 },
    { name: '6æœˆ', value: 400 }
  ],
  area: [
    { name: '1æœˆ', value: 120 },
    { name: '2æœˆ', value: 200 },
    { name: '3æœˆ', value: 150 },
    { name: '4æœˆ', value: 300 },
    { name: '5æœˆ', value: 250 },
    { name: '6æœˆ', value: 400 }
  ],
  stack: {
    categories: ['1æœˆ', '2æœˆ', '3æœˆ', '4æœˆ', '5æœˆ', '6æœˆ'],
    series: [
      { name: 'äº§å“A', data: [120, 200, 150, 300, 250, 400] },
      { name: 'äº§å“B', data: [80, 150, 100, 200, 180, 300] },
      { name: 'äº§å“C', data: [60, 100, 80, 150, 120, 200] }
    ]
  }
}

/**
 * æŠ˜çº¿å›¾é…ç½®
 */
const lineChartConfig = {
  basic: {
    title: 'åŸºç¡€æŠ˜çº¿å›¾ç¤ºä¾‹',
    showSymbol: true
  },
  smooth: {
    title: 'å¹³æ»‘æŠ˜çº¿å›¾ç¤ºä¾‹',
    smooth: true,
    showSymbol: false
  },
  area: {
    title: 'é¢ç§¯å›¾ç¤ºä¾‹',
    area: true,
    smooth: true,
    showSymbol: false
  },
  stack: {
    title: 'å †å æŠ˜çº¿å›¾ç¤ºä¾‹',
    stack: true,
    area: true
  }
}

/**
 * æŸ±çŠ¶å›¾æ•°æ®
 */
const barChartData = {
  basic: [
    { name: 'äº§å“A', value: 320 },
    { name: 'äº§å“B', value: 240 },
    { name: 'äº§å“C', value: 180 },
    { name: 'äº§å“D', value: 400 },
    { name: 'äº§å“E', value: 280 }
  ],
  horizontal: [
    { name: 'äº§å“A', value: 320 },
    { name: 'äº§å“B', value: 240 },
    { name: 'äº§å“C', value: 180 },
    { name: 'äº§å“D', value: 400 },
    { name: 'äº§å“E', value: 280 }
  ]
}

/**
 * æŸ±çŠ¶å›¾é…ç½®
 */
const barChartConfig = {
  basic: {
    title: 'åŸºç¡€æŸ±çŠ¶å›¾ç¤ºä¾‹'
  },
  horizontal: {
    title: 'æ°´å¹³æŸ±çŠ¶å›¾ç¤ºä¾‹',
    horizontal: true
  }
}

/**
 * é¥¼å›¾æ•°æ®
 */
const pieChartData = {
  basic: [
    { name: 'ç›´æ¥è®¿é—®', value: 335 },
    { name: 'é‚®ä»¶è¥é”€', value: 310 },
    { name: 'è”ç›Ÿå¹¿å‘Š', value: 234 },
    { name: 'è§†é¢‘å¹¿å‘Š', value: 135 },
    { name: 'æœç´¢å¼•æ“', value: 1548 }
  ],
  donut: [
    { name: 'ç›´æ¥è®¿é—®', value: 335 },
    { name: 'é‚®ä»¶è¥é”€', value: 310 },
    { name: 'è”ç›Ÿå¹¿å‘Š', value: 234 },
    { name: 'è§†é¢‘å¹¿å‘Š', value: 135 },
    { name: 'æœç´¢å¼•æ“', value: 1548 }
  ]
}

/**
 * é¥¼å›¾é…ç½®
 */
const pieChartConfig = {
  basic: {
    title: 'åŸºç¡€é¥¼å›¾ç¤ºä¾‹'
  },
  donut: {
    title: 'ç¯å½¢å›¾ç¤ºä¾‹',
    donut: true,
    innerRadius: '40%'
  }
}

/**
 * ä»£ç ç¤ºä¾‹
 */
const basicLineCode = `<template>
  <LLineChart
    :data="lineData"
    :config="{ title: 'åŸºç¡€æŠ˜çº¿å›¾ç¤ºä¾‹', showSymbol: true }"
    width="100%"
    height="300px"
  />
</template>

<script setup>
import { LLineChart } from '@ldesign/chart/vue'

const lineData = [
  { name: '1æœˆ', value: 120 },
  { name: '2æœˆ', value: 200 },
  { name: '3æœˆ', value: 150 },
  { name: '4æœˆ', value: 300 },
  { name: '5æœˆ', value: 250 },
  { name: '6æœˆ', value: 400 }
]
</script>`

const smoothLineCode = `<template>
  <LLineChart
    :data="lineData"
    :config="{
      title: 'å¹³æ»‘æŠ˜çº¿å›¾ç¤ºä¾‹',
      smooth: true,
      showSymbol: false
    }"
    width="100%"
    height="300px"
  />
</template>`

const areaLineCode = `<template>
  <LLineChart
    :data="lineData"
    :config="{
      title: 'é¢ç§¯å›¾ç¤ºä¾‹',
      area: true,
      smooth: true,
      showSymbol: false
    }"
    width="100%"
    height="300px"
  />
</template>`

const stackLineCode = `<template>
  <LLineChart
    :data="stackData"
    :config="{
      title: 'å †å æŠ˜çº¿å›¾ç¤ºä¾‹',
      stack: true,
      area: true
    }"
    width="100%"
    height="300px"
  />
</template>

<script setup>
const stackData = {
  categories: ['1æœˆ', '2æœˆ', '3æœˆ', '4æœˆ', '5æœˆ', '6æœˆ'],
  series: [
    { name: 'äº§å“A', data: [120, 200, 150, 300, 250, 400] },
    { name: 'äº§å“B', data: [80, 150, 100, 200, 180, 300] },
    { name: 'äº§å“C', data: [60, 100, 80, 150, 120, 200] }
  ]
}
</script>`

const basicBarCode = `<template>
  <LBarChart
    :data="barData"
    :config="{ title: 'åŸºç¡€æŸ±çŠ¶å›¾ç¤ºä¾‹' }"
    width="100%"
    height="300px"
  />
</template>

<script setup>
import { LBarChart } from '@ldesign/chart/vue'

const barData = [
  { name: 'äº§å“A', value: 320 },
  { name: 'äº§å“B', value: 240 },
  { name: 'äº§å“C', value: 180 },
  { name: 'äº§å“D', value: 400 },
  { name: 'äº§å“E', value: 280 }
]
</script>`

const horizontalBarCode = `<template>
  <LBarChart
    :data="barData"
    :config="{
      title: 'æ°´å¹³æŸ±çŠ¶å›¾ç¤ºä¾‹',
      horizontal: true
    }"
    width="100%"
    height="300px"
  />
</template>`

const basicPieCode = `<template>
  <LPieChart
    :data="pieData"
    :config="{ title: 'åŸºç¡€é¥¼å›¾ç¤ºä¾‹' }"
    width="100%"
    height="300px"
  />
</template>

<script setup>
import { LPieChart } from '@ldesign/chart/vue'

const pieData = [
  { name: 'ç›´æ¥è®¿é—®', value: 335 },
  { name: 'é‚®ä»¶è¥é”€', value: 310 },
  { name: 'è”ç›Ÿå¹¿å‘Š', value: 234 },
  { name: 'è§†é¢‘å¹¿å‘Š', value: 135 },
  { name: 'æœç´¢å¼•æ“', value: 1548 }
]
</script>`

const donutPieCode = `<template>
  <LPieChart
    :data="pieData"
    :config="{
      title: 'ç¯å½¢å›¾ç¤ºä¾‹',
      donut: true,
      innerRadius: '40%'
    }"
    width="100%"
    height="300px"
  />
</template>`
</script>

<style lang="less" scoped>
.basic-charts-view {
  padding: var(--ls-padding-base) 0;
}

/* é¡µé¢å¤´éƒ¨ */
.page-header {
  text-align: center;
  margin-bottom: var(--ls-margin-xl);

  h1 {
    font-size: var(--ls-font-size-h1);
    font-weight: 600;
    color: var(--ldesign-text-color-primary);
    margin-bottom: var(--ls-margin-sm);
  }

  p {
    font-size: var(--ls-font-size-base);
    color: var(--ldesign-text-color-secondary);
    max-width: 600px;
    margin: 0 auto;
    line-height: 1.6;
  }
}

/* å›¾è¡¨åŒºåŸŸ */
.chart-section {
  margin-bottom: var(--ls-margin-xl);

  .section-title {
    font-size: var(--ls-font-size-h2);
    font-weight: 600;
    color: var(--ldesign-text-color-primary);
    margin-bottom: var(--ls-margin-lg);
    padding-bottom: var(--ls-padding-sm);
    border-bottom: 2px solid var(--ldesign-brand-color);
    display: inline-block;
  }
}

/* å›¾è¡¨æ¼”ç¤ºå¡ç‰‡ */
.chart-demo {
  background: var(--ldesign-bg-color-container);
  border: 1px solid var(--ldesign-border-color);
  border-radius: var(--ls-border-radius-base);
  box-shadow: var(--ldesign-shadow-1);
  overflow: hidden;
  transition: all 0.3s ease;

  &:hover {
    box-shadow: var(--ldesign-shadow-2);
    transform: translateY(-2px);
  }

  &__header {
    padding: var(--ls-padding-base);
    border-bottom: 1px solid var(--ldesign-border-color);
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: var(--ldesign-bg-color-component);

    h3 {
      margin: 0;
      font-size: var(--ls-font-size-lg);
      font-weight: 500;
      color: var(--ldesign-text-color-primary);
    }
  }

  &__actions {
    display: flex;
    gap: var(--ls-spacing-sm);
  }

  &__chart {
    padding: var(--ls-padding-base);
    background: var(--ldesign-bg-color-container);
  }

  &__code {
    border-top: 1px solid var(--ldesign-border-color);
    background: var(--ldesign-bg-color-component);
  }
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 768px) {
  .grid--cols-2 {
    grid-template-columns: 1fr;
  }

  .chart-demo {
    &__header {
      flex-direction: column;
      gap: var(--ls-spacing-sm);
      align-items: flex-start;
    }

    &__actions {
      width: 100%;
      justify-content: flex-end;
    }
  }
}
</style>
