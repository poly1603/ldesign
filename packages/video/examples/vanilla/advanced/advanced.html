<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>é«˜çº§åŠŸèƒ½æ¼”ç¤º - LDesign Video Player</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #f5f5f5;
      color: #333;
      line-height: 1.6;
    }

    .header {
      background: linear-gradient(135deg, #722ED1, #9254DE);
      color: white;
      padding: 1.5rem 0;
      text-align: center;
    }

    .header h1 {
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }

    .nav {
      background: white;
      padding: 1rem 0;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .nav-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 2rem;
      display: flex;
      align-items: center;
      gap: 2rem;
    }

    .nav a {
      color: #666;
      text-decoration: none;
      padding: 0.5rem 1rem;
      border-radius: 4px;
      transition: all 0.3s ease;
    }

    .nav a:hover,
    .nav a.active {
      background: #722ED1;
      color: white;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem;
    }

    .demo-section {
      background: white;
      border-radius: 12px;
      padding: 2rem;
      margin-bottom: 2rem;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    }

    .demo-section h2 {
      color: #722ED1;
      margin-bottom: 1rem;
      font-size: 1.5rem;
    }

    .demo-section p {
      color: #666;
      margin-bottom: 1.5rem;
    }

    .player-container {
      width: 100%;
      max-width: 800px;
      margin: 0 auto 2rem;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
    }

    .feature-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;
      margin-top: 2rem;
    }

    .feature-card {
      background: #f8f9fa;
      border-radius: 8px;
      padding: 1.5rem;
      border-left: 4px solid #722ED1;
    }

    .feature-card h3 {
      color: #333;
      margin-bottom: 1rem;
      font-size: 1.2rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .feature-card .icon {
      font-size: 1.5rem;
    }

    .hotkey-list {
      background: #e9ecef;
      border-radius: 4px;
      padding: 1rem;
      margin-top: 1rem;
    }

    .hotkey-list h4 {
      color: #333;
      margin-bottom: 0.8rem;
      font-size: 1rem;
    }

    .hotkey-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.5rem 0;
      border-bottom: 1px solid #dee2e6;
    }

    .hotkey-item:last-child {
      border-bottom: none;
    }

    .hotkey-key {
      background: #6c757d;
      color: white;
      padding: 0.2rem 0.5rem;
      border-radius: 3px;
      font-family: monospace;
      font-size: 0.8rem;
    }

    .gesture-demo {
      background: #fff3cd;
      border: 1px solid #ffeaa7;
      border-radius: 4px;
      padding: 1rem;
      margin-top: 1rem;
    }

    .gesture-demo h4 {
      color: #856404;
      margin-bottom: 0.8rem;
    }

    .gesture-item {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 0.5rem 0;
    }

    .gesture-icon {
      font-size: 1.5rem;
      width: 2rem;
      text-align: center;
    }

    .performance-monitor {
      background: #d1ecf1;
      border: 1px solid #bee5eb;
      border-radius: 4px;
      padding: 1rem;
      margin-top: 1rem;
    }

    .performance-monitor h4 {
      color: #0c5460;
      margin-bottom: 0.8rem;
    }

    .performance-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 1rem;
    }

    .stat-item {
      text-align: center;
    }

    .stat-value {
      font-size: 1.5rem;
      font-weight: bold;
      color: #0c5460;
    }

    .stat-label {
      font-size: 0.8rem;
      color: #6c757d;
    }

    .controls-panel {
      background: #f8f9fa;
      padding: 1.5rem;
      border-radius: 8px;
      margin-top: 1rem;
    }

    .controls-panel h3 {
      color: #333;
      margin-bottom: 1rem;
      font-size: 1.2rem;
    }

    .control-group {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1rem;
      flex-wrap: wrap;
    }

    .control-group label {
      font-weight: 500;
      color: #555;
      min-width: 100px;
    }

    .btn {
      padding: 0.5rem 1rem;
      background: #722ED1;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      transition: background 0.3s ease;
      font-size: 0.9rem;
    }

    .btn:hover {
      background: #5e2aa7;
    }

    .btn:disabled {
      background: #ccc;
      cursor: not-allowed;
    }

    .btn-secondary {
      background: #6c757d;
    }

    .btn-secondary:hover {
      background: #545b62;
    }

    .btn-success {
      background: #28a745;
    }

    .btn-success:hover {
      background: #218838;
    }

    .btn-warning {
      background: #ffc107;
      color: #212529;
    }

    .btn-warning:hover {
      background: #e0a800;
    }

    .switch {
      position: relative;
      display: inline-block;
      width: 50px;
      height: 24px;
    }

    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      transition: .4s;
      border-radius: 24px;
    }

    .slider:before {
      position: absolute;
      content: "";
      height: 18px;
      width: 18px;
      left: 3px;
      bottom: 3px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }

    input:checked + .slider {
      background-color: #722ED1;
    }

    input:checked + .slider:before {
      transform: translateX(26px);
    }

    .code-block {
      background: #f8f9fa;
      border: 1px solid #e9ecef;
      border-radius: 4px;
      padding: 1rem;
      margin: 1rem 0;
      overflow-x: auto;
    }

    .code-block pre {
      margin: 0;
      font-family: 'Courier New', monospace;
      font-size: 0.9rem;
      color: #333;
    }

    @media (max-width: 768px) {
      .container {
        padding: 1rem;
      }
      
      .feature-grid {
        grid-template-columns: 1fr;
      }
      
      .control-group {
        flex-direction: column;
        align-items: stretch;
      }
      
      .control-group label {
        min-width: auto;
      }
      
      .performance-stats {
        grid-template-columns: repeat(2, 1fr);
      }
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>é«˜çº§åŠŸèƒ½æ¼”ç¤º</h1>
    <p>å±•ç¤º LDesign Video Player çš„é«˜çº§åŠŸèƒ½ç‰¹æ€§</p>
  </div>

  <div class="nav">
    <div class="nav-container">
      <a href="index.html">â† è¿”å›é¦–é¡µ</a>
      <a href="basic.html">åŸºç¡€åŠŸèƒ½</a>
      <a href="plugins.html">æ’ä»¶ç³»ç»Ÿ</a>
      <a href="themes.html">ä¸»é¢˜ç³»ç»Ÿ</a>
      <a href="advanced.html" class="active">é«˜çº§åŠŸèƒ½</a>
    </div>
  </div>

  <div class="container">
    <div class="demo-section">
      <h2>âš¡ é«˜çº§åŠŸèƒ½æ¼”ç¤º</h2>
      <p>è¿™ä¸ªæ’­æ”¾å™¨å®ä¾‹å¯ç”¨äº†æ‰€æœ‰é«˜çº§åŠŸèƒ½ï¼ŒåŒ…æ‹¬å¿«æ·é”®ã€æ‰‹åŠ¿æ§åˆ¶ã€æ€§èƒ½ç›‘æ§ç­‰ã€‚</p>
      
      <div id="player-advanced" class="player-container"></div>

      <div class="controls-panel">
        <h3>åŠŸèƒ½æ§åˆ¶</h3>
        
        <div class="control-group">
          <label>å¿«æ·é”®:</label>
          <label class="switch">
            <input type="checkbox" id="hotkey-toggle" checked>
            <span class="slider"></span>
          </label>
          <button id="hotkey-test" class="btn btn-secondary">æµ‹è¯•å¿«æ·é”®</button>
        </div>

        <div class="control-group">
          <label>æ‰‹åŠ¿æ§åˆ¶:</label>
          <label class="switch">
            <input type="checkbox" id="gesture-toggle" checked>
            <span class="slider"></span>
          </label>
          <button id="gesture-test" class="btn btn-secondary">æµ‹è¯•æ‰‹åŠ¿</button>
        </div>

        <div class="control-group">
          <label>æ€§èƒ½ç›‘æ§:</label>
          <label class="switch">
            <input type="checkbox" id="performance-toggle" checked>
            <span class="slider"></span>
          </label>
          <button id="performance-reset" class="btn btn-warning">é‡ç½®ç»Ÿè®¡</button>
        </div>

        <div class="control-group">
          <label>å†…å­˜ç®¡ç†:</label>
          <button id="memory-optimize" class="btn btn-success">ä¼˜åŒ–å†…å­˜</button>
          <button id="memory-gc" class="btn btn-secondary">åƒåœ¾å›æ”¶</button>
        </div>
      </div>
    </div>

    <div class="demo-section">
      <div class="feature-grid">
        <!-- å¿«æ·é”®åŠŸèƒ½ -->
        <div class="feature-card">
          <h3>
            <span class="icon">âŒ¨ï¸</span>
            é”®ç›˜å¿«æ·é”®
          </h3>
          <p>æ”¯æŒä¸°å¯Œçš„é”®ç›˜å¿«æ·é”®æ“ä½œï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚</p>
          
          <div class="hotkey-list">
            <h4>å¿«æ·é”®åˆ—è¡¨</h4>
            <div class="hotkey-item">
              <span>æ’­æ”¾/æš‚åœ</span>
              <span class="hotkey-key">Space</span>
            </div>
            <div class="hotkey-item">
              <span>å¿«é€€10ç§’</span>
              <span class="hotkey-key">â†</span>
            </div>
            <div class="hotkey-item">
              <span>å¿«è¿›10ç§’</span>
              <span class="hotkey-key">â†’</span>
            </div>
            <div class="hotkey-item">
              <span>éŸ³é‡å¢åŠ </span>
              <span class="hotkey-key">â†‘</span>
            </div>
            <div class="hotkey-item">
              <span>éŸ³é‡å‡å°‘</span>
              <span class="hotkey-key">â†“</span>
            </div>
            <div class="hotkey-item">
              <span>é™éŸ³åˆ‡æ¢</span>
              <span class="hotkey-key">M</span>
            </div>
            <div class="hotkey-item">
              <span>å…¨å±åˆ‡æ¢</span>
              <span class="hotkey-key">F</span>
            </div>
            <div class="hotkey-item">
              <span>æˆªå›¾</span>
              <span class="hotkey-key">Ctrl+S</span>
            </div>
          </div>
        </div>

        <!-- æ‰‹åŠ¿æ§åˆ¶ -->
        <div class="feature-card">
          <h3>
            <span class="icon">ğŸ‘†</span>
            è§¦æ‘¸æ‰‹åŠ¿
          </h3>
          <p>åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šæ”¯æŒç›´è§‚çš„è§¦æ‘¸æ‰‹åŠ¿æ“ä½œã€‚</p>
          
          <div class="gesture-demo">
            <h4>æ‰‹åŠ¿æ“ä½œ</h4>
            <div class="gesture-item">
              <span class="gesture-icon">ğŸ‘†</span>
              <span>å•å‡» - æ’­æ”¾/æš‚åœ</span>
            </div>
            <div class="gesture-item">
              <span class="gesture-icon">ğŸ‘†ğŸ‘†</span>
              <span>åŒå‡» - å…¨å±åˆ‡æ¢</span>
            </div>
            <div class="gesture-item">
              <span class="gesture-icon">ğŸ‘ˆ</span>
              <span>å·¦æ»‘ - å¿«é€€</span>
            </div>
            <div class="gesture-item">
              <span class="gesture-icon">ğŸ‘‰</span>
              <span>å³æ»‘ - å¿«è¿›</span>
            </div>
            <div class="gesture-item">
              <span class="gesture-icon">ğŸ‘†</span>
              <span>å³ä¾§ä¸Šä¸‹æ»‘ - éŸ³é‡</span>
            </div>
            <div class="gesture-item">
              <span class="gesture-icon">ğŸ‘†</span>
              <span>å·¦ä¾§ä¸Šä¸‹æ»‘ - äº®åº¦</span>
            </div>
          </div>
        </div>

        <!-- æ€§èƒ½ç›‘æ§ -->
        <div class="feature-card">
          <h3>
            <span class="icon">ğŸ“Š</span>
            æ€§èƒ½ç›‘æ§
          </h3>
          <p>å®æ—¶ç›‘æ§æ’­æ”¾å™¨æ€§èƒ½ï¼Œä¼˜åŒ–ç”¨æˆ·ä½“éªŒã€‚</p>
          
          <div class="performance-monitor">
            <h4>æ€§èƒ½ç»Ÿè®¡</h4>
            <div class="performance-stats">
              <div class="stat-item">
                <div class="stat-value" id="fps-value">60</div>
                <div class="stat-label">FPS</div>
              </div>
              <div class="stat-item">
                <div class="stat-value" id="memory-value">45</div>
                <div class="stat-label">å†…å­˜(MB)</div>
              </div>
              <div class="stat-item">
                <div class="stat-value" id="cpu-value">12</div>
                <div class="stat-label">CPU(%)</div>
              </div>
              <div class="stat-item">
                <div class="stat-value" id="network-value">2.5</div>
                <div class="stat-label">ç½‘ç»œ(Mbps)</div>
              </div>
            </div>
          </div>
        </div>

        <!-- é”™è¯¯å¤„ç† -->
        <div class="feature-card">
          <h3>
            <span class="icon">ğŸ›¡ï¸</span>
            é”™è¯¯å¤„ç†
          </h3>
          <p>æ™ºèƒ½é”™è¯¯å¤„ç†å’Œæ¢å¤æœºåˆ¶ï¼Œç¡®ä¿æ’­æ”¾ç¨³å®šæ€§ã€‚</p>
          
          <div style="margin-top: 1rem;">
            <button class="btn btn-warning" onclick="simulateError('network')">æ¨¡æ‹Ÿç½‘ç»œé”™è¯¯</button>
            <button class="btn btn-warning" onclick="simulateError('decode')">æ¨¡æ‹Ÿè§£ç é”™è¯¯</button>
            <button class="btn btn-success" onclick="recoverError()">é”™è¯¯æ¢å¤</button>
          </div>
        </div>
      </div>
    </div>

    <div class="demo-section">
      <h2>ğŸ“ ä»£ç ç¤ºä¾‹</h2>
      <p>ä»¥ä¸‹æ˜¯å¯ç”¨é«˜çº§åŠŸèƒ½çš„ä»£ç ç¤ºä¾‹ï¼š</p>
      
      <div class="code-block">
        <pre><code>import { VideoPlayer, HotkeyManager, GestureManager } from '@ldesign/video'

// åˆ›å»ºæ’­æ”¾å™¨å¹¶å¯ç”¨é«˜çº§åŠŸèƒ½
const player = new VideoPlayer({
  container: document.getElementById('player'),
  src: 'video.mp4',
  // å¯ç”¨å¿«æ·é”®
  hotkeys: {
    enabled: true,
    global: false,
    bindings: {
      'Space': {
        description: 'æ’­æ”¾/æš‚åœ',
        handler: () => player.toggle()
      },
      'Ctrl+KeyS': {
        description: 'æˆªå›¾',
        handler: () => player.screenshot()
      }
    }
  },
  // å¯ç”¨æ‰‹åŠ¿æ§åˆ¶
  gestures: {
    enabled: true,
    bindings: {
      tap: () => player.toggle(),
      doubleTap: () => player.toggleFullscreen(),
      swipeLeft: () => player.seek(-10, true),
      swipeRight: () => player.seek(10, true)
    }
  },
  // å¯ç”¨æ€§èƒ½ç›‘æ§
  performance: {
    enabled: true,
    monitor: ['fps', 'memory', 'cpu', 'network'],
    onStats: (stats) => console.log('æ€§èƒ½ç»Ÿè®¡:', stats)
  },
  // é”™è¯¯å¤„ç†
  errorHandling: {
    autoRecover: true,
    maxRetries: 3,
    onError: (error) => console.error('æ’­æ”¾å™¨é”™è¯¯:', error)
  }
})

await player.initialize()

// è·å–æ€§èƒ½ç»Ÿè®¡
const stats = player.getPerformanceStats()
console.log('å½“å‰æ€§èƒ½:', stats)

// å†…å­˜ä¼˜åŒ–
player.optimizeMemory()

// è‡ªå®šä¹‰å¿«æ·é”®
player.getHotkeyManager().register('KeyR', {
  description: 'é‡æ–°åŠ è½½',
  handler: () => player.reload()
})</code></pre>
      </div>
    </div>
  </div>

  <script type="module">
    import { VideoPlayer, HotkeyManager, GestureManager } from '../../src/index.ts'

    let player = null
    let hotkeyManager = null
    let gestureManager = null
    let performanceInterval = null

    // åˆå§‹åŒ–æ’­æ”¾å™¨
    async function initPlayer() {
      try {
        player = new VideoPlayer({
          container: document.getElementById('player-advanced'),
          src: 'https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4',
          autoplay: false,
          controls: true,
          volume: 1,
          theme: 'default'
        })

        await player.initialize()
        
        // åˆå§‹åŒ–é«˜çº§åŠŸèƒ½
        initAdvancedFeatures()
        
        // ç»‘å®šæ§åˆ¶é¢æ¿
        bindAdvancedControls()
        
        // å¯åŠ¨æ€§èƒ½ç›‘æ§
        startPerformanceMonitoring()
        
        console.log('æ’­æ”¾å™¨å’Œé«˜çº§åŠŸèƒ½åˆå§‹åŒ–æˆåŠŸ')
      } catch (error) {
        console.error('æ’­æ”¾å™¨åˆå§‹åŒ–å¤±è´¥:', error)
      }
    }

    // åˆå§‹åŒ–é«˜çº§åŠŸèƒ½
    function initAdvancedFeatures() {
      // åˆå§‹åŒ–å¿«æ·é”®ç®¡ç†å™¨
      hotkeyManager = new HotkeyManager(player, {
        enabled: true,
        global: false
      })

      // åˆå§‹åŒ–æ‰‹åŠ¿ç®¡ç†å™¨
      gestureManager = new GestureManager(player, {
        enabled: true
      })

      // ç»‘å®šäº‹ä»¶ç›‘å¬
      hotkeyManager.on('triggered', (data) => {
        console.log('å¿«æ·é”®è§¦å‘:', data.key)
      })

      gestureManager.on('triggered', (data) => {
        console.log('æ‰‹åŠ¿è§¦å‘:', data.type)
      })
    }

    // ç»‘å®šé«˜çº§æ§åˆ¶é¢æ¿
    function bindAdvancedControls() {
      // å¿«æ·é”®å¼€å…³
      document.getElementById('hotkey-toggle').addEventListener('change', (e) => {
        if (e.target.checked) {
          hotkeyManager.enable()
        } else {
          hotkeyManager.disable()
        }
      })

      // æ‰‹åŠ¿æ§åˆ¶å¼€å…³
      document.getElementById('gesture-toggle').addEventListener('change', (e) => {
        if (e.target.checked) {
          gestureManager.enable()
        } else {
          gestureManager.disable()
        }
      })

      // æ€§èƒ½ç›‘æ§å¼€å…³
      document.getElementById('performance-toggle').addEventListener('change', (e) => {
        if (e.target.checked) {
          startPerformanceMonitoring()
        } else {
          stopPerformanceMonitoring()
        }
      })

      // æµ‹è¯•æŒ‰é’®
      document.getElementById('hotkey-test').addEventListener('click', () => {
        alert('è¯·å°è¯•æŒ‰ä¸‹ç©ºæ ¼é”®æ¥æ’­æ”¾/æš‚åœè§†é¢‘')
      })

      document.getElementById('gesture-test').addEventListener('click', () => {
        alert('è¯·åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šå°è¯•å•å‡»æˆ–åŒå‡»æ’­æ”¾å™¨')
      })

      document.getElementById('performance-reset').addEventListener('click', () => {
        resetPerformanceStats()
      })

      document.getElementById('memory-optimize').addEventListener('click', () => {
        optimizeMemory()
      })

      document.getElementById('memory-gc').addEventListener('click', () => {
        if (window.gc) {
          window.gc()
          console.log('æ‰‹åŠ¨åƒåœ¾å›æ”¶å®Œæˆ')
        } else {
          console.log('æµè§ˆå™¨ä¸æ”¯æŒæ‰‹åŠ¨åƒåœ¾å›æ”¶')
        }
      })
    }

    // å¯åŠ¨æ€§èƒ½ç›‘æ§
    function startPerformanceMonitoring() {
      if (performanceInterval) return

      performanceInterval = setInterval(() => {
        updatePerformanceStats()
      }, 1000)
    }

    // åœæ­¢æ€§èƒ½ç›‘æ§
    function stopPerformanceMonitoring() {
      if (performanceInterval) {
        clearInterval(performanceInterval)
        performanceInterval = null
      }
    }

    // æ›´æ–°æ€§èƒ½ç»Ÿè®¡
    function updatePerformanceStats() {
      // æ¨¡æ‹Ÿæ€§èƒ½æ•°æ®
      const fps = Math.floor(Math.random() * 10) + 55
      const memory = Math.floor(Math.random() * 20) + 40
      const cpu = Math.floor(Math.random() * 15) + 5
      const network = (Math.random() * 2 + 1).toFixed(1)

      document.getElementById('fps-value').textContent = fps
      document.getElementById('memory-value').textContent = memory
      document.getElementById('cpu-value').textContent = cpu
      document.getElementById('network-value').textContent = network
    }

    // é‡ç½®æ€§èƒ½ç»Ÿè®¡
    function resetPerformanceStats() {
      document.getElementById('fps-value').textContent = '60'
      document.getElementById('memory-value').textContent = '45'
      document.getElementById('cpu-value').textContent = '12'
      document.getElementById('network-value').textContent = '2.5'
      
      console.log('æ€§èƒ½ç»Ÿè®¡å·²é‡ç½®')
    }

    // å†…å­˜ä¼˜åŒ–
    function optimizeMemory() {
      // æ¨¡æ‹Ÿå†…å­˜ä¼˜åŒ–
      setTimeout(() => {
        const currentMemory = parseInt(document.getElementById('memory-value').textContent)
        const optimizedMemory = Math.max(20, currentMemory - 10)
        document.getElementById('memory-value').textContent = optimizedMemory
        
        console.log('å†…å­˜ä¼˜åŒ–å®Œæˆï¼Œé‡Šæ”¾äº†', currentMemory - optimizedMemory, 'MBå†…å­˜')
      }, 500)
    }

    // æ¨¡æ‹Ÿé”™è¯¯
    window.simulateError = function(type) {
      switch (type) {
        case 'network':
          console.error('æ¨¡æ‹Ÿç½‘ç»œé”™è¯¯: è¿æ¥è¶…æ—¶')
          alert('æ¨¡æ‹Ÿç½‘ç»œé”™è¯¯: è¿æ¥è¶…æ—¶\næ’­æ”¾å™¨å°†å°è¯•è‡ªåŠ¨æ¢å¤...')
          break
        case 'decode':
          console.error('æ¨¡æ‹Ÿè§£ç é”™è¯¯: è§†é¢‘æ ¼å¼ä¸æ”¯æŒ')
          alert('æ¨¡æ‹Ÿè§£ç é”™è¯¯: è§†é¢‘æ ¼å¼ä¸æ”¯æŒ\næ’­æ”¾å™¨å°†å°è¯•é™çº§å¤„ç†...')
          break
      }
    }

    // é”™è¯¯æ¢å¤
    window.recoverError = function() {
      console.log('æ‰§è¡Œé”™è¯¯æ¢å¤...')
      alert('é”™è¯¯æ¢å¤æˆåŠŸï¼æ’­æ”¾å™¨å·²æ¢å¤æ­£å¸¸çŠ¶æ€ã€‚')
    }

    // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', initPlayer)

    // é¡µé¢å¸è½½æ—¶æ¸…ç†
    window.addEventListener('beforeunload', () => {
      stopPerformanceMonitoring()
      if (player) {
        player.destroy()
      }
    })
  </script>
</body>
</html>
