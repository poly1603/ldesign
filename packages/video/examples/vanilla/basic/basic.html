<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>基础播放功能 - LDesign Video Player</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #f5f5f5;
      color: #333;
      line-height: 1.6;
    }

    .header {
      background: linear-gradient(135deg, #722ED1, #9254DE);
      color: white;
      padding: 1.5rem 0;
      text-align: center;
    }

    .header h1 {
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }

    .nav {
      background: white;
      padding: 1rem 0;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .nav-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 2rem;
      display: flex;
      align-items: center;
      gap: 2rem;
    }

    .nav a {
      color: #666;
      text-decoration: none;
      padding: 0.5rem 1rem;
      border-radius: 4px;
      transition: all 0.3s ease;
    }

    .nav a:hover,
    .nav a.active {
      background: #722ED1;
      color: white;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem;
    }

    .demo-section {
      background: white;
      border-radius: 12px;
      padding: 2rem;
      margin-bottom: 2rem;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    }

    .demo-section h2 {
      color: #722ED1;
      margin-bottom: 1rem;
      font-size: 1.5rem;
    }

    .demo-section p {
      color: #666;
      margin-bottom: 1.5rem;
    }

    .player-container {
      width: 100%;
      max-width: 800px;
      margin: 0 auto 2rem;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
    }

    .controls-panel {
      background: #f8f9fa;
      padding: 1.5rem;
      border-radius: 8px;
      margin-top: 1rem;
    }

    .controls-panel h3 {
      color: #333;
      margin-bottom: 1rem;
      font-size: 1.2rem;
    }

    .control-group {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1rem;
      flex-wrap: wrap;
    }

    .control-group label {
      font-weight: 500;
      color: #555;
      min-width: 80px;
    }

    .btn {
      padding: 0.5rem 1rem;
      background: #722ED1;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      transition: background 0.3s ease;
      font-size: 0.9rem;
    }

    .btn:hover {
      background: #5e2aa7;
    }

    .btn-secondary {
      background: #6c757d;
    }

    .btn-secondary:hover {
      background: #545b62;
    }

    .btn-success {
      background: #28a745;
    }

    .btn-success:hover {
      background: #218838;
    }

    .btn-danger {
      background: #dc3545;
    }

    .btn-danger:hover {
      background: #c82333;
    }

    .slider {
      flex: 1;
      min-width: 150px;
    }

    .select {
      padding: 0.5rem;
      border: 1px solid #ddd;
      border-radius: 4px;
      background: white;
    }

    .status-panel {
      background: #e9ecef;
      padding: 1rem;
      border-radius: 4px;
      margin-top: 1rem;
      font-family: monospace;
      font-size: 0.9rem;
    }

    .status-item {
      margin-bottom: 0.5rem;
    }

    .status-item:last-child {
      margin-bottom: 0;
    }

    .code-block {
      background: #f8f9fa;
      border: 1px solid #e9ecef;
      border-radius: 4px;
      padding: 1rem;
      margin: 1rem 0;
      overflow-x: auto;
    }

    .code-block pre {
      margin: 0;
      font-family: 'Courier New', monospace;
      font-size: 0.9rem;
      color: #333;
    }

    @media (max-width: 768px) {
      .container {
        padding: 1rem;
      }
      
      .control-group {
        flex-direction: column;
        align-items: stretch;
      }
      
      .control-group label {
        min-width: auto;
      }
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>基础播放功能演示</h1>
    <p>展示 LDesign Video Player 的核心播放功能</p>
  </div>

  <div class="nav">
    <div class="nav-container">
      <a href="index.html">← 返回首页</a>
      <a href="basic.html" class="active">基础功能</a>
      <a href="plugins.html">插件系统</a>
      <a href="themes.html">主题系统</a>
      <a href="advanced.html">高级功能</a>
    </div>
  </div>

  <div class="container">
    <div class="demo-section">
      <h2>🎬 基础播放器</h2>
      <p>这是一个基础的视频播放器实例，包含所有核心播放功能。</p>
      
      <div id="player-basic" class="player-container"></div>

      <div class="controls-panel">
        <h3>播放控制</h3>
        
        <div class="control-group">
          <button id="btn-play" class="btn btn-success">播放</button>
          <button id="btn-pause" class="btn btn-secondary">暂停</button>
          <button id="btn-toggle" class="btn">播放/暂停</button>
          <button id="btn-stop" class="btn btn-danger">停止</button>
        </div>

        <div class="control-group">
          <label>跳转:</label>
          <button class="btn btn-secondary" onclick="seekTo(0)">开始</button>
          <button class="btn btn-secondary" onclick="seekTo(30)">30s</button>
          <button class="btn btn-secondary" onclick="seekTo(60)">1min</button>
          <button class="btn btn-secondary" onclick="seekTo(-10, true)">-10s</button>
          <button class="btn btn-secondary" onclick="seekTo(10, true)">+10s</button>
        </div>

        <div class="control-group">
          <label>音量:</label>
          <input type="range" id="volume-slider" class="slider" min="0" max="1" step="0.1" value="1">
          <button id="btn-mute" class="btn btn-secondary">静音</button>
        </div>

        <div class="control-group">
          <label>倍速:</label>
          <select id="rate-select" class="select">
            <option value="0.5">0.5x</option>
            <option value="0.75">0.75x</option>
            <option value="1" selected>1x</option>
            <option value="1.25">1.25x</option>
            <option value="1.5">1.5x</option>
            <option value="2">2x</option>
          </select>
        </div>

        <div class="control-group">
          <label>画质:</label>
          <select id="quality-select" class="select">
            <option value="auto">自动</option>
            <option value="1080p">1080p</option>
            <option value="720p">720p</option>
            <option value="480p">480p</option>
            <option value="360p">360p</option>
          </select>
        </div>

        <div class="control-group">
          <button id="btn-fullscreen" class="btn">全屏</button>
          <button id="btn-pip" class="btn">画中画</button>
          <button id="btn-screenshot" class="btn">截图</button>
        </div>
      </div>

      <div class="status-panel">
        <div class="status-item">状态: <span id="status-state">未初始化</span></div>
        <div class="status-item">当前时间: <span id="status-time">00:00</span></div>
        <div class="status-item">总时长: <span id="status-duration">00:00</span></div>
        <div class="status-item">缓冲进度: <span id="status-buffered">0%</span></div>
        <div class="status-item">音量: <span id="status-volume">100%</span></div>
        <div class="status-item">播放速度: <span id="status-rate">1x</span></div>
        <div class="status-item">全屏: <span id="status-fullscreen">否</span></div>
        <div class="status-item">画中画: <span id="status-pip">否</span></div>
      </div>
    </div>

    <div class="demo-section">
      <h2>📝 代码示例</h2>
      <p>以下是创建基础播放器的代码示例：</p>
      
      <div class="code-block">
        <pre><code>import { VideoPlayer } from '@ldesign/video'

// 创建播放器实例
const player = new VideoPlayer({
  container: document.getElementById('player-basic'),
  src: 'https://example.com/video.mp4',
  autoplay: false,
  controls: true,
  volume: 1,
  theme: 'default'
})

// 初始化播放器
await player.initialize()

// 绑定事件监听
player.on('play', () => console.log('开始播放'))
player.on('pause', () => console.log('暂停播放'))
player.on('timeupdate', (data) => {
  console.log('时间更新:', data.currentTime)
})

// 播放控制
await player.play()
player.pause()
player.seek(30)
player.setVolume(0.8)
player.setPlaybackRate(1.5)</code></pre>
      </div>
    </div>
  </div>

  <script type="module">
    import { VideoPlayer } from '../../src/index.ts'

    let player = null

    // 初始化播放器
    async function initPlayer() {
      try {
        player = new VideoPlayer({
          container: document.getElementById('player-basic'),
          src: 'https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4',
          autoplay: false,
          controls: true,
          volume: 1,
          theme: 'default'
        })

        await player.initialize()

        // 绑定事件监听
        bindPlayerEvents()

        // 绑定控制按钮
        bindControls()

        console.log('播放器初始化成功')
      } catch (error) {
        console.error('播放器初始化失败:', error)
      }
    }

    // 绑定播放器事件
    function bindPlayerEvents() {
      player.on('ready', () => {
        updateStatus()
      })

      player.on('play', () => {
        updateStatus()
      })

      player.on('pause', () => {
        updateStatus()
      })

      player.on('timeupdate', () => {
        updateStatus()
      })

      player.on('volumechange', () => {
        updateStatus()
      })

      player.on('ratechange', () => {
        updateStatus()
      })

      player.on('fullscreenchange', () => {
        updateStatus()
      })

      player.on('pipchange', () => {
        updateStatus()
      })
    }

    // 绑定控制按钮
    function bindControls() {
      document.getElementById('btn-play').onclick = () => player.play()
      document.getElementById('btn-pause').onclick = () => player.pause()
      document.getElementById('btn-toggle').onclick = () => player.toggle()
      document.getElementById('btn-stop').onclick = () => {
        player.pause()
        player.seek(0)
      }

      document.getElementById('volume-slider').oninput = (e) => {
        player.setVolume(parseFloat(e.target.value))
      }

      document.getElementById('btn-mute').onclick = () => {
        player.videoElement.muted = !player.videoElement.muted
      }

      document.getElementById('rate-select').onchange = (e) => {
        player.setPlaybackRate(parseFloat(e.target.value))
      }

      document.getElementById('btn-fullscreen').onclick = () => {
        player.toggleFullscreen()
      }

      document.getElementById('btn-pip').onclick = () => {
        player.togglePip()
      }

      document.getElementById('btn-screenshot').onclick = async () => {
        // 这里需要截图插件支持
        console.log('截图功能需要加载截图插件')
      }
    }

    // 更新状态显示
    function updateStatus() {
      if (!player) return

      const status = player.status
      
      document.getElementById('status-state').textContent = status.state
      document.getElementById('status-time').textContent = formatTime(status.currentTime)
      document.getElementById('status-duration').textContent = formatTime(status.duration)
      document.getElementById('status-buffered').textContent = Math.round(status.buffered * 100) + '%'
      document.getElementById('status-volume').textContent = Math.round(status.volume * 100) + '%'
      document.getElementById('status-rate').textContent = status.playbackRate + 'x'
      document.getElementById('status-fullscreen').textContent = status.fullscreen ? '是' : '否'
      document.getElementById('status-pip').textContent = status.pip ? '是' : '否'
    }

    // 格式化时间
    function formatTime(seconds) {
      if (!seconds || isNaN(seconds)) return '00:00'
      
      const mins = Math.floor(seconds / 60)
      const secs = Math.floor(seconds % 60)
      
      return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`
    }

    // 跳转到指定时间
    window.seekTo = function(time, relative = false) {
      if (!player) return
      
      if (relative) {
        const currentTime = player.status.currentTime
        player.seek(currentTime + time)
      } else {
        player.seek(time)
      }
    }

    // 页面加载完成后初始化
    document.addEventListener('DOMContentLoaded', initPlayer)
  </script>
</body>
</html>
