# @ldesign/color ğŸ¨

ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ã€æ€§èƒ½å“è¶Šçš„ç°ä»£é¢œè‰²å¤„ç†åº“ï¼Œä¸ºæ‚¨çš„åº”ç”¨æä¾›å®Œæ•´çš„é¢œè‰²ç®¡ç†è§£å†³æ–¹æ¡ˆï¼

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ¨ æ™ºèƒ½é¢œè‰²å¤„ç†
- **æ™ºèƒ½é¢œè‰²ç”Ÿæˆ** - åŸºäº a-nice-red ç®—æ³•ç”Ÿæˆå’Œè°é…è‰²
- **å®Œæ•´é¢œè‰²è½¬æ¢** - æ”¯æŒ HEXã€RGBã€HSLã€HSV æ ¼å¼äº’è½¬
- **é¢œè‰²æ··åˆ** - æ”¯æŒ 12 ç§æ··åˆæ¨¡å¼ï¼ˆæ­£å¸¸ã€æ­£ç‰‡å åº•ã€æ»¤è‰²ç­‰ï¼‰
- **é¢œè‰²è°ƒæ•´** - äº®åº¦ã€é¥±å’Œåº¦ã€è‰²ç›¸è°ƒæ•´
- **æ¸å˜ç”Ÿæˆ** - çº¿æ€§å’Œå¾„å‘æ¸å˜ CSS ç”Ÿæˆ

### ğŸŒˆ è°ƒè‰²æ¿ç”Ÿæˆ
- **å•è‰²è°ƒè‰²æ¿** - åŸºäºå•ä¸€é¢œè‰²ç”Ÿæˆæ˜æš—å˜åŒ–
- **ç±»ä¼¼è‰²è°ƒè‰²æ¿** - ç”Ÿæˆç›¸é‚»è‰²ç›¸çš„å’Œè°é…è‰²
- **äº’è¡¥è‰²è°ƒè‰²æ¿** - ç”Ÿæˆå¯¹æ¯”å¼ºçƒˆçš„é…è‰²æ–¹æ¡ˆ
- **ä¸‰å…ƒè‰²/å››å…ƒè‰²** - ä¸“ä¸šçš„é…è‰²ç†è®ºæ”¯æŒ

### â™¿ å¯è®¿é—®æ€§æ£€æŸ¥
- **WCAG æ ‡å‡†** - æ”¯æŒ AA/AAA çº§åˆ«å¯¹æ¯”åº¦æ£€æŸ¥
- **é¢œè‰²ç›²æ¨¡æ‹Ÿ** - 8 ç§é¢œè‰²ç›²ç±»å‹æ¨¡æ‹Ÿ
- **æ™ºèƒ½å»ºè®®** - è‡ªåŠ¨ç”Ÿæˆç¬¦åˆæ ‡å‡†çš„é…è‰²å»ºè®®
- **æ‰¹é‡æ£€æŸ¥** - ä¸€é”®æ£€æŸ¥æ•´å¥—é…è‰²æ–¹æ¡ˆ

### ğŸ¯ ä¸»é¢˜ç®¡ç†
- **åŠ¨æ€ä¸»é¢˜åˆ‡æ¢** - æ— ç¼åˆ‡æ¢æ˜æš—ä¸»é¢˜
- **ç³»ç»Ÿä¸»é¢˜æ£€æµ‹** - è‡ªåŠ¨è·Ÿéšç³»ç»Ÿä¸»é¢˜
- **è‡ªå®šä¹‰ä¸»é¢˜** - çµæ´»çš„ä¸»é¢˜é…ç½®ç³»ç»Ÿ
- **CSS å˜é‡æ³¨å…¥** - è‡ªåŠ¨ç®¡ç† CSS è‡ªå®šä¹‰å±æ€§

### âš¡ æ€§èƒ½ä¼˜åŒ–
- **é—²æ—¶å¤„ç†** - åˆ©ç”¨æµè§ˆå™¨ç©ºé—²æ—¶é—´å¤„ç†ä»»åŠ¡
- **LRU ç¼“å­˜** - æ™ºèƒ½ç¼“å­˜æå‡æ€§èƒ½
- **é¢„ç”Ÿæˆç­–ç•¥** - é¢„å…ˆè®¡ç®—å¸¸ç”¨é¢œè‰²
- **å†…å­˜ç®¡ç†** - è‡ªåŠ¨æ¸…ç†è¿‡æœŸç¼“å­˜

### ğŸ”§ æ¡†æ¶é›†æˆ
- **Vue 3 æ”¯æŒ** - å®Œæ•´çš„ç»„åˆå¼ API å’Œç»„ä»¶
- **TypeScript** - 100% TypeScript ç¼–å†™ï¼Œå®Œæ•´ç±»å‹å®šä¹‰
- **ç°ä»£æ„å»º** - ESM/CJS åŒæ ¼å¼è¾“å‡º
- **Tree Shaking** - æŒ‰éœ€å¼•å…¥ï¼Œå‡å°åŒ…ä½“ç§¯

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
# npm
npm install @ldesign/color

# yarn
yarn add @ldesign/color

# pnpm
pnpm add @ldesign/color
```

### åŸºç¡€ä½¿ç”¨

```typescript
import { 
  hexToRgb, 
  generateMonochromaticPalette,
  checkAccessibility,
  blendColors 
} from '@ldesign/color'

// é¢œè‰²è½¬æ¢
const rgb = hexToRgb('#1890ff')
console.log(rgb) // { r: 24, g: 144, b: 255 }

// ç”Ÿæˆè°ƒè‰²æ¿
const palette = generateMonochromaticPalette('#1890ff', 5)
console.log(palette) // ['#0d4377', '#1890ff', '#40a9ff', '#69c0ff', '#91d5ff']

// å¯è®¿é—®æ€§æ£€æŸ¥
const result = checkAccessibility('#ffffff', '#1890ff')
console.log(result.isAccessible) // true
console.log(result.contrastRatio) // 3.26

// é¢œè‰²æ··åˆ
const mixed = blendColors('#ff0000', '#0000ff', 'multiply', 0.5)
console.log(mixed) // '#800080'
```

### Vue 3 é›†æˆ

```vue
<template>
  <div>
    <!-- é¢œè‰²é€‰æ‹©å™¨ -->
    <ColorPicker v-model:color="selectedColor" />
    
    <!-- ä¸»é¢˜åˆ‡æ¢å™¨ -->
    <ThemeToggle />
    
    <!-- è°ƒè‰²æ¿ç”Ÿæˆå™¨ -->
    <PaletteGenerator 
      :base-color="selectedColor"
      palette-type="monochromatic"
      @palette-change="onPaletteChange"
    />
    
    <!-- å¯è®¿é—®æ€§æ£€æŸ¥å™¨ -->
    <AccessibilityChecker 
      :foreground-color="textColor"
      :background-color="backgroundColor"
    />
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import { 
  ColorPicker, 
  ThemeToggle, 
  PaletteGenerator,
  AccessibilityChecker 
} from '@ldesign/color/vue'

const selectedColor = ref('#1890ff')
const textColor = ref('#000000')
const backgroundColor = ref('#ffffff')

const onPaletteChange = (colors: string[]) => {
  console.log('æ–°è°ƒè‰²æ¿:', colors)
}
</script>
```

### ğŸ¨ å¢å¼ºçš„ä¸»é¢˜é€‰æ‹©å™¨

æ–°ç‰ˆæœ¬çš„ ThemeSelector ç»„ä»¶æ”¯æŒä¸‰ç§æ˜¾ç¤ºæ¨¡å¼å’Œä¸°å¯Œçš„é…ç½®é€‰é¡¹ï¼š

```vue
<template>
  <div>
    <!-- é€‰æ‹©å™¨æ¨¡å¼ -->
    <ThemeSelector
      mode="select"
      :custom-themes="customThemes"
      :disabled-builtin-themes="['green']"
      show-preview
      size="medium"
      @theme-change="handleThemeChange"
    />

    <!-- å¼¹å‡ºå±‚æ¨¡å¼ -->
    <ThemeSelector
      mode="popup"
      button-text="é€‰æ‹©ä¸»é¢˜"
      popup-animation="bounce"
      :custom-themes="customThemes"
    />

    <!-- å¯¹è¯æ¡†æ¨¡å¼ -->
    <ThemeSelector
      mode="dialog"
      dialog-title="ä¸»é¢˜è®¾ç½®"
      dialog-animation="zoom"
      :custom-themes="customThemes"
    />
  </div>
</template>

<script setup lang="ts">
import { ThemeSelector } from '@ldesign/color/vue'

const customThemes = [
  {
    name: 'purple',
    displayName: 'ç´«è‰²ä¸»é¢˜',
    description: 'ä¼˜é›…çš„ç´«è‰²é…è‰²æ–¹æ¡ˆ',
    light: { primary: '#722ed1' },
    dark: { primary: '#531dab' }
  }
]

const handleThemeChange = (theme: string) => {
  console.log('ä¸»é¢˜å·²åˆ‡æ¢:', theme)
}
</script>
```

### ğŸŒ™ å¢å¼ºçš„æš—è‰²æ¨¡å¼åˆ‡æ¢

DarkModeToggle ç»„ä»¶ç°åœ¨æ”¯æŒå¤šç§åŠ¨ç”»æ•ˆæœå’Œ View Transition APIï¼š

```vue
<template>
  <DarkModeToggle
    animation-type="circle"
    :animation-duration="300"
    enable-trigger-animation
    auto-detect
    @change="handleModeChange"
    @before-change="handleBeforeChange"
  />
</template>

<script setup lang="ts">
import { DarkModeToggle } from '@ldesign/color/vue'

const handleModeChange = (isDark: boolean) => {
  console.log('æ¨¡å¼å·²åˆ‡æ¢:', isDark ? 'æš—è‰²' : 'äº®è‰²')
}

const handleBeforeChange = (isDark: boolean) => {
  console.log('å³å°†åˆ‡æ¢åˆ°:', isDark ? 'æš—è‰²' : 'äº®è‰²')
}
</script>
```

**æ”¯æŒçš„åŠ¨ç”»ç±»å‹ï¼š**
- `circle` - åœ†å½¢æ‰©æ•£åŠ¨ç”»ï¼ˆéœ€è¦ View Transition APIï¼‰
- `slide` - æ»‘åŠ¨åŠ¨ç”»
- `fade` - æ·¡å…¥æ·¡å‡º
- `flip` - ç¿»è½¬åŠ¨ç”»
- `zoom` - ç¼©æ”¾åŠ¨ç”»
- `wipe` - æ“¦é™¤åŠ¨ç”»

### ğŸ›ï¸ å¢å¼ºçš„æ’ä»¶é…ç½®

createColorEnginePlugin ç°åœ¨æ”¯æŒæ›´ä¸°å¯Œçš„é…ç½®é€‰é¡¹ï¼š

```typescript
import { createColorEnginePlugin } from '@ldesign/color/vue'

const colorPlugin = createColorEnginePlugin({
  // CSS å˜é‡å‰ç¼€
  cssVariablePrefix: 'my-design',

  // ç¼“å­˜é…ç½®
  enableCache: true,
  cacheStorage: 'localStorage', // 'localStorage' | 'sessionStorage'

  // èƒŒæ™¯è‰²ç”Ÿæˆç­–ç•¥
  backgroundStrategy: 'primary-based', // 'neutral' | 'primary-based' | 'custom'
  generateBackgroundFromPrimary: true,

  // è‡ªå®šä¹‰èƒŒæ™¯è‰²
  customBackgroundColors: {
    light: ['#ffffff', '#f8f9fa', '#f1f3f4'],
    dark: ['#1a1a1a', '#2d2d2d', '#404040']
  },

  // è‡ªå®šä¹‰ä¸»é¢˜
  customThemes: [
    {
      name: 'brand',
      displayName: 'å“ç‰Œä¸»é¢˜',
      description: 'ç¬¦åˆå“ç‰Œè°ƒæ€§çš„é…è‰²æ–¹æ¡ˆ',
      light: { primary: '#ff6b35' },
      dark: { primary: '#ff8c69' },
      version: '1.0.0'
    }
  ],

  // ç¦ç”¨å†…ç½®ä¸»é¢˜
  disabledBuiltinThemes: ['green', 'red'],

  // å›è°ƒå‡½æ•°
  onReady: () => console.log('é¢œè‰²å¼•æ“å·²å°±ç»ª'),
  onThemeChanged: (theme) => console.log('ä¸»é¢˜å·²åˆ‡æ¢:', theme),
  onError: (error) => console.error('é¢œè‰²å¼•æ“é”™è¯¯:', error),

  // è°ƒè¯•æ¨¡å¼
  debug: process.env.NODE_ENV === 'development'
})

// åœ¨ Vue åº”ç”¨ä¸­ä½¿ç”¨
app.use(colorPlugin)
```

## ğŸ“š API æ–‡æ¡£

### é¢œè‰²è½¬æ¢

```typescript
// HEX â†” RGB
hexToRgb('#1890ff') // { r: 24, g: 144, b: 255 }
rgbToHex(24, 144, 255) // '#1890ff'

// RGB â†” HSL
rgbToHsl(24, 144, 255) // { h: 210, s: 100, l: 55 }
hslToRgb(210, 100, 55) // { r: 24, g: 144, b: 255 }

// RGB â†” HSV
rgbToHsv(24, 144, 255) // { h: 210, s: 91, v: 100 }
hsvToRgb(210, 91, 100) // { r: 24, g: 144, b: 255 }
```

### é¢œè‰²è°ƒæ•´

```typescript
// è°ƒæ•´äº®åº¦ (-100 åˆ° 100)
adjustBrightness('#1890ff', 20) // '#4da6ff'

// è°ƒæ•´é¥±å’Œåº¦ (-100 åˆ° 100)
adjustSaturation('#1890ff', -30) // '#4d8fb8'

// è°ƒæ•´è‰²ç›¸ (-360 åˆ° 360)
adjustHue('#1890ff', 60) // '#1890ff' -> '#18ff90'
```

### é¢œè‰²æ··åˆ

```typescript
// æ”¯æŒçš„æ··åˆæ¨¡å¼
type BlendMode = 
  | 'normal' | 'multiply' | 'screen' | 'overlay'
  | 'soft-light' | 'hard-light' | 'color-dodge' | 'color-burn'
  | 'darken' | 'lighten' | 'difference' | 'exclusion'

blendColors('#ff0000', '#0000ff', 'multiply', 0.5)
```

### è°ƒè‰²æ¿ç”Ÿæˆ

```typescript
// å•è‰²è°ƒè‰²æ¿
generateMonochromaticPalette('#1890ff', 5)

// ç±»ä¼¼è‰²è°ƒè‰²æ¿
generateAnalogousPalette('#1890ff', 5)

// äº’è¡¥è‰²è°ƒè‰²æ¿
generateComplementaryPalette('#1890ff')

// ä¸‰å…ƒè‰²è°ƒè‰²æ¿
generateTriadicPalette('#1890ff')

// å››å…ƒè‰²è°ƒè‰²æ¿
generateTetradicPalette('#1890ff')
```

### å¯è®¿é—®æ€§æ£€æŸ¥

```typescript
// WCAG å¯¹æ¯”åº¦æ£€æŸ¥
checkAccessibility('#000000', '#ffffff', 'normal')
// {
//   isAccessible: true,
//   contrastRatio: 21,
//   level: 'AAA',
//   recommendations: []
// }

// é¢œè‰²ç›²æ¨¡æ‹Ÿ
simulateColorBlindness('#ff0000', 'protanopia')
// {
//   original: '#ff0000',
//   simulated: '#b8860b',
//   type: 'protanopia',
//   severity: 1
// }
```

## ğŸ¨ Vue ç»„ä»¶

### ColorPicker - é¢œè‰²é€‰æ‹©å™¨

```vue
<ColorPicker 
  v-model:color="color"
  :show-alpha="true"
  :show-presets="true"
  @color-change="onColorChange"
/>
```

### PaletteGenerator - è°ƒè‰²æ¿ç”Ÿæˆå™¨

```vue
<PaletteGenerator 
  :base-color="baseColor"
  palette-type="monochromatic"
  :count="5"
  @palette-change="onPaletteChange"
/>
```

### AccessibilityChecker - å¯è®¿é—®æ€§æ£€æŸ¥å™¨

```vue
<AccessibilityChecker 
  :foreground-color="textColor"
  :background-color="bgColor"
  level="AA"
  text-size="normal"
/>
```

### ColorMixer - é¢œè‰²æ··åˆå™¨

```vue
<ColorMixer 
  :base-color="color1"
  :overlay-color="color2"
  mode="multiply"
  :opacity="0.5"
  @color-change="onMixedColorChange"
/>
```

## ğŸ”§ é«˜çº§ç”¨æ³•

### ä¸»é¢˜ç®¡ç†

```typescript
import { ThemeManager } from '@ldesign/color'

const themeManager = new ThemeManager({
  themes: {
    light: { primary: '#1890ff', background: '#ffffff' },
    dark: { primary: '#177ddc', background: '#000000' }
  },
  defaultTheme: 'light',
  storage: 'localStorage'
})

// åˆ‡æ¢ä¸»é¢˜
themeManager.setTheme('dark')

// ç›‘å¬ä¸»é¢˜å˜åŒ–
themeManager.on('themeChange', (theme) => {
  console.log('ä¸»é¢˜å·²åˆ‡æ¢åˆ°:', theme)
})
```

### æ€§èƒ½ä¼˜åŒ–

```typescript
import { IdleProcessor, createLRUCache } from '@ldesign/color'

// ä½¿ç”¨é—²æ—¶å¤„ç†å™¨
const processor = new IdleProcessor()
processor.schedule(() => {
  // åœ¨æµè§ˆå™¨ç©ºé—²æ—¶æ‰§è¡Œçš„ä»»åŠ¡
  generateColorPalettes()
})

// ä½¿ç”¨ LRU ç¼“å­˜
const cache = createLRUCache<string, string>(100)
cache.set('color1', '#1890ff')
```

## ğŸ“– æ›´å¤šæ–‡æ¡£

- [å®Œæ•´ API æ–‡æ¡£](./docs/api/README.md)
- [ä½¿ç”¨æŒ‡å—](./docs/guide/README.md)
- [ç¤ºä¾‹é¡¹ç›®](./examples/README.md)
- [é¡¹ç›®æ¶æ„](./summary/README.md)

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ›  å˜æ›´è¯´æ˜ï¼ˆ2025-09ï¼‰

- ä¿®å¤ï¼šgenerateMonochromaticPalette ä¸ generateAnalogousPalette åœ¨ count=1 æ—¶çš„é™¤é›¶é—®é¢˜ï¼ˆç°åœ¨å°†è¿”å› [baseColor]ï¼‰
- ä¿®å¤ï¼šVue æ’ä»¶ç±»å‹é”™è¯¯ï¼ˆThemeConfig å¯¼å…¥è·¯å¾„ä¿®æ­£ï¼‰ï¼Œå¹¶åœ¨è‡ªå®šä¹‰ä¸»é¢˜æœªæä¾› primary æ—¶ä½¿ç”¨é»˜è®¤ä¸»è‰²ç¡®ä¿ç±»å‹å®‰å…¨
- æ”¹è¿›ï¼šæ–°å¢ .vue SFC ç±»å‹å£°æ˜ï¼ˆsrc/types/vue-shim.d.tsï¼‰ï¼Œè§£å†³å¯¼å…¥ .vue æ–‡ä»¶çš„ç±»å‹æ£€æŸ¥æŠ¥é”™
- æ”¹è¿›ï¼šä¼˜åŒ– ESLint å¿½ç•¥é…ç½®ï¼Œæ’é™¤æ„å»ºäº§ç‰©ã€æµ‹è¯•ä¸æ–‡æ¡£ç›®å½•ï¼Œå‡å°‘æ— å…³å™ªå£°

## ğŸ§© ç»„ä»¶åˆ«åä¸å…¼å®¹æ€§

- ColorPicker æ˜¯ ThemeSelector çš„åˆ«åå¯¼å‡ºï¼ŒModeToggle æ˜¯ DarkModeToggle çš„åˆ«åå¯¼å‡ºï¼Œç”¨äºå‘åå…¼å®¹æ—§ç”¨æ³•ã€‚
- å»ºè®®åœ¨æ–°é¡¹ç›®ä¸­ç›´æ¥ä½¿ç”¨ ThemeSelector ä¸ DarkModeToggleã€‚
