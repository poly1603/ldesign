/**
 * LDesign DatePicker 暗色主题
 * 实现暗色主题的样式变体
 */

// ==================== 暗色主题变量 ====================

.ld-theme-dark {
  // ==================== 颜色变量重定义 ====================
  
  // 品牌色
  --ld-primary-color: #1890ff;
  --ld-primary-color-hover: #40a9ff;
  --ld-primary-color-active: #096dd9;
  --ld-primary-color-disabled: #177ddc;
  
  // 功能色
  --ld-success-color: #52c41a;
  --ld-warning-color: #faad14;
  --ld-error-color: #ff4d4f;
  --ld-info-color: #1890ff;
  
  // 中性色
  --ld-text-color: #ffffffd9;
  --ld-text-color-secondary: #ffffff73;
  --ld-text-color-disabled: #ffffff40;
  --ld-text-color-inverse: #000000d9;
  
  // 背景色
  --ld-background-color: #141414;
  --ld-background-color-secondary: #1f1f1f;
  --ld-background-color-tertiary: #262626;
  --ld-background-color-disabled: #262626;
  
  // 边框色
  --ld-border-color: #434343;
  --ld-border-color-hover: #40a9ff;
  --ld-border-color-focus: #1890ff;
  --ld-border-color-disabled: #434343;
  
  // 阴影色
  --ld-shadow-color: rgba(0, 0, 0, 0.45);
  --ld-shadow-color-hover: rgba(0, 0, 0, 0.65);
  --ld-shadow-color-focus: rgba(24, 144, 255, 0.3);
  
  // ==================== 组件特定样式 ====================
  
  .ld-datepicker {
    // 输入框暗色主题
    &-input {
      background-color: var(--ld-background-color);
      border-color: var(--ld-border-color);
      color: var(--ld-text-color);
      
      &::placeholder {
        color: var(--ld-text-color-disabled);
      }
      
      &:hover {
        border-color: var(--ld-border-color-hover);
        background-color: var(--ld-background-color-secondary);
      }
      
      &:focus {
        border-color: var(--ld-border-color-focus);
        box-shadow: 0 0 0 2px var(--ld-shadow-color-focus);
        background-color: var(--ld-background-color);
      }
      
      &:disabled {
        background-color: var(--ld-background-color-disabled);
        border-color: var(--ld-border-color-disabled);
        color: var(--ld-text-color-disabled);
      }
    }
    
    // 清除按钮暗色主题
    &-clear {
      color: var(--ld-text-color-secondary);
      
      &:hover {
        color: var(--ld-text-color);
        background-color: var(--ld-background-color-secondary);
      }
    }
    
    // 弹出层暗色主题
    &-popup {
      background-color: var(--ld-background-color);
      border-color: var(--ld-border-color);
      box-shadow: 0 6px 16px 0 var(--ld-shadow-color),
                  0 3px 6px -4px var(--ld-shadow-color),
                  0 9px 28px 8px rgba(0, 0, 0, 0.2);
    }
    
    // 头部暗色主题
    &-header {
      button {
        color: var(--ld-text-color-secondary);
        
        &:hover {
          color: var(--ld-text-color);
          background-color: var(--ld-background-color-secondary);
        }
        
        &:active {
          background-color: var(--ld-background-color-tertiary);
        }
      }
    }
    
    &-title {
      color: var(--ld-text-color);
      
      &:hover {
        color: var(--ld-primary-color);
      }
    }
    
    // 星期标题暗色主题
    &-weekday {
      color: var(--ld-text-color-secondary);
    }
    
    // 单元格暗色主题
    &-cell {
      color: var(--ld-text-color);
      
      &:hover {
        background-color: var(--ld-background-color-secondary);
      }
      
      // 今天
      &--today {
        color: var(--ld-primary-color);
        
        &::after {
          background-color: var(--ld-primary-color);
        }
      }
      
      // 选中状态
      &--selected {
        color: var(--ld-text-color-inverse);
        background-color: var(--ld-primary-color);
        
        &:hover {
          background-color: var(--ld-primary-color-hover);
        }
      }
      
      // 范围内
      &--in-range {
        background-color: var(--ld-primary-color-disabled);
        color: var(--ld-text-color-inverse);
      }
      
      // 范围开始和结束
      &--range-start,
      &--range-end {
        color: var(--ld-text-color-inverse);
        background-color: var(--ld-primary-color);
        
        &:hover {
          background-color: var(--ld-primary-color-hover);
        }
      }
      
      // 禁用状态
      &--disabled {
        color: var(--ld-text-color-disabled);
        background-color: transparent;
        
        &:hover {
          background-color: transparent;
        }
      }
      
      // 周末
      &--weekend {
        color: var(--ld-error-color);
      }
      
      // 其他月份
      &--other-month {
        color: var(--ld-text-color-disabled);
      }
    }
    
    // 底部暗色主题
    &-footer {
      border-top-color: var(--ld-border-color);
    }
    
    // 按钮暗色主题
    &-today,
    &-clear-btn {
      color: var(--ld-primary-color);
      
      &:hover {
        color: var(--ld-primary-color-hover);
        background-color: var(--ld-background-color-secondary);
        border-color: var(--ld-border-color);
      }
      
      &:active {
        color: var(--ld-primary-color-active);
        background-color: var(--ld-background-color-tertiary);
      }
    }
  }
  
  // ==================== 特殊状态样式 ====================
  
  // 聚焦状态增强
  .ld-datepicker-input:focus-visible {
    outline: 2px solid var(--ld-primary-color);
    outline-offset: 2px;
  }
  
  // 选择状态增强
  .ld-datepicker-cell--selected {
    box-shadow: 0 2px 4px rgba(24, 144, 255, 0.4);
  }
  
  // 范围选择状态增强
  .ld-datepicker-cell--range-start,
  .ld-datepicker-cell--range-end {
    box-shadow: 0 2px 4px rgba(24, 144, 255, 0.4);
  }
  
  // ==================== 暗色主题特有效果 ====================
  
  // 暗色主题下的发光效果
  .ld-datepicker {
    &-cell--selected,
    &-cell--range-start,
    &-cell--range-end {
      box-shadow: 0 0 8px rgba(24, 144, 255, 0.3),
                  0 2px 4px rgba(24, 144, 255, 0.2);
    }
    
    &-input:focus {
      box-shadow: 0 0 0 2px var(--ld-shadow-color-focus),
                  0 0 8px rgba(24, 144, 255, 0.2);
    }
  }
  
  // 暗色主题下的边框增强
  .ld-datepicker-popup {
    border: 1px solid var(--ld-border-color);
    backdrop-filter: blur(8px);
  }
  
  // ==================== 动画效果 ====================
  
  // 弹出层动画（暗色主题特有）
  .ld-datepicker-popup {
    &:not(.ld-datepicker-popup--visible) {
      opacity: 0;
      transform: translateY(-8px) scale(0.95);
      filter: brightness(0.8);
    }
    
    &.ld-datepicker-popup--visible {
      opacity: 1;
      transform: translateY(0) scale(1);
      filter: brightness(1);
    }
  }
  
  // 单元格悬停发光效果
  .ld-datepicker-cell:hover {
    box-shadow: 0 0 4px rgba(255, 255, 255, 0.1);
  }
  
  // ==================== 无障碍支持 ====================
  
  // 高对比度模式支持
  @media (prefers-contrast: high) {
    .ld-datepicker {
      &-input {
        border-width: 2px;
        border-color: #ffffff;
        background-color: #000000;
        color: #ffffff;
      }
      
      &-popup {
        background-color: #000000;
        border-color: #ffffff;
      }
      
      &-cell {
        color: #ffffff;
        
        &--selected {
          background-color: #ffffff;
          color: #000000;
          border: 2px solid #ffffff;
        }
        
        &--today::after {
          background-color: #ffffff;
        }
      }
    }
  }
  
  // 减少透明度偏好支持
  @media (prefers-reduced-transparency: reduce) {
    .ld-datepicker {
      &-popup {
        background-color: var(--ld-background-color);
        backdrop-filter: none;
      }
      
      &-cell--in-range {
        background-color: #003a8c;
      }
    }
  }
  
  // ==================== 暗色主题特殊适配 ====================
  
  // 滚动条样式（暗色主题）
  .ld-datepicker-popup {
    &::-webkit-scrollbar {
      width: 6px;
    }
    
    &::-webkit-scrollbar-track {
      background: var(--ld-background-color-secondary);
    }
    
    &::-webkit-scrollbar-thumb {
      background: var(--ld-border-color);
      border-radius: 3px;
      
      &:hover {
        background: var(--ld-text-color-secondary);
      }
    }
  }
  
  // 选择文本颜色
  .ld-datepicker {
    ::selection {
      background-color: var(--ld-primary-color);
      color: var(--ld-text-color-inverse);
    }
    
    ::-moz-selection {
      background-color: var(--ld-primary-color);
      color: var(--ld-text-color-inverse);
    }
  }
}
