<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ldesign/device - è®¾å¤‡æ£€æµ‹åº“æ¼”ç¤º</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

    body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        line-height: 1.6;
        color: #333;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
      }

    .container {
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        border-radius: 12px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        overflow: hidden;
      }

    .header {
        background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
        color: white;
        padding: 40px;
        text-align: center;
      }

      .header h1 {
        font-size: 2.5rem;
        margin-bottom: 10px;
        font-weight: 700;
      }

      .header p {
        font-size: 1.2rem;
        opacity: 0.9;
      }

    .content {
        padding: 40px;
      }

    .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 30px;
        margin-bottom: 40px;
      }

    .card {
        background: #f8fafc;
        border-radius: 8px;
        padding: 24px;
        border: 1px solid #e2e8f0;
        transition:
          transform 0.2s,
          box-shadow 0.2s;
      }

      .card:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
      }

      .card h3 {
        color: #4f46e5;
        margin-bottom: 16px;
        font-size: 1.25rem;
        font-weight: 600;
      }

      .info-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 8px 0;
        border-bottom: 1px solid #e2e8f0;
      }

      .info-item:last-child {
        border-bottom: none;
      }

      .info-label {
        font-weight: 500;
        color: #64748b;
      }

    .info-value {
        font-weight: 600;
        color: #1e293b;
      }

    .status {
        display: inline-block;
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 0.875rem;
        font-weight: 500;
      }

    .status.online {
        background: #dcfce7;
        color: #166534;
      }

    .status.offline {
        background: #fecaca;
        color: #991b1b;
      }

    .btn {
        background: #4f46e5;
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 6px;
        cursor: pointer;
        font-weight: 500;
        transition: background 0.2s;
        margin: 8px 8px 8px 0;
      }

    .btn:hover {
        background: #4338ca;
      }

    .btn.secondary {
        background: #6b7280;
      }

    .btn.secondary:hover {
        background: #4b5563;
      }

    .log {
        background: #1e293b;
        color: #e2e8f0;
        padding: 20px;
        border-radius: 8px;
        font-family: 'Courier New', monospace;
        font-size: 0.875rem;
        max-height: 300px;
        overflow-y: auto;
        margin-top: 20px;
      }

      .log-entry {
        margin-bottom: 8px;
        padding: 4px 0;
      }

    .timestamp {
        color: #94a3b8;
        margin-right: 8px;
      }

    @media (max-width: 768px) {
        .header h1 {
          font-size: 2rem;
        }

      .content {
          padding: 20px;
        }

        .grid {
          grid-template-columns: 1fr;
          gap: 20px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>@ldesign/device</h1>
        <p>ç°ä»£åŒ–çš„è®¾å¤‡æ£€æµ‹åº“æ¼”ç¤º</p>
      </div>

      <div class="content">
        <div class="grid">
          <!-- è®¾å¤‡ä¿¡æ¯å¡ç‰‡ -->
          <div class="card">
            <h3>ğŸ“± è®¾å¤‡ä¿¡æ¯</h3>
            <div class="info-item">
              <span class="info-label">è®¾å¤‡ç±»å‹</span>
              <span class="info-value" id="deviceType">-</span>
            </div>
            <div class="info-item">
              <span class="info-label">å±å¹•æ–¹å‘</span>
              <span class="info-value" id="orientation">-</span>
            </div>
            <div class="info-item">
              <span class="info-label">è§¦æ‘¸æ”¯æŒ</span>
              <span class="info-value" id="touchSupport">-</span>
            </div>
            <div class="info-item">
              <span class="info-label">å±å¹•å°ºå¯¸</span>
              <span class="info-value" id="screenSize">-</span>
            </div>
            <div class="info-item">
              <span class="info-label">åƒç´ æ¯”</span>
              <span class="info-value" id="pixelRatio">-</span>
            </div>
          </div>

        <!-- æµè§ˆå™¨ä¿¡æ¯å¡ç‰‡ -->
          <div class="card">
            <h3>ğŸŒ æµè§ˆå™¨ä¿¡æ¯</h3>
            <div class="info-item">
              <span class="info-label">æµè§ˆå™¨</span>
              <span class="info-value" id="browser">-</span>
            </div>
            <div class="info-item">
              <span class="info-label">æ“ä½œç³»ç»Ÿ</span>
              <span class="info-value" id="os">-</span>
            </div>
            <div class="info-item">
              <span class="info-label">ç”¨æˆ·ä»£ç†</span>
              <span class="info-value" id="userAgent" style="font-size: 0.8rem; word-break: break-all">-</span>
            </div>
          </div>

        <!-- ç½‘ç»œçŠ¶æ€å¡ç‰‡ -->
          <div class="card">
            <h3>ğŸ“¡ ç½‘ç»œçŠ¶æ€</h3>
            <div class="info-item">
              <span class="info-label">è¿æ¥çŠ¶æ€</span>
              <span class="status online" id="networkStatus">åœ¨çº¿</span>
            </div>
            <div class="info-item">
              <span class="info-label">è¿æ¥ç±»å‹</span>
              <span class="info-value" id="connectionType">-</span>
            </div>
            <div class="info-item">
              <span class="info-label">æœ‰æ•ˆç±»å‹</span>
              <span class="info-value" id="effectiveType">-</span>
            </div>
            <div class="info-item">
              <span class="info-label">ä¸‹è¡Œé€Ÿåº¦</span>
              <span class="info-value" id="downlink">-</span>
            </div>
          </div>

        <!-- æ§åˆ¶é¢æ¿ -->
          <div class="card">
            <h3>ğŸ›ï¸ æ§åˆ¶é¢æ¿</h3>
            <button class="btn" onclick="refreshDeviceInfo()">åˆ·æ–°è®¾å¤‡ä¿¡æ¯</button>
            <button class="btn" onclick="testResponsive()">æµ‹è¯•å“åº”å¼</button>
            <button class="btn secondary" onclick="clearLog()">æ¸…ç©ºæ—¥å¿—</button>
            <button class="btn secondary" onclick="toggleFullscreen()">å…¨å±åˆ‡æ¢</button>
          </div>

        <!-- äº‹ä»¶æ—¥å¿— -->
        <div class="card">
          <h3>ğŸ“‹ äº‹ä»¶æ—¥å¿—</h3>
          <div class="log" id="eventLog">
            <div class="log-entry">
              <span class="timestamp">[å¯åŠ¨]</span>
              <span>è®¾å¤‡æ£€æµ‹åº“å·²åˆå§‹åŒ–</span>
            </div>
          </div>
        </div>
      </div>
    </div>

  <script src="./dist/index.js"></script>
    <script>
      // ç­‰å¾…è„šæœ¬åŠ è½½å®Œæˆ
      window.addEventListener('DOMContentLoaded', () => {
        // åˆå§‹åŒ–è®¾å¤‡æ£€æµ‹å™¨
        const detector = new window.LDesignDevice.DeviceDetector({
          breakpoints: {
            mobile: 768,
            tablet: 1024,
          },
          debounceDelay: 100,
          enableResizeListener: true,
          enableOrientationListener: true,
        })

    // æ—¥å¿—å‡½æ•°
        function addLog(message, type = 'info') {
          const logContainer = document.getElementById('eventLog')
          const timestamp = new Date().toLocaleTimeString()
          const logEntry = document.createElement('div')
          logEntry.className = 'log-entry'
          logEntry.innerHTML = `
        <span class="timestamp">[${timestamp}]</span>
        <span>${message}</span>
      `
          logContainer.appendChild(logEntry)
          logContainer.scrollTop = logContainer.scrollHeight
        }

    // æ›´æ–°è®¾å¤‡ä¿¡æ¯
        function updateDeviceInfo() {
          try {
            const info = detector.getDeviceInfo()

        document.getElementById('deviceType').textContent = info?.type || 'æœªçŸ¥';
            document.getElementById('orientation').textContent = info?.orientation || 'æœªçŸ¥'
            document.getElementById('touchSupport').textContent = info?.isTouchDevice ? 'æ˜¯' : 'å¦'
            document.getElementById('screenSize').textContent = info?.screen
              ? `${info.screen.width} Ã— ${info.screen.height}`
              : 'æœªçŸ¥'
            document.getElementById('pixelRatio').textContent = info?.screen?.pixelRatio || 'æœªçŸ¥'
            document.getElementById('browser').textContent = info?.browser
              ? `${info.browser.name} ${info.browser.version}`
              : 'æœªçŸ¥'
            document.getElementById('os').textContent = info?.os ? `${info.os.name} ${info.os.version}` : 'æœªçŸ¥'
            document.getElementById('userAgent').textContent = navigator.userAgent
          } catch (error) {
            console.error('Error updating device info:', error)
            addLog('æ›´æ–°è®¾å¤‡ä¿¡æ¯æ—¶å‡ºé”™: ' + error.message)
          }
        }

    // æ›´æ–°ç½‘ç»œä¿¡æ¯
        function updateNetworkInfo() {
          const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection

      document.getElementById('networkStatus').textContent = navigator.onLine ? 'åœ¨çº¿' : 'ç¦»çº¿';
          document.getElementById('networkStatus').className = `status ${navigator.onLine ? 'online' : 'offline'}`

      if (connection) {
            document.getElementById('connectionType').textContent = connection.type || 'æœªçŸ¥'
            document.getElementById('effectiveType').textContent = connection.effectiveType || 'æœªçŸ¥'
            document.getElementById('downlink').textContent = connection.downlink
              ? `${connection.downlink} Mbps`
              : 'æœªçŸ¥'
          } else {
            document.getElementById('connectionType').textContent = 'ä¸æ”¯æŒ'
            document.getElementById('effectiveType').textContent = 'ä¸æ”¯æŒ'
            document.getElementById('downlink').textContent = 'ä¸æ”¯æŒ'
          }
        }

    // åˆ·æ–°è®¾å¤‡ä¿¡æ¯
        function refreshDeviceInfo() {
          updateDeviceInfo()
          updateNetworkInfo()
          addLog('è®¾å¤‡ä¿¡æ¯å·²åˆ·æ–°')
        }

    // æµ‹è¯•å“åº”å¼
        function testResponsive() {
          addLog('å¼€å§‹å“åº”å¼æµ‹è¯• - è¯·è°ƒæ•´æµè§ˆå™¨çª—å£å¤§å°')
        }

    // æ¸…ç©ºæ—¥å¿—
        function clearLog() {
          const logContainer = document.getElementById('eventLog')
          logContainer.innerHTML =
            '<div class="log-entry"><span class="timestamp">[æ¸…ç©º]</span><span>æ—¥å¿—å·²æ¸…ç©º</span></div>'
        }

    // å…¨å±åˆ‡æ¢
        function toggleFullscreen() {
          if (!document.fullscreenElement) {
            document.documentElement.requestFullscreen()
            addLog('è¿›å…¥å…¨å±æ¨¡å¼')
          } else {
            document.exitFullscreen()
            addLog('é€€å‡ºå…¨å±æ¨¡å¼')
          }

      // äº‹ä»¶ç›‘å¬
        detector.on('deviceChange', (info) => {
          addLog(`è®¾å¤‡ä¿¡æ¯å˜åŒ–: ${info.type} - ${info.orientation}`)
          updateDeviceInfo()
        })

      detector.on('deviceTypeChange', (type) => {
          addLog(`è®¾å¤‡ç±»å‹å˜åŒ–: ${type}`)
        })

      detector.on('orientationChange', (orientation) => {
          addLog(`å±å¹•æ–¹å‘å˜åŒ–: ${orientation}`)
        })

      // ç½‘ç»œçŠ¶æ€ç›‘å¬
        window.addEventListener('online', () => {
          addLog('ç½‘ç»œè¿æ¥å·²æ¢å¤')
          updateNetworkInfo()
        })

        window.addEventListener('offline', () => {
          addLog('ç½‘ç»œè¿æ¥å·²æ–­å¼€')
          updateNetworkInfo()
        })

      // åˆå§‹åŒ–
        updateDeviceInfo()
        updateNetworkInfo()
        addLog('é¡µé¢åŠ è½½å®Œæˆï¼Œè®¾å¤‡æ£€æµ‹å™¨å·²å°±ç»ª')

      // é¡µé¢å¸è½½æ—¶æ¸…ç†
        window.addEventListener('beforeunload', () => {
          detector.destroy()
        })
      })
    </script>
  </body>
</html>
