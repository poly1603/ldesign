<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ldesign/device - 设备检测库演示</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

    body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        line-height: 1.6;
        color: #333;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
      }

    .container {
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        border-radius: 12px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        overflow: hidden;
      }

    .header {
        background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
        color: white;
        padding: 40px;
        text-align: center;
      }

      .header h1 {
        font-size: 2.5rem;
        margin-bottom: 10px;
        font-weight: 700;
      }

      .header p {
        font-size: 1.2rem;
        opacity: 0.9;
      }

    .content {
        padding: 40px;
      }

    .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 30px;
        margin-bottom: 40px;
      }

    .card {
        background: #f8fafc;
        border-radius: 8px;
        padding: 24px;
        border: 1px solid #e2e8f0;
        transition:
          transform 0.2s,
          box-shadow 0.2s;
      }

      .card:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
      }

      .card h3 {
        color: #4f46e5;
        margin-bottom: 16px;
        font-size: 1.25rem;
        font-weight: 600;
      }

      .info-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 8px 0;
        border-bottom: 1px solid #e2e8f0;
      }

      .info-item:last-child {
        border-bottom: none;
      }

      .info-label {
        font-weight: 500;
        color: #64748b;
      }

    .info-value {
        font-weight: 600;
        color: #1e293b;
      }

    .status {
        display: inline-block;
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 0.875rem;
        font-weight: 500;
      }

    .status.online {
        background: #dcfce7;
        color: #166534;
      }

    .status.offline {
        background: #fecaca;
        color: #991b1b;
      }

    .btn {
        background: #4f46e5;
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 6px;
        cursor: pointer;
        font-weight: 500;
        transition: background 0.2s;
        margin: 8px 8px 8px 0;
      }

    .btn:hover {
        background: #4338ca;
      }

    .btn.secondary {
        background: #6b7280;
      }

    .btn.secondary:hover {
        background: #4b5563;
      }

    .log {
        background: #1e293b;
        color: #e2e8f0;
        padding: 20px;
        border-radius: 8px;
        font-family: 'Courier New', monospace;
        font-size: 0.875rem;
        max-height: 300px;
        overflow-y: auto;
        margin-top: 20px;
      }

      .log-entry {
        margin-bottom: 8px;
        padding: 4px 0;
      }

    .timestamp {
        color: #94a3b8;
        margin-right: 8px;
      }

    @media (max-width: 768px) {
        .header h1 {
          font-size: 2rem;
        }

      .content {
          padding: 20px;
        }

        .grid {
          grid-template-columns: 1fr;
          gap: 20px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>@ldesign/device</h1>
        <p>现代化的设备检测库演示</p>
      </div>

      <div class="content">
        <div class="grid">
          <!-- 设备信息卡片 -->
          <div class="card">
            <h3>📱 设备信息</h3>
            <div class="info-item">
              <span class="info-label">设备类型</span>
              <span class="info-value" id="deviceType">-</span>
            </div>
            <div class="info-item">
              <span class="info-label">屏幕方向</span>
              <span class="info-value" id="orientation">-</span>
            </div>
            <div class="info-item">
              <span class="info-label">触摸支持</span>
              <span class="info-value" id="touchSupport">-</span>
            </div>
            <div class="info-item">
              <span class="info-label">屏幕尺寸</span>
              <span class="info-value" id="screenSize">-</span>
            </div>
            <div class="info-item">
              <span class="info-label">像素比</span>
              <span class="info-value" id="pixelRatio">-</span>
            </div>
          </div>

        <!-- 浏览器信息卡片 -->
          <div class="card">
            <h3>🌐 浏览器信息</h3>
            <div class="info-item">
              <span class="info-label">浏览器</span>
              <span class="info-value" id="browser">-</span>
            </div>
            <div class="info-item">
              <span class="info-label">操作系统</span>
              <span class="info-value" id="os">-</span>
            </div>
            <div class="info-item">
              <span class="info-label">用户代理</span>
              <span class="info-value" id="userAgent" style="font-size: 0.8rem; word-break: break-all">-</span>
            </div>
          </div>

        <!-- 网络状态卡片 -->
          <div class="card">
            <h3>📡 网络状态</h3>
            <div class="info-item">
              <span class="info-label">连接状态</span>
              <span class="status online" id="networkStatus">在线</span>
            </div>
            <div class="info-item">
              <span class="info-label">连接类型</span>
              <span class="info-value" id="connectionType">-</span>
            </div>
            <div class="info-item">
              <span class="info-label">有效类型</span>
              <span class="info-value" id="effectiveType">-</span>
            </div>
            <div class="info-item">
              <span class="info-label">下行速度</span>
              <span class="info-value" id="downlink">-</span>
            </div>
          </div>

        <!-- 控制面板 -->
          <div class="card">
            <h3>🎛️ 控制面板</h3>
            <button class="btn" onclick="refreshDeviceInfo()">刷新设备信息</button>
            <button class="btn" onclick="testResponsive()">测试响应式</button>
            <button class="btn secondary" onclick="clearLog()">清空日志</button>
            <button class="btn secondary" onclick="toggleFullscreen()">全屏切换</button>
          </div>

        <!-- 事件日志 -->
        <div class="card">
          <h3>📋 事件日志</h3>
          <div class="log" id="eventLog">
            <div class="log-entry">
              <span class="timestamp">[启动]</span>
              <span>设备检测库已初始化</span>
            </div>
          </div>
        </div>
      </div>
    </div>

  <script src="./dist/index.js"></script>
    <script>
      // 等待脚本加载完成
      window.addEventListener('DOMContentLoaded', () => {
        // 初始化设备检测器
        const detector = new window.LDesignDevice.DeviceDetector({
          breakpoints: {
            mobile: 768,
            tablet: 1024,
          },
          debounceDelay: 100,
          enableResizeListener: true,
          enableOrientationListener: true,
        })

    // 日志函数
        function addLog(message, type = 'info') {
          const logContainer = document.getElementById('eventLog')
          const timestamp = new Date().toLocaleTimeString()
          const logEntry = document.createElement('div')
          logEntry.className = 'log-entry'
          logEntry.innerHTML = `
        <span class="timestamp">[${timestamp}]</span>
        <span>${message}</span>
      `
          logContainer.appendChild(logEntry)
          logContainer.scrollTop = logContainer.scrollHeight
        }

    // 更新设备信息
        function updateDeviceInfo() {
          try {
            const info = detector.getDeviceInfo()

        document.getElementById('deviceType').textContent = info?.type || '未知';
            document.getElementById('orientation').textContent = info?.orientation || '未知'
            document.getElementById('touchSupport').textContent = info?.isTouchDevice ? '是' : '否'
            document.getElementById('screenSize').textContent = info?.screen
              ? `${info.screen.width} × ${info.screen.height}`
              : '未知'
            document.getElementById('pixelRatio').textContent = info?.screen?.pixelRatio || '未知'
            document.getElementById('browser').textContent = info?.browser
              ? `${info.browser.name} ${info.browser.version}`
              : '未知'
            document.getElementById('os').textContent = info?.os ? `${info.os.name} ${info.os.version}` : '未知'
            document.getElementById('userAgent').textContent = navigator.userAgent
          } catch (error) {
            console.error('Error updating device info:', error)
            addLog('更新设备信息时出错: ' + error.message)
          }
        }

    // 更新网络信息
        function updateNetworkInfo() {
          const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection

      document.getElementById('networkStatus').textContent = navigator.onLine ? '在线' : '离线';
          document.getElementById('networkStatus').className = `status ${navigator.onLine ? 'online' : 'offline'}`

      if (connection) {
            document.getElementById('connectionType').textContent = connection.type || '未知'
            document.getElementById('effectiveType').textContent = connection.effectiveType || '未知'
            document.getElementById('downlink').textContent = connection.downlink
              ? `${connection.downlink} Mbps`
              : '未知'
          } else {
            document.getElementById('connectionType').textContent = '不支持'
            document.getElementById('effectiveType').textContent = '不支持'
            document.getElementById('downlink').textContent = '不支持'
          }
        }

    // 刷新设备信息
        function refreshDeviceInfo() {
          updateDeviceInfo()
          updateNetworkInfo()
          addLog('设备信息已刷新')
        }

    // 测试响应式
        function testResponsive() {
          addLog('开始响应式测试 - 请调整浏览器窗口大小')
        }

    // 清空日志
        function clearLog() {
          const logContainer = document.getElementById('eventLog')
          logContainer.innerHTML =
            '<div class="log-entry"><span class="timestamp">[清空]</span><span>日志已清空</span></div>'
        }

    // 全屏切换
        function toggleFullscreen() {
          if (!document.fullscreenElement) {
            document.documentElement.requestFullscreen()
            addLog('进入全屏模式')
          } else {
            document.exitFullscreen()
            addLog('退出全屏模式')
          }

      // 事件监听
        detector.on('deviceChange', (info) => {
          addLog(`设备信息变化: ${info.type} - ${info.orientation}`)
          updateDeviceInfo()
        })

      detector.on('deviceTypeChange', (type) => {
          addLog(`设备类型变化: ${type}`)
        })

      detector.on('orientationChange', (orientation) => {
          addLog(`屏幕方向变化: ${orientation}`)
        })

      // 网络状态监听
        window.addEventListener('online', () => {
          addLog('网络连接已恢复')
          updateNetworkInfo()
        })

        window.addEventListener('offline', () => {
          addLog('网络连接已断开')
          updateNetworkInfo()
        })

      // 初始化
        updateDeviceInfo()
        updateNetworkInfo()
        addLog('页面加载完成，设备检测器已就绪')

      // 页面卸载时清理
        window.addEventListener('beforeunload', () => {
          detector.destroy()
        })
      })
    </script>
  </body>
</html>
