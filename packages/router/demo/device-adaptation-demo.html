<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LDesign Router è®¾å¤‡é€‚é…æ¼”ç¤º</title>
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        margin: 0;
        padding: 20px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
      }

      .container {
        max-width: 800px;
        margin: 0 auto;
        background: white;
        border-radius: 16px;
        padding: 30px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      }

      .header {
        text-align: center;
        margin-bottom: 30px;
      }

      .header h1 {
        color: #2d3748;
        margin: 0 0 10px 0;
      }

      .header p {
        color: #718096;
        margin: 0;
      }

      .demo-section {
        margin-bottom: 30px;
        padding: 20px;
        border: 1px solid #e2e8f0;
        border-radius: 8px;
      }

      .demo-section h3 {
        color: #2d3748;
        margin: 0 0 15px 0;
      }

      .device-info {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-bottom: 20px;
      }

      .info-card {
        background: #f7fafc;
        padding: 15px;
        border-radius: 8px;
        border-left: 4px solid #4299e1;
      }

      .info-card .label {
        font-size: 12px;
        color: #718096;
        text-transform: uppercase;
        margin-bottom: 5px;
      }

      .info-card .value {
        font-size: 16px;
        font-weight: 600;
        color: #2d3748;
      }

      .device-simulator {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        margin-bottom: 20px;
      }

      .device-button {
        padding: 10px 20px;
        border: none;
        border-radius: 6px;
        background: #4299e1;
        color: white;
        cursor: pointer;
        font-size: 14px;
        transition: all 0.2s ease;
      }

      .device-button:hover {
        background: #3182ce;
        transform: translateY(-1px);
      }

      .device-button.active {
        background: #38a169;
      }

      .route-tests {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 15px;
      }

      .route-test {
        background: #edf2f7;
        padding: 15px;
        border-radius: 8px;
      }

      .route-test .route-path {
        font-family: 'Courier New', monospace;
        font-weight: 600;
        color: #2d3748;
        margin-bottom: 10px;
      }

      .route-test .support-status {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .status-icon {
        width: 16px;
        height: 16px;
        border-radius: 50%;
      }

      .status-icon.supported {
        background: #38a169;
      }

      .status-icon.unsupported {
        background: #e53e3e;
      }

      .component-demo {
        margin-top: 20px;
        padding: 20px;
        background: #f7fafc;
        border-radius: 8px;
        border: 2px dashed #cbd5e0;
      }

      .component-demo h4 {
        margin: 0 0 15px 0;
        color: #2d3748;
      }

      .component-info {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
        margin-bottom: 15px;
      }

      .component-info .tag {
        padding: 4px 8px;
        background: #4299e1;
        color: white;
        border-radius: 4px;
        font-size: 12px;
      }

      .component-info .tag.fallback {
        background: #ed8936;
      }

      .log-section {
        background: #1a202c;
        color: #e2e8f0;
        padding: 15px;
        border-radius: 8px;
        font-family: 'Courier New', monospace;
        font-size: 12px;
        max-height: 200px;
        overflow-y: auto;
      }

      .log-entry {
        margin-bottom: 5px;
        padding: 2px 0;
      }

      .log-entry.info {
        color: #63b3ed;
      }

      .log-entry.warning {
        color: #f6ad55;
      }

      .log-entry.error {
        color: #fc8181;
      }

      @media (max-width: 768px) {
        .container {
          margin: 10px;
          padding: 20px;
        }

        .device-info {
          grid-template-columns: 1fr;
        }

        .route-tests {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>ğŸš€ LDesign Router è®¾å¤‡é€‚é…æ¼”ç¤º</h1>
        <p>ä½“éªŒå¼ºå¤§çš„è®¾å¤‡é€‚é…åŠŸèƒ½ï¼ŒåŒ…æ‹¬è®¾å¤‡æ£€æµ‹ã€ç»„ä»¶è§£æå’Œè®¿é—®æ§åˆ¶</p>
      </div>

      <div class="demo-section">
        <h3>ğŸ“± è®¾å¤‡ä¿¡æ¯</h3>
        <div class="device-info">
          <div class="info-card">
            <div class="label">å½“å‰è®¾å¤‡</div>
            <div class="value" id="current-device">æ£€æµ‹ä¸­...</div>
          </div>
          <div class="info-card">
            <div class="label">è§†å£å°ºå¯¸</div>
            <div class="value" id="viewport-size">-</div>
          </div>
          <div class="info-card">
            <div class="label">ç”¨æˆ·ä»£ç†</div>
            <div class="value" id="user-agent">-</div>
          </div>
          <div class="info-card">
            <div class="label">è§¦æ‘¸æ”¯æŒ</div>
            <div class="value" id="touch-support">-</div>
          </div>
        </div>
      </div>

      <div class="demo-section">
        <h3>ğŸ® è®¾å¤‡æ¨¡æ‹Ÿå™¨</h3>
        <p>ç‚¹å‡»æŒ‰é’®æ¨¡æ‹Ÿä¸åŒè®¾å¤‡ç±»å‹ï¼ˆè°ƒæ•´çª—å£å¤§å°ï¼‰ï¼š</p>
        <div class="device-simulator">
          <button class="device-button" onclick="simulateDevice('mobile')">ğŸ“± ç§»åŠ¨ç«¯ (375px)</button>
          <button class="device-button" onclick="simulateDevice('tablet')">ğŸ“± å¹³æ¿ç«¯ (768px)</button>
          <button class="device-button" onclick="simulateDevice('desktop')">ğŸ–¥ï¸ æ¡Œé¢ç«¯ (1200px)</button>
        </div>
      </div>

      <div class="demo-section">
        <h3>ğŸ›¡ï¸ è·¯ç”±è®¿é—®æ§åˆ¶æµ‹è¯•</h3>
        <p>ä»¥ä¸‹è·¯ç”±é…ç½®äº†ä¸åŒçš„è®¾å¤‡è®¿é—®é™åˆ¶ï¼š</p>
        <div class="route-tests">
          <div class="route-test">
            <div class="route-path">/admin</div>
            <div class="support-status">
              <div class="status-icon" id="admin-status"></div>
              <span id="admin-text">ä»…æ¡Œé¢ç«¯</span>
            </div>
          </div>
          <div class="route-test">
            <div class="route-path">/mobile-app</div>
            <div class="support-status">
              <div class="status-icon" id="mobile-app-status"></div>
              <span id="mobile-app-text">ä»…ç§»åŠ¨ç«¯</span>
            </div>
          </div>
          <div class="route-test">
            <div class="route-path">/responsive</div>
            <div class="support-status">
              <div class="status-icon" id="responsive-status"></div>
              <span id="responsive-text">æ‰€æœ‰è®¾å¤‡</span>
            </div>
          </div>
        </div>
      </div>

      <div class="demo-section">
        <h3>ğŸ§© ç»„ä»¶è§£ææ¼”ç¤º</h3>
        <div class="component-demo">
          <h4>å½“å‰é¡µé¢ç»„ä»¶</h4>
          <div class="component-info">
            <span class="tag" id="component-source">æ¥æº: component</span>
            <span class="tag" id="component-device">è®¾å¤‡: desktop</span>
            <span class="tag" id="component-fallback" style="display: none">å›é€€ç»„ä»¶</span>
          </div>
          <p id="component-description">æ ¹æ®å½“å‰è®¾å¤‡ç±»å‹ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨é€‰æ‹©æœ€åˆé€‚çš„ç»„ä»¶è¿›è¡Œæ¸²æŸ“ã€‚</p>
        </div>
      </div>

      <div class="demo-section">
        <h3>ğŸ“Š å®æ—¶æ—¥å¿—</h3>
        <div class="log-section" id="log-container">
          <div class="log-entry info">[INFO] è®¾å¤‡é€‚é…æ¼”ç¤ºå·²å¯åŠ¨</div>
        </div>
      </div>
    </div>

    <script>
      // æ¨¡æ‹Ÿè®¾å¤‡æ£€æµ‹åŠŸèƒ½
      let currentDeviceType = 'desktop'

      // è®¾å¤‡æ£€æµ‹é…ç½®
      const deviceConfig = {
        mobile: { maxWidth: 767, name: 'ç§»åŠ¨è®¾å¤‡' },
        tablet: { maxWidth: 1023, name: 'å¹³æ¿è®¾å¤‡' },
        desktop: { maxWidth: Infinity, name: 'æ¡Œé¢è®¾å¤‡' },
      }

      // è·¯ç”±é…ç½®
      const routeConfig = {
        '/admin': { supportedDevices: ['desktop'] },
        '/mobile-app': { supportedDevices: ['mobile'] },
        '/responsive': { supportedDevices: ['mobile', 'tablet', 'desktop'] },
      }

      // æ£€æµ‹è®¾å¤‡ç±»å‹
      function detectDevice() {
        const width = window.innerWidth

        if (width <= deviceConfig.mobile.maxWidth) {
          return 'mobile'
        } else if (width <= deviceConfig.tablet.maxWidth) {
          return 'tablet'
        } else {
          return 'desktop'
        }
      }

      // æ›´æ–°è®¾å¤‡ä¿¡æ¯æ˜¾ç¤º
      function updateDeviceInfo() {
        currentDeviceType = detectDevice()

        document.getElementById('current-device').textContent = deviceConfig[currentDeviceType].name
        document.getElementById('viewport-size').textContent = `${window.innerWidth} Ã— ${window.innerHeight}`
        document.getElementById('user-agent').textContent = navigator.userAgent.substring(0, 50) + '...'
        document.getElementById('touch-support').textContent = 'ontouchstart' in window ? 'æ”¯æŒ' : 'ä¸æ”¯æŒ'

        logMessage('info', `è®¾å¤‡ç±»å‹å˜æ›´ä¸º: ${deviceConfig[currentDeviceType].name} (${window.innerWidth}px)`)
      }

      // æ›´æ–°è·¯ç”±è®¿é—®çŠ¶æ€
      function updateRouteStatus() {
        Object.entries(routeConfig).forEach(([route, config]) => {
          const routeName = route.replace('/', '').replace('-', '-')
          const statusElement = document.getElementById(`${routeName}-status`)
          const textElement = document.getElementById(`${routeName}-text`)

          const isSupported = config.supportedDevices.includes(currentDeviceType)

          if (statusElement) {
            statusElement.className = `status-icon ${isSupported ? 'supported' : 'unsupported'}`
          }

          if (textElement) {
            const deviceNames = config.supportedDevices.map(d => deviceConfig[d].name).join('ã€')
            textElement.textContent = `${deviceNames} ${isSupported ? 'âœ…' : 'âŒ'}`
          }
        })
      }

      // æ›´æ–°ç»„ä»¶ä¿¡æ¯
      function updateComponentInfo() {
        const sourceElement = document.getElementById('component-source')
        const deviceElement = document.getElementById('component-device')
        const fallbackElement = document.getElementById('component-fallback')
        const descriptionElement = document.getElementById('component-description')

        // æ¨¡æ‹Ÿç»„ä»¶è§£æé€»è¾‘
        let source = 'deviceComponents'
        let isFallback = false

        // æ¨¡æ‹ŸæŸäº›è®¾å¤‡æ²¡æœ‰ä¸“ç”¨ç»„ä»¶çš„æƒ…å†µ
        if (currentDeviceType === 'tablet') {
          source = 'component'
          isFallback = true
        }

        sourceElement.textContent = `æ¥æº: ${source}`
        deviceElement.textContent = `è®¾å¤‡: ${currentDeviceType}`
        fallbackElement.style.display = isFallback ? 'inline' : 'none'

        const descriptions = {
          mobile: 'ç§»åŠ¨ç«¯ä¼˜åŒ–ç»„ä»¶ï¼šç®€åŒ–ç•Œé¢ï¼Œè§¦æ‘¸å‹å¥½',
          tablet: 'å¹³æ¿ç«¯é€‚é…ç»„ä»¶ï¼šå¹³è¡¡åŠŸèƒ½ä¸æ˜“ç”¨æ€§',
          desktop: 'æ¡Œé¢ç«¯å®Œæ•´ç»„ä»¶ï¼šåŠŸèƒ½ä¸°å¯Œï¼Œæ“ä½œç²¾ç¡®',
        }

        descriptionElement.textContent = descriptions[currentDeviceType] || 'é€šç”¨ç»„ä»¶'
      }

      // æ¨¡æ‹Ÿè®¾å¤‡åˆ‡æ¢
      function simulateDevice(deviceType) {
        const widths = {
          mobile: 375,
          tablet: 768,
          desktop: 1200,
        }

        // æ›´æ–°æŒ‰é’®çŠ¶æ€
        document.querySelectorAll('.device-button').forEach(btn => {
          btn.classList.remove('active')
        })
        event.target.classList.add('active')

        // æ¨¡æ‹Ÿçª—å£å¤§å°å˜åŒ–
        const width = widths[deviceType]
        logMessage('info', `æ¨¡æ‹Ÿè®¾å¤‡åˆ‡æ¢åˆ°: ${deviceConfig[deviceType].name} (${width}px)`)

        // è¿™é‡Œå®é™…ä¸Šæ— æ³•æ”¹å˜çª—å£å¤§å°ï¼Œä½†å¯ä»¥æ¨¡æ‹Ÿæ£€æµ‹ç»“æœ
        currentDeviceType = deviceType
        updateDeviceInfo()
        updateRouteStatus()
        updateComponentInfo()

        logMessage('warning', 'æ³¨æ„: å®é™…é¡¹ç›®ä¸­è®¾å¤‡æ£€æµ‹åŸºäºçœŸå®çš„çª—å£å¤§å°å’Œç”¨æˆ·ä»£ç†')
      }

      // æ·»åŠ æ—¥å¿—æ¶ˆæ¯
      function logMessage(type, message) {
        const logContainer = document.getElementById('log-container')
        const timestamp = new Date().toLocaleTimeString()
        const logEntry = document.createElement('div')
        logEntry.className = `log-entry ${type}`
        logEntry.textContent = `[${timestamp}] ${message}`

        logContainer.appendChild(logEntry)
        logContainer.scrollTop = logContainer.scrollHeight

        // é™åˆ¶æ—¥å¿—æ¡æ•°
        const entries = logContainer.querySelectorAll('.log-entry')
        if (entries.length > 50) {
          entries[0].remove()
        }
      }

      // åˆå§‹åŒ–
      function init() {
        updateDeviceInfo()
        updateRouteStatus()
        updateComponentInfo()

        // ç›‘å¬çª—å£å¤§å°å˜åŒ–
        let resizeTimeout
        window.addEventListener('resize', () => {
          clearTimeout(resizeTimeout)
          resizeTimeout = setTimeout(() => {
            updateDeviceInfo()
            updateRouteStatus()
            updateComponentInfo()
          }, 100)
        })

        logMessage('info', 'LDesign Router è®¾å¤‡é€‚é…æ¼”ç¤ºåˆå§‹åŒ–å®Œæˆ')
        logMessage('info', 'å°è¯•è°ƒæ•´æµè§ˆå™¨çª—å£å¤§å°æ¥ä½“éªŒå“åº”å¼è®¾å¤‡æ£€æµ‹')
      }

      // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
      document.addEventListener('DOMContentLoaded', init)
    </script>
  </body>
</html>
