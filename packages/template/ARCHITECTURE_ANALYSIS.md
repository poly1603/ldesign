# Vue3 æ¨¡æ¿ç®¡ç†ç³»ç»Ÿæ¶æ„åˆ†ææŠ¥å‘Š

## ğŸ“‹ æ¦‚è¿°

æœ¬æŠ¥å‘Šè¯¦ç»†åˆ†æäº† `packages/template/` ä¸­Vue3æ¨¡æ¿ç®¡ç†æ¸²æŸ“åˆ‡æ¢åŒ…çš„ç°æœ‰æ¶æ„ï¼Œè¯†åˆ«ç¡¬ç¼–ç æ•°æ®ï¼Œå¹¶åˆ¶å®šé‡æ„ä¼˜åŒ–æ–¹æ¡ˆã€‚

## ğŸ—ï¸ ç°æœ‰æ¶æ„åˆ†æ

### æ ¸å¿ƒæ¨¡å—ç»“æ„

```
packages/template/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/          # Vueç»„ä»¶
â”‚   â”œâ”€â”€ composables/         # ç»„åˆå¼API
â”‚   â”œâ”€â”€ core/               # æ ¸å¿ƒåŠŸèƒ½
â”‚   â”œâ”€â”€ scanner/            # æ¨¡æ¿æ‰«æå™¨
â”‚   â”œâ”€â”€ templates/          # å†…ç½®æ¨¡æ¿
â”‚   â”œâ”€â”€ types/              # TypeScriptç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ vue/                # Vueç‰¹å®šåŠŸèƒ½
â”œâ”€â”€ example/                # ç¤ºä¾‹é¡¹ç›®
â”œâ”€â”€ docs/                   # æ–‡æ¡£
â”œâ”€â”€ tests/                  # æµ‹è¯•æ–‡ä»¶
â””â”€â”€ types/                  # ç±»å‹å£°æ˜æ–‡ä»¶
```

### æ¶æ„ä¼˜åŠ¿

1. **æ¨¡å—åŒ–è®¾è®¡**ï¼šåŠŸèƒ½æ¨¡å—æ¸…æ™°åˆ†ç¦»ï¼ŒèŒè´£æ˜ç¡®
2. **TypeScriptæ”¯æŒ**ï¼šå®Œæ•´çš„ç±»å‹å®šä¹‰å’Œç±»å‹å®‰å…¨
3. **Vue3é›†æˆ**ï¼šåŸç”Ÿæ”¯æŒç»„åˆå¼APIå’Œæ’ä»¶ç³»ç»Ÿ
4. **åŠ¨æ€æ‰«æ**ï¼šåŸºç¡€çš„æ¨¡æ¿åŠ¨æ€å‘ç°æœºåˆ¶
5. **ç¼“å­˜æœºåˆ¶**ï¼šå†…å­˜ç¼“å­˜å’Œæ€§èƒ½ä¼˜åŒ–

## ğŸš¨ ç¡¬ç¼–ç æ•°æ®è¯†åˆ«

### 1. æ’ä»¶é…ç½®ç¡¬ç¼–ç 

**ä½ç½®**: `src/plugin.ts`
```typescript
const DEFAULT_OPTIONS: Required<TemplatePluginOptions> = {
  templatesDir: 'src/templates',        // ç¡¬ç¼–ç è·¯å¾„
  autoScan: true,
  cache: true,
  enableHMR: import.meta.env?.DEV ?? false,
  defaultDevice: 'desktop',             // ç¡¬ç¼–ç é»˜è®¤è®¾å¤‡
  enablePerformanceMonitor: false,
  preloadStrategy: {
    enabled: true,
    mode: 'lazy',
    limit: 5,                          // ç¡¬ç¼–ç é™åˆ¶
    priority: []                       // ç©ºæ•°ç»„ï¼Œä½†ç»“æ„ç¡¬ç¼–ç 
  }
}
```

### 2. ç¤ºä¾‹é¡¹ç›®ç¡¬ç¼–ç 

**ä½ç½®**: `example/src/main.ts`
```typescript
app.use(TemplatePlugin, {
  templatesDir: '../src/templates',      // ç¡¬ç¼–ç ç›¸å¯¹è·¯å¾„
  preloadStrategy: {
    priority: ['login-desktop-default', 'login-desktop-modern']  // ç¡¬ç¼–ç ä¼˜å…ˆçº§
  }
})
```

### 3. è®¾å¤‡æ£€æµ‹ç¡¬ç¼–ç 

**ä½ç½®**: `src/composables/useDeviceDetection.ts`
```typescript
// ç¡¬ç¼–ç æ–­ç‚¹å€¼
const breakpoints = {
  mobile: 768,
  tablet: 992,
  desktop: 1200
}

function detectDeviceType(): DeviceType {
  const width = window.innerWidth
  if (width < breakpoints.mobile) {      // ç¡¬ç¼–ç åˆ¤æ–­é€»è¾‘
    return 'mobile'
  } else if (width < breakpoints.tablet) {
    return 'tablet'
  } else {
    return 'desktop'
  }
}
```

### 4. æ‰«æå™¨ç¡¬ç¼–ç 

**ä½ç½®**: `src/scanner/index.ts`
```typescript
this.options = {
  templatesDir: 'src/templates',         // ç¡¬ç¼–ç é»˜è®¤è·¯å¾„
  enableCache: true,
  enableHMR: false,
  maxDepth: 5,                          // ç¡¬ç¼–ç æ·±åº¦é™åˆ¶
  includeExtensions: ['.vue', '.tsx', '.js', '.ts'],  // ç¡¬ç¼–ç æ‰©å±•å
  excludePatterns: ['node_modules', '.git', 'dist'],  // ç¡¬ç¼–ç æ’é™¤æ¨¡å¼
  ...options
}
```

### 5. æ¨¡æ¿è·¯å¾„ç¡¬ç¼–ç 

**ä½ç½®**: `src/scanner/index.ts`
```typescript
// ç¡¬ç¼–ç è·¯å¾„æ„å»ºé€»è¾‘
const basePath = configPath.replace(/\/config\.(js|ts)$/, '')
const componentPath = `${basePath}/index.vue`     // ç¡¬ç¼–ç æ–‡ä»¶å
const stylePath = `${basePath}/style.less`        // ç¡¬ç¼–ç æ ·å¼æ–‡ä»¶å
```

### 6. ç¼“å­˜é…ç½®ç¡¬ç¼–ç 

**ä½ç½®**: å¤šä¸ªæ–‡ä»¶ä¸­çš„ç¼“å­˜é…ç½®
```typescript
// ç¡¬ç¼–ç ç¼“å­˜å‚æ•°
const cacheConfig = {
  maxSize: 50,                          // ç¡¬ç¼–ç ç¼“å­˜å¤§å°
  ttl: 30 * 60 * 1000,                 // ç¡¬ç¼–ç è¿‡æœŸæ—¶é—´
  strategy: 'lru'                       // ç¡¬ç¼–ç ç­–ç•¥
}
```

## ğŸ¯ é‡æ„ä¼˜åŒ–æ–¹æ¡ˆ

### 1. é…ç½®æ–‡ä»¶åŠ¨æ€åŒ–

**ç›®æ ‡**: ç§»é™¤æ‰€æœ‰ç¡¬ç¼–ç é…ç½®ï¼Œå®ç°åŸºäºé…ç½®æ–‡ä»¶çš„åŠ¨æ€åŠ è½½

**æ–¹æ¡ˆ**:
- åˆ›å»º `template.config.ts` é…ç½®æ–‡ä»¶
- æ”¯æŒç¯å¢ƒå˜é‡è¦†ç›–
- å®ç°é…ç½®çƒ­æ›´æ–°æœºåˆ¶

### 2. æ¨¡æ¿æ‰«æåŠ¨æ€åŒ–

**ç›®æ ‡**: å®ç°å®Œå…¨åŠ¨æ€çš„æ¨¡æ¿å‘ç°å’ŒåŠ è½½æœºåˆ¶

**æ–¹æ¡ˆ**:
- ç§»é™¤ç¡¬ç¼–ç çš„æ–‡ä»¶æ‰©å±•åå’Œè·¯å¾„è§„åˆ™
- å®ç°åŸºäºé…ç½®çš„æ‰«æè§„åˆ™
- æ”¯æŒè‡ªå®šä¹‰å‘½åçº¦å®š

### 3. è®¾å¤‡æ£€æµ‹åŠ¨æ€åŒ–

**ç›®æ ‡**: æ”¯æŒè‡ªå®šä¹‰è®¾å¤‡æ£€æµ‹é€»è¾‘å’Œæ–­ç‚¹é…ç½®

**æ–¹æ¡ˆ**:
- é…ç½®åŒ–æ–­ç‚¹è®¾ç½®
- æ”¯æŒè‡ªå®šä¹‰æ£€æµ‹å‡½æ•°
- å®ç°å“åº”å¼æ–­ç‚¹æ›´æ–°

### 4. ç¼“å­˜ç­–ç•¥åŠ¨æ€åŒ–

**ç›®æ ‡**: å®ç°å¯é…ç½®çš„ç¼“å­˜ç­–ç•¥å’Œå‚æ•°

**æ–¹æ¡ˆ**:
- é…ç½®åŒ–ç¼“å­˜å‚æ•°
- æ”¯æŒå¤šç§ç¼“å­˜ç­–ç•¥
- å®ç°è¿è¡Œæ—¶ç¼“å­˜è°ƒä¼˜

### 5. æ¨¡æ¿è·¯å¾„åŠ¨æ€åŒ–

**ç›®æ ‡**: æ”¯æŒè‡ªå®šä¹‰æ¨¡æ¿ç»„ç»‡ç»“æ„å’Œå‘½åè§„åˆ™

**æ–¹æ¡ˆ**:
- é…ç½®åŒ–è·¯å¾„è§„åˆ™
- æ”¯æŒå¤šç§æ–‡ä»¶ç»„ç»‡æ–¹å¼
- å®ç°çµæ´»çš„æ¨¡æ¿å‘ç°æœºåˆ¶

## ğŸ“Š æ¶æ„è´¨é‡è¯„ä¼°

### é«˜å†…èšä½è€¦åˆåˆ†æ

**å½“å‰çŠ¶æ€**:
- âœ… æ¨¡å—èŒè´£ç›¸å¯¹æ˜ç¡®
- âš ï¸ é…ç½®æ•£å¸ƒåœ¨å¤šä¸ªæ–‡ä»¶ä¸­
- âš ï¸ ç¡¬ç¼–ç å¯¼è‡´æ¨¡å—é—´éšå¼ä¾èµ–

**ä¼˜åŒ–ç›®æ ‡**:
- ğŸ¯ é›†ä¸­åŒ–é…ç½®ç®¡ç†
- ğŸ¯ å‡å°‘æ¨¡å—é—´ç¡¬ç¼–ç ä¾èµ–
- ğŸ¯ æé«˜æ¨¡å—å¯æµ‹è¯•æ€§

### å¯æ‰©å±•æ€§åˆ†æ

**å½“å‰é™åˆ¶**:
- ç¡¬ç¼–ç é™åˆ¶äº†æ‰©å±•èƒ½åŠ›
- æ¨¡æ¿ç»„ç»‡ç»“æ„å›ºåŒ–
- è®¾å¤‡ç±»å‹æ‰©å±•å›°éš¾

**ä¼˜åŒ–æ–¹å‘**:
- æ’ä»¶åŒ–æ¶æ„è®¾è®¡
- é…ç½®é©±åŠ¨çš„æ‰©å±•æœºåˆ¶
- å¼€æ”¾çš„æ¥å£è®¾è®¡

## ğŸš€ ä¸‹ä¸€æ­¥è¡ŒåŠ¨è®¡åˆ’

1. **åˆ›å»ºé…ç½®ç³»ç»Ÿ** - è®¾è®¡ç»Ÿä¸€çš„é…ç½®ç®¡ç†æœºåˆ¶
2. **é‡æ„æ ¸å¿ƒæ¨¡å—** - ç§»é™¤ç¡¬ç¼–ç ï¼Œå®ç°é…ç½®é©±åŠ¨
3. **å¢å¼ºæ‰«æå™¨** - å®ç°å®Œå…¨åŠ¨æ€çš„æ¨¡æ¿å‘ç°
4. **ä¼˜åŒ–ç¼“å­˜ç³»ç»Ÿ** - å®ç°å¯é…ç½®çš„ç¼“å­˜ç­–ç•¥
5. **å®Œå–„ç±»å‹å®šä¹‰** - ç¡®ä¿ç±»å‹å®‰å…¨å’Œé›¶anyä½¿ç”¨
6. **ç¼–å†™æµ‹è¯•ç”¨ä¾‹** - ç¡®ä¿é‡æ„åçš„åŠŸèƒ½æ­£ç¡®æ€§
7. **æ›´æ–°æ–‡æ¡£** - åæ˜ æ–°çš„æ¶æ„å’Œé…ç½®æ–¹å¼

## ğŸ“ˆ é¢„æœŸæ”¶ç›Š

- **çµæ´»æ€§æå‡**: æ”¯æŒå¤šç§ä½¿ç”¨åœºæ™¯å’Œé…ç½®éœ€æ±‚
- **å¯ç»´æŠ¤æ€§å¢å¼º**: å‡å°‘ç¡¬ç¼–ç ï¼Œæé«˜ä»£ç è´¨é‡
- **æ‰©å±•æ€§æ”¹å–„**: æ”¯æŒæ’ä»¶åŒ–æ‰©å±•å’Œè‡ªå®šä¹‰é…ç½®
- **æ€§èƒ½ä¼˜åŒ–**: æ›´æ™ºèƒ½çš„ç¼“å­˜å’ŒåŠ è½½ç­–ç•¥
- **å¼€å‘ä½“éªŒ**: æ›´å¥½çš„TypeScriptæ”¯æŒå’Œé”™è¯¯æç¤º
