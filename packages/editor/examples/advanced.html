<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LDesign Editor - é«˜çº§ç¤ºä¾‹</title>
  <style>
    /* å¼•å…¥CSSå˜é‡ */
    :root {
      --ldesign-brand-color-1: #f1ecf9;
      --ldesign-brand-color-2: #d8c8ee;
      --ldesign-brand-color-3: #bfa4e5;
      --ldesign-brand-color-4: #a67fdb;
      --ldesign-brand-color-5: #8c5ad3;
      --ldesign-brand-color-6: #7334cb;
      --ldesign-brand-color-7: #5e2aa7;
      --ldesign-brand-color-8: #491f84;
      --ldesign-brand-color-9: #35165f;
      --ldesign-brand-color-10: #200d3b;
      --ldesign-brand-color: var(--ldesign-brand-color-7);
      --ldesign-bg-color-container: #ffffff;
      --ldesign-border-level-1-color: #e5e5e5;
      --ldesign-text-color-primary: rgba(0, 0, 0, 90%);
      --ldesign-text-color-secondary: rgba(0, 0, 0, 70%);
    }

    /* åŸºç¡€æ ·å¼ */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }

    .app-container {
      max-width: 1400px;
      margin: 0 auto;
      background: var(--ldesign-bg-color-container);
      border-radius: 12px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      overflow: hidden;
    }

    .app-header {
      background: var(--ldesign-brand-color);
      color: white;
      padding: 30px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    .app-header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="white" opacity="0.1"/><circle cx="75" cy="75" r="1" fill="white" opacity="0.1"/><circle cx="50" cy="10" r="0.5" fill="white" opacity="0.1"/><circle cx="10" cy="60" r="0.5" fill="white" opacity="0.1"/><circle cx="90" cy="40" r="0.5" fill="white" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
      pointer-events: none;
    }

    .app-header h1 {
      font-size: 2.5rem;
      margin-bottom: 10px;
      position: relative;
      z-index: 1;
    }

    .app-header p {
      font-size: 1.1rem;
      opacity: 0.9;
      position: relative;
      z-index: 1;
    }

    .main-content {
      display: grid;
      grid-template-columns: 300px 1fr;
      min-height: 600px;
    }

    .sidebar {
      background: #f8f9fa;
      border-right: 1px solid var(--ldesign-border-level-1-color);
      padding: 20px;
    }

    .sidebar h3 {
      color: var(--ldesign-text-color-primary);
      margin-bottom: 15px;
      font-size: 1.1rem;
    }

    .control-group {
      margin-bottom: 25px;
    }

    .control-group label {
      display: block;
      margin-bottom: 8px;
      color: var(--ldesign-text-color-secondary);
      font-size: 0.9rem;
      font-weight: 500;
    }

    .btn-group {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 15px;
    }

    .btn {
      padding: 8px 12px;
      border: 1px solid var(--ldesign-border-level-1-color);
      border-radius: 6px;
      background: white;
      color: var(--ldesign-text-color-primary);
      cursor: pointer;
      transition: all 0.2s ease;
      font-size: 0.85rem;
      font-weight: 500;
    }

    .btn:hover {
      background: var(--ldesign-brand-color-1);
      border-color: var(--ldesign-brand-color);
      color: var(--ldesign-brand-color);
    }

    .btn.active {
      background: var(--ldesign-brand-color);
      color: white;
      border-color: var(--ldesign-brand-color);
    }

    .btn.primary {
      background: var(--ldesign-brand-color);
      color: white;
      border-color: var(--ldesign-brand-color);
    }

    .btn.primary:hover {
      background: var(--ldesign-brand-color-8);
      border-color: var(--ldesign-brand-color-8);
    }

    .select-control {
      width: 100%;
      padding: 8px 12px;
      border: 1px solid var(--ldesign-border-level-1-color);
      border-radius: 6px;
      background: white;
      font-size: 0.9rem;
    }

    .editor-area {
      padding: 20px;
      display: flex;
      flex-direction: column;
    }

    .editor-toolbar {
      display: flex;
      align-items: center;
      gap: 15px;
      padding: 15px;
      background: #f8f9fa;
      border: 1px solid var(--ldesign-border-level-1-color);
      border-bottom: none;
      border-radius: 8px 8px 0 0;
    }

    .toolbar-group {
      display: flex;
      gap: 5px;
      padding-right: 15px;
      border-right: 1px solid var(--ldesign-border-level-1-color);
    }

    .toolbar-group:last-child {
      border-right: none;
    }

    .editor-container {
      border: 1px solid var(--ldesign-border-level-1-color);
      border-radius: 0 0 8px 8px;
      min-height: 400px;
      background: white;
      position: relative;
    }

    .status-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 20px;
      background: #f8f9fa;
      border-top: 1px solid var(--ldesign-border-level-1-color);
      font-size: 0.85rem;
      color: var(--ldesign-text-color-secondary);
    }

    .output-panel {
      margin-top: 20px;
      background: #f8f9fa;
      border: 1px solid var(--ldesign-border-level-1-color);
      border-radius: 8px;
      overflow: hidden;
    }

    .output-header {
      padding: 12px 15px;
      background: white;
      border-bottom: 1px solid var(--ldesign-border-level-1-color);
      font-weight: 600;
      color: var(--ldesign-text-color-primary);
    }

    .output-content {
      padding: 15px;
      font-family: 'Monaco', 'Menlo', 'Consolas', monospace;
      font-size: 0.85rem;
      background: #f8f9fa;
      max-height: 200px;
      overflow-y: auto;
      white-space: pre-wrap;
      word-break: break-all;
    }

    /* å“åº”å¼è®¾è®¡ */
    @media (max-width: 1024px) {
      .main-content {
        grid-template-columns: 1fr;
      }
      
      .sidebar {
        border-right: none;
        border-bottom: 1px solid var(--ldesign-border-level-1-color);
      }
    }

    @media (max-width: 768px) {
      body {
        padding: 10px;
      }
      
      .app-container {
        border-radius: 8px;
      }
      
      .app-header {
        padding: 20px;
      }
      
      .app-header h1 {
        font-size: 2rem;
      }
      
      .editor-area {
        padding: 15px;
      }
      
      .btn-group {
        gap: 5px;
      }
      
      .btn {
        padding: 6px 10px;
        font-size: 0.8rem;
      }
    }

    /* ç¼–è¾‘å™¨å†…å®¹æ ·å¼ */
    .ldesign-editor {
      padding: 20px;
      line-height: 1.6;
      color: var(--ldesign-text-color-primary);
    }

    .ldesign-editor h1,
    .ldesign-editor h2,
    .ldesign-editor h3 {
      margin: 20px 0 10px 0;
      color: var(--ldesign-text-color-primary);
    }

    .ldesign-editor p {
      margin: 10px 0;
    }

    .ldesign-editor ul,
    .ldesign-editor ol {
      margin: 10px 0;
      padding-left: 30px;
    }

    .ldesign-editor blockquote {
      margin: 15px 0;
      padding: 10px 15px;
      border-left: 4px solid var(--ldesign-brand-color);
      background: var(--ldesign-brand-color-1);
      font-style: italic;
    }

    /* åŠ è½½åŠ¨ç”» */
    .loading {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 2px solid #f3f3f3;
      border-top: 2px solid var(--ldesign-brand-color);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <div class="app-container">
    <div class="app-header">
      <h1>LDesign Editor</h1>
      <p>é«˜çº§åŠŸèƒ½æ¼”ç¤º - å®Œæ•´çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ä½“éªŒ</p>
    </div>

    <div class="main-content">
      <!-- ä¾§è¾¹æ æ§åˆ¶é¢æ¿ -->
      <div class="sidebar">
        <div class="control-group">
          <h3>ğŸ¨ ä¸»é¢˜è®¾ç½®</h3>
          <label for="themeSelect">é€‰æ‹©ä¸»é¢˜</label>
          <select id="themeSelect" class="select-control" onchange="changeTheme(this.value)">
            <option value="default">é»˜è®¤ä¸»é¢˜</option>
            <option value="dark">æš—è‰²ä¸»é¢˜</option>
            <option value="minimal">ç®€æ´ä¸»é¢˜</option>
          </select>
        </div>

        <div class="control-group">
          <h3>ğŸ“± å“åº”å¼æµ‹è¯•</h3>
          <label>å½“å‰è®¾å¤‡</label>
          <div id="deviceInfo" style="padding: 8px; background: white; border-radius: 4px; font-size: 0.9rem;">
            <div>ç±»å‹: <span id="deviceType">-</span></div>
            <div>å®½åº¦: <span id="screenWidth">-</span>px</div>
          </div>
        </div>

        <div class="control-group">
          <h3>âš™ï¸ ç¼–è¾‘å™¨è®¾ç½®</h3>
          <div class="btn-group">
            <button class="btn" onclick="toggleReadonly()">
              <span id="readonlyText">è®¾ä¸ºåªè¯»</span>
            </button>
            <button class="btn" onclick="clearContent()">æ¸…ç©ºå†…å®¹</button>
          </div>
        </div>

        <div class="control-group">
          <h3>ğŸ’¾ å†…å®¹æ“ä½œ</h3>
          <div class="btn-group">
            <button class="btn primary" onclick="exportContent()">å¯¼å‡ºHTML</button>
            <button class="btn" onclick="importContent()">å¯¼å…¥å†…å®¹</button>
            <button class="btn" onclick="copyToClipboard()">å¤åˆ¶å†…å®¹</button>
          </div>
        </div>

        <div class="control-group">
          <h3>ğŸ“Š ç¼–è¾‘å™¨çŠ¶æ€</h3>
          <div id="editorStats" style="font-size: 0.85rem; color: var(--ldesign-text-color-secondary);">
            <div>å­—ç¬¦æ•°: <span id="charCount">0</span></div>
            <div>æ®µè½æ•°: <span id="paragraphCount">0</span></div>
            <div>é€‰ä¸­æ–‡æœ¬: <span id="selectedText">æ— </span></div>
          </div>
        </div>
      </div>

      <!-- ä¸»ç¼–è¾‘åŒºåŸŸ -->
      <div class="editor-area">
        <!-- å·¥å…·æ  -->
        <div class="editor-toolbar">
          <div class="toolbar-group">
            <button class="btn" onclick="executeCommand('bold')" title="åŠ ç²—">
              <strong>B</strong>
            </button>
            <button class="btn" onclick="executeCommand('italic')" title="æ–œä½“">
              <em>I</em>
            </button>
            <button class="btn" onclick="executeCommand('underline')" title="ä¸‹åˆ’çº¿">
              <u>U</u>
            </button>
          </div>
          
          <div class="toolbar-group">
            <button class="btn" onclick="executeCommand('heading1')" title="æ ‡é¢˜1">H1</button>
            <button class="btn" onclick="executeCommand('heading2')" title="æ ‡é¢˜2">H2</button>
            <button class="btn" onclick="executeCommand('heading3')" title="æ ‡é¢˜3">H3</button>
          </div>
          
          <div class="toolbar-group">
            <button class="btn" onclick="executeCommand('bulletList')" title="æ— åºåˆ—è¡¨">â€¢ åˆ—è¡¨</button>
            <button class="btn" onclick="executeCommand('orderedList')" title="æœ‰åºåˆ—è¡¨">1. åˆ—è¡¨</button>
            <button class="btn" onclick="executeCommand('blockquote')" title="å¼•ç”¨">" å¼•ç”¨</button>
          </div>
          
          <div class="toolbar-group">
            <button class="btn" onclick="insertSampleContent()" title="æ’å…¥ç¤ºä¾‹å†…å®¹">ğŸ“ ç¤ºä¾‹</button>
            <button class="btn" onclick="insertCurrentTime()" title="æ’å…¥æ—¶é—´">ğŸ• æ—¶é—´</button>
          </div>
        </div>

        <!-- ç¼–è¾‘å™¨å®¹å™¨ -->
        <div id="editor" class="editor-container"></div>

        <!-- çŠ¶æ€æ  -->
        <div class="status-bar">
          <div>
            <span id="statusText">å°±ç»ª</span>
          </div>
          <div>
            <span id="cursorPosition">è¡Œ: 1, åˆ—: 1</span>
          </div>
        </div>

        <!-- è¾“å‡ºé¢æ¿ -->
        <div class="output-panel">
          <div class="output-header">
            ğŸ“„ HTML è¾“å‡ºé¢„è§ˆ
          </div>
          <div id="htmlOutput" class="output-content">
            ç¼–è¾‘å™¨å†…å®¹å°†åœ¨è¿™é‡Œå®æ—¶æ˜¾ç¤º...
          </div>
        </div>
      </div>
    </div>
  </div>

  <script type="module">
    // æ¨¡æ‹Ÿ LDesign Editor çš„é«˜çº§ç‰ˆæœ¬
    class AdvancedLDesignEditor {
      constructor(options) {
        this.container = typeof options.container === 'string' 
          ? document.querySelector(options.container)
          : options.container
        this.content = options.content || ''
        this.readonly = options.readonly || false
        this.theme = options.theme || 'default'
        this.onChange = options.onChange
        this.onSelectionChange = options.onSelectionChange
        this.initialized = false
        this.destroyed = false
        
        // ç»Ÿè®¡ä¿¡æ¯
        this.stats = {
          charCount: 0,
          paragraphCount: 0,
          selectedText: ''
        }
        
        // æ¨¡æ‹Ÿç®¡ç†å™¨
        this.themes = {
          setTheme: (theme) => {
            this.theme = theme
            this.updateThemeClass()
            this.updateStatus(`ä¸»é¢˜å·²åˆ‡æ¢åˆ°: ${theme}`)
          },
          getCurrentTheme: () => this.theme,
          getAllThemes: () => [
            { name: 'default', displayName: 'é»˜è®¤ä¸»é¢˜' },
            { name: 'dark', displayName: 'æš—è‰²ä¸»é¢˜' },
            { name: 'minimal', displayName: 'ç®€æ´ä¸»é¢˜' }
          ]
        }
        
        this.responsive = {
          getCurrentDevice: () => {
            const width = window.innerWidth
            if (width < 768) return 'mobile'
            if (width < 1024) return 'tablet'
            return 'desktop'
          },
          getScreenWidth: () => window.innerWidth,
          onDeviceChange: (callback) => {
            window.addEventListener('resize', () => {
              callback(this.responsive.getCurrentDevice())
            })
          }
        }
        
        this.commands = {
          execute: (command) => {
            this.updateStatus(`æ‰§è¡Œå‘½ä»¤: ${command}`)
            console.log(`Executing command: ${command}`)
            return { success: true }
          }
        }
      }
      
      init() {
        if (this.initialized) return
        
        this.container.contentEditable = true
        this.container.innerHTML = this.content || this.getDefaultContent()
        this.container.className = 'ldesign-editor'
        
        this.updateThemeClass()
        this.bindEvents()
        this.updateStats()
        this.updateDeviceInfo()
        
        this.initialized = true
        this.updateStatus('ç¼–è¾‘å™¨åˆå§‹åŒ–å®Œæˆ')
        console.log('Advanced Editor initialized')
      }
      
      getDefaultContent() {
        return `
          <h1>æ¬¢è¿ä½¿ç”¨ LDesign Editor</h1>
          <p>è¿™æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œæ”¯æŒå¤šç§æ ¼å¼å’Œä¸»é¢˜ã€‚</p>
          
          <h2>ä¸»è¦ç‰¹æ€§</h2>
          <ul>
            <li><strong>ä¸°å¯Œçš„æ ¼å¼æ”¯æŒ</strong> - æ”¯æŒåŠ ç²—ã€æ–œä½“ã€ä¸‹åˆ’çº¿ç­‰æ ¼å¼</li>
            <li><strong>å¤šçº§æ ‡é¢˜</strong> - æ”¯æŒ H1 åˆ° H6 æ ‡é¢˜</li>
            <li><strong>åˆ—è¡¨åŠŸèƒ½</strong> - æ”¯æŒæœ‰åºå’Œæ— åºåˆ—è¡¨</li>
            <li><strong>å¼•ç”¨å—</strong> - æ”¯æŒå¼•ç”¨æ ¼å¼</li>
          </ul>
          
          <h3>ä¸»é¢˜ç³»ç»Ÿ</h3>
          <p>ç¼–è¾‘å™¨æ”¯æŒå¤šç§ä¸»é¢˜ï¼Œæ‚¨å¯ä»¥åœ¨å·¦ä¾§é¢æ¿ä¸­åˆ‡æ¢ä¸åŒçš„ä¸»é¢˜é£æ ¼ã€‚</p>
          
          <blockquote>
            è¿™æ˜¯ä¸€ä¸ªå¼•ç”¨ç¤ºä¾‹ã€‚æ‚¨å¯ä»¥ä½¿ç”¨å¼•ç”¨æ¥çªå‡ºæ˜¾ç¤ºé‡è¦å†…å®¹ã€‚
          </blockquote>
          
          <h3>å“åº”å¼è®¾è®¡</h3>
          <p>ç¼–è¾‘å™¨å®Œç¾é€‚é…å„ç§è®¾å¤‡ï¼ŒåŒ…æ‹¬æ¡Œé¢ã€å¹³æ¿å’Œæ‰‹æœºã€‚è°ƒæ•´æµè§ˆå™¨çª—å£å¤§å°æ¥ä½“éªŒå“åº”å¼æ•ˆæœã€‚</p>
          
          <p>å¼€å§‹ç¼–è¾‘è¿™äº›å†…å®¹ï¼Œä½“éªŒå¼ºå¤§çš„ç¼–è¾‘åŠŸèƒ½å§ï¼</p>
        `.trim()
      }
      
      updateThemeClass() {
        this.container.className = `ldesign-editor ldesign-editor-theme-${this.theme}`
        
        // æ›´æ–°CSSå˜é‡ä»¥æ”¯æŒä¸»é¢˜
        const root = document.documentElement
        if (this.theme === 'dark') {
          root.style.setProperty('--ldesign-bg-color-container', '#1a1a1a')
          root.style.setProperty('--ldesign-text-color-primary', 'rgba(255, 255, 255, 90%)')
          root.style.setProperty('--ldesign-text-color-secondary', 'rgba(255, 255, 255, 70%)')
          root.style.setProperty('--ldesign-border-level-1-color', '#333')
          this.container.style.background = '#1a1a1a'
          this.container.style.color = 'rgba(255, 255, 255, 90%)'
        } else if (this.theme === 'minimal') {
          root.style.setProperty('--ldesign-brand-color', '#666')
          this.container.style.background = '#fafafa'
        } else {
          // æ¢å¤é»˜è®¤ä¸»é¢˜
          root.style.setProperty('--ldesign-bg-color-container', '#ffffff')
          root.style.setProperty('--ldesign-text-color-primary', 'rgba(0, 0, 0, 90%)')
          root.style.setProperty('--ldesign-text-color-secondary', 'rgba(0, 0, 0, 70%)')
          root.style.setProperty('--ldesign-border-level-1-color', '#e5e5e5')
          root.style.setProperty('--ldesign-brand-color', '#5e2aa7')
          this.container.style.background = 'white'
          this.container.style.color = 'rgba(0, 0, 0, 90%)'
        }
      }
      
      bindEvents() {
        // å†…å®¹å˜æ›´äº‹ä»¶
        this.container.addEventListener('input', () => {
          this.content = this.container.innerHTML
          this.updateStats()
          if (this.onChange) {
            this.onChange(this.content)
          }
        })
        
        // é€‰åŒºå˜æ›´äº‹ä»¶
        this.container.addEventListener('selectionchange', () => {
          this.updateSelectionInfo()
        })
        
        // ç„¦ç‚¹äº‹ä»¶
        this.container.addEventListener('focus', () => {
          this.updateStatus('ç¼–è¾‘å™¨è·å¾—ç„¦ç‚¹')
        })
        
        this.container.addEventListener('blur', () => {
          this.updateStatus('ç¼–è¾‘å™¨å¤±å»ç„¦ç‚¹')
        })
      }
      
      updateStats() {
        const text = this.container.textContent || ''
        const paragraphs = this.container.querySelectorAll('p, h1, h2, h3, h4, h5, h6, li')
        
        this.stats.charCount = text.length
        this.stats.paragraphCount = paragraphs.length
        
        // æ›´æ–°æ˜¾ç¤º
        document.getElementById('charCount').textContent = this.stats.charCount
        document.getElementById('paragraphCount').textContent = this.stats.paragraphCount
      }
      
      updateSelectionInfo() {
        const selection = window.getSelection()
        const selectedText = selection.toString()
        
        this.stats.selectedText = selectedText
        document.getElementById('selectedText').textContent = selectedText || 'æ— '
        
        if (this.onSelectionChange) {
          this.onSelectionChange(selection)
        }
      }
      
      updateDeviceInfo() {
        document.getElementById('deviceType').textContent = this.responsive.getCurrentDevice()
        document.getElementById('screenWidth').textContent = this.responsive.getScreenWidth()
      }
      
      updateStatus(message) {
        document.getElementById('statusText').textContent = message
        setTimeout(() => {
          document.getElementById('statusText').textContent = 'å°±ç»ª'
        }, 3000)
      }
      
      // å…¬å…±æ–¹æ³•
      getContent() {
        return this.container.innerHTML
      }
      
      setContent(content) {
        this.container.innerHTML = content
        this.content = content
        this.updateStats()
        if (this.onChange) {
          this.onChange(content)
        }
      }
      
      clear() {
        this.setContent('')
      }
      
      setReadonly(readonly) {
        this.readonly = readonly
        this.container.contentEditable = !readonly
        this.container.style.backgroundColor = readonly ? '#f5f5f5' : 'white'
        this.updateStatus(readonly ? 'å·²è®¾ä¸ºåªè¯»æ¨¡å¼' : 'å·²å–æ¶ˆåªè¯»æ¨¡å¼')
      }
      
      insertContent(content) {
        document.execCommand('insertHTML', false, content)
        this.updateStats()
      }
      
      exportHTML() {
        return this.getContent()
      }
      
      get state() {
        return {
          content: this.content,
          readonly: this.readonly,
          deviceType: this.responsive.getCurrentDevice(),
          stats: this.stats
        }
      }
    }
    
    // å…¨å±€å˜é‡
    window.AdvancedLDesignEditor = AdvancedLDesignEditor
    
    // åˆ›å»ºç¼–è¾‘å™¨å®ä¾‹
    const editor = new AdvancedLDesignEditor({
      container: '#editor',
      onChange: (content) => {
        document.getElementById('htmlOutput').textContent = content
      },
      onSelectionChange: (selection) => {
        // å¯ä»¥åœ¨è¿™é‡Œå¤„ç†é€‰åŒºå˜æ›´
      }
    })
    
    // åˆå§‹åŒ–ç¼–è¾‘å™¨
    editor.init()
    
    // å…¨å±€å‡½æ•°
    window.executeCommand = (command) => {
      editor.commands.execute(command)
    }
    
    window.changeTheme = (theme) => {
      editor.themes.setTheme(theme)
    }
    
    window.toggleReadonly = () => {
      const isReadonly = editor.state.readonly
      editor.setReadonly(!isReadonly)
      document.getElementById('readonlyText').textContent = isReadonly ? 'è®¾ä¸ºåªè¯»' : 'å–æ¶ˆåªè¯»'
    }
    
    window.clearContent = () => {
      if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰å†…å®¹å—ï¼Ÿ')) {
        editor.clear()
      }
    }
    
    window.exportContent = () => {
      const content = editor.exportHTML()
      const blob = new Blob([content], { type: 'text/html' })
      const url = URL.createObjectURL(blob)
      const a = document.createElement('a')
      a.href = url
      a.download = 'editor-content.html'
      a.click()
      URL.revokeObjectURL(url)
      editor.updateStatus('å†…å®¹å·²å¯¼å‡º')
    }
    
    window.importContent = () => {
      const input = document.createElement('input')
      input.type = 'file'
      input.accept = '.html,.txt'
      input.onchange = (e) => {
        const file = e.target.files[0]
        if (file) {
          const reader = new FileReader()
          reader.onload = (e) => {
            editor.setContent(e.target.result)
            editor.updateStatus('å†…å®¹å·²å¯¼å…¥')
          }
          reader.readAsText(file)
        }
      }
      input.click()
    }
    
    window.copyToClipboard = async () => {
      try {
        await navigator.clipboard.writeText(editor.getContent())
        editor.updateStatus('å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿')
      } catch (err) {
        editor.updateStatus('å¤åˆ¶å¤±è´¥')
      }
    }
    
    window.insertSampleContent = () => {
      const sampleContent = `
        <h3>æ’å…¥çš„ç¤ºä¾‹å†…å®¹</h3>
        <p>è¿™æ˜¯é€šè¿‡æŒ‰é’®æ’å…¥çš„ç¤ºä¾‹å†…å®¹ï¼ŒåŒ…å«äº†å¤šç§æ ¼å¼ï¼š</p>
        <ul>
          <li><strong>åŠ ç²—æ–‡æœ¬</strong></li>
          <li><em>æ–œä½“æ–‡æœ¬</em></li>
          <li><u>ä¸‹åˆ’çº¿æ–‡æœ¬</u></li>
        </ul>
        <blockquote>è¿™æ˜¯ä¸€ä¸ªå¼•ç”¨å—ç¤ºä¾‹</blockquote>
      `
      editor.insertContent(sampleContent)
    }
    
    window.insertCurrentTime = () => {
      const now = new Date()
      const timeString = now.toLocaleString('zh-CN')
      editor.insertContent(`<p>æ’å…¥æ—¶é—´: ${timeString}</p>`)
    }
    
    // ç›‘å¬çª—å£å¤§å°å˜åŒ–
    window.addEventListener('resize', () => {
      editor.updateDeviceInfo()
    })
    
    // åˆå§‹åŒ–è¾“å‡º
    document.getElementById('htmlOutput').textContent = editor.getContent()
  </script>
</body>
</html>
