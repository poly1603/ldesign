# LDesign Engine - è®¾è®¡ç†å¿µ

## ğŸ¨ æ ¸å¿ƒè®¾è®¡å“²å­¦

### 1. ç®€å•è€Œå¼ºå¤§ (Simple yet Powerful)

**ç†å¿µ**: å¤æ‚çš„åŠŸèƒ½åº”è¯¥æœ‰ç®€å•çš„æ¥å£

```typescript
// ç®€å•çš„APIï¼Œå¼ºå¤§çš„åŠŸèƒ½
const engine = createEngine()
engine.state.set('user', { name: 'John' })
engine.events.emit('user:login', userData)
```

**å®ç°åŸåˆ™**:
- API è®¾è®¡éµå¾ªæœ€å°æƒŠè®¶åŸåˆ™
- å¤æ‚é€»è¾‘å†…éƒ¨å°è£…ï¼Œå¯¹å¤–æä¾›ç®€æ´æ¥å£
- æ¸è¿›å¼å­¦ä¹ æ›²çº¿ï¼Œä»ç®€å•åˆ°å¤æ‚
- æ™ºèƒ½é»˜è®¤é…ç½®ï¼Œå‡å°‘é…ç½®è´Ÿæ‹…

### 2. æ¨¡å—åŒ–ä¼˜å…ˆ (Modularity First)

**ç†å¿µ**: æ¯ä¸ªåŠŸèƒ½éƒ½åº”è¯¥æ˜¯ç‹¬ç«‹ã€å¯å¤ç”¨çš„æ¨¡å—

```typescript
// æ¯ä¸ªç®¡ç†å™¨éƒ½æ˜¯ç‹¬ç«‹æ¨¡å—
const configManager = new ConfigManager()
const stateManager = new StateManager()
const eventManager = new EventManager()

// å¯ä»¥å•ç‹¬ä½¿ç”¨
configManager.set('theme', 'dark')
```

**å®ç°åŸåˆ™**:
- å•ä¸€èŒè´£åŸåˆ™ï¼Œæ¯ä¸ªæ¨¡å—åªåšä¸€ä»¶äº‹
- æ¾è€¦åˆè®¾è®¡ï¼Œæ¨¡å—é—´ä¾èµ–æœ€å°åŒ–
- é«˜å†…èšå®ç°ï¼Œç›¸å…³åŠŸèƒ½èšåˆåœ¨ä¸€èµ·
- å¯æ’æ‹”æ¶æ„ï¼Œæ”¯æŒæ¨¡å—çš„åŠ¨æ€åŠ è½½

### 3. ç±»å‹å®‰å…¨è‡³ä¸Š (Type Safety First)

**ç†å¿µ**: ç±»å‹å®‰å…¨æ˜¯ä»£ç è´¨é‡çš„åŸºç¡€ä¿éšœ

```typescript
// å¼ºç±»å‹æ”¯æŒ
interface UserState {
  name: string
  role: 'admin' | 'user'
  permissions: string[]
}

engine.state.set<UserState>('user', {
  name: 'John',
  role: 'admin',
  permissions: ['read', 'write']
})
```

**å®ç°åŸåˆ™**:
- 100% TypeScript è¦†ç›–
- æ³›å‹æ”¯æŒï¼Œæä¾›çµæ´»çš„ç±»å‹çº¦æŸ
- ç±»å‹æ¨æ–­ï¼Œå‡å°‘æ˜¾å¼ç±»å‹å£°æ˜
- ç¼–è¯‘æ—¶é”™è¯¯æ£€æŸ¥ï¼Œé¿å…è¿è¡Œæ—¶é”™è¯¯

### 4. æ€§èƒ½å¯¼å‘ (Performance Oriented)

**ç†å¿µ**: æ€§èƒ½æ˜¯ç”¨æˆ·ä½“éªŒçš„æ ¸å¿ƒè¦ç´ 

```typescript
// æ‡’åŠ è½½ç®¡ç†å™¨
const engine = createEngine({
  managers: {
    cache: { lazy: true }, // æŒ‰éœ€åŠ è½½
    performance: { lazy: true } // å»¶è¿Ÿåˆå§‹åŒ–
  }
})
```

**å®ç°åŸåˆ™**:
- æ‡’åŠ è½½æœºåˆ¶ï¼Œå‡å°‘åˆå§‹åŒ–å¼€é”€
- æ™ºèƒ½ç¼“å­˜ç­–ç•¥ï¼Œé¿å…é‡å¤è®¡ç®—
- å†…å­˜ç®¡ç†ä¼˜åŒ–ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼
- å¼‚æ­¥ä¼˜å…ˆï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹

### 5. å¯æ‰©å±•æ€§ (Extensibility)

**ç†å¿µ**: ç³»ç»Ÿåº”è¯¥æ”¯æŒæ— é™æ‰©å±•è€Œä¸ä¿®æ”¹æ ¸å¿ƒä»£ç 

```typescript
// æ’ä»¶æ‰©å±•
const customPlugin = {
  name: 'my-plugin',
  install: (context) => {
    // æ‰©å±•åŠŸèƒ½
    context.engine.customFeature = () => {}
  }
}

engine.use(customPlugin)
```

**å®ç°åŸåˆ™**:
- æ’ä»¶åŒ–æ¶æ„ï¼Œæ”¯æŒåŠŸèƒ½æ‰©å±•
- é’©å­ç³»ç»Ÿï¼Œæä¾›æ‰©å±•ç‚¹
- ä¸­é—´ä»¶æ¨¡å¼ï¼Œæ”¯æŒæµç¨‹æ‰©å±•
- å¼€æ”¾ APIï¼Œæ”¯æŒç¬¬ä¸‰æ–¹é›†æˆ

## ğŸ—ï¸ æ¶æ„è®¾è®¡åŸåˆ™

### 1. ä¾èµ–æ³¨å…¥ (Dependency Injection)

**ç›®æ ‡**: é™ä½æ¨¡å—é—´è€¦åˆï¼Œæé«˜å¯æµ‹è¯•æ€§

```typescript
// ä¾èµ–æ³¨å…¥å®¹å™¨
class ManagerRegistry {
  register<T>(name: string, factory: () => T, deps: string[] = []) {
    // è‡ªåŠ¨è§£æä¾èµ–å…³ç³»
    this.dependencies.set(name, deps)
    this.factories.set(name, factory)
  }

  resolve<T>(name: string): T {
    // é€’å½’è§£æä¾èµ–
    const deps = this.resolveDependencies(name)
    return this.factories.get(name)(...deps)
  }
}
```

**ä¼˜åŠ¿**:
- æ¨¡å—é—´æ¾è€¦åˆ
- ä¾¿äºå•å…ƒæµ‹è¯•
- æ”¯æŒä¾èµ–æ›¿æ¢
- è‡ªåŠ¨ä¾èµ–ç®¡ç†

### 2. äº‹ä»¶é©±åŠ¨æ¶æ„ (Event-Driven Architecture)

**ç›®æ ‡**: é€šè¿‡äº‹ä»¶å®ç°æ¨¡å—é—´é€šä¿¡

```typescript
// äº‹ä»¶é©±åŠ¨é€šä¿¡
engine.events.on('user:login', (user) => {
  // å¤šä¸ªæ¨¡å—å¯ä»¥ç›‘å¬åŒä¸€äº‹ä»¶
  engine.state.set('currentUser', user)
  engine.logger.info(`User ${user.name} logged in`)
  engine.notifications.show('Welcome back!')
})

// è§¦å‘äº‹ä»¶
engine.events.emit('user:login', userData)
```

**ä¼˜åŠ¿**:
- å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œè§£è€¦ç»„ä»¶
- æ”¯æŒä¸€å¯¹å¤šé€šä¿¡
- å¼‚æ­¥äº‹ä»¶å¤„ç†
- æ˜“äºæ‰©å±•å’Œç»´æŠ¤

### 3. ä¸­é—´ä»¶æ¨¡å¼ (Middleware Pattern)

**ç›®æ ‡**: æä¾›å¯ç»„åˆçš„å¤„ç†æµç¨‹

```typescript
// ä¸­é—´ä»¶é“¾
engine.middleware.use(async (context, next) => {
  console.log('Before processing')
  await next()
  console.log('After processing')
})

engine.middleware.use(async (context, next) => {
  // éªŒè¯ä¸­é—´ä»¶
  if (!context.user.authenticated) {
    throw new Error('Unauthorized')
  }
  await next()
})
```

**ä¼˜åŠ¿**:
- å¯ç»„åˆçš„å¤„ç†é€»è¾‘
- æ´‹è‘±æ¨¡å‹æ‰§è¡Œ
- æ”¯æŒå¼‚æ­¥å¤„ç†
- æ˜“äºæµ‹è¯•å’Œè°ƒè¯•

### 4. ç­–ç•¥æ¨¡å¼ (Strategy Pattern)

**ç›®æ ‡**: æ”¯æŒç®—æ³•çš„åŠ¨æ€åˆ‡æ¢

```typescript
// ç¼“å­˜ç­–ç•¥
interface CacheStrategy {
  get: (key: string) => any
  set: (key: string, value: any) => void
  clear: () => void
}

class LRUCacheStrategy implements CacheStrategy {
  // LRU ç¼“å­˜å®ç°
}

class MemoryCacheStrategy implements CacheStrategy {
  // å†…å­˜ç¼“å­˜å®ç°
}

// åŠ¨æ€åˆ‡æ¢ç­–ç•¥
engine.cache.setStrategy(new LRUCacheStrategy())
```

**ä¼˜åŠ¿**:
- ç®—æ³•å¯æ›¿æ¢
- æ”¯æŒè¿è¡Œæ—¶åˆ‡æ¢
- æ˜“äºæ‰©å±•æ–°ç­–ç•¥
- ç¬¦åˆå¼€é—­åŸåˆ™

## ğŸ¯ ç”¨æˆ·ä½“éªŒè®¾è®¡

### 1. æ¸è¿›å¼å­¦ä¹  (Progressive Learning)

**ç†å¿µ**: ç”¨æˆ·åº”è¯¥èƒ½å¤Ÿé€æ­¥å­¦ä¹ å’Œä½¿ç”¨ç³»ç»Ÿ

```typescript
// åŸºç¡€ç”¨æ³• - ç®€å•ç›´æ¥
const engine = createEngine()

// è¿›é˜¶ç”¨æ³• - æ›´å¤šé…ç½®
const engine = createEngine({
  debug: true,
  features: { enableHotReload: true }
})

// é«˜çº§ç”¨æ³• - å®Œå…¨è‡ªå®šä¹‰
const engine = createEngine({
  managers: {
    custom: {
      factory: () => new CustomManager(),
      dependencies: ['config', 'logger']
    }
  }
})
```

**å®ç°ç­–ç•¥**:
- æ™ºèƒ½é»˜è®¤é…ç½®
- åˆ†å±‚ API è®¾è®¡
- è¯¦ç»†çš„æ–‡æ¡£å’Œç¤ºä¾‹
- å¾ªåºæ¸è¿›çš„æ•™ç¨‹

### 2. å¼€å‘è€…å‹å¥½ (Developer Friendly)

**ç†å¿µ**: ä¼˜ç§€çš„å¼€å‘ä½“éªŒæ˜¯æˆåŠŸçš„å…³é”®

```typescript
// ä¸°å¯Œçš„ç±»å‹æç¤º
engine.config.set('app.theme', 'dark') // è‡ªåŠ¨è¡¥å…¨
engine.state.get('user.name') // ç±»å‹æ¨æ–­

// è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
try {
  engine.invalidOperation()
}
catch (error) {
  // åŒ…å«ä¸Šä¸‹æ–‡ä¿¡æ¯çš„é”™è¯¯
  console.error(error.message, error.context)
}
```

**å®ç°ç­–ç•¥**:
- å®Œæ•´çš„ TypeScript æ”¯æŒ
- è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
- ä¸°å¯Œçš„å¼€å‘å·¥å…·
- å®æ—¶çš„è°ƒè¯•ä¿¡æ¯

### 3. æ€§èƒ½é€æ˜ (Performance Transparency)

**ç†å¿µ**: å¼€å‘è€…åº”è¯¥äº†è§£ç³»ç»Ÿçš„æ€§èƒ½è¡¨ç°

```typescript
// æ€§èƒ½ç›‘æ§
engine.performance.onMetric((metric) => {
  console.log(`${metric.name}: ${metric.value}ms`)
})

// æ€§èƒ½åˆ†æ
const report = engine.performance.getReport()
console.log('æ…¢æ“ä½œ:', report.slowOperations)
```

**å®ç°ç­–ç•¥**:
- å†…ç½®æ€§èƒ½ç›‘æ§
- è¯¦ç»†çš„æ€§èƒ½æŠ¥å‘Š
- ä¼˜åŒ–å»ºè®®æç¤º
- æ€§èƒ½åŸºå‡†å¯¹æ¯”

## ğŸ”§ æŠ€æœ¯å®ç°åŸåˆ™

### 1. æœ€å°åŒ–ä¾èµ– (Minimal Dependencies)

**ç›®æ ‡**: å‡å°‘å¤–éƒ¨ä¾èµ–ï¼Œæé«˜ç¨³å®šæ€§

```typescript
// åªä¾èµ–å¿…è¦çš„åº“
{
  "dependencies": {
    "vue": "^3.0.0"  // æ ¸å¿ƒä¾èµ–
  },
  "peerDependencies": {
    "typescript": "^5.0.0"  // å¯é€‰ä¾èµ–
  }
}
```

**ç­–ç•¥**:
- ä¼˜å…ˆä½¿ç”¨åŸç”Ÿ API
- é¿å…é‡å¤åŠŸèƒ½çš„åº“
- ä»”ç»†è¯„ä¼°æ¯ä¸ªä¾èµ–
- å®šæœŸå®¡æŸ¥ä¾èµ–æ›´æ–°

### 2. å‘åå…¼å®¹ (Backward Compatibility)

**ç›®æ ‡**: ä¿æŠ¤ç”¨æˆ·æŠ•èµ„ï¼Œå¹³æ»‘å‡çº§

```typescript
// ç‰ˆæœ¬å…¼å®¹æ€§
class ConfigManager {
  // æ–°æ–¹æ³•
  setConfig(key: string, value: any) {
    return this.set(key, value)
  }

  // ä¿ç•™æ—§æ–¹æ³•
  @deprecated('Use setConfig instead')
  set(key: string, value: any) {
    // å®ç°
  }
}
```

**ç­–ç•¥**:
- è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶
- æ¸è¿›å¼åºŸå¼ƒæœºåˆ¶
- è¿ç§»æŒ‡å—æä¾›
- å…¼å®¹æ€§æµ‹è¯•è¦†ç›–

### 3. æµ‹è¯•é©±åŠ¨ (Test-Driven)

**ç›®æ ‡**: é€šè¿‡æµ‹è¯•ä¿è¯ä»£ç è´¨é‡

```typescript
// æµ‹è¯•ä¼˜å…ˆ
describe('ConfigManager', () => {
  it('should set and get config values', () => {
    const config = new ConfigManager()
    config.set('key', 'value')
    expect(config.get('key')).toBe('value')
  })

  it('should validate config schema', () => {
    const config = new ConfigManager(schema)
    expect(() => config.set('invalid', 'value')).toThrow()
  })
})
```

**ç­–ç•¥**:
- å•å…ƒæµ‹è¯•è¦†ç›– > 90%
- é›†æˆæµ‹è¯•éªŒè¯
- E2E æµ‹è¯•ä¿éšœ
- æ€§èƒ½æµ‹è¯•ç›‘æ§

### 4. æ–‡æ¡£é©±åŠ¨ (Documentation-Driven)

**ç›®æ ‡**: é€šè¿‡æ–‡æ¡£é©±åŠ¨è®¾è®¡å’Œå¼€å‘

```typescript
/**
 * é…ç½®ç®¡ç†å™¨
 *
 * @example
 * ```typescript
 * const config = new ConfigManager()
 * config.set('app.theme', 'dark')
 * const theme = config.get('app.theme')
 * ```
 */
class ConfigManager {
  /**
   * è®¾ç½®é…ç½®å€¼
   * @param key é…ç½®é”®
   * @param value é…ç½®å€¼
   * @throws {ValidationError} å½“å€¼ä¸ç¬¦åˆæ¨¡å¼æ—¶
   */
  set(key: string, value: any): void {
    // å®ç°
  }
}
```

**ç­–ç•¥**:
- API æ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆ
- ç¤ºä¾‹ä»£ç éªŒè¯
- äº¤äº’å¼æ–‡æ¡£
- å¤šè¯­è¨€æ”¯æŒ

## ğŸŒŸ åˆ›æ–°è®¾è®¡

### 1. æ™ºèƒ½é€‚é… (Smart Adaptation)

**ç†å¿µ**: ç³»ç»Ÿåº”è¯¥æ™ºèƒ½åœ°é€‚é…ä¸åŒç¯å¢ƒ

```typescript
// ç¯å¢ƒè‡ªé€‚åº”
const engine = createEngine()

// è‡ªåŠ¨æ£€æµ‹ç¯å¢ƒå¹¶ä¼˜åŒ–
if (engine.environment.isMobile()) {
  engine.config.set('performance.maxConcurrency', 2)
  engine.config.set('cache.maxSize', '10MB')
}
else {
  engine.config.set('performance.maxConcurrency', 6)
  engine.config.set('cache.maxSize', '50MB')
}
```

### 2. é¢„æµ‹æ€§ä¼˜åŒ– (Predictive Optimization)

**ç†å¿µ**: åŸºäºä½¿ç”¨æ¨¡å¼è¿›è¡Œé¢„æµ‹æ€§ä¼˜åŒ–

```typescript
// æ™ºèƒ½é¢„åŠ è½½
engine.performance.onPattern('frequent-access', (pattern) => {
  // é¢„åŠ è½½ç»å¸¸è®¿é—®çš„æ•°æ®
  engine.cache.preload(pattern.keys)
})
```

### 3. è‡ªæ„ˆèƒ½åŠ› (Self-Healing)

**ç†å¿µ**: ç³»ç»Ÿåº”è¯¥å…·å¤‡è‡ªæˆ‘ä¿®å¤èƒ½åŠ›

```typescript
// è‡ªåŠ¨é”™è¯¯æ¢å¤
engine.errors.onError((error, context) => {
  if (error.type === 'NetworkError') {
    // è‡ªåŠ¨é‡è¯•
    return engine.retry(context.operation, { maxAttempts: 3 })
  }

  if (error.type === 'MemoryError') {
    // è‡ªåŠ¨æ¸…ç†ç¼“å­˜
    engine.cache.clear()
    engine.gc.collect()
  }
})
```

## ğŸ¨ ç¾å­¦åŸåˆ™

### 1. ä»£ç å³æ–‡æ¡£ (Code as Documentation)

**ç†å¿µ**: å¥½çš„ä»£ç æœ¬èº«å°±æ˜¯æœ€å¥½çš„æ–‡æ¡£

```typescript
// è‡ªè§£é‡Šçš„ä»£ç 
class UserAuthenticationService {
  async authenticateUserWithCredentials(
    credentials: UserCredentials
  ): Promise<AuthenticatedUser> {
    const validatedCredentials = await this.validateCredentials(credentials)
    const authenticatedUser = await this.performAuthentication(validatedCredentials)
    await this.recordSuccessfulLogin(authenticatedUser)
    return authenticatedUser
  }
}
```

### 2. ä¸€è‡´æ€§ (Consistency)

**ç†å¿µ**: æ•´ä¸ªç³»ç»Ÿåº”è¯¥ä¿æŒä¸€è‡´çš„è®¾è®¡é£æ ¼

```typescript
// ä¸€è‡´çš„å‘½åè§„èŒƒ
engine.config.set() // è®¾ç½®
engine.config.get() // è·å–
engine.config.has() // æ£€æŸ¥
engine.config.delete() // åˆ é™¤

engine.state.set() // è®¾ç½®
engine.state.get() // è·å–
engine.state.has() // æ£€æŸ¥
engine.state.delete() // åˆ é™¤
```

### 3. ä¼˜é›…é™çº§ (Graceful Degradation)

**ç†å¿µ**: åœ¨åŠŸèƒ½ä¸å¯ç”¨æ—¶æä¾›ä¼˜é›…çš„é™çº§æ–¹æ¡ˆ

```typescript
// åŠŸèƒ½é™çº§
if (!engine.environment.hasFeature('localStorage')) {
  // é™çº§åˆ°å†…å­˜å­˜å‚¨
  engine.storage.fallbackToMemory()
  engine.logger.warn('LocalStorage not available, using memory storage')
}
```

LDesign Engine çš„è®¾è®¡ç†å¿µä½“ç°äº†ç°ä»£è½¯ä»¶å·¥ç¨‹çš„æœ€ä½³å®è·µï¼Œé€šè¿‡æ·±æ€ç†Ÿè™‘çš„æ¶æ„è®¾è®¡å’Œç”¨æˆ·ä½“éªŒä¼˜åŒ–ï¼Œä¸ºå¼€å‘è€…æä¾›äº†ä¸€ä¸ªæ—¢å¼ºå¤§åˆæ˜“ç”¨çš„å‰ç«¯åº”ç”¨å¼•æ“ã€‚è¿™äº›è®¾è®¡ç†å¿µä¸ä»…æŒ‡å¯¼äº†å½“å‰çš„å¼€å‘å·¥ä½œï¼Œä¹Ÿä¸ºæœªæ¥çš„æ¼”è¿›æä¾›äº†æ˜ç¡®çš„æ–¹å‘ã€‚
