@import '../../global/variables.less';
@import '../../global/mixins.less';

:host {
  display: inline-block;
  width: 100%;
  font-family: var(--ld-font-family);
}

.ld-input {
  position: relative;
  display: inline-flex;
  align-items: center;
  width: 100%;
  transition: all var(--ld-transition-duration) var(--ld-transition-timing);

  &__inner {
    flex: 1;
    width: 100%;
    padding: var(--ld-input-padding-y) var(--ld-input-padding-x);
    font-size: var(--ld-input-font-size);
    line-height: var(--ld-input-line-height);
    color: var(--ld-text-color-primary);
    background-color: var(--ld-input-bg-color);
    border: var(--ld-input-border-width) solid var(--ld-input-border-color);
    border-radius: var(--ld-input-border-radius);
    outline: none;
    transition: all var(--ld-transition-duration) var(--ld-transition-timing);
    box-sizing: border-box;

    &::placeholder {
      color: var(--ld-text-color-placeholder);
    }

    &:hover:not(:disabled):not(:read-only) {
      border-color: var(--ld-input-border-color-hover);
    }

    &:focus {
      border-color: var(--ld-color-primary);
      box-shadow: 0 0 0 2px var(--ld-color-primary-light);
    }

    &:disabled {
      .disabled();
      background-color: var(--ld-input-bg-color-disabled);
      border-color: var(--ld-input-border-color-disabled);
      cursor: not-allowed;
    }

    &:read-only {
      background-color: var(--ld-input-bg-color-readonly);
      cursor: default;
    }
  }

  &__suffix {
    position: absolute;
    right: var(--ld-input-padding-x);
    display: flex;
    align-items: center;
    gap: 4px;
    pointer-events: none;
  }

  &__clear,
  &__password-toggle {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 16px;
    height: 16px;
    padding: 0;
    color: var(--ld-text-color-secondary);
    background: none;
    border: none;
    border-radius: 2px;
    cursor: pointer;
    pointer-events: auto;
    transition: color var(--ld-transition-duration) var(--ld-transition-timing);

    svg {
      width: 14px;
      height: 14px;
    }

    &:hover {
      color: var(--ld-text-color-primary);
    }

    &:focus {
      outline: 2px solid var(--ld-color-primary-light);
      outline-offset: 1px;
    }
  }

  // Size variants
  &--small {
    .ld-input__inner {
      padding: var(--ld-input-padding-y-sm) var(--ld-input-padding-x-sm);
      font-size: var(--ld-input-font-size-sm);
      line-height: var(--ld-input-line-height-sm);
      border-radius: var(--ld-input-border-radius-sm);
    }

    .ld-input__suffix {
      right: var(--ld-input-padding-x-sm);
    }

    .ld-input__clear,
    .ld-input__password-toggle {
      width: 14px;
      height: 14px;

      svg {
        width: 12px;
        height: 12px;
      }
    }
  }

  &--large {
    .ld-input__inner {
      padding: var(--ld-input-padding-y-lg) var(--ld-input-padding-x-lg);
      font-size: var(--ld-input-font-size-lg);
      line-height: var(--ld-input-line-height-lg);
      border-radius: var(--ld-input-border-radius-lg);
    }

    .ld-input__suffix {
      right: var(--ld-input-padding-x-lg);
    }

    .ld-input__clear,
    .ld-input__password-toggle {
      width: 18px;
      height: 18px;

      svg {
        width: 16px;
        height: 16px;
      }
    }
  }

  // State variants
  &--focused {
    .ld-input__inner {
      border-color: var(--ld-color-primary);
      box-shadow: 0 0 0 2px var(--ld-color-primary-light);
    }
  }

  &--disabled {
    .ld-input__clear,
    .ld-input__password-toggle {
      color: var(--ld-text-color-disabled);
      cursor: not-allowed;
      pointer-events: none;
    }
  }

  &--readonly {
    .ld-input__clear,
    .ld-input__password-toggle {
      display: none;
    }
  }

  // Clearable variant
  &--clearable {
    .ld-input__inner {
      padding-right: calc(var(--ld-input-padding-x) + 24px);
    }

    &.ld-input--small .ld-input__inner {
      padding-right: calc(var(--ld-input-padding-x-sm) + 22px);
    }

    &.ld-input--large .ld-input__inner {
      padding-right: calc(var(--ld-input-padding-x-lg) + 26px);
    }
  }

  // Password variant
  &--password {
    .ld-input__inner {
      padding-right: calc(var(--ld-input-padding-x) + 24px);
    }

    &.ld-input--small .ld-input__inner {
      padding-right: calc(var(--ld-input-padding-x-sm) + 22px);
    }

    &.ld-input--large .ld-input__inner {
      padding-right: calc(var(--ld-input-padding-x-lg) + 26px);
    }

    &.ld-input--clearable .ld-input__inner {
      padding-right: calc(var(--ld-input-padding-x) + 48px);
    }

    &.ld-input--clearable.ld-input--small .ld-input__inner {
      padding-right: calc(var(--ld-input-padding-x-sm) + 44px);
    }

    &.ld-input--clearable.ld-input--large .ld-input__inner {
      padding-right: calc(var(--ld-input-padding-x-lg) + 52px);
    }
  }
}

// Dark theme support
:host(.ld-theme-dark) {
  .ld-input {
    &__inner {
      color: var(--ld-text-color-primary-dark);
      background-color: var(--ld-input-bg-color-dark);
      border-color: var(--ld-input-border-color-dark);

      &::placeholder {
        color: var(--ld-text-color-placeholder-dark);
      }

      &:hover:not(:disabled):not(:read-only) {
        border-color: var(--ld-input-border-color-hover-dark);
      }

      &:focus {
        border-color: var(--ld-color-primary-dark);
        box-shadow: 0 0 0 2px var(--ld-color-primary-light-dark);
      }

      &:disabled {
        background-color: var(--ld-input-bg-color-disabled-dark);
        border-color: var(--ld-input-border-color-disabled-dark);
        color: var(--ld-text-color-disabled-dark);
      }

      &:read-only {
        background-color: var(--ld-input-bg-color-readonly-dark);
      }
    }

    &__clear,
    &__password-toggle {
      color: var(--ld-text-color-secondary-dark);

      &:hover {
        color: var(--ld-text-color-primary-dark);
      }

      &:focus {
        outline-color: var(--ld-color-primary-light-dark);
      }
    }

    &--focused {
      .ld-input__inner {
        border-color: var(--ld-color-primary-dark);
        box-shadow: 0 0 0 2px var(--ld-color-primary-light-dark);
      }
    }

    &--disabled {
      .ld-input__clear,
      .ld-input__password-toggle {
        color: var(--ld-text-color-disabled-dark);
      }
    }
  }
}