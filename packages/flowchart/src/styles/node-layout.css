/**
 * 节点布局样式
 * 
 * 确保节点中的图标和文本正确对齐，避免重叠问题
 */

/* 基础节点样式 */
.lf-node {
  position: relative;
}

/* 节点形状容器 */
.lf-node-shape {
  display: flex;
  align-items: center;
  justify-content: center;
}

/* 节点文本样式 */
.lf-node-text {
  text-anchor: middle;
  dominant-baseline: middle;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  font-weight: 400;
  line-height: 1.2;
  pointer-events: none;
  user-select: none;
}

/* 节点图标样式 */
.lf-node-icon {
  pointer-events: none;
  user-select: none;
}

/* 垂直布局样式 */
.lf-node-layout-vertical {
  /* 图标在上，文本在下 */
}

.lf-node-layout-vertical .lf-node-icon {
  transform: translateY(-8px);
}

.lf-node-layout-vertical .lf-node-text {
  transform: translateY(12px);
}

/* 水平布局样式 */
.lf-node-layout-horizontal {
  /* 图标在左，文本在右 */
}

.lf-node-layout-horizontal .lf-node-icon {
  transform: translateX(-20px);
}

.lf-node-layout-horizontal .lf-node-text {
  transform: translateX(20px);
}

/* 圆形节点特定样式 */
.lf-node-circle {
  /* 圆形节点的图标和文本居中对齐 */
}

.lf-node-circle .lf-node-icon {
  transform: translateY(-6px);
}

.lf-node-circle .lf-node-text {
  transform: translateY(10px);
  font-size: 11px;
  font-weight: 500;
}

/* 矩形节点特定样式 */
.lf-node-rect {
  /* 矩形节点有更多空间，可以使用更大的图标和文本 */
}

.lf-node-rect .lf-node-icon {
  transform: translateY(-8px);
}

.lf-node-rect .lf-node-text {
  transform: translateY(12px);
  font-size: 12px;
}

/* 菱形节点特定样式 */
.lf-node-diamond {
  /* 菱形节点空间有限，需要紧凑布局 */
}

.lf-node-diamond .lf-node-icon {
  transform: translateY(-6px) scale(0.9);
}

.lf-node-diamond .lf-node-text {
  transform: translateY(10px);
  font-size: 11px;
  font-weight: 500;
}

/* 开始节点样式 */
.lf-node-start {
  /* 开始节点使用绿色主题 */
}

.lf-node-start .lf-node-icon {
  color: #52c41a;
  fill: #52c41a;
  stroke: #52c41a;
}

.lf-node-start .lf-node-text {
  fill: #135200;
  font-weight: 600;
}

/* 结束节点样式 */
.lf-node-end {
  /* 结束节点使用红色主题 */
}

.lf-node-end .lf-node-icon {
  color: #ff4d4f;
  fill: #ff4d4f;
  stroke: #ff4d4f;
}

.lf-node-end .lf-node-text {
  fill: #820014;
  font-weight: 600;
}

/* 审批节点样式 */
.lf-node-approval {
  /* 审批节点使用紫色主题 */
}

.lf-node-approval .lf-node-icon {
  color: #722ed1;
  fill: #722ed1;
  stroke: #722ed1;
}

.lf-node-approval .lf-node-text {
  fill: #2f1b69;
  font-weight: 500;
}

/* 条件节点样式 */
.lf-node-condition {
  /* 条件节点使用橙色主题 */
}

.lf-node-condition .lf-node-icon {
  color: #fa8c16;
  fill: #fa8c16;
  stroke: #fa8c16;
}

.lf-node-condition .lf-node-text {
  fill: #613400;
  font-weight: 500;
}

/* 处理节点样式 */
.lf-node-process {
  /* 处理节点使用灰色主题 */
}

.lf-node-process .lf-node-icon {
  color: #595959;
  fill: #595959;
  stroke: #595959;
}

.lf-node-process .lf-node-text {
  fill: #262626;
  font-weight: 500;
}

/* 用户任务节点样式 */
.lf-node-user-task {
  /* 用户任务节点使用蓝色主题 */
}

.lf-node-user-task .lf-node-icon {
  color: #1890ff;
  fill: #1890ff;
  stroke: #1890ff;
}

.lf-node-user-task .lf-node-text {
  fill: #003a8c;
  font-weight: 500;
}

/* 服务任务节点样式 */
.lf-node-service-task {
  /* 服务任务节点使用青色主题 */
}

.lf-node-service-task .lf-node-icon {
  color: #13c2c2;
  fill: #13c2c2;
  stroke: #13c2c2;
}

.lf-node-service-task .lf-node-text {
  fill: #006d75;
  font-weight: 500;
}

/* 响应式设计 */
@media (max-width: 768px) {
  /* 移动端优化 */
  .lf-node-text {
    font-size: 10px;
  }
  
  .lf-node-icon {
    transform: scale(0.8);
  }
  
  .lf-node-circle .lf-node-text {
    font-size: 9px;
  }
  
  .lf-node-rect .lf-node-text {
    font-size: 10px;
  }
  
  .lf-node-diamond .lf-node-text {
    font-size: 9px;
  }
}

/* 高对比度模式 */
@media (prefers-contrast: high) {
  .lf-node-text {
    font-weight: 600;
    stroke: white;
    stroke-width: 0.5px;
    paint-order: stroke fill;
  }
  
  .lf-node-icon {
    stroke-width: 2px;
  }
}

/* 减少动画模式 */
@media (prefers-reduced-motion: reduce) {
  .lf-node-icon,
  .lf-node-text {
    transition: none;
  }
}

/* 悬停效果 */
.lf-node:hover .lf-node-icon {
  transform: translateY(-6px) scale(1.1);
  transition: transform 0.2s ease-out;
}

.lf-node:hover .lf-node-text {
  font-weight: 600;
  transition: font-weight 0.2s ease-out;
}

/* 选中状态 */
.lf-node.lf-node-selected .lf-node-icon {
  transform: translateY(-6px) scale(1.2);
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
}

.lf-node.lf-node-selected .lf-node-text {
  font-weight: 700;
  filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.1));
}

/* 禁用状态 */
.lf-node.lf-node-disabled .lf-node-icon {
  opacity: 0.5;
  filter: grayscale(100%);
}

.lf-node.lf-node-disabled .lf-node-text {
  opacity: 0.5;
  fill: #bfbfbf;
}

/* 错误状态 */
.lf-node.lf-node-error .lf-node-icon {
  color: #ff4d4f;
  fill: #ff4d4f;
  stroke: #ff4d4f;
  animation: shake 0.5s ease-in-out;
}

.lf-node.lf-node-error .lf-node-text {
  fill: #ff4d4f;
  font-weight: 600;
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-2px); }
  75% { transform: translateX(2px); }
}

/* 成功状态 */
.lf-node.lf-node-success .lf-node-icon {
  color: #52c41a;
  fill: #52c41a;
  stroke: #52c41a;
}

.lf-node.lf-node-success .lf-node-text {
  fill: #52c41a;
  font-weight: 600;
}

/* 警告状态 */
.lf-node.lf-node-warning .lf-node-icon {
  color: #faad14;
  fill: #faad14;
  stroke: #faad14;
}

.lf-node.lf-node-warning .lf-node-text {
  fill: #faad14;
  font-weight: 600;
}

/* 加载状态 */
.lf-node.lf-node-loading .lf-node-icon {
  animation: spin 1s linear infinite;
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

/* 文本换行支持 */
.lf-node-text-multiline {
  text-anchor: middle;
  dominant-baseline: middle;
}

.lf-node-text-multiline tspan {
  text-anchor: middle;
  dominant-baseline: middle;
}

/* 图标和文本组合容器 */
.lf-node-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 4px;
}

.lf-node-content-horizontal {
  flex-direction: row;
  gap: 8px;
}

/* 自定义物料节点样式 */
.lf-node-custom-material {
  /* 自定义物料节点的特殊样式 */
}

.lf-node-custom-material .lf-node-icon {
  transform: translateY(-8px);
}

.lf-node-custom-material .lf-node-text {
  transform: translateY(12px);
  font-size: 11px;
  font-weight: 500;
}
