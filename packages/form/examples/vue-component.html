<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vue 组件使用示例 - @ldesign/form</title>
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <script src="../dist/index.umd.js"></script>
  <link rel="stylesheet" href="../dist/index.css">
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      margin: 0;
      padding: 20px;
      background-color: #f5f5f5;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }
    .example-section {
      margin-bottom: 40px;
      padding-bottom: 30px;
      border-bottom: 1px solid #e8e8e8;
    }
    .example-title {
      font-size: 24px;
      font-weight: 600;
      margin-bottom: 16px;
      color: #262626;
    }
    .example-description {
      color: #595959;
      margin-bottom: 20px;
      line-height: 1.6;
    }
    .form-data-display {
      margin-top: 20px;
      padding: 16px;
      background: #f8f9fa;
      border-radius: 6px;
      border: 1px solid #e9ecef;
    }
    .form-data-title {
      font-weight: 600;
      margin-bottom: 8px;
      color: #495057;
    }
    pre {
      margin: 0;
      font-family: 'Monaco', 'Consolas', monospace;
      font-size: 14px;
      color: #212529;
    }
  </style>
</head>
<body>
  <div id="app">
    <div class="container">
      <h1>Vue 组件使用示例</h1>
      <p>以下示例展示了如何在 Vue 应用中使用 @ldesign/form 组件。</p>

      <!-- 基础表单示例 -->
      <div class="example-section">
        <h2 class="example-title">1. 基础表单</h2>
        <p class="example-description">
          最简单的表单使用方式，包含基本的输入字段和验证。
        </p>
        
        <dynamic-form
          v-model="basicFormData"
          :options="basicFormOptions"
          @submit="handleBasicSubmit"
          @field-change="handleBasicFieldChange"
        />
        
        <div class="form-data-display">
          <div class="form-data-title">表单数据：</div>
          <pre>{{ JSON.stringify(basicFormData, null, 2) }}</pre>
        </div>
      </div>

      <!-- 高级表单示例 -->
      <div class="example-section">
        <h2 class="example-title">2. 高级表单</h2>
        <p class="example-description">
          包含多种字段类型、条件渲染、自定义验证的复杂表单。
        </p>
        
        <dynamic-form
          v-model="advancedFormData"
          :options="advancedFormOptions"
          @submit="handleAdvancedSubmit"
          @field-change="handleAdvancedFieldChange"
        />
        
        <div class="form-data-display">
          <div class="form-data-title">表单数据：</div>
          <pre>{{ JSON.stringify(advancedFormData, null, 2) }}</pre>
        </div>
      </div>

      <!-- 分组表单示例 -->
      <div class="example-section">
        <h2 class="example-title">3. 分组表单</h2>
        <p class="example-description">
          使用分组功能组织复杂的表单结构。
        </p>
        
        <dynamic-form
          v-model="groupedFormData"
          :options="groupedFormOptions"
          @submit="handleGroupedSubmit"
        />
        
        <div class="form-data-display">
          <div class="form-data-title">表单数据：</div>
          <pre>{{ JSON.stringify(groupedFormData, null, 2) }}</pre>
        </div>
      </div>

      <!-- 响应式布局示例 -->
      <div class="example-section">
        <h2 class="example-title">4. 响应式布局</h2>
        <p class="example-description">
          演示响应式布局功能，在不同屏幕尺寸下自动调整列数。
        </p>
        
        <dynamic-form
          v-model="responsiveFormData"
          :options="responsiveFormOptions"
          @submit="handleResponsiveSubmit"
        />
        
        <div class="form-data-display">
          <div class="form-data-title">表单数据：</div>
          <pre>{{ JSON.stringify(responsiveFormData, null, 2) }}</pre>
        </div>
      </div>
    </div>
  </div>

  <script>
    const { createApp, ref } = Vue
    const { DynamicForm } = LDesignForm

    createApp({
      components: {
        DynamicForm
      },
      setup() {
        // 基础表单
        const basicFormData = ref({})
        const basicFormOptions = {
          title: '用户注册',
          description: '请填写完整的注册信息',
          fields: [
            {
              name: 'username',
              title: '用户名',
              component: 'FormInput',
              required: true,
              placeholder: '请输入用户名',
              rules: [
                { type: 'required', message: '用户名不能为空' },
                { type: 'minLength', params: 3, message: '用户名至少3个字符' },
                { type: 'maxLength', params: 20, message: '用户名最多20个字符' }
              ]
            },
            {
              name: 'email',
              title: '邮箱地址',
              component: 'FormInput',
              type: 'email',
              required: true,
              placeholder: '请输入邮箱地址',
              rules: [
                { type: 'required', message: '邮箱不能为空' },
                { type: 'email', message: '请输入有效的邮箱地址' }
              ]
            },
            {
              name: 'password',
              title: '密码',
              component: 'FormInput',
              type: 'password',
              required: true,
              placeholder: '请输入密码',
              rules: [
                { type: 'required', message: '密码不能为空' },
                { type: 'minLength', params: 6, message: '密码至少6个字符' }
              ]
            }
          ],
          layout: {
            columns: 1,
            horizontalGap: 16,
            verticalGap: 16
          }
        }

        // 高级表单
        const advancedFormData = ref({})
        const advancedFormOptions = {
          title: '用户信息',
          fields: [
            {
              name: 'name',
              title: '姓名',
              component: 'FormInput',
              required: true,
              span: 1
            },
            {
              name: 'gender',
              title: '性别',
              component: 'FormRadio',
              required: true,
              span: 1,
              options: [
                { label: '男', value: 'male' },
                { label: '女', value: 'female' }
              ]
            },
            {
              name: 'age',
              title: '年龄',
              component: 'FormInput',
              type: 'number',
              span: 1,
              rules: [
                { type: 'min', params: 18, message: '年龄不能小于18岁' },
                { type: 'max', params: 100, message: '年龄不能大于100岁' }
              ]
            },
            {
              name: 'city',
              title: '所在城市',
              component: 'FormSelect',
              span: 1,
              options: [
                { label: '北京', value: 'beijing' },
                { label: '上海', value: 'shanghai' },
                { label: '广州', value: 'guangzhou' },
                { label: '深圳', value: 'shenzhen' }
              ]
            },
            {
              name: 'hasJob',
              title: '是否在职',
              component: 'FormRadio',
              span: 2,
              options: [
                { label: '是', value: true },
                { label: '否', value: false }
              ]
            },
            {
              name: 'company',
              title: '公司名称',
              component: 'FormInput',
              span: 2,
              placeholder: '请输入公司名称',
              conditionalRender: {
                dependsOn: 'hasJob',
                condition: (values) => values.hasJob === true
              }
            },
            {
              name: 'bio',
              title: '个人简介',
              component: 'FormTextarea',
              span: 2,
              placeholder: '请简单介绍一下自己',
              props: {
                rows: 4
              }
            }
          ],
          layout: {
            columns: 2,
            horizontalGap: 20,
            verticalGap: 20
          }
        }

        // 分组表单
        const groupedFormData = ref({})
        const groupedFormOptions = {
          title: '完整用户档案',
          groups: [
            {
              name: 'basic',
              title: '基本信息',
              fields: [
                {
                  name: 'firstName',
                  title: '名',
                  component: 'FormInput',
                  required: true
                },
                {
                  name: 'lastName',
                  title: '姓',
                  component: 'FormInput',
                  required: true
                },
                {
                  name: 'birthDate',
                  title: '出生日期',
                  component: 'FormInput',
                  type: 'date'
                }
              ]
            },
            {
              name: 'contact',
              title: '联系方式',
              collapsible: true,
              fields: [
                {
                  name: 'phone',
                  title: '手机号',
                  component: 'FormInput',
                  type: 'tel',
                  rules: [
                    { type: 'phone', message: '请输入有效的手机号码' }
                  ]
                },
                {
                  name: 'email',
                  title: '邮箱',
                  component: 'FormInput',
                  type: 'email',
                  rules: [
                    { type: 'email', message: '请输入有效的邮箱地址' }
                  ]
                },
                {
                  name: 'address',
                  title: '地址',
                  component: 'FormTextarea',
                  span: 2
                }
              ]
            },
            {
              name: 'preferences',
              title: '偏好设置',
              collapsible: true,
              collapsed: true,
              fields: [
                {
                  name: 'newsletter',
                  title: '订阅邮件',
                  component: 'FormRadio',
                  options: [
                    { label: '是', value: true },
                    { label: '否', value: false }
                  ]
                },
                {
                  name: 'language',
                  title: '语言',
                  component: 'FormSelect',
                  options: [
                    { label: '中文', value: 'zh' },
                    { label: 'English', value: 'en' }
                  ]
                }
              ]
            }
          ]
        }

        // 响应式表单
        const responsiveFormData = ref({})
        const responsiveFormOptions = {
          title: '响应式表单',
          fields: Array.from({ length: 12 }, (_, i) => ({
            name: `field${i + 1}`,
            title: `字段 ${i + 1}`,
            component: 'FormInput',
            placeholder: `请输入字段 ${i + 1}`
          })),
          layout: {
            columns: 4,
            horizontalGap: 16,
            verticalGap: 16,
            breakpoints: {
              xs: { columns: 1 },
              sm: { columns: 2 },
              md: { columns: 3 },
              lg: { columns: 4 }
            }
          }
        }

        // 事件处理函数
        const handleBasicSubmit = (data) => {
          console.log('基础表单提交:', data)
          alert('基础表单提交成功！请查看控制台输出。')
        }

        const handleBasicFieldChange = (fieldName, value) => {
          console.log('基础表单字段变化:', fieldName, value)
        }

        const handleAdvancedSubmit = (data) => {
          console.log('高级表单提交:', data)
          alert('高级表单提交成功！请查看控制台输出。')
        }

        const handleAdvancedFieldChange = (fieldName, value) => {
          console.log('高级表单字段变化:', fieldName, value)
        }

        const handleGroupedSubmit = (data) => {
          console.log('分组表单提交:', data)
          alert('分组表单提交成功！请查看控制台输出。')
        }

        const handleResponsiveSubmit = (data) => {
          console.log('响应式表单提交:', data)
          alert('响应式表单提交成功！请查看控制台输出。')
        }

        return {
          basicFormData,
          basicFormOptions,
          advancedFormData,
          advancedFormOptions,
          groupedFormData,
          groupedFormOptions,
          responsiveFormData,
          responsiveFormOptions,
          handleBasicSubmit,
          handleBasicFieldChange,
          handleAdvancedSubmit,
          handleAdvancedFieldChange,
          handleGroupedSubmit,
          handleResponsiveSubmit
        }
      }
    }).mount('#app')
  </script>
</body>
</html>
