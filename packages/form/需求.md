帮我实现一个用在 vue3 应用中的表单系统，支持通过组件和 hook 使用，可通过一个配置快速创建功能丰富的表
单，并支持 v-model 表单数据响应式， 1、通过 options 配置表单数据（标题，名称，所占列数（数值，还支持
百分比），表单组件，表单组件 props）。 2、表单支持配置默认展示行数，每列最小宽度，是否自动计算（根据
宽度和最小宽度计算一行最多展示几列），一行展示几列（如果设置了就不能自动计算，一般情况不用设置），按
钮位置（就是重置，查询以及展开收起按钮组的位置，默认是跟在最后一行最后一列，支持配置独占一行并且水平
靠右），按钮所占列数，按钮对齐方式，支持设置表单项间的水平间隔和垂直间隔，是否显示标题后面的冒号，标
题的位置（支持和表单组件一行（左对齐，右对齐），和表单组件不一行，也就是在组件上面），标题宽度（默认
会计算，也就是同一列的标题宽度以最长的为准，或者设置死，也可以设置每一列的宽度），更多表单打开的方式
（默认是显示隐藏，还支持在展开按钮下方显示一个弹窗展示剩余的表单项） 3、表单支持通过 options 设置每
一个表单项的默认值，也可以通过 v-model 配置表单的默认值，v-model 优先级高于 options 中的配置 4、支持
条件渲染，例如前面某个表单项的值改变会改变后面的表单项怎么渲染，渲染哪些。 5、支持设置按钮组所占列数
，默认为 1 列，最大不能超过一行容乃的列数。 6、还要支持不同形式的表单，例如默认的查询表单，还有公文
详情表单，也就是支持设置不同的样式，要适配移动端。 7、表单要有完整强悍的表单验证功能。 8、支持分组表
单，也就是在系统详情中，根据不同分类将表单分成多个组，最后提交的时候一起获取所有分组表单的数据，这个
分组表单的样式也要支持自定义。 9、表单组件支持任意组件库的表单组件，但是我们默认要内置一些常用的表单
组件，例如：input，radio，checkbox，select。 10、表单要设计精良，结构清晰，各司其责，便于扩展，支持
通过插件或者什么机制来丰富或者扩充表单的功能。

请帮我实现一个功能完整的 Vue 3 表单系统，该系统需要同时支持组件和 Composition API hook 两种使用方式
。系统应该通过配置驱动的方式快速创建功能丰富的表单，并完全支持 Vue 3 的响应式系统和 v-model 双向绑定
。

## 核心功能要求

### 1. 表单配置系统 (FormOptions)

- **字段配置**：每个表单项支持以下配置
  - `title`: 字段标题/标签 (string)
  - `name`: 字段名称，用于数据绑定 (string)
  - `span`: 所占列数，支持数值(1,2,3)或百分比("50%","33.33%") (number | string)
  - `component`: 表单组件类型 (string | Component)
  - `props`: 传递给表单组件的属性对象 (Record<string, any>)
  - `defaultValue`: 字段默认值 (any)
  - `required`: 是否必填 (boolean)
  - `disabled`: 是否禁用 (boolean)
  - `hidden`: 是否隐藏 (boolean)
- **布局配置**：
  - `defaultRows`: 默认展示行数，超出部分可展开/收起 (number, 默认值: 3)
  - `minColumnWidth`: 每列最小宽度，单位像素 (number, 默认值: 300)
  - `autoCalculate`: 是否自动计算列数，根据容器宽度和最小列宽自动计算 (boolean, 默认值: true)
  - `columns`: 固定列数，设置后禁用 autoCalculate (number)
  - `horizontalGap`: 表单项水平间距，单位像素 (number, 默认值: 16)
  - `verticalGap`: 表单项垂直间距，单位像素 (number, 默认值: 16)

### 2. 标题系统配置

- **标题显示**：
  - `showColon`: 是否显示标题后的冒号 (boolean, 默认值: true)
  - `labelPosition`: 标题位置 ('left' | 'right' | 'top', 默认值: 'right')
    - 'left': 左对齐
    - 'right': 右对齐
    - 'top': 上方显示
  - `labelWidth`: 标题宽度 ('auto' | number | number[])
    - 'auto': 自动计算同列最长标题宽度
    - number: 固定像素值
    - number[]: 数组形式为每列设置不同宽度

### 3. 按钮组配置

- **按钮布局**：
  - `buttonPosition`: 按钮位置 ('inline' | 'newline', 默认值: 'inline')
    - 'inline': 跟在最后一行
    - 'newline': 独占新行
  - `buttonSpan`: 按钮组所占列数 (number, 默认值: 1，最大不超过总列数)
  - `buttonAlign`: 按钮对齐方式 ('left' | 'center' | 'right', 默认值: 'left')
- **展开功能**：
  - `expandMode`: 展开方式 ('toggle' | 'modal', 默认值: 'toggle')
    - 'toggle': 显示隐藏切换
    - 'modal': 弹窗显示剩余表单项
  - `expandText`: 展开按钮文本 (string, 默认值: '展开')
  - `collapseText`: 收起按钮文本 (string, 默认值: '收起')

### 4. 数据绑定与响应式

- 支持 v-model 双向绑定表单数据
- v-model 数据优先级高于 options 中的 defaultValue 配置
- 完整的 Vue 3 响应式支持，数据变化自动更新 UI
- 支持深度监听嵌套对象的变化
- 提供数据重置功能

### 5. 条件渲染系统

- 支持基于其他字段值的动态渲染逻辑
- 配置格式：
  ```typescript
  conditionalRender: {
    dependsOn: string | string[], // 依赖的字段名
    condition: (values: Record<string, any>) => boolean, // 条件判断函数
    render?: (values: Record<string, any>) => Partial<FormItemConfig> // 动态配置函数
  }
  ```
- 支持字段的显示/隐藏、属性动态变更、选项动态更新等

### 6. 表单类型与样式系统

- **预设类型**：
  - `query`: 查询表单样式（紧凑布局，适合筛选场景）
  - `detail`: 详情表单样式（宽松布局，适合展示场景）
  - `edit`: 编辑表单样式（标准布局，适合编辑场景）
  - `custom`: 自定义样式
- **响应式设计**：完全适配移动端，支持断点响应式布局
  - 断点配置：xs(<576px), sm(≥576px), md(≥768px), lg(≥992px), xl(≥1200px)
- **主题系统**：支持自定义 CSS 变量和样式覆盖

### 7. 表单验证系统

- 集成完整的表单验证功能
- 支持同步和异步验证规则
- 支持字段级和表单级验证
- 提供丰富的内置验证规则：
  - required: 必填验证
  - email: 邮箱格式验证
  - phone: 手机号验证
  - url: URL 格式验证
  - number: 数字验证
  - min/max: 最小/最大值验证
  - minLength/maxLength: 最小/最大长度验证
  - pattern: 正则表达式验证
- 支持自定义验证规则
- 提供验证错误信息显示和样式定制

### 8. 分组表单系统

- **分组配置**：支持将表单按业务逻辑分成多个组
  ```typescript
  groups: {
    groupName: string, // 分组名称
    title?: string, // 分组标题
    collapsible?: boolean, // 是否可折叠
    collapsed?: boolean, // 默认是否折叠
    fields: FormItemConfig[] // 分组内的字段配置
  }[]
  ```
- **数据管理**：统一管理所有分组的表单数据，支持一次性获取所有组数据
- **样式定制**：每个分组支持独立的样式配置
- **分组操作**：支持分组的展开/收起、独立验证等

### 9. 组件系统

- **内置组件**：提供常用表单组件
  - `FormInput`: 文本输入框（支持 type: text/password/number/email 等）
  - `FormTextarea`: 多行文本输入框
  - `FormRadio`: 单选按钮组
  - `FormCheckbox`: 复选框组
  - `FormSelect`: 下拉选择器（支持单选/多选）
  - `FormDatePicker`: 日期选择器
  - `FormTimePicker`: 时间选择器
  - `FormSwitch`: 开关组件
  - `FormSlider`: 滑块组件
  - `FormRate`: 评分组件
- **组件兼容性**：支持任意第三方组件库的表单组件（Element Plus、Ant Design Vue、Naive UI 等）
- **组件注册**：提供全局和局部组件注册机制，方便扩展新组件

### 10. 架构设计要求

- **模块化设计**：清晰的模块分离，各司其责
  - core: 核心逻辑模块
  - components: 组件模块
  - composables: 组合式函数模块
  - types: 类型定义模块
  - utils: 工具函数模块
- **插件系统**：支持通过插件机制扩展功能
- **类型安全**：完整的 TypeScript 类型定义，确保类型安全
- **可扩展性**：预留扩展接口，便于后续功能增强
- **性能优化**：
  - 合理的组件拆分和懒加载机制
  - 虚拟滚动支持（大量表单项场景）
  - 防抖处理（验证、搜索等场景）

### 11. 事件系统

- **表单事件**：
  - `onSubmit`: 表单提交事件
  - `onReset`: 表单重置事件
  - `onValidate`: 表单验证事件
  - `onChange`: 表单数据变化事件
- **字段事件**：
  - `onFieldChange`: 单个字段变化事件
  - `onFieldFocus`: 字段获得焦点事件
  - `onFieldBlur`: 字段失去焦点事件

## 使用方式要求

### 1. 组件方式

```vue
<DynamicForm
  v-model="formData"
  :options="formOptions"
  @submit="handleSubmit"
  @change="handleChange"
/>
```

### 2. Hook 方式

```typescript
const { formData, validate, reset, setFieldValue, getFieldValue, errors } = useForm(formOptions)
```

## 实现要求

1. **项目结构**：在 `packages/form` 目录下创建完整的包结构
2. **文件组织**：
   - `src/index.ts`: 主入口文件
   - `src/components/`: 组件目录
   - `src/composables/`: 组合式函数目录
   - `src/types/`: 类型定义目录
   - `src/utils/`: 工具函数目录
3. **构建配置**：提供完整的构建配置，支持 ES 模块和 CommonJS 模块
4. **文档示例**：提供详细的使用示例和 API 文档
5. **测试用例**：编写单元测试确保功能正确性

请按照上述需求设计并实现这个表单系统，确保代码结构清晰、功能完整、易于维护和扩展。同时提供多种使用场
景的示例代码以验证功能完整性。
