<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>表格分页功能示例</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      margin: 0;
      padding: 20px;
      background-color: #f5f5f5;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      overflow: hidden;
    }

    .header {
      padding: 20px;
      border-bottom: 1px solid #e5e5e5;
      background: #fafafa;
    }

    .header h1 {
      margin: 0 0 10px 0;
      color: #333;
      font-size: 24px;
    }

    .header p {
      margin: 0;
      color: #666;
      font-size: 14px;
    }

    .content {
      padding: 20px;
    }

    .demo-section {
      margin-bottom: 40px;
    }

    .demo-section h2 {
      margin: 0 0 20px 0;
      color: #333;
      font-size: 18px;
      border-bottom: 2px solid #722ED1;
      padding-bottom: 8px;
    }

    .demo-controls {
      margin-bottom: 20px;
      padding: 15px;
      background: #f8f9fa;
      border-radius: 6px;
      border: 1px solid #e9ecef;
    }

    .demo-controls button {
      margin-right: 10px;
      margin-bottom: 10px;
      padding: 8px 16px;
      border: 1px solid #722ED1;
      background: white;
      color: #722ED1;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
    }

    .demo-controls button:hover {
      background: #722ED1;
      color: white;
    }

    .demo-controls button.active {
      background: #722ED1;
      color: white;
    }

    .demo-controls label {
      display: inline-block;
      margin-right: 15px;
      margin-bottom: 10px;
      font-size: 14px;
      color: #333;
    }

    .demo-controls select,
    .demo-controls input {
      margin-left: 8px;
      padding: 4px 8px;
      border: 1px solid #ddd;
      border-radius: 4px;
    }

    .table-container {
      margin-bottom: 20px;
    }

    .pagination-container {
      margin-top: 20px;
    }

    .info-panel {
      margin-top: 20px;
      padding: 15px;
      background: #e8f4fd;
      border-radius: 6px;
      border-left: 4px solid #1890ff;
    }

    .info-panel h3 {
      margin: 0 0 10px 0;
      color: #1890ff;
      font-size: 16px;
    }

    .info-panel p {
      margin: 5px 0;
      color: #333;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>表格分页功能示例</h1>
      <p>演示表格的前端分页和后端分页功能，包括页码导航、每页条数设置、快速跳转等特性</p>
    </div>

    <div class="content">
      <!-- 前端分页示例 -->
      <div class="demo-section">
        <h2>前端分页示例</h2>
        
        <div class="demo-controls">
          <button id="frontend-enable" class="active">启用分页</button>
          <button id="frontend-disable">禁用分页</button>
          
          <label>
            每页条数:
            <select id="frontend-pagesize">
              <option value="5">5条</option>
              <option value="10" selected>10条</option>
              <option value="20">20条</option>
              <option value="50">50条</option>
            </select>
          </label>
          
          <label>
            跳转到:
            <input type="number" id="frontend-jump" min="1" placeholder="页码" style="width: 60px;">
          </label>
          <button id="frontend-jump-btn">跳转</button>
        </div>

        <div id="frontend-table" class="table-container"></div>
        <div id="frontend-pagination" class="pagination-container"></div>

        <div class="info-panel">
          <h3>前端分页信息</h3>
          <p id="frontend-info">当前页: 1, 每页: 10条, 总计: 0条</p>
        </div>
      </div>

      <!-- 后端分页示例 -->
      <div class="demo-section">
        <h2>后端分页示例</h2>
        
        <div class="demo-controls">
          <button id="backend-load">模拟加载数据</button>
          <button id="backend-simple">简洁模式</button>
          <button id="backend-full" class="active">完整模式</button>
          
          <label>
            总数据量:
            <select id="backend-total">
              <option value="50">50条</option>
              <option value="100" selected>100条</option>
              <option value="500">500条</option>
              <option value="1000">1000条</option>
            </select>
          </label>
        </div>

        <div id="backend-table" class="table-container"></div>
        <div id="backend-pagination" class="pagination-container"></div>

        <div class="info-panel">
          <h3>后端分页信息</h3>
          <p id="backend-info">当前页: 1, 每页: 10条, 总计: 100条</p>
          <p id="backend-request">最后请求: 第1页, 每页10条</p>
        </div>
      </div>

      <!-- 分页组件独立使用示例 -->
      <div class="demo-section">
        <h2>分页组件独立使用</h2>
        
        <div class="demo-controls">
          <button id="standalone-reset">重置</button>
          <button id="standalone-disable">禁用</button>
          <button id="standalone-enable" class="active">启用</button>
        </div>

        <div id="standalone-pagination" class="pagination-container"></div>

        <div class="info-panel">
          <h3>独立分页信息</h3>
          <p id="standalone-info">当前页: 1, 每页: 10条, 总计: 200条</p>
        </div>
      </div>
    </div>
  </div>

  <script type="module">
    import { Table, Pagination } from '../es/index.js'

    // 生成测试数据
    function generateData(count, offset = 0) {
      return Array.from({ length: count }, (_, i) => ({
        id: offset + i + 1,
        name: `用户 ${offset + i + 1}`,
        age: 20 + Math.floor(Math.random() * 40),
        email: `user${offset + i + 1}@example.com`,
        department: ['技术部', '产品部', '设计部', '运营部'][Math.floor(Math.random() * 4)],
        status: Math.random() > 0.5 ? '在职' : '离职'
      }))
    }

    // 表格列配置
    const columns = [
      { key: 'id', title: 'ID', width: 80, sortable: true },
      { key: 'name', title: '姓名', width: 120, sortable: true },
      { key: 'age', title: '年龄', width: 80, sortable: true },
      { key: 'email', title: '邮箱', width: 200 },
      { key: 'department', title: '部门', width: 120, filterable: true },
      { key: 'status', title: '状态', width: 80, filterable: true }
    ]

    // 前端分页示例
    let frontendTable
    let frontendData = generateData(87) // 87条数据用于测试分页

    function initFrontendPagination() {
      frontendTable = new Table({
        container: '#frontend-table',
        columns,
        data: frontendData,
        pagination: {
          enabled: true,
          mode: 'frontend',
          current: 1,
          pageSize: 10,
          container: '#frontend-pagination',
          showSizeChanger: true,
          showQuickJumper: true,
          showTotal: true,
          onChange: (page, pageSize) => {
            updateFrontendInfo()
          },
          onShowSizeChange: (current, size) => {
            updateFrontendInfo()
          }
        }
      })

      updateFrontendInfo()
    }

    function updateFrontendInfo() {
      const state = frontendTable.getPaginationState()
      document.getElementById('frontend-info').textContent = 
        `当前页: ${state.current}, 每页: ${state.pageSize}条, 总计: ${state.total}条`
    }

    // 后端分页示例
    let backendTable
    let backendCurrentPage = 1
    let backendPageSize = 10
    let backendTotal = 100

    function initBackendPagination() {
      backendTable = new Table({
        container: '#backend-table',
        columns,
        data: generateData(backendPageSize, (backendCurrentPage - 1) * backendPageSize),
        pagination: {
          enabled: true,
          mode: 'backend',
          current: backendCurrentPage,
          pageSize: backendPageSize,
          total: backendTotal,
          container: '#backend-pagination',
          showSizeChanger: true,
          showQuickJumper: true,
          showTotal: true,
          onChange: (page, pageSize) => {
            loadBackendData(page, pageSize)
          },
          onShowSizeChange: (current, size) => {
            loadBackendData(current, size)
          }
        }
      })

      updateBackendInfo()
    }

    function loadBackendData(page, pageSize) {
      backendCurrentPage = page
      backendPageSize = pageSize
      
      // 模拟后端请求
      setTimeout(() => {
        const newData = generateData(pageSize, (page - 1) * pageSize)
        backendTable.setData(newData)
        updateBackendInfo()
        updateBackendRequest(page, pageSize)
      }, 300)
    }

    function updateBackendInfo() {
      document.getElementById('backend-info').textContent = 
        `当前页: ${backendCurrentPage}, 每页: ${backendPageSize}条, 总计: ${backendTotal}条`
    }

    function updateBackendRequest(page, pageSize) {
      document.getElementById('backend-request').textContent = 
        `最后请求: 第${page}页, 每页${pageSize}条`
    }

    // 独立分页组件示例
    let standalonePagination

    function initStandalonePagination() {
      standalonePagination = new Pagination('#standalone-pagination', {
        current: 1,
        pageSize: 10,
        total: 200,
        showSizeChanger: true,
        showQuickJumper: true,
        showTotal: true,
        onChange: (page, pageSize) => {
          updateStandaloneInfo(page, pageSize)
        },
        onShowSizeChange: (current, size) => {
          updateStandaloneInfo(current, size)
        }
      })

      updateStandaloneInfo(1, 10)
    }

    function updateStandaloneInfo(page, pageSize) {
      const config = standalonePagination.getConfig()
      document.getElementById('standalone-info').textContent = 
        `当前页: ${config.current}, 每页: ${config.pageSize}条, 总计: ${config.total}条`
    }

    // 初始化所有示例
    initFrontendPagination()
    initBackendPagination()
    initStandalonePagination()

    // 前端分页控制
    document.getElementById('frontend-enable').addEventListener('click', () => {
      frontendTable.enablePagination()
      document.getElementById('frontend-enable').classList.add('active')
      document.getElementById('frontend-disable').classList.remove('active')
    })

    document.getElementById('frontend-disable').addEventListener('click', () => {
      frontendTable.disablePagination()
      document.getElementById('frontend-disable').classList.add('active')
      document.getElementById('frontend-enable').classList.remove('active')
    })

    document.getElementById('frontend-pagesize').addEventListener('change', (e) => {
      frontendTable.setPageSize(parseInt(e.target.value))
    })

    document.getElementById('frontend-jump-btn').addEventListener('click', () => {
      const page = parseInt(document.getElementById('frontend-jump').value)
      if (page > 0) {
        frontendTable.setPage(page)
        document.getElementById('frontend-jump').value = ''
      }
    })

    // 后端分页控制
    document.getElementById('backend-load').addEventListener('click', () => {
      loadBackendData(backendCurrentPage, backendPageSize)
    })

    document.getElementById('backend-simple').addEventListener('click', () => {
      backendTable.destroy()
      backendTable = new Table({
        container: '#backend-table',
        columns,
        data: generateData(backendPageSize, (backendCurrentPage - 1) * backendPageSize),
        pagination: {
          enabled: true,
          mode: 'backend',
          current: backendCurrentPage,
          pageSize: backendPageSize,
          total: backendTotal,
          container: '#backend-pagination',
          simple: true,
          onChange: (page, pageSize) => {
            loadBackendData(page, pageSize)
          }
        }
      })
      document.getElementById('backend-simple').classList.add('active')
      document.getElementById('backend-full').classList.remove('active')
    })

    document.getElementById('backend-full').addEventListener('click', () => {
      initBackendPagination()
      document.getElementById('backend-full').classList.add('active')
      document.getElementById('backend-simple').classList.remove('active')
    })

    document.getElementById('backend-total').addEventListener('change', (e) => {
      backendTotal = parseInt(e.target.value)
      backendTable.setPaginationTotal(backendTotal)
      updateBackendInfo()
    })

    // 独立分页控制
    document.getElementById('standalone-reset').addEventListener('click', () => {
      standalonePagination.updateConfig({
        current: 1,
        pageSize: 10,
        total: 200
      })
      updateStandaloneInfo(1, 10)
    })

    document.getElementById('standalone-disable').addEventListener('click', () => {
      standalonePagination.updateConfig({ disabled: true })
      document.getElementById('standalone-disable').classList.add('active')
      document.getElementById('standalone-enable').classList.remove('active')
    })

    document.getElementById('standalone-enable').addEventListener('click', () => {
      standalonePagination.updateConfig({ disabled: false })
      document.getElementById('standalone-enable').classList.add('active')
      document.getElementById('standalone-disable').classList.remove('active')
    })
  </script>
</body>
</html>
