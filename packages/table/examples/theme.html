<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>主题系统示例 - LDESIGN Table</title>
  <link rel="stylesheet" href="./src/styles/main.css">
</head>
<body>
  <div class="page-header">
    <h1>🎨 主题系统示例</h1>
    <p>演示表格的主题定制功能，包括颜色、字体等样式</p>
  </div>

  <nav class="nav">
    <div class="container">
      <ul class="nav-links">
        <li><a href="./index.html">首页</a></li>
        <li><a href="./basic.html">基础表格</a></li>
        <li><a href="./filter.html">筛选搜索</a></li>
        <li><a href="./editable.html">可编辑表格</a></li>
        <li><a href="./drag-sort.html">拖拽排序</a></li>
        <li><a href="./export.html">数据导出</a></li>
        <li><a href="./theme.html" class="active">主题系统</a></li>
        <li><a href="./complete.html">完整功能</a></li>
      </ul>
    </div>
  </nav>

  <div class="container">
    <div class="example-section">
      <h2>主题系统演示</h2>
      <p>这个示例展示了表格的主题系统功能，包括预设主题、自定义主题和响应式适配。</p>
      
      <div class="info-panel">
        <h4>主题特性</h4>
        <ul>
          <li>🌞 明亮/暗黑主题切换</li>
          <li>📱 响应式模式切换</li>
          <li>🎨 自定义颜色和样式</li>
          <li>⚡ 动画效果开关</li>
          <li>🔳 阴影效果开关</li>
          <li>📐 圆角效果开关</li>
          <li>♿ 无障碍支持</li>
        </ul>
      </div>

      <div class="controls">
        <h3>预设主题</h3>
        <button class="btn" onclick="setTheme('light')">明亮主题</button>
        <button class="btn" onclick="setTheme('dark')">暗黑主题</button>
        <button class="btn" onclick="setTheme('compact')">紧凑主题</button>
        <button class="btn" onclick="setTheme('comfortable')">舒适主题</button>
        <button class="btn" onclick="setTheme('minimal')">极简主题</button>
      </div>

      <div class="controls">
        <h3>响应式模式</h3>
        <button class="btn" onclick="setResponsive('auto')">自动响应</button>
        <button class="btn" onclick="setResponsive('desktop')">桌面模式</button>
        <button class="btn" onclick="setResponsive('tablet')">平板模式</button>
        <button class="btn" onclick="setResponsive('mobile')">移动模式</button>
        <button class="btn" onclick="setResponsive('card')">卡片模式</button>
      </div>

      <div class="controls">
        <h3>特性开关</h3>
        <button class="btn" onclick="toggleAnimations()">
          <span id="animationsText">禁用动画</span>
        </button>
        <button class="btn" onclick="toggleShadows()">
          <span id="shadowsText">禁用阴影</span>
        </button>
        <button class="btn" onclick="toggleRounded()">
          <span id="roundedText">禁用圆角</span>
        </button>
      </div>

      <div class="controls">
        <h3>自定义主题</h3>
        <label>
          主色调: 
          <input type="color" id="primaryColor" value="#722ED1" onchange="updateCustomTheme()">
        </label>
        <label>
          背景色: 
          <input type="color" id="backgroundColor" value="#ffffff" onchange="updateCustomTheme()">
        </label>
        <label>
          文字色: 
          <input type="color" id="textColor" value="#333333" onchange="updateCustomTheme()">
        </label>
        <button class="btn" onclick="resetCustomTheme()">重置自定义</button>
      </div>

      <div class="table-container" id="themeTableContainer"></div>

      <div class="info-panel">
        <h4>当前主题状态</h4>
        <div>
          主题类型: <span class="status" id="themeType">light</span>
          响应式模式: <span class="status" id="responsiveMode">auto</span>
          动画效果: <span class="status" id="animationsStatus">启用</span>
          阴影效果: <span class="status" id="shadowsStatus">启用</span>
          圆角效果: <span class="status" id="roundedStatus">启用</span>
        </div>
      </div>

      <div class="log" id="operationLog"></div>
    </div>
  </div>

  <script type="module">
    import { Table } from '@ldesign/table'
    import '@ldesign/table/styles'
    import { sampleEmployees, basicColumns, createLogger } from './src/utils/data.js'

    let themeTable = null
    const log = createLogger('operationLog')

    // 初始化表格
    function initThemeTable() {
      const container = document.getElementById('themeTableContainer')
      container.innerHTML = ''

      themeTable = new Table({
        container,
        columns: basicColumns,
        data: [...sampleEmployees],
        rowKey: 'id',
        selection: {
          enabled: true,
          multiple: true,
          checkboxColumn: true
        },
        pagination: {
          enabled: true,
          pageSize: 5
        },
        sorting: {
          enabled: true
        }
      })

      // 绑定主题事件
      bindThemeEvents()
      updateThemeStatus()
      log('主题演示表格初始化完成', 'success')
    }

    // 绑定主题事件
    function bindThemeEvents() {
      // 主题变更事件
      themeTable.on('theme-change', (data) => {
        log(`主题变更: ${data.oldTheme.type} → ${data.newTheme.type}`, 'info')
        updateThemeStatus()
      })
    }

    // 设置主题
    window.setTheme = function(type) {
      themeTable.setTheme({ type })
      log(`切换到${type}主题`, 'info')
    }

    // 设置响应式模式
    window.setResponsive = function(mode) {
      themeTable.setTheme({ responsive: mode })
      log(`切换到${mode}响应式模式`, 'info')
    }

    // 切换动画
    window.toggleAnimations = function() {
      const current = themeTable.getTheme()
      const newValue = !current.animations
      themeTable.setTheme({ animations: newValue })
      document.getElementById('animationsText').textContent = newValue ? '禁用动画' : '启用动画'
      log(`${newValue ? '启用' : '禁用'}动画效果`, 'info')
    }

    // 切换阴影
    window.toggleShadows = function() {
      const current = themeTable.getTheme()
      const newValue = !current.shadows
      themeTable.setTheme({ shadows: newValue })
      document.getElementById('shadowsText').textContent = newValue ? '禁用阴影' : '启用阴影'
      log(`${newValue ? '启用' : '禁用'}阴影效果`, 'info')
    }

    // 切换圆角
    window.toggleRounded = function() {
      const current = themeTable.getTheme()
      const newValue = !current.rounded
      themeTable.setTheme({ rounded: newValue })
      document.getElementById('roundedText').textContent = newValue ? '禁用圆角' : '启用圆角'
      log(`${newValue ? '启用' : '禁用'}圆角效果`, 'info')
    }

    // 更新自定义主题
    window.updateCustomTheme = function() {
      const primaryColor = document.getElementById('primaryColor').value
      const backgroundColor = document.getElementById('backgroundColor').value
      const textColor = document.getElementById('textColor').value

      themeTable.setTheme({
        type: 'custom',
        customVars: {
          '--ldesign-brand-color': primaryColor,
          '--ldesign-bg-color-container': backgroundColor,
          '--ldesign-text-color-primary': textColor
        }
      })
      log('应用自定义主题', 'info')
    }

    // 重置自定义主题
    window.resetCustomTheme = function() {
      document.getElementById('primaryColor').value = '#722ED1'
      document.getElementById('backgroundColor').value = '#ffffff'
      document.getElementById('textColor').value = '#333333'
      themeTable.setTheme({ type: 'light', customVars: {} })
      log('重置为默认主题', 'info')
    }

    // 更新主题状态
    function updateThemeStatus() {
      const theme = themeTable.getTheme()
      
      document.getElementById('themeType').textContent = theme.type
      document.getElementById('responsiveMode').textContent = theme.responsive
      document.getElementById('animationsStatus').textContent = theme.animations ? '启用' : '禁用'
      document.getElementById('shadowsStatus').textContent = theme.shadows ? '启用' : '禁用'
      document.getElementById('roundedStatus').textContent = theme.rounded ? '启用' : '禁用'

      // 更新状态样式
      document.getElementById('animationsStatus').className = `status ${theme.animations ? 'success' : 'warning'}`
      document.getElementById('shadowsStatus').className = `status ${theme.shadows ? 'success' : 'warning'}`
      document.getElementById('roundedStatus').className = `status ${theme.rounded ? 'success' : 'warning'}`
    }

    // 页面加载完成后初始化
    document.addEventListener('DOMContentLoaded', () => {
      initThemeTable()
      log('页面加载完成', 'success')
    })
  </script>
</body>
</html>
