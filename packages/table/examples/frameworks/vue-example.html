<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vue.js é›†æˆç¤ºä¾‹ - LDESIGN Table</title>
  <link rel="stylesheet" href="../src/styles/main.css">
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>
<body>
  <div id="app">
    <div class="page-header">
      <h1>ğŸ”§ Vue.js é›†æˆç¤ºä¾‹</h1>
      <p>æ¼”ç¤º LDESIGN Table ä¸ Vue.js çš„é›†æˆä½¿ç”¨</p>
    </div>

    <nav class="nav">
      <div class="container">
        <ul class="nav-links">
          <li><a href="../index.html">é¦–é¡µ</a></li>
          <li><a href="./vue-example.html" class="active">Vue.js ç¤ºä¾‹</a></li>
          <li><a href="./react-example.html">React ç¤ºä¾‹</a></li>
          <li><a href="./angular-example.html">Angular ç¤ºä¾‹</a></li>
        </ul>
      </div>
    </nav>

    <div class="container">
      <div class="example-section">
        <h2>Vue.js é›†æˆæ¼”ç¤º</h2>
        <p>è¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•åœ¨ Vue.js åº”ç”¨ä¸­ä½¿ç”¨ LDESIGN Table ç»„ä»¶ã€‚</p>
        
        <div class="info-panel">
          <h4>é›†æˆç‰¹æ€§</h4>
          <ul>
            <li>ğŸ”„ Vue å“åº”å¼æ•°æ®ç»‘å®š</li>
            <li>ğŸ“Š ç»„ä»¶åŒ–è¡¨æ ¼å°è£…</li>
            <li>ğŸ¯ äº‹ä»¶å¤„ç†é›†æˆ</li>
            <li>ğŸ”§ é…ç½®åŠ¨æ€æ›´æ–°</li>
            <li>ğŸ“± ç”Ÿå‘½å‘¨æœŸç®¡ç†</li>
            <li>ğŸ¨ æ ·å¼ä¸»é¢˜é›†æˆ</li>
          </ul>
        </div>

        <div class="controls">
          <h3>æ•°æ®æ“ä½œ</h3>
          <button class="btn" @click="addRandomEmployee">æ·»åŠ å‘˜å·¥</button>
          <button class="btn" @click="removeSelectedEmployees">åˆ é™¤é€‰ä¸­</button>
          <button class="btn" @click="updateRandomEmployee">æ›´æ–°éšæœºå‘˜å·¥</button>
          <button class="btn" @click="refreshData">åˆ·æ–°æ•°æ®</button>
        </div>

        <div class="controls">
          <h3>è¡¨æ ¼é…ç½®</h3>
          <label>
            <input type="checkbox" v-model="tableConfig.pagination.enabled">
            å¯ç”¨åˆ†é¡µ
          </label>
          <label>
            <input type="checkbox" v-model="tableConfig.selection.enabled">
            å¯ç”¨é€‰æ‹©
          </label>
          <label>
            <input type="checkbox" v-model="tableConfig.sorting.enabled">
            å¯ç”¨æ’åº
          </label>
          <label>
            æ¯é¡µæ¡æ•°:
            <select v-model="tableConfig.pagination.pageSize" @change="updateTableConfig">
              <option value="5">5</option>
              <option value="10">10</option>
              <option value="20">20</option>
            </select>
          </label>
        </div>

        <div class="controls">
          <h3>ä¸»é¢˜åˆ‡æ¢</h3>
          <select v-model="currentTheme" @change="changeTheme">
            <option value="light">æ˜äº®ä¸»é¢˜</option>
            <option value="dark">æš—é»‘ä¸»é¢˜</option>
            <option value="compact">ç´§å‡‘ä¸»é¢˜</option>
            <option value="comfortable">èˆ’é€‚ä¸»é¢˜</option>
          </select>
        </div>

        <!-- è¡¨æ ¼å®¹å™¨ -->
        <div class="table-container" ref="tableContainer"></div>

        <div class="info-panel">
          <h4>Vue çŠ¶æ€</h4>
          <div>
            å‘˜å·¥æ€»æ•°: <span class="status">{{ employees.length }}</span>
            é€‰ä¸­æ•°é‡: <span class="status">{{ selectedEmployees.length }}</span>
            å½“å‰ä¸»é¢˜: <span class="status">{{ currentTheme }}</span>
          </div>
          <div>
            åˆ†é¡µçŠ¶æ€: <span class="status">{{ tableConfig.pagination.enabled ? 'å¯ç”¨' : 'ç¦ç”¨' }}</span>
            æ’åºçŠ¶æ€: <span class="status">{{ tableConfig.sorting.enabled ? 'å¯ç”¨' : 'ç¦ç”¨' }}</span>
          </div>
        </div>

        <div class="info-panel">
          <h4>äº‹ä»¶æ—¥å¿—</h4>
          <div class="event-log" ref="eventLog">
            <div v-for="event in eventLog" :key="event.id" class="event-item">
              <span class="event-time">{{ event.time }}</span>
              <span class="event-type" :class="event.type">{{ event.message }}</span>
            </div>
          </div>
          <button class="btn btn-small" @click="clearEventLog">æ¸…é™¤æ—¥å¿—</button>
        </div>
      </div>
    </div>
  </div>

  <script type="module">
    import { Table } from '@ldesign/table'
    import '@ldesign/table/styles'

    const { createApp, ref, reactive, onMounted, onUnmounted, watch, nextTick } = Vue

    createApp({
      setup() {
        // å“åº”å¼æ•°æ®
        const employees = ref([
          { id: 1, name: 'å¼ ä¸‰', age: 25, department: 'æŠ€æœ¯éƒ¨', salary: 8000, joinDate: '2023-01-15', status: 'åœ¨èŒ' },
          { id: 2, name: 'æå››', age: 30, department: 'å¸‚åœºéƒ¨', salary: 7500, joinDate: '2022-06-20', status: 'åœ¨èŒ' },
          { id: 3, name: 'ç‹äº”', age: 28, department: 'äººäº‹éƒ¨', salary: 6500, joinDate: '2023-03-10', status: 'åœ¨èŒ' },
          { id: 4, name: 'èµµå…­', age: 32, department: 'æŠ€æœ¯éƒ¨', salary: 9000, joinDate: '2021-11-05', status: 'åœ¨èŒ' },
          { id: 5, name: 'é’±ä¸ƒ', age: 27, department: 'è´¢åŠ¡éƒ¨', salary: 7000, joinDate: '2023-08-12', status: 'åœ¨èŒ' }
        ])

        const selectedEmployees = ref([])
        const currentTheme = ref('light')
        const eventLog = ref([])
        const tableContainer = ref(null)
        
        // è¡¨æ ¼é…ç½®
        const tableConfig = reactive({
          pagination: {
            enabled: true,
            pageSize: 10
          },
          selection: {
            enabled: true,
            multiple: true,
            checkboxColumn: true
          },
          sorting: {
            enabled: true
          }
        })

        // è¡¨æ ¼å®ä¾‹
        let tableInstance = null

        // è¡¨æ ¼åˆ—é…ç½®
        const columns = [
          { key: 'name', title: 'å§“å', sortable: true, width: 100 },
          { key: 'age', title: 'å¹´é¾„', sortable: true, width: 80 },
          { key: 'department', title: 'éƒ¨é—¨', sortable: true, width: 120 },
          { key: 'salary', title: 'è–ªèµ„', sortable: true, width: 100, render: (value) => `Â¥${value}` },
          { key: 'joinDate', title: 'å…¥èŒæ—¥æœŸ', sortable: true, width: 120 },
          { key: 'status', title: 'çŠ¶æ€', width: 80 }
        ]

        // åˆå§‹åŒ–è¡¨æ ¼
        const initTable = () => {
          if (tableInstance) {
            tableInstance.destroy()
          }

          tableInstance = new Table({
            container: tableContainer.value,
            columns,
            data: employees.value,
            rowKey: 'id',
            ...tableConfig,
            onRowClick: (data) => {
              addEventLog('è¡Œç‚¹å‡»', `ç‚¹å‡»äº† ${data.row.name}`)
            },
            onSelectionChange: (data) => {
              selectedEmployees.value = data.selectedRows
              addEventLog('é€‰æ‹©å˜æ›´', `é€‰ä¸­ ${data.selectedRows.length} è¡Œ`)
            },
            onSortChange: (data) => {
              addEventLog('æ’åºå˜æ›´', `æŒ‰ ${data.column} ${data.direction} æ’åº`)
            }
          })

          addEventLog('ç³»ç»Ÿ', 'è¡¨æ ¼åˆå§‹åŒ–å®Œæˆ')
        }

        // æ·»åŠ äº‹ä»¶æ—¥å¿—
        const addEventLog = (type, message) => {
          const event = {
            id: Date.now(),
            time: new Date().toLocaleTimeString(),
            type: type.toLowerCase(),
            message
          }
          eventLog.value.unshift(event)
          if (eventLog.value.length > 20) {
            eventLog.value = eventLog.value.slice(0, 20)
          }
        }

        // æ·»åŠ éšæœºå‘˜å·¥
        const addRandomEmployee = () => {
          const names = ['æ–°å‘˜å·¥A', 'æ–°å‘˜å·¥B', 'æ–°å‘˜å·¥C', 'æ–°å‘˜å·¥D', 'æ–°å‘˜å·¥E']
          const departments = ['æŠ€æœ¯éƒ¨', 'å¸‚åœºéƒ¨', 'äººäº‹éƒ¨', 'è´¢åŠ¡éƒ¨']
          const newEmployee = {
            id: Date.now(),
            name: names[Math.floor(Math.random() * names.length)],
            age: Math.floor(Math.random() * 20) + 25,
            department: departments[Math.floor(Math.random() * departments.length)],
            salary: Math.floor(Math.random() * 5000) + 6000,
            joinDate: new Date().toISOString().split('T')[0],
            status: 'åœ¨èŒ'
          }
          
          employees.value.push(newEmployee)
          tableInstance.addRow(newEmployee)
          addEventLog('æ•°æ®æ“ä½œ', `æ·»åŠ å‘˜å·¥: ${newEmployee.name}`)
        }

        // åˆ é™¤é€‰ä¸­å‘˜å·¥
        const removeSelectedEmployees = () => {
          if (selectedEmployees.value.length === 0) {
            addEventLog('è­¦å‘Š', 'è¯·å…ˆé€‰æ‹©è¦åˆ é™¤çš„å‘˜å·¥')
            return
          }

          const selectedIds = selectedEmployees.value.map(emp => emp.id)
          employees.value = employees.value.filter(emp => !selectedIds.includes(emp.id))
          
          selectedIds.forEach(id => {
            tableInstance.removeRow(id)
          })
          
          addEventLog('æ•°æ®æ“ä½œ', `åˆ é™¤ ${selectedIds.length} åå‘˜å·¥`)
          selectedEmployees.value = []
        }

        // æ›´æ–°éšæœºå‘˜å·¥
        const updateRandomEmployee = () => {
          if (employees.value.length === 0) return
          
          const randomIndex = Math.floor(Math.random() * employees.value.length)
          const employee = employees.value[randomIndex]
          const newSalary = Math.floor(Math.random() * 5000) + 6000
          
          employee.salary = newSalary
          tableInstance.updateRow(employee.id, employee)
          addEventLog('æ•°æ®æ“ä½œ', `æ›´æ–°å‘˜å·¥ ${employee.name} è–ªèµ„ä¸º Â¥${newSalary}`)
        }

        // åˆ·æ–°æ•°æ®
        const refreshData = () => {
          tableInstance.setData([...employees.value])
          addEventLog('æ•°æ®æ“ä½œ', 'åˆ·æ–°è¡¨æ ¼æ•°æ®')
        }

        // æ›´æ–°è¡¨æ ¼é…ç½®
        const updateTableConfig = () => {
          nextTick(() => {
            initTable()
            addEventLog('é…ç½®', 'è¡¨æ ¼é…ç½®å·²æ›´æ–°')
          })
        }

        // åˆ‡æ¢ä¸»é¢˜
        const changeTheme = () => {
          if (tableInstance) {
            tableInstance.setTheme({ type: currentTheme.value })
            addEventLog('ä¸»é¢˜', `åˆ‡æ¢åˆ° ${currentTheme.value} ä¸»é¢˜`)
          }
        }

        // æ¸…é™¤äº‹ä»¶æ—¥å¿—
        const clearEventLog = () => {
          eventLog.value = []
        }

        // ç›‘å¬é…ç½®å˜åŒ–
        watch(() => tableConfig.pagination.enabled, updateTableConfig)
        watch(() => tableConfig.selection.enabled, updateTableConfig)
        watch(() => tableConfig.sorting.enabled, updateTableConfig)

        // ç”Ÿå‘½å‘¨æœŸ
        onMounted(() => {
          nextTick(() => {
            initTable()
          })
        })

        onUnmounted(() => {
          if (tableInstance) {
            tableInstance.destroy()
          }
        })

        return {
          employees,
          selectedEmployees,
          currentTheme,
          eventLog,
          tableConfig,
          tableContainer,
          addRandomEmployee,
          removeSelectedEmployees,
          updateRandomEmployee,
          refreshData,
          updateTableConfig,
          changeTheme,
          clearEventLog
        }
      }
    }).mount('#app')
  </script>

  <style>
    .event-log {
      max-height: 200px;
      overflow-y: auto;
      border: 1px solid var(--ldesign-border-color);
      border-radius: var(--ls-border-radius-base);
      padding: 10px;
      background: var(--ldesign-bg-color-component);
    }

    .event-item {
      display: flex;
      align-items: center;
      padding: 3px 0;
      border-bottom: 1px solid var(--ldesign-border-level-1-color);
    }

    .event-item:last-child {
      border-bottom: none;
    }

    .event-time {
      font-size: var(--ls-font-size-xs);
      color: var(--ldesign-text-color-secondary);
      min-width: 80px;
    }

    .event-type {
      margin-left: 10px;
      font-size: var(--ls-font-size-sm);
    }

    .event-type.ç³»ç»Ÿ { color: var(--ldesign-brand-color); }
    .event-type.æ•°æ®æ“ä½œ { color: var(--ldesign-success-color); }
    .event-type.é…ç½® { color: var(--ldesign-warning-color); }
    .event-type.ä¸»é¢˜ { color: var(--ldesign-brand-color); }
    .event-type.è­¦å‘Š { color: var(--ldesign-error-color); }

    .btn-small {
      padding: 5px 10px;
      font-size: var(--ls-font-size-xs);
      margin-top: 10px;
    }
  </style>
</body>
</html>
