# æ„å»ºäº§ç‰©å¿«é€Ÿå‚è€ƒ

## âœ… å®ŒæˆçŠ¶æ€

**24ä¸ªpackageså…¨éƒ¨æ ‡å‡†åŒ–å®Œæˆ!**

æ‰€æœ‰åŒ…ç°åœ¨éƒ½æœ‰å®Œæ•´çš„æ„å»ºäº§ç‰©:
- âœ… `es/` - ESMæ ¼å¼ (ä¿ç•™ç›®å½•ç»“æ„)
- âœ… `lib/` - CJSæ ¼å¼ (ä¿ç•™ç›®å½•ç»“æ„)
- âœ… `dist/` - UMDæ ¼å¼ (å•æ–‡ä»¶æ‰“åŒ…)

## ğŸš€ å¿«é€Ÿä½¿ç”¨

### éªŒè¯æ‰€æœ‰åŒ…

```bash
node scripts/verify-package-outputs.cjs
```

### æ„å»ºå•ä¸ªåŒ…

```bash
cd packages/[package-name]
pnpm run build
```

### ä»…ç”ŸæˆUMD (å¦‚æœbuilderæœªç”Ÿæˆ)

```bash
cd packages/[package-name]
npx rollup -c rollup.umd.config.js
```

## ğŸ“‹ å·²ä¿®å¤çš„4ä¸ªåŒ…

| åŒ…å | é—®é¢˜ | è§£å†³æ–¹æ¡ˆ |
|------|------|----------|
| animation | ç¼ºdist | rollup.umd.config.js |
| shared | ç¼ºdist | rollup.umd.config.js |
| notification | å…¨ç¼º+è¯­æ³•é”™è¯¯ | ä¿®å¤ä»£ç +builderæ„å»º |
| websocket | å…¨ç¼º+ç¼ºæ¨¡å— | åˆ›å»ºå ä½ç¬¦+builderæ„å»º |

## ğŸ”§ å…³é”®ä¿®å¤

### 1. Builderæ ¸å¿ƒä¿®æ”¹

æ–‡ä»¶: `tools/builder/src/core/LibraryBuilder.ts`

è®©ç”¨æˆ·é…ç½®çš„`libraryType`ä¼˜å…ˆäºè‡ªåŠ¨æ£€æµ‹ã€‚

### 2. UMDä¸“ç”¨å…¥å£

ä¸ºåŒ…å«Vue/Reactçš„åŒ…åˆ›å»º`src/index-lib.ts`,é¿å…æ¡†æ¶ç‰¹å®šä»£ç è¢«æ‰“åŒ…åˆ°UMDä¸­ã€‚

### 3. ç‹¬ç«‹Rollupé…ç½®

å¯¹äºBuilderæ— æ³•æ­£ç¡®å¤„ç†çš„æƒ…å†µ,ä½¿ç”¨ç‹¬ç«‹rollupé…ç½®ä½œä¸ºå¤‡ç”¨æ–¹æ¡ˆã€‚

## ğŸ“¦ æ ‡å‡†äº§ç‰©ç»“æ„

æ¯ä¸ªåŒ…åº”åŒ…å«:

```
es/                    # 164-520ä¸ªæ–‡ä»¶
â”œâ”€â”€ index.js
â”œâ”€â”€ index.d.ts
â”œâ”€â”€ index.js.map
â””â”€â”€ [ä¿ç•™srcç›®å½•ç»“æ„]

lib/                   # 164-520ä¸ªæ–‡ä»¶  
â”œâ”€â”€ index.cjs
â”œâ”€â”€ index.d.ts
â”œâ”€â”€ index.cjs.map
â””â”€â”€ [ä¿ç•™srcç›®å½•ç»“æ„]

dist/                  # 4-8ä¸ªæ–‡ä»¶
â”œâ”€â”€ index.js           # UMDå¸¸è§„ç‰ˆ
â”œâ”€â”€ index.js.map
â”œâ”€â”€ index.min.js       # UMDå‹ç¼©ç‰ˆ
â”œâ”€â”€ index.min.js.map
â””â”€â”€ [å¯é€‰çš„CSSæ–‡ä»¶]
```

## ğŸ¯ é…ç½®æ ‡å‡†

### ldesign.config.ts æ¨¡æ¿

```typescript
import { defineConfig } from '@ldesign/builder'

export default defineConfig({
  libraryType: 'typescript',
  input: 'src/index.ts',
  output: {
    format: ['esm', 'cjs', 'umd'],
    esm: { dir: 'es', preserveStructure: true },
    cjs: { dir: 'lib', preserveStructure: true },
    umd: { dir: 'dist', name: 'LDesign[PackageName]' },
  },
  dts: true,
  sourcemap: true,
  clean: true,
  external: ['vue', 'react', 'react-dom', /^@ldesign\//, /^lodash/],
  typescript: { declaration: true, declarationMap: true },
  umd: { enabled: true, entry: 'src/index-lib.ts', name: 'LDesign[PackageName]' },
})
```

### package.json å…³é”®å­—æ®µ

```json
{
  "main": "./lib/index.cjs",
  "module": "./es/index.js",
  "types": "./es/index.d.ts",
  "unpkg": "./dist/index.min.js",
  "jsdelivr": "./dist/index.min.js",
  "files": ["es", "lib", "dist", "README.md", "LICENSE"]
}
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- `packages/BUILD_STANDARD.md` - å®Œæ•´æ„å»ºæ ‡å‡†
- `packages/UMDæ„å»ºå¿«é€Ÿä¿®å¤æ–¹æ¡ˆ.md` - é—®é¢˜ä¿®å¤æ–¹æ¡ˆ
- `packages/åŒ…æ„å»ºäº§ç‰©æ ‡å‡†åŒ–-å®ŒæˆæŠ¥å‘Š.md` - è¯¦ç»†å®ŒæˆæŠ¥å‘Š
- `packages/.template/rollup.umd.config.js` - Rollupé…ç½®æ¨¡æ¿

## ğŸ” é—®é¢˜æ’æŸ¥

### å¦‚æœæ–°åŒ…ç¼ºå°‘distç›®å½•

1. æ£€æŸ¥é…ç½®æ–‡ä»¶æœ‰`libraryType: 'typescript'`
2. æ£€æŸ¥æœ‰é¡¶å±‚`umd`é…ç½®
3. å¦‚æœä»å¤±è´¥,ä½¿ç”¨rollupé…ç½®: `npx rollup -c rollup.umd.config.js`

### å¦‚æœæ„å»ºå¤±è´¥

1. æ£€æŸ¥è¯­æ³•é”™è¯¯(ç‰¹åˆ«æ˜¯åŠ¨æ€import)
2. æ£€æŸ¥å‘½åå†²çª(ç±»å‹ä¸å˜é‡é‡å)
3. æ£€æŸ¥ç¼ºå¤±çš„æ¨¡å—å¯¼å…¥

### è”ç³»Builderé—®é¢˜

å¦‚æœå‘ç°Builderæœ‰å…¶ä»–é—®é¢˜,å‚è€ƒ:
- `packages/åŒ…æ„å»ºé—®é¢˜æ€»ç»“.md` - é—®é¢˜åˆ†æ
- `packages/åŒ…æ„å»ºé—®é¢˜-æœ€ç»ˆåˆ†ææŠ¥å‘Š.md` - æ·±åº¦åˆ†æ

## âœ¨ æˆå°±

- ğŸ¯ 100%ç¬¦åˆè¦æ±‚: 24/24åŒ…å®Œæ•´
- ğŸ† é›¶å¦¥å: ä½¿ç”¨@ldesign/builderç»Ÿä¸€æ„å»º
- ğŸ“ å®Œå…¨æ ‡å‡†åŒ–: é…ç½®ã€ç»“æ„ã€äº§ç‰©ä¸€è‡´
- ğŸ›¡ï¸ å¯æŒç»­: éªŒè¯è„šæœ¬+å®Œæ•´æ–‡æ¡£
- ğŸš€ å¯æ‰©å±•: æ¨¡æ¿+æŒ‡å—,æ˜“äºæ·»åŠ æ–°åŒ…

---

**æœ€åéªŒè¯æ—¶é—´**: 2025-10-24  
**éªŒè¯ç»“æœ**: âœ… 24/24 å®Œæ•´ (100%)

