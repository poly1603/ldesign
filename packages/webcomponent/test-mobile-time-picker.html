<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Mobile Time Picker Test</title>
  <script type="module" src="./dist/ldesign/ldesign.esm.js"></script>
  <link rel="stylesheet" href="./dist/ldesign/ldesign.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background: #f5f5f5;
      padding: 20px;
      min-height: 100vh;
    }
    
    h1 {
      font-size: 24px;
      color: #1a1a1a;
      margin-bottom: 20px;
      text-align: center;
    }
    
    .mobile-info {
      background: #fff;
      border-radius: 12px;
      padding: 15px;
      margin-bottom: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }
    
    .info-row {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      font-size: 14px;
    }
    
    .info-label {
      color: #666;
    }
    
    .info-value {
      color: #1a1a1a;
      font-weight: 500;
    }
    
    .test-section {
      background: white;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }
    
    .test-title {
      font-size: 18px;
      font-weight: 600;
      color: #333;
      margin-bottom: 12px;
    }
    
    .test-desc {
      font-size: 14px;
      color: #666;
      margin-bottom: 16px;
    }
    
    .picker-wrapper {
      margin-bottom: 16px;
    }
    
    .result-box {
      background: #f8f9fa;
      border-radius: 8px;
      padding: 12px;
      font-size: 14px;
      color: #495057;
      text-align: center;
      font-weight: 500;
    }
    
    .result-value {
      color: #0066cc;
      font-size: 16px;
      font-weight: 600;
    }
    
    .badge {
      display: inline-block;
      padding: 3px 8px;
      background: #e3f2fd;
      color: #1976d2;
      border-radius: 12px;
      font-size: 12px;
      margin-left: 8px;
    }
    
    .test-grid {
      display: grid;
      gap: 20px;
    }
    
    /* 模拟移动端宽度 */
    @media (min-width: 769px) {
      body {
        max-width: 375px;
        margin: 0 auto;
        border-left: 1px solid #ddd;
        border-right: 1px solid #ddd;
      }
    }
    
    .tips {
      background: #fff3cd;
      border: 1px solid #ffc107;
      border-radius: 8px;
      padding: 12px;
      margin-bottom: 20px;
      font-size: 14px;
      color: #856404;
    }
  </style>
</head>
<body>
  <h1>📱 移动端时间选择器</h1>
  
  <div class="mobile-info">
    <div class="info-row">
      <span class="info-label">屏幕宽度</span>
      <span class="info-value" id="screen-width">-</span>
    </div>
    <div class="info-row">
      <span class="info-label">显示模式</span>
      <span class="info-value" id="display-mode">-</span>
    </div>
    <div class="info-row">
      <span class="info-label">优化特性</span>
      <span class="info-value">✅ 已启用</span>
    </div>
  </div>
  
  <div class="tips">
    💡 移动端优化：按钮移至顶部，选择器铺满宽度，隐藏关闭按钮
  </div>
  
  <div class="test-grid">
    <!-- 测试1: 基础选择器 -->
    <div class="test-section">
      <div class="test-title">基础选择器</div>
      <div class="test-desc">标准时间选择，显示时分秒</div>
      <div class="picker-wrapper">
        <ldesign-time-picker 
          id="basic"
          placeholder="选择时间"
          default-value="09:30:00"
        ></ldesign-time-picker>
      </div>
      <div class="result-box">
        当前值: <span class="result-value" id="basic-result">09:30:00</span>
      </div>
    </div>
    
    <!-- 测试2: 12小时制 -->
    <div class="test-section">
      <div class="test-title">12小时制 <span class="badge">AM/PM</span></div>
      <div class="test-desc">AM/PM 在最前面，适合国际用户</div>
      <div class="picker-wrapper">
        <ldesign-time-picker 
          id="twelve"
          output-format="12h"
          show-seconds="false"
          placeholder="选择时间 (12h)"
          default-value="14:30"
        ></ldesign-time-picker>
      </div>
      <div class="result-box">
        当前值: <span class="result-value" id="twelve-result">02:30 PM</span>
      </div>
    </div>
    
    <!-- 测试3: 范围选择 -->
    <div class="test-section">
      <div class="test-title">范围选择 <span class="badge">双时间</span></div>
      <div class="test-desc">选择开始和结束时间</div>
      <div class="picker-wrapper">
        <ldesign-time-picker 
          id="range"
          range="true"
          show-seconds="false"
          placeholder="选择时间范围"
          default-value="09:00-18:00"
        ></ldesign-time-picker>
      </div>
      <div class="result-box">
        时间段: <span class="result-value" id="range-result">09:00 ~ 18:00</span>
      </div>
    </div>
    
    <!-- 测试4: 即时生效 -->
    <div class="test-section">
      <div class="test-title">即时生效模式</div>
      <div class="test-desc">无需确认，选择后立即生效</div>
      <div class="picker-wrapper">
        <ldesign-time-picker 
          id="instant"
          confirm="false"
          show-seconds="false"
          placeholder="即时生效"
          default-value="10:00"
        ></ldesign-time-picker>
      </div>
      <div class="result-box">
        实时值: <span class="result-value" id="instant-result">10:00</span>
      </div>
    </div>
    
    <!-- 测试5: 预设快捷选择 -->
    <div class="test-section">
      <div class="test-title">预设快捷选择</div>
      <div class="test-desc">常用时间快速选择</div>
      <div class="picker-wrapper">
        <ldesign-time-picker 
          id="preset"
          show-seconds="false"
          placeholder="选择或使用预设"
        ></ldesign-time-picker>
      </div>
      <div class="result-box">
        选择: <span class="result-value" id="preset-result">未选择</span>
      </div>
    </div>
  </div>
  
  <script>
    // 显示屏幕信息
    function updateScreenInfo() {
      const width = window.innerWidth;
      document.getElementById('screen-width').textContent = width + 'px';
      document.getElementById('display-mode').textContent = width < 768 ? 'Drawer 模式' : 'Popup 模式';
    }
    
    updateScreenInfo();
    window.addEventListener('resize', updateScreenInfo);
    
    // 设置预设
    const presetPicker = document.getElementById('preset');
    presetPicker.presets = [
      { label: '现在', value: new Date().toTimeString().slice(0, 5) },
      { label: '上班', value: '09:00' },
      { label: '午餐', value: '12:00' },
      { label: '下班', value: '18:00' }
    ];
    
    // 监听器
    function setupListener(id, resultId, formatter) {
      const picker = document.getElementById(id);
      const result = document.getElementById(resultId);
      
      picker.addEventListener('ldesignChange', (e) => {
        if (formatter) {
          result.textContent = formatter(e.detail);
        } else if (e.detail && typeof e.detail === 'object') {
          result.textContent = `${e.detail.start || '--:--'} ~ ${e.detail.end || '--:--'}`;
        } else {
          result.textContent = e.detail || '未选择';
        }
      });
    }
    
    setupListener('basic', 'basic-result');
    setupListener('twelve', 'twelve-result');
    setupListener('range', 'range-result');
    setupListener('instant', 'instant-result');
    setupListener('preset', 'preset-result');
    
    console.log('移动端时间选择器测试页面');
    console.log('优化特性：');
    console.log('1. 按钮移至顶部，方便操作');
    console.log('2. 选择器铺满宽度，充分利用空间');
    console.log('3. 隐藏关闭按钮，简化界面');
    console.log('4. 优化触控体验');
    
    // 提示用户
    if (window.innerWidth >= 768) {
      console.warn('当前为桌面模式，请调整浏览器窗口宽度到 768px 以下查看移动端效果');
      console.log('或使用浏览器开发者工具的设备模拟器');
    }
  </script>
</body>
</html>