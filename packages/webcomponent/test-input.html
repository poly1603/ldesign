<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test Input Component</title>
  <script type="module" src="./dist/ldesign-webcomponent/ldesign-webcomponent.esm.js"></script>
  <link rel="stylesheet" href="./dist/ldesign-webcomponent/ldesign-webcomponent.css">
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #f5f5f5;
    }
    .section {
      background: white;
      padding: 20px;
      margin-bottom: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .section h2 {
      margin-top: 0;
      color: #333;
    }
    .demo-row {
      margin-bottom: 16px;
    }
    .demo-label {
      display: block;
      margin-bottom: 8px;
      font-weight: bold;
      color: #666;
    }
    .demo-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 16px;
    }
  </style>
</head>
<body>
  <h1>Input Component Test</h1>

  <div class="section">
    <h2>1. 密码框测试（应该只显示一个眼睛图标）</h2>
    <div class="demo-grid">
      <div class="demo-row">
        <label class="demo-label">密码框（无图标）</label>
        <ldesign-input type="password" placeholder="请输入密码"></ldesign-input>
      </div>
      <div class="demo-row">
        <label class="demo-label">密码框（带切换显示）</label>
        <ldesign-input type="password" placeholder="请输入密码" show-password></ldesign-input>
      </div>
      <div class="demo-row">
        <label class="demo-label">密码框（带清空按钮）</label>
        <ldesign-input type="password" placeholder="请输入密码" show-password clearable value="123456"></ldesign-input>
      </div>
    </div>
  </div>

  <div class="section">
    <h2>2. Textarea 自动高度测试</h2>
    <div class="demo-grid">
      <div class="demo-row">
        <label class="demo-label">基础 textarea</label>
        <ldesign-input type="textarea" placeholder="请输入内容" rows="3"></ldesign-input>
      </div>
      <div class="demo-row">
        <label class="demo-label">自动高度 textarea</label>
        <ldesign-input type="textarea" placeholder="请输入内容，高度会自动调整" autosize></ldesign-input>
      </div>
      <div class="demo-row">
      <label class="demo-label">限制最小/最大行数</label>
      <ldesign-input 
        type="textarea" 
        placeholder="最小2行，最大5行" 
        id="textarea-minmax"
      ></ldesign-input>
      </div>
    </div>
  </div>

  <div class="section">
    <h2>3. 输入框尺寸测试</h2>
    <div class="demo-row">
      <label class="demo-label">小尺寸</label>
      <ldesign-input placeholder="小尺寸输入框" size="small" clearable></ldesign-input>
    </div>
    <div class="demo-row">
      <label class="demo-label">中等尺寸（默认）</label>
      <ldesign-input placeholder="中等尺寸输入框" size="medium" clearable></ldesign-input>
    </div>
    <div class="demo-row">
      <label class="demo-label">大尺寸</label>
      <ldesign-input placeholder="大尺寸输入框" size="large" clearable></ldesign-input>
    </div>
  </div>

  <div class="section">
    <h2>4. 图标组合测试</h2>
    <div class="demo-grid">
      <div class="demo-row">
        <label class="demo-label">前缀图标</label>
        <ldesign-input placeholder="搜索内容" prefix-icon="search"></ldesign-input>
      </div>
      <div class="demo-row">
        <label class="demo-label">后缀图标</label>
        <ldesign-input placeholder="用户名" suffix-icon="user"></ldesign-input>
      </div>
      <div class="demo-row">
        <label class="demo-label">前后缀图标</label>
        <ldesign-input placeholder="邮箱地址" prefix-icon="mail" suffix-icon="check-circle"></ldesign-input>
      </div>
    </div>
  </div>

  <div class="section">
    <h2>5. 禁用和只读状态</h2>
    <div class="demo-grid">
      <div class="demo-row">
        <label class="demo-label">禁用状态</label>
        <ldesign-input placeholder="禁用的输入框" disabled value="禁用内容"></ldesign-input>
      </div>
      <div class="demo-row">
        <label class="demo-label">只读状态</label>
        <ldesign-input placeholder="只读的输入框" readonly value="只读内容"></ldesign-input>
      </div>
      <div class="demo-row">
        <label class="demo-label">禁用的密码框</label>
        <ldesign-input type="password" placeholder="禁用的密码框" disabled value="123456" show-password></ldesign-input>
      </div>
    </div>
  </div>

  <div class="section">
    <h2>6. 复合型输入框测试</h2>
    <div class="demo-row">
      <label class="demo-label">前缀内容</label>
      <ldesign-input placeholder="请输入网址">
        <span slot="prepend">https://</span>
      </ldesign-input>
    </div>
    <div class="demo-row">
      <label class="demo-label">后缀内容</label>
      <ldesign-input placeholder="请输入域名">
        <span slot="append">.com</span>
      </ldesign-input>
    </div>
    <div class="demo-row">
      <label class="demo-label">前后缀组合</label>
      <ldesign-input placeholder="请输入网站名" clearable>
        <span slot="prepend">https://</span>
        <span slot="append">.com</span>
      </ldesign-input>
    </div>
  </div>

  <div class="section">
    <h2>7. 字数统计和限制</h2>
    <div class="demo-row">
      <label class="demo-label">显示字数统计</label>
      <ldesign-input placeholder="最多输入20个字符" maxlength="20" show-count></ldesign-input>
    </div>
    <div class="demo-row">
      <label class="demo-label">Textarea 字数统计</label>
      <ldesign-input type="textarea" placeholder="最多100字" maxlength="100" show-count rows="3"></ldesign-input>
    </div>
    <div class="demo-row">
      <label class="demo-label">只允许输入数字</label>
      <ldesign-input placeholder="只能输入数字" id="number-only"></ldesign-input>
    </div>
  </div>

  <div class="section">
    <h2>8. 输入框状态</h2>
    <div class="demo-grid">
      <div class="demo-row">
        <label class="demo-label">错误状态</label>
        <ldesign-input placeholder="错误状态" status="error" value="错误内容"></ldesign-input>
      </div>
      <div class="demo-row">
        <label class="demo-label">警告状态</label>
        <ldesign-input placeholder="警告状态" status="warning" value="警告内容"></ldesign-input>
      </div>
      <div class="demo-row">
        <label class="demo-label">成功状态</label>
        <ldesign-input placeholder="成功状态" status="success" value="正确内容"></ldesign-input>
      </div>
    </div>
  </div>

  <script>
    // 设置 textarea 的 autosize 配置
    const textareaMinMax = document.getElementById('textarea-minmax');
    if (textareaMinMax) {
      textareaMinMax.autosize = { minRows: 2, maxRows: 5 };
    }
    
    // 设置只允许输入数字
    const numberOnly = document.getElementById('number-only');
    if (numberOnly) {
      numberOnly.allowInput = /^\d*$/;
    }

    // 监听输入事件
    document.addEventListener('ldesignInput', (e) => {
      console.log('Input event:', e.target.tagName, e.detail);
    });

    // 监听清空事件
    document.addEventListener('ldesignClear', (e) => {
      console.log('Clear event:', e.target);
    });

    // 测试 textarea 自动高度
    setTimeout(() => {
      const autosizeTextarea = document.querySelector('ldesign-input[autosize]:not(#textarea-minmax)');
      if (autosizeTextarea) {
        autosizeTextarea.value = '这是第一行\n这是第二行\n这是第三行\n这是第四行\n这是第五行\n这是第六行';
      }
    }, 1000);
  </script>
</body>
</html>