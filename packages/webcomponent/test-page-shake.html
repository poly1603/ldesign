<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æŠ½å±‰é¡µé¢æŠ–åŠ¨æµ‹è¯•</title>
  <script type="module" src="./dist/ldesign-webcomponent/ldesign-webcomponent.esm.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      line-height: 1.6;
      color: #333;
    }

    /* å›ºå®šå¯¼èˆªæ  - æ·»åŠ  data-fixed-compensate å±æ€§ä»¥é˜²æ­¢æŠ–åŠ¨ */
    .fixed-header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 60px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      display: flex;
      align-items: center;
      padding: 0 20px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      z-index: 100;
      transition: padding-right 0.3s ease;
    }

    .fixed-header h1 {
      font-size: 20px;
      font-weight: 600;
    }

    /* ä¸»å†…å®¹åŒº */
    .main-content {
      margin-top: 80px;
      padding: 20px;
      max-width: 1200px;
      margin-left: auto;
      margin-right: auto;
    }

    .test-section {
      background: white;
      border-radius: 8px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
    }

    .test-section h2 {
      color: #667eea;
      margin-bottom: 20px;
      font-size: 24px;
    }

    .test-section p {
      margin-bottom: 15px;
      color: #666;
    }

    /* æµ‹è¯•æ ‡è®°çº¿ */
    .marker-line {
      position: fixed;
      top: 80px;
      right: 50%;
      width: 2px;
      height: 100px;
      background: red;
      z-index: 1000;
      pointer-events: none;
    }

    .marker-line::before {
      content: 'å‚è€ƒçº¿';
      position: absolute;
      top: -25px;
      right: 5px;
      color: red;
      font-size: 12px;
      white-space: nowrap;
    }

    /* æŒ‰é’®ç»„ */
    .button-group {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      margin: 20px 0;
    }

    .test-button {
      padding: 12px 24px;
      font-size: 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 500;
    }

    .test-button.primary {
      background: #667eea;
      color: white;
    }

    .test-button.primary:hover {
      background: #5568d3;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
    }

    .test-button.secondary {
      background: #48bb78;
      color: white;
    }

    .test-button.secondary:hover {
      background: #38a169;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(72, 187, 120, 0.4);
    }

    .test-button.danger {
      background: #f56565;
      color: white;
    }

    .test-button.danger:hover {
      background: #e53e3e;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(245, 101, 101, 0.4);
    }

    /* çŠ¶æ€æŒ‡ç¤ºå™¨ */
    .status-indicator {
      display: inline-block;
      padding: 6px 12px;
      border-radius: 4px;
      font-size: 14px;
      font-weight: 500;
      margin-left: 10px;
    }

    .status-indicator.success {
      background: #c6f6d5;
      color: #22543d;
    }

    .status-indicator.warning {
      background: #feebc8;
      color: #7c2d12;
    }

    /* é•¿å†…å®¹åŒºåŸŸ */
    .long-content {
      min-height: 200vh;
      padding: 20px;
      background: linear-gradient(180deg, #f7fafc 0%, #edf2f7 100%);
      border-radius: 8px;
    }

    .content-block {
      background: white;
      padding: 20px;
      margin-bottom: 20px;
      border-radius: 6px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    .content-block h3 {
      color: #667eea;
      margin-bottom: 10px;
    }

    /* ä¿¡æ¯æ¡† */
    .info-box {
      background: #bee3f8;
      border-left: 4px solid #3182ce;
      padding: 15px;
      margin: 20px 0;
      border-radius: 4px;
    }

    .info-box strong {
      color: #2c5282;
    }

    /* ä»£ç å— */
    .code-block {
      background: #2d3748;
      color: #e2e8f0;
      padding: 15px;
      border-radius: 6px;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      overflow-x: auto;
      margin: 10px 0;
    }
  </style>
</head>
<body>
  <!-- å›ºå®šå¯¼èˆªæ  - æ·»åŠ  data-fixed-compensate é˜²æ­¢æŠ–åŠ¨ -->
  <header class="fixed-header" data-fixed-compensate>
    <h1>ğŸ¯ æŠ½å±‰é¡µé¢æŠ–åŠ¨æµ‹è¯•</h1>
    <span class="status-indicator success">é˜²æŠ–åŠ¨å·²å¯ç”¨</span>
  </header>

  <!-- å‚è€ƒçº¿ - ç”¨äºè§‚å¯Ÿé¡µé¢æ˜¯å¦æŠ–åŠ¨ -->
  <div class="marker-line"></div>

  <!-- ä¸»å†…å®¹åŒº -->
  <div class="main-content">
    <div class="test-section">
      <h2>ğŸ“‹ æµ‹è¯•è¯´æ˜</h2>
      <p><strong>ç›®çš„ï¼š</strong>éªŒè¯æŠ½å±‰æ‰“å¼€/å…³é—­æ—¶ï¼Œé¡µé¢å†…å®¹ä¸ä¼šå‘ç”Ÿæ¨ªå‘æŠ–åŠ¨ã€‚</p>
      
      <div class="info-box">
        <strong>è§‚å¯Ÿè¦ç‚¹ï¼š</strong><br>
        1. æ³¨æ„é¡µé¢å³ä¾§çš„çº¢è‰²å‚è€ƒçº¿<br>
        2. æ‰“å¼€æŠ½å±‰æ—¶ï¼Œå‚è€ƒçº¿å’Œå†…å®¹ä¸åº”å‘ç”Ÿæ¨ªå‘ç§»åŠ¨<br>
        3. é¡¶éƒ¨å›ºå®šå¯¼èˆªæ ä¸åº”æŠ–åŠ¨<br>
        4. æ»šåŠ¨æ¡æ¶ˆå¤±æ—¶ï¼Œé¡µé¢å®½åº¦åº”ä¿æŒä¸å˜
      </div>

      <h3>æµ‹è¯•æ­¥éª¤ï¼š</h3>
      <ol>
        <li>ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®æ‰“å¼€å„ä¸ªæ–¹å‘çš„æŠ½å±‰</li>
        <li>è§‚å¯Ÿé¡µé¢å†…å®¹æ˜¯å¦å‘ç”Ÿæ¨ªå‘åç§»</li>
        <li>å‘ä¸‹æ»šåŠ¨é¡µé¢ï¼Œç„¶åå†æ‰“å¼€æŠ½å±‰æµ‹è¯•</li>
        <li>åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šæµ‹è¯•ï¼ˆç‰¹åˆ«æ˜¯ iOSï¼‰</li>
      </ol>
    </div>

    <div class="test-section">
      <h2>ğŸ® æµ‹è¯•æ§åˆ¶</h2>
      
      <h3>åŸºç¡€æŠ½å±‰æµ‹è¯•</h3>
      <div class="button-group">
        <button class="test-button primary" onclick="openDrawer('left')">
          â† å·¦ä¾§æŠ½å±‰
        </button>
        <button class="test-button primary" onclick="openDrawer('right')">
          å³ä¾§æŠ½å±‰ â†’
        </button>
        <button class="test-button primary" onclick="openDrawer('top')">
          â†‘ é¡¶éƒ¨æŠ½å±‰
        </button>
        <button class="test-button primary" onclick="openDrawer('bottom')">
          â†“ åº•éƒ¨æŠ½å±‰
        </button>
      </div>

      <h3>ç‰¹æ®Šåœºæ™¯æµ‹è¯•</h3>
      <div class="button-group">
        <button class="test-button secondary" onclick="openLargeDrawer()">
          ğŸ”³ å¤§å°ºå¯¸æŠ½å±‰
        </button>
        <button class="test-button secondary" onclick="openFullscreenDrawer()">
          ğŸ“± å…¨å±æŠ½å±‰
        </button>
        <button class="test-button danger" onclick="openMultipleDrawers()">
          ğŸ” åµŒå¥—æŠ½å±‰
        </button>
      </div>

      <div class="info-box">
        <strong>å½“å‰æ»šåŠ¨æ¡å®½åº¦ï¼š</strong>
        <span id="scrollbarWidth">è®¡ç®—ä¸­...</span>px
      </div>
    </div>

    <div class="test-section">
      <h2>ğŸ’¡ æŠ€æœ¯å®ç°</h2>
      <p><strong>è§£å†³æ–¹æ¡ˆæ ¸å¿ƒï¼š</strong></p>
      <div class="code-block">
// 1. è®¡ç®—æ»šåŠ¨æ¡å®½åº¦
const scrollbarWidth = window.innerWidth - document.documentElement.clientWidth;

// 2. è¡¥å¿æ»šåŠ¨æ¡å®½åº¦
if (scrollbarWidth > 0) {
  document.body.style.paddingRight = `${scrollbarWidth}px`;
}

// 3. iOS ç‰¹æ®Šå¤„ç†
if (isIOS) {
  document.body.style.position = 'fixed';
  document.body.style.top = `-${scrollY}px`;
}
      </div>
    </div>

    <!-- é•¿å†…å®¹åŒºåŸŸ - ç”¨äºæµ‹è¯•æ»šåŠ¨ -->
    <div class="long-content">
      <h2 style="color: #667eea; margin-bottom: 20px;">ğŸ“œ é•¿å†…å®¹åŒºåŸŸï¼ˆæµ‹è¯•æ»šåŠ¨ï¼‰</h2>
      
      <div class="content-block">
        <h3>ä¸ºä»€ä¹ˆä¼šå‡ºç°é¡µé¢æŠ–åŠ¨ï¼Ÿ</h3>
        <p>å½“æŠ½å±‰æ‰“å¼€æ—¶ï¼Œä¸ºäº†é˜²æ­¢èƒŒæ™¯é¡µé¢æ»šåŠ¨ï¼Œé€šå¸¸ä¼šå¯¹ body è®¾ç½® <code>overflow: hidden</code>ã€‚è¿™ä¼šå¯¼è‡´æµè§ˆå™¨éšè—æ»šåŠ¨æ¡ï¼Œé¡µé¢å®½åº¦çªç„¶å¢åŠ çº¦15-17pxï¼ˆæ»šåŠ¨æ¡å®½åº¦ï¼‰ï¼Œä½¿å†…å®¹å‘å³åç§»ï¼Œäº§ç”ŸæŠ–åŠ¨æ„Ÿã€‚</p>
      </div>

      <div class="content-block">
        <h3>è§£å†³æ–¹æ¡ˆçš„å…³é”®</h3>
        <p><strong>1. ç²¾ç¡®è®¡ç®—æ»šåŠ¨æ¡å®½åº¦</strong><br>
        ä½¿ç”¨ <code>window.innerWidth - document.documentElement.clientWidth</code> å¯ä»¥å‡†ç¡®è®¡ç®—å‡ºå½“å‰æµè§ˆå™¨çš„æ»šåŠ¨æ¡å®½åº¦ã€‚</p>
        
        <p><strong>2. è¡¥å¿å®½åº¦</strong><br>
        åœ¨éšè—æ»šåŠ¨æ¡çš„åŒæ—¶ï¼Œç»™ body æ·»åŠ ç­‰é‡çš„ <code>padding-right</code>ï¼Œä¿æŒé¡µé¢æ€»å®½åº¦ä¸å˜ã€‚</p>
        
        <p><strong>3. å¤„ç†å›ºå®šå…ƒç´ </strong><br>
        é€šè¿‡ <code>data-fixed-compensate</code> æ ‡è®°ï¼Œè‡ªåŠ¨ä¸ºå›ºå®šå®šä½å…ƒç´ ï¼ˆå¦‚é¡¶éƒ¨å¯¼èˆªæ ï¼‰ä¹Ÿæ·»åŠ è¡¥å¿å®½åº¦ã€‚</p>
        
        <p><strong>4. iOS ç‰¹æ®Šå¤„ç†</strong><br>
        iOS ä¸Š <code>overflow: hidden</code> ä¸å¤Ÿå¯é ï¼Œéœ€è¦é…åˆ <code>position: fixed</code> æ¥å®Œå…¨é”å®šæ»šåŠ¨ï¼Œå¹¶ä¿å­˜æ¢å¤æ»šåŠ¨ä½ç½®ã€‚</p>
      </div>

      <div class="content-block">
        <h3>å…¼å®¹æ€§</h3>
        <p>âœ… Chrome/Edge/Firefox/Safari (PC)<br>
        âœ… iOS Safari (iPhone/iPad)<br>
        âœ… Android Chrome<br>
        âœ… å„ç±»ç§»åŠ¨ç«¯æµè§ˆå™¨</p>
      </div>

      <div class="content-block">
        <h3>æµ‹è¯•å»ºè®®</h3>
        <p>1. å‘ä¸‹æ»šåŠ¨é¡µé¢åˆ°ä¸­é—´ä½ç½®ï¼Œç„¶åæ‰“å¼€æŠ½å±‰<br>
        2. å¿«é€Ÿè¿ç»­æ‰“å¼€/å…³é—­å¤šä¸ªæŠ½å±‰<br>
        3. åœ¨çœŸå®çš„ iOS è®¾å¤‡ä¸Šæµ‹è¯•<br>
        4. æµ‹è¯•ä¸åŒå°ºå¯¸çš„æŠ½å±‰<br>
        5. æµ‹è¯•åµŒå¥—æŠ½å±‰åœºæ™¯</p>
      </div>

      <div class="content-block">
        <h3>ç¤ºä¾‹å†…å®¹å— #1</h3>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
      </div>

      <div class="content-block">
        <h3>ç¤ºä¾‹å†…å®¹å— #2</h3>
        <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
      </div>

      <div class="content-block">
        <h3>ç¤ºä¾‹å†…å®¹å— #3</h3>
        <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
      </div>

      <div class="content-block">
        <h3>ç¤ºä¾‹å†…å®¹å— #4</h3>
        <p>Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
      </div>
    </div>
  </div>

  <!-- æŠ½å±‰ç»„ä»¶ -->
  <ldesign-drawer id="drawerLeft" placement="left" size="400px">
    <div style="padding: 20px;">
      <h2>å·¦ä¾§æŠ½å±‰</h2>
      <p>è¿™æ˜¯ä¸€ä¸ªä»å·¦ä¾§æ»‘å…¥çš„æŠ½å±‰ã€‚</p>
      <p>æ‰“å¼€æŠ½å±‰æ—¶ï¼Œé¡µé¢ä¸åº”è¯¥å‘ç”Ÿæ¨ªå‘æŠ–åŠ¨ã€‚</p>
    </div>
  </ldesign-drawer>

  <ldesign-drawer id="drawerRight" placement="right" size="400px">
    <div style="padding: 20px;">
      <h2>å³ä¾§æŠ½å±‰</h2>
      <p>è¿™æ˜¯ä¸€ä¸ªä»å³ä¾§æ»‘å…¥çš„æŠ½å±‰ã€‚</p>
      <p>æ³¨æ„è§‚å¯Ÿé¡¶éƒ¨å¯¼èˆªæ å’Œå‚è€ƒçº¿æ˜¯å¦æŠ–åŠ¨ã€‚</p>
    </div>
  </ldesign-drawer>

  <ldesign-drawer id="drawerTop" placement="top" size="300px">
    <div style="padding: 20px;">
      <h2>é¡¶éƒ¨æŠ½å±‰</h2>
      <p>è¿™æ˜¯ä¸€ä¸ªä»é¡¶éƒ¨æ»‘å…¥çš„æŠ½å±‰ã€‚</p>
    </div>
  </ldesign-drawer>

  <ldesign-drawer id="drawerBottom" placement="bottom" size="300px">
    <div style="padding: 20px;">
      <h2>åº•éƒ¨æŠ½å±‰</h2>
      <p>è¿™æ˜¯ä¸€ä¸ªä»åº•éƒ¨æ»‘å…¥çš„æŠ½å±‰ã€‚</p>
    </div>
  </ldesign-drawer>

  <ldesign-drawer id="drawerLarge" placement="right" size="800px">
    <div style="padding: 20px;">
      <h2>å¤§å°ºå¯¸æŠ½å±‰</h2>
      <p>è¿™æ˜¯ä¸€ä¸ª800pxå®½çš„å¤§æŠ½å±‰ã€‚</p>
    </div>
  </ldesign-drawer>

  <ldesign-drawer id="drawerFullscreen" placement="right" fullscreen="true">
    <div style="padding: 20px;">
      <h2>å…¨å±æŠ½å±‰</h2>
      <p>è¿™æ˜¯ä¸€ä¸ªå…¨å±æŠ½å±‰ã€‚</p>
    </div>
  </ldesign-drawer>

  <ldesign-drawer id="drawerNested1" placement="right" size="500px">
    <div style="padding: 20px;">
      <h2>å¤–å±‚æŠ½å±‰</h2>
      <p>è¿™æ˜¯ç¬¬ä¸€å±‚æŠ½å±‰ã€‚</p>
      <button class="test-button secondary" onclick="openNestedDrawer2()">
        æ‰“å¼€å†…å±‚æŠ½å±‰
      </button>
    </div>
  </ldesign-drawer>

  <ldesign-drawer id="drawerNested2" placement="right" size="400px">
    <div style="padding: 20px;">
      <h2>å†…å±‚æŠ½å±‰</h2>
      <p>è¿™æ˜¯ç¬¬äºŒå±‚åµŒå¥—æŠ½å±‰ã€‚</p>
      <p>å¤šå±‚åµŒå¥—æ—¶ä¹Ÿä¸åº”è¯¥å‡ºç°æŠ–åŠ¨ã€‚</p>
    </div>
  </ldesign-drawer>

  <script>
    // è®¡ç®—å¹¶æ˜¾ç¤ºæ»šåŠ¨æ¡å®½åº¦
    function updateScrollbarWidth() {
      const scrollbarWidth = window.innerWidth - document.documentElement.clientWidth;
      document.getElementById('scrollbarWidth').textContent = scrollbarWidth;
    }

    // æ‰“å¼€æŒ‡å®šæ–¹å‘çš„æŠ½å±‰
    async function openDrawer(placement) {
      const drawerId = 'drawer' + placement.charAt(0).toUpperCase() + placement.slice(1);
      const drawer = document.getElementById(drawerId);
      if (drawer) {
        await drawer.open();
      }
    }

    // æ‰“å¼€å¤§å°ºå¯¸æŠ½å±‰
    async function openLargeDrawer() {
      const drawer = document.getElementById('drawerLarge');
      if (drawer) {
        await drawer.open();
      }
    }

    // æ‰“å¼€å…¨å±æŠ½å±‰
    async function openFullscreenDrawer() {
      const drawer = document.getElementById('drawerFullscreen');
      if (drawer) {
        await drawer.open();
      }
    }

    // æ‰“å¼€åµŒå¥—æŠ½å±‰
    async function openMultipleDrawers() {
      const drawer1 = document.getElementById('drawerNested1');
      if (drawer1) {
        await drawer1.open();
      }
    }

    // æ‰“å¼€ç¬¬äºŒå±‚åµŒå¥—æŠ½å±‰
    async function openNestedDrawer2() {
      const drawer2 = document.getElementById('drawerNested2');
      if (drawer2) {
        await drawer2.open();
      }
    }

    // é¡µé¢åŠ è½½æ—¶æ›´æ–°æ»šåŠ¨æ¡å®½åº¦
    window.addEventListener('load', updateScrollbarWidth);
    window.addEventListener('resize', updateScrollbarWidth);
  </script>
</body>
</html>
