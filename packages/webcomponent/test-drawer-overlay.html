<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Drawer Overlay Test</title>
  <style>
    body {
      margin: 0;
      padding: 20px;
      font-family: Arial, sans-serif;
      background-color: #f0f0f0;
    }
    .page-content {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    h1 {
      color: #333;
    }
    p {
      line-height: 1.6;
      color: #666;
    }
    button {
      padding: 10px 20px;
      background: #1890ff;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
    }
    button:hover {
      background: #40a9ff;
    }
    .test-section {
      margin: 20px 0;
      padding: 20px;
      background: #f9f9f9;
      border-radius: 4px;
    }
  </style>
</head>
<body>
  <div class="page-content">
    <h1>Drawer Component Overlay Test</h1>
    <p>This page tests whether the drawer appears as an overlay or inline with the content.</p>
    
    <div class="test-section">
      <h2>Test 1: Basic Left Drawer</h2>
      <p>Click the button below to open a left drawer. It should slide in from the left edge as an overlay.</p>
      <button onclick="openLeftDrawer()">Open Left Drawer</button>
    </div>

    <div class="test-section">
      <h2>Test 2: Right Drawer with Content</h2>
      <p>This tests a right drawer with more content.</p>
      <button onclick="openRightDrawer()">Open Right Drawer</button>
    </div>

    <div class="test-section">
      <h2>Page Content</h2>
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
      <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
    </div>
  </div>

  <!-- Left Drawer -->
  <ldesign-drawer id="leftDrawer" placement="left" drawer-title="Left Drawer">
    <div style="padding: 20px;">
      <h3>Drawer Content</h3>
      <p>This is the left drawer content. It should appear as an overlay sliding in from the left.</p>
      <p>If you see this content inline with the page, there's an issue with the positioning.</p>
    </div>
  </ldesign-drawer>

  <!-- Right Drawer -->
  <ldesign-drawer id="rightDrawer" placement="right" drawer-title="Right Drawer" size="lg">
    <div style="padding: 20px;">
      <h3>Right Drawer Content</h3>
      <p>This drawer slides in from the right side.</p>
      <ul>
        <li>Item 1</li>
        <li>Item 2</li>
        <li>Item 3</li>
      </ul>
    </div>
  </ldesign-drawer>

  <script type="module">
    // Import the component
    import './dist/ldesign/ldesign.esm.js';

    window.openLeftDrawer = function() {
      const drawer = document.getElementById('leftDrawer');
      drawer.visible = true;
      console.log('Left drawer opened');
    };

    window.openRightDrawer = function() {
      const drawer = document.getElementById('rightDrawer');
      drawer.visible = true;
      console.log('Right drawer opened');
    };

    // Add event listeners for debugging
    document.addEventListener('DOMContentLoaded', () => {
      const leftDrawer = document.getElementById('leftDrawer');
      const rightDrawer = document.getElementById('rightDrawer');

      // Log initial state
      console.log('Left drawer initial visible:', leftDrawer.visible);
      console.log('Right drawer initial visible:', rightDrawer.visible);

      // Check if Shadow DOM is attached
      setTimeout(() => {
        console.log('Left drawer has shadow root:', !!leftDrawer.shadowRoot);
        console.log('Right drawer has shadow root:', !!rightDrawer.shadowRoot);
        
        // Inspect the shadow DOM structure
        if (leftDrawer.shadowRoot) {
          const container = leftDrawer.shadowRoot.querySelector('.ldesign-drawer-container');
          console.log('Container found in shadow DOM:', !!container);
          if (container) {
            console.log('Container classes:', container.className);
            const wrapper = container.querySelector('.drawer-wrapper');
            console.log('Wrapper found:', !!wrapper);
            if (wrapper) {
              const computedStyle = window.getComputedStyle(wrapper);
              console.log('Wrapper position:', computedStyle.position);
              console.log('Wrapper transform:', computedStyle.transform);
            }
          }
        }
      }, 500);

      // Listen for drawer events
      leftDrawer.addEventListener('drawerOpen', () => {
        console.log('Left drawer opened event');
      });

      leftDrawer.addEventListener('drawerClose', () => {
        console.log('Left drawer closed event');
      });
    });
  </script>
</body>
</html>