<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ—¥å†ç»„ä»¶æµ‹è¯• - æœˆ/å‘¨/æ—¥è§†å›¾</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Microsoft YaHei', sans-serif;
      background: #f5f7fa;
      padding: 20px;
    }
    .container {
      max-width: 1400px;
      margin: 0 auto;
      background: white;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    h1 {
      color: #303133;
      margin-bottom: 20px;
      font-size: 24px;
    }
    .info {
      background: #ecf5ff;
      border-left: 3px solid #409eff;
      padding: 12px;
      margin-bottom: 20px;
      color: #606266;
      font-size: 14px;
    }
    .calendar-wrapper {
      min-height: 600px;
      border: 1px solid #e4e7ed;
      border-radius: 4px;
      padding: 10px;
    }
    .status {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #67c23a;
      color: white;
      padding: 10px 20px;
      border-radius: 20px;
      font-size: 14px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    }
  </style>
  <!-- åŠ è½½ç»„ä»¶æ ·å¼å’Œè„šæœ¬ -->
  <link rel="stylesheet" href="./dist/ldesign-webcomponent/ldesign-webcomponent.css">
  <script type="module" src="./dist/ldesign-webcomponent/ldesign-webcomponent.esm.js"></script>
</head>
<body>
  <div class="container">
    <h1>ğŸ“… æ—¥å†ç»„ä»¶æµ‹è¯• - æ”¯æŒæœˆ/å‘¨/æ—¥è§†å›¾</h1>
    
    <div class="info">
      <strong>ä½¿ç”¨è¯´æ˜ï¼š</strong>
      <ul style="margin-top: 10px; margin-left: 20px;">
        <li>ç‚¹å‡»å¤´éƒ¨çš„"æœˆ/å‘¨/æ—¥"æŒ‰é’®åˆ‡æ¢è§†å›¾</li>
        <li>ç‚¹å‡»"ä»Šå¤©"æŒ‰é’®å¿«é€Ÿå›åˆ°å½“å‰æ—¥æœŸ</li>
        <li>ä½¿ç”¨å·¦å³ç®­å¤´å¯¼èˆªæ—¥æœŸ</li>
        <li>åŒå‡»æ—¥æœŸåˆ›å»ºæ–°æ—¥ç¨‹</li>
        <li>å³é”®ç‚¹å‡»æŸ¥çœ‹æ›´å¤šæ“ä½œ</li>
      </ul>
    </div>

    <div class="calendar-wrapper">
      <ldesign-calendar 
        id="myCalendar"
        view="month"
        show-week-numbers="false"
        hour-start="8"
        hour-end="20"
        step-minutes="30"
        draggable-events="true"
        resizable-events="true"
        enable-crud="true"
      ></ldesign-calendar>
    </div>
  </div>

  <div class="status" id="status">
    å‡†å¤‡å°±ç»ª
  </div>

  <script>
    // è·å–æ—¥å†ç»„ä»¶
    const calendar = document.getElementById('myCalendar');
    const status = document.getElementById('status');
    
    // æ›´æ–°çŠ¶æ€æ˜¾ç¤º
    function updateStatus(text, color = '#67c23a') {
      status.textContent = text;
      status.style.background = color;
    }
    
    // ç”Ÿæˆç¤ºä¾‹äº‹ä»¶
    function generateSampleEvents() {
      const today = new Date();
      const events = [
        // ä»Šå¤©çš„äº‹ä»¶
        {
          id: 'evt1',
          title: 'å›¢é˜Ÿä¼šè®®',
          start: setTime(today, 10, 0),
          end: setTime(today, 11, 30),
          color: '#409eff'
        },
        {
          id: 'evt2',
          title: 'äº§å“è¯„å®¡',
          start: setTime(today, 14, 0),
          end: setTime(today, 15, 30),
          color: '#67c23a'
        },
        // æ˜å¤©çš„å…¨å¤©äº‹ä»¶
        {
          id: 'evt3',
          title: 'é¡¹ç›®å‘å¸ƒ',
          date: formatDate(addDays(today, 1)),
          allDay: true,
          color: '#e6a23c'
        },
        // æ˜¨å¤©çš„äº‹ä»¶
        {
          id: 'evt4',
          title: 'ä»£ç å®¡æŸ¥',
          start: setTime(addDays(today, -1), 15, 0),
          end: setTime(addDays(today, -1), 16, 30),
          color: '#f56c6c'
        },
        // è·¨å¤©äº‹ä»¶
        {
          id: 'evt5',
          title: 'æŠ€æœ¯å¤§ä¼š',
          start: setTime(addDays(today, 2), 9, 0),
          end: setTime(addDays(today, 4), 18, 0),
          color: '#909399'
        }
      ];
      
      return events;
    }
    
    // è¾…åŠ©å‡½æ•°
    function formatDate(date) {
      const d = new Date(date);
      const year = d.getFullYear();
      const month = String(d.getMonth() + 1).padStart(2, '0');
      const day = String(d.getDate()).padStart(2, '0');
      return `${year}-${month}-${day}`;
    }
    
    function setTime(date, hour, minute) {
      const d = new Date(date);
      d.setHours(hour, minute, 0, 0);
      return d.toISOString();
    }
    
    function addDays(date, days) {
      const d = new Date(date);
      d.setDate(d.getDate() + days);
      return d;
    }
    
    // ç›‘å¬äº‹ä»¶
    calendar.addEventListener('ldesignChange', (e) => {
      console.log('æ—¥æœŸæ”¹å˜:', e.detail);
      updateStatus(`é€‰ä¸­æ—¥æœŸ: ${e.detail}`);
    });
    
    calendar.addEventListener('ldesignEventClick', (e) => {
      console.log('ç‚¹å‡»äº‹ä»¶:', e.detail.event);
      updateStatus(`ç‚¹å‡»: ${e.detail.event.title}`, '#409eff');
    });
    
    calendar.addEventListener('ldesignEventCreate', (e) => {
      console.log('åˆ›å»ºäº‹ä»¶:', e.detail);
      updateStatus('æ­£åœ¨åˆ›å»ºæ–°æ—¥ç¨‹...', '#e6a23c');
    });
    
    calendar.addEventListener('ldesignEventDrop', (e) => {
      console.log('æ‹–æ”¾äº‹ä»¶:', e.detail);
      updateStatus(`å·²ç§»åŠ¨: ${e.detail.title}`, '#67c23a');
    });
    
    calendar.addEventListener('ldesignEventResize', (e) => {
      console.log('è°ƒæ•´å¤§å°:', e.detail);
      updateStatus(`å·²è°ƒæ•´: ${e.detail.title}`, '#67c23a');
    });
    
    // é¡µé¢åŠ è½½å®Œæˆåè®¾ç½®ç¤ºä¾‹äº‹ä»¶
    window.addEventListener('DOMContentLoaded', () => {
      setTimeout(() => {
        try {
          calendar.eventsData = generateSampleEvents();
          updateStatus('ç¤ºä¾‹æ—¥ç¨‹å·²åŠ è½½');
          console.log('æ—¥å†ç»„ä»¶å·²åˆå§‹åŒ–ï¼ŒåŒ…å«ä»¥ä¸‹è§†å›¾ï¼š');
          console.log('- æœˆè§†å›¾ (Month View)');
          console.log('- å‘¨è§†å›¾ (Week View)');
          console.log('- æ—¥è§†å›¾ (Day View)');
        } catch (error) {
          console.error('åˆå§‹åŒ–å¤±è´¥:', error);
          updateStatus('åˆå§‹åŒ–å¤±è´¥', '#f56c6c');
        }
      }, 500);
    });
  </script>
</body>
</html>