<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Drawer æ»‘åŠ¨å…³é—­è°ƒè¯•</title>
  <script type="module" src="/dist/ldesign-webcomponent/ldesign-webcomponent.esm.js"></script>
  <style>
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      padding: 20px;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
    }
    h1 {
      color: #333;
      margin-bottom: 20px;
    }
    button {
      background: #3b82f6;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 6px;
      font-size: 16px;
      cursor: pointer;
      margin-right: 10px;
      margin-bottom: 10px;
    }
    button:hover {
      background: #2563eb;
    }
    .note {
      background: #dbeafe;
      padding: 15px;
      border-radius: 4px;
      margin-top: 20px;
      font-size: 14px;
      color: #1e40af;
      border-left: 4px solid #3b82f6;
    }
    .warning {
      background: #fef3c7;
      padding: 15px;
      border-radius: 4px;
      margin-top: 10px;
      font-size: 14px;
      color: #92400e;
      border-left: 4px solid #f59e0b;
    }
    .success {
      background: #d1fae5;
      padding: 15px;
      border-radius: 4px;
      margin-top: 10px;
      font-size: 14px;
      color: #065f46;
      border-left: 4px solid #10b981;
    }
    pre {
      background: #1e293b;
      color: #e2e8f0;
      padding: 15px;
      border-radius: 4px;
      overflow-x: auto;
      font-size: 12px;
    }
    .drawer-content {
      padding: 20px;
    }
    .drawer-content h3 {
      margin-top: 0;
      color: #1e293b;
    }
    .drawer-content p {
      line-height: 1.6;
      color: #475569;
    }
    .scrollable-content {
      height: 300px;
      overflow-y: auto;
      background: #f1f5f9;
      padding: 15px;
      border-radius: 4px;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ› Drawer æ»‘åŠ¨å…³é—­è°ƒè¯•é¡µé¢</h1>
    
    <div class="warning">
      <strong>âš ï¸ é‡è¦ï¼š</strong>è¯·æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰æŸ¥çœ‹è°ƒè¯•æ—¥å¿—ï¼
    </div>
    
    <div class="note">
      <strong>ğŸ“± æµ‹è¯•æ­¥éª¤ï¼š</strong>
      <ol style="margin: 10px 0 0 0; padding-left: 20px;">
        <li>æ‰“å¼€ Chrome æµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰</li>
        <li>ç‚¹å‡»"åˆ‡æ¢è®¾å¤‡å·¥å…·æ "å›¾æ ‡ï¼ˆæˆ–æŒ‰ Ctrl+Shift+Mï¼‰è¿›å…¥ç§»åŠ¨è®¾å¤‡æ¨¡å¼</li>
        <li>é€‰æ‹©ä¸€ä¸ªç§»åŠ¨è®¾å¤‡ï¼ˆå¦‚ iPhone 12 Pro æˆ– Pixel 5ï¼‰</li>
        <li>ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®æ‰“å¼€æŠ½å±‰</li>
        <li>åœ¨æŠ½å±‰ä¸Šå°è¯•è§¦æ‘¸æ»‘åŠ¨ï¼Œè§‚å¯Ÿæ§åˆ¶å°è¾“å‡º</li>
      </ol>
    </div>

    <div style="margin-top: 30px;">
      <h2>æµ‹è¯•æ¡ˆä¾‹</h2>
      
      <div style="margin: 20px 0;">
        <h3>1. åº•éƒ¨æŠ½å±‰ - ä»»æ„åŒºåŸŸæ»‘åŠ¨</h3>
        <button onclick="openDrawer1()">æ‰“å¼€åº•éƒ¨æŠ½å±‰ï¼ˆanywhereï¼‰</button>
        <p style="font-size: 14px; color: #64748b; margin-top: 5px;">
          swipe-trigger-area="anywhere" - åœ¨æŠ½å±‰ä»»æ„ä½ç½®éƒ½å¯ä»¥è§¦å‘æ»‘åŠ¨
        </p>
      </div>

      <div style="margin: 20px 0;">
        <h3>2. åº•éƒ¨æŠ½å±‰ - ä»…å¤´éƒ¨æ»‘åŠ¨</h3>
        <button onclick="openDrawer2()">æ‰“å¼€åº•éƒ¨æŠ½å±‰ï¼ˆheaderï¼‰</button>
        <p style="font-size: 14px; color: #64748b; margin-top: 5px;">
          swipe-trigger-area="header" - åªèƒ½åœ¨å¤´éƒ¨åŒºåŸŸæ»‘åŠ¨
        </p>
      </div>

      <div style="margin: 20px 0;">
        <h3>3. åº•éƒ¨æŠ½å±‰ - ä»…è¾¹ç¼˜æ»‘åŠ¨ â­</h3>
        <button onclick="openDrawer3()">æ‰“å¼€åº•éƒ¨æŠ½å±‰ï¼ˆedgeï¼‰</button>
        <p style="font-size: 14px; color: #64748b; margin-top: 5px;">
          swipe-trigger-area="edge" - <strong>åªèƒ½åœ¨æŠ½å±‰é¡¶éƒ¨è¾¹ç¼˜ 20px åŒºåŸŸæ»‘åŠ¨</strong>
        </p>
        <p style="font-size: 13px; color: #f59e0b; margin-top: 5px;">
          âš ï¸ æç¤ºï¼šè¯·åœ¨æŠ½å±‰çš„<strong>æœ€é¡¶éƒ¨</strong>ï¼ˆé è¿‘æ ‡é¢˜æ çš„ä¸Šæ–¹ï¼‰æ»‘åŠ¨ï¼Œåœ¨å†…å®¹åŒºåŸŸæ»‘åŠ¨æ— æ•ˆ
        </p>
      </div>

      <div style="margin: 20px 0;">
        <h3>4. å³ä¾§æŠ½å±‰ - ä»»æ„åŒºåŸŸæ»‘åŠ¨</h3>
        <button onclick="openDrawer4()">æ‰“å¼€å³ä¾§æŠ½å±‰ï¼ˆanywhereï¼‰</button>
        <p style="font-size: 14px; color: #64748b; margin-top: 5px;">
          å³ä¾§æŠ½å±‰ï¼Œå‘å³æ»‘åŠ¨å…³é—­
        </p>
      </div>
    </div>

    <div class="success" style="margin-top: 30px;">
      <strong>âœ… é¢„æœŸçœ‹åˆ°çš„æ—¥å¿—ï¼š</strong>
      <pre style="margin-top: 10px;">[Drawer Render] onTouchStart triggered!
[Drawer Swipe] === TOUCH START ===
[Drawer Swipe] Event type: touchstart
[Drawer Swipe] swipeToClose prop: true
[Drawer Swipe] swipeTriggerArea: anywhere
[Drawer Swipe] placement: bottom
[Drawer Swipe] currentState: open
[Drawer Swipe] isMobileDevice: true
[Drawer Swipe] Target element: DIV drawer-content
[Drawer Swipe] isTriggerArea: true
[Drawer Swipe] âœ… Starting swipe...</pre>
    </div>

    <div class="warning" style="margin-top: 15px;">
      <strong>âŒ å¦‚æœæ²¡æœ‰ä»»ä½•æ—¥å¿—è¾“å‡ºï¼š</strong>
      <ul style="margin: 5px 0 0 0; padding-left: 20px;">
        <li>æ£€æŸ¥æ˜¯å¦æ­£ç¡®å¼€å¯äº†ç§»åŠ¨è®¾å¤‡æ¨¡å¼</li>
        <li>å°è¯•åˆ·æ–°é¡µé¢é‡æ–°åŠ è½½ç»„ä»¶</li>
        <li>æ£€æŸ¥æ§åˆ¶å°æ˜¯å¦æœ‰ JavaScript é”™è¯¯</li>
      </ul>
    </div>
  </div>

  <!-- æµ‹è¯•æŠ½å±‰ 1: anywhere -->
  <ldesign-drawer 
    id="drawer1" 
    drawer-title="åº•éƒ¨æŠ½å±‰ - anywhere"
    placement="bottom"
    size="60%"
    animation="true"
    swipe-to-close="true"
    swipe-trigger-area="anywhere">
    <div class="drawer-content">
      <h3>ä»»æ„åŒºåŸŸæ»‘åŠ¨æµ‹è¯•</h3>
      <p>åœ¨æŠ½å±‰çš„ä»»æ„ä½ç½®å‘ä¸‹æ»‘åŠ¨éƒ½åº”è¯¥èƒ½å…³é—­æŠ½å±‰ã€‚</p>
      <p>è¯·å°è¯•åœ¨è¿™æ®µæ–‡å­—ä¸Šæ»‘åŠ¨ã€‚</p>
      <div class="scrollable-content">
        <p>å¯æ»šåŠ¨å†…å®¹ 1</p>
        <p>å¯æ»šåŠ¨å†…å®¹ 2</p>
        <p>å¯æ»šåŠ¨å†…å®¹ 3</p>
        <p>å¯æ»šåŠ¨å†…å®¹ 4</p>
        <p>å¯æ»šåŠ¨å†…å®¹ 5</p>
        <p>å¯æ»šåŠ¨å†…å®¹ 6</p>
        <p>å¯æ»šåŠ¨å†…å®¹ 7</p>
        <p>å¯æ»šåŠ¨å†…å®¹ 8</p>
      </div>
    </div>
  </ldesign-drawer>

  <!-- æµ‹è¯•æŠ½å±‰ 2: header -->
  <ldesign-drawer 
    id="drawer2" 
    drawer-title="åº•éƒ¨æŠ½å±‰ - header"
    placement="bottom"
    size="60%"
    animation="true"
    swipe-to-close="true"
    swipe-trigger-area="header">
    <div class="drawer-content">
      <h3>ä»…å¤´éƒ¨æ»‘åŠ¨æµ‹è¯•</h3>
      <p>åªæœ‰åœ¨å¤´éƒ¨åŒºåŸŸæ»‘åŠ¨æ‰èƒ½å…³é—­æŠ½å±‰ã€‚</p>
      <p>åœ¨è¿™é‡Œæ»‘åŠ¨åº”è¯¥ä¸ä¼šå…³é—­æŠ½å±‰ã€‚</p>
      <p>è¯·å°è¯•åœ¨æ ‡é¢˜æ æ»‘åŠ¨ã€‚</p>
    </div>
  </ldesign-drawer>

  <!-- æµ‹è¯•æŠ½å±‰ 3: edge -->
  <ldesign-drawer 
    id="drawer3" 
    drawer-title="åº•éƒ¨æŠ½å±‰ - edge"
    placement="bottom"
    size="60%"
    animation="true"
    swipe-to-close="true"
    swipe-trigger-area="edge">
    <div class="drawer-content">
      <h3>ä»…è¾¹ç¼˜æ»‘åŠ¨æµ‹è¯•</h3>
      <p>åªæœ‰åœ¨æŠ½å±‰é¡¶éƒ¨è¾¹ç¼˜ 20px åŒºåŸŸæ»‘åŠ¨æ‰èƒ½å…³é—­æŠ½å±‰ã€‚</p>
      <p>åœ¨è¿™é‡Œæ»‘åŠ¨åº”è¯¥ä¸ä¼šå…³é—­æŠ½å±‰ã€‚</p>
      <p>è¯·å°è¯•åœ¨æŠ½å±‰çš„æœ€é¡¶éƒ¨è¾¹ç¼˜æ»‘åŠ¨ã€‚</p>
    </div>
  </ldesign-drawer>

  <!-- æµ‹è¯•æŠ½å±‰ 4: å³ä¾§ -->
  <ldesign-drawer 
    id="drawer4" 
    drawer-title="å³ä¾§æŠ½å±‰ - anywhere"
    placement="right"
    size="80%"
    animation="true"
    swipe-to-close="true"
    swipe-trigger-area="anywhere">
    <div class="drawer-content">
      <h3>å³ä¾§æŠ½å±‰æ»‘åŠ¨æµ‹è¯•</h3>
      <p>å‘å³æ»‘åŠ¨åº”è¯¥èƒ½å…³é—­æŠ½å±‰ã€‚</p>
      <p>è¯·å°è¯•åœ¨æŠ½å±‰ä¸Šå‘å³æ»‘åŠ¨ã€‚</p>
    </div>
  </ldesign-drawer>

  <script>
    function openDrawer1() {
      const drawer = document.getElementById('drawer1');
      console.log('=== Opening drawer1 ===');
      console.log('Drawer element:', drawer);
      console.log('swipeToClose attribute:', drawer.getAttribute('swipe-to-close'));
      console.log('swipeToClose property:', drawer.swipeToClose);
      drawer.visible = true;
    }
    
    function openDrawer2() {
      const drawer = document.getElementById('drawer2');
      console.log('=== Opening drawer2 ===');
      console.log('swipeToClose property:', drawer.swipeToClose);
      drawer.visible = true;
    }
    
    function openDrawer3() {
      const drawer = document.getElementById('drawer3');
      console.log('=== Opening drawer3 ===');
      console.log('swipeToClose property:', drawer.swipeToClose);
      drawer.visible = true;
    }
    
    function openDrawer4() {
      const drawer = document.getElementById('drawer4');
      console.log('=== Opening drawer4 ===');
      console.log('swipeToClose property:', drawer.swipeToClose);
      drawer.visible = true;
    }
    
    // ç›‘å¬æ‰€æœ‰æŠ½å±‰äº‹ä»¶
    document.querySelectorAll('ldesign-drawer').forEach(drawer => {
      drawer.addEventListener('ldesignOpen', (e) => {
        console.log('âœ… Drawer opened:', drawer.id);
      });
      
      drawer.addEventListener('ldesignClose', (e) => {
        console.log('âœ… Drawer closed:', drawer.id, 'reason:', e.detail.reason);
      });
      
      drawer.addEventListener('ldesignSwipe', (e) => {
        console.log('ğŸ“± Drawer swiping:', drawer.id, 'progress:', e.detail.progress);
      });
    });

    // å…¨å±€è§¦æ‘¸äº‹ä»¶ç›‘å¬ï¼ˆç”¨äºè°ƒè¯•ï¼‰
    document.addEventListener('touchstart', (e) => {
      console.log('[Global] touchstart on:', e.target.tagName, e.target.className);
    }, { passive: true });
  </script>
</body>
</html>
