<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Time Picker Complete Test</title>
  <script type="module" src="./dist/ldesign/ldesign.esm.js"></script>
  <link rel="stylesheet" href="./dist/ldesign/ldesign.css">
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      padding: 20px;
      max-width: 1200px;
      margin: 0 auto;
      background: #f5f5f5;
    }
    h1 {
      color: #1a1a1a;
      margin-bottom: 30px;
    }
    h2 {
      color: #333;
      font-size: 20px;
      margin: 30px 0 20px 0;
      padding-bottom: 10px;
      border-bottom: 2px solid #0066cc;
    }
    .test-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 20px;
      margin-bottom: 40px;
    }
    .test-card {
      background: white;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .test-title {
      font-size: 16px;
      font-weight: 600;
      color: #333;
      margin-bottom: 8px;
    }
    .test-desc {
      font-size: 14px;
      color: #666;
      margin-bottom: 16px;
    }
    .test-result {
      margin-top: 12px;
      padding: 10px;
      background: #f8f9fa;
      border-radius: 4px;
      font-size: 14px;
      color: #495057;
      min-height: 36px;
      display: flex;
      align-items: center;
    }
    .value-display {
      font-family: 'Courier New', monospace;
      color: #0066cc;
      font-weight: 600;
    }
    .badge {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 12px;
      margin-left: 8px;
    }
    .badge-new {
      background: #d4edda;
      color: #155724;
    }
    .badge-important {
      background: #f8d7da;
      color: #721c24;
    }
    code {
      background: #f1f3f5;
      padding: 2px 6px;
      border-radius: 3px;
      font-size: 13px;
      color: #d63384;
    }
  </style>
</head>
<body>
  <h1>🕐 Time Picker 完整功能测试</h1>

  <h2>📅 初始值设置</h2>
  <div class="test-grid">
    <div class="test-card">
      <div class="test-title">单个时间初始值</div>
      <div class="test-desc">使用 <code>default-value</code> 设置初始时间</div>
      <ldesign-time-picker 
        default-value="14:30:00"
        placeholder="已设置默认值 14:30:00"
      ></ldesign-time-picker>
      <div class="test-result">
        初始值: <span class="value-display">14:30:00</span>
      </div>
    </div>

    <div class="test-card">
      <div class="test-title">范围初始值（格式1）</div>
      <div class="test-desc">使用连字符格式 <code>"09:00-18:00"</code></div>
      <ldesign-time-picker 
        id="range-init1"
        range="true"
        default-value="09:00-18:00"
        show-seconds="false"
        placeholder="工作时间"
      ></ldesign-time-picker>
      <div class="test-result" id="range-init1-result">
        等待加载...
      </div>
    </div>

    <div class="test-card">
      <div class="test-title">范围初始值（格式2）</div>
      <div class="test-desc">分别设置 <code>start-value</code> 和 <code>end-value</code></div>
      <ldesign-time-picker 
        id="range-init2"
        range="true"
        start-value="08:00"
        end-value="17:00"
        show-seconds="false"
        placeholder="自定义时间段"
      ></ldesign-time-picker>
      <div class="test-result" id="range-init2-result">
        等待加载...
      </div>
    </div>
  </div>

  <h2>🎯 预设功能</h2>
  <div class="test-grid">
    <div class="test-card">
      <div class="test-title">单个时间预设 <span class="badge badge-new">常用</span></div>
      <div class="test-desc">快速选择常用时间点</div>
      <ldesign-time-picker 
        id="single-preset"
        placeholder="选择或使用预设"
        show-seconds="false"
      ></ldesign-time-picker>
      <div class="test-result" id="single-preset-result">
        未选择
      </div>
    </div>

    <div class="test-card">
      <div class="test-title">范围预设 <span class="badge badge-important">重要</span></div>
      <div class="test-desc">工作班次快速选择</div>
      <ldesign-time-picker 
        id="range-preset"
        range="true"
        show-seconds="false"
        placeholder="选择班次"
      ></ldesign-time-picker>
      <div class="test-result" id="range-preset-result">
        未选择
      </div>
    </div>

    <div class="test-card">
      <div class="test-title">混合预设（12小时制）</div>
      <div class="test-desc">12小时制格式的预设</div>
      <ldesign-time-picker 
        id="preset-12h"
        output-format="12h"
        show-seconds="false"
        placeholder="选择时间（12h）"
      ></ldesign-time-picker>
      <div class="test-result" id="preset-12h-result">
        未选择
      </div>
    </div>
  </div>

  <h2>⚡ 即时生效模式</h2>
  <div class="test-grid">
    <div class="test-card">
      <div class="test-title">单个时间即时生效</div>
      <div class="test-desc"><code>confirm="false"</code> 选择立即生效</div>
      <ldesign-time-picker 
        id="instant-single"
        confirm="false"
        default-value="10:00:00"
        placeholder="即时生效"
      ></ldesign-time-picker>
      <div class="test-result" id="instant-single-result">
        10:00:00
      </div>
    </div>

    <div class="test-card">
      <div class="test-title">范围即时生效</div>
      <div class="test-desc">范围选择也支持即时生效</div>
      <ldesign-time-picker 
        id="instant-range"
        range="true"
        confirm="false"
        show-seconds="false"
        default-value="09:00-17:00"
        placeholder="即时生效范围"
      ></ldesign-time-picker>
      <div class="test-result" id="instant-range-result">
        09:00 至 17:00
      </div>
    </div>
  </div>

  <h2>🎨 特殊配置组合</h2>
  <div class="test-grid">
    <div class="test-card">
      <div class="test-title">完整配置示例</div>
      <div class="test-desc">范围+预设+限制+步进+12小时制</div>
      <ldesign-time-picker 
        id="full-config"
        range="true"
        output-format="12h"
        min-time="06:00:00"
        max-time="22:00:00"
        hour-step="1"
        minute-step="15"
        show-seconds="false"
        default-value="09:00-18:00"
        placeholder="选择营业时间"
      ></ldesign-time-picker>
      <div class="test-result" id="full-config-result">
        09:00 AM 至 06:00 PM
      </div>
    </div>

    <div class="test-card">
      <div class="test-title">内联模式+预设</div>
      <div class="test-desc">直接显示面板的预设选择</div>
      <ldesign-time-picker 
        id="inline-preset"
        inline="true"
        show-seconds="false"
        confirm="false"
      ></ldesign-time-picker>
      <div class="test-result" id="inline-preset-result">
        等待选择...
      </div>
    </div>
  </div>

  <h2>📱 响应式测试</h2>
  <div class="test-grid">
    <div class="test-card">
      <div class="test-title">移动端自适应</div>
      <div class="test-desc">窗口 &lt; 768px 自动使用 drawer</div>
      <ldesign-time-picker 
        placeholder="调整窗口大小测试"
        overlay="auto"
      ></ldesign-time-picker>
      <div class="test-result">
        当前模式: <span id="overlay-mode">-</span>
      </div>
    </div>
  </div>

  <script>
    // 设置单个时间预设
    const singlePreset = document.getElementById('single-preset');
    singlePreset.presets = [
      { label: '上班打卡', value: '09:00', icon: 'check' },
      { label: '午餐时间', value: '12:00', icon: 'food' },
      { label: '下班打卡', value: '18:00', icon: 'home' },
      { label: '加班餐', value: '20:00', icon: 'moon' }
    ];

    // 设置范围预设
    const rangePreset = document.getElementById('range-preset');
    rangePreset.presets = [
      { label: '早班', value: { start: '06:00', end: '14:00' }, icon: 'sun' },
      { label: '中班', value: { start: '14:00', end: '22:00' }, icon: 'clock' },
      { label: '晚班', value: { start: '22:00', end: '06:00' }, icon: 'moon' },
      { label: '正常班', value: { start: '09:00', end: '18:00' }, icon: 'briefcase' }
    ];

    // 设置12小时制预设
    const preset12h = document.getElementById('preset-12h');
    preset12h.presets = [
      { label: '早餐', value: '07:00', icon: 'coffee' },
      { label: '午餐', value: '12:00', icon: 'food' },
      { label: '晚餐', value: '18:30', icon: 'dinner' },
      { label: '夜宵', value: '22:00', icon: 'night' }
    ];

    // 设置内联预设
    const inlinePreset = document.getElementById('inline-preset');
    inlinePreset.presets = [
      { label: '现在', value: new Date().toTimeString().slice(0, 5) },
      { label: '整点', value: `${new Date().getHours()}:00` },
      { label: '半点', value: `${new Date().getHours()}:30` }
    ];

    // 设置完整配置预设
    const fullConfig = document.getElementById('full-config');
    fullConfig.presets = [
      { label: '营业时间', value: { start: '09:00', end: '21:00' } },
      { label: '午市', value: { start: '11:00', end: '14:00' } },
      { label: '晚市', value: { start: '17:00', end: '21:00' } }
    ];

    // 监听器设置
    function setupListener(id, resultId) {
      const picker = document.getElementById(id);
      const result = document.getElementById(resultId);
      if (!picker || !result) return;

      picker.addEventListener('ldesignChange', (e) => {
        if (e.detail && typeof e.detail === 'object') {
          result.innerHTML = `<span class="value-display">${e.detail.start || '--:--'} 至 ${e.detail.end || '--:--'}</span>`;
        } else if (e.detail) {
          result.innerHTML = `<span class="value-display">${e.detail}</span>`;
        } else {
          result.textContent = '未选择';
        }
      });
    }

    // 设置所有监听器
    setupListener('range-init1', 'range-init1-result');
    setupListener('range-init2', 'range-init2-result');
    setupListener('single-preset', 'single-preset-result');
    setupListener('range-preset', 'range-preset-result');
    setupListener('preset-12h', 'preset-12h-result');
    setupListener('instant-single', 'instant-single-result');
    setupListener('instant-range', 'instant-range-result');
    setupListener('full-config', 'full-config-result');
    setupListener('inline-preset', 'inline-preset-result');

    // 检测overlay模式
    function checkOverlayMode() {
      const mode = window.innerWidth < 768 ? 'drawer' : 'popup';
      document.getElementById('overlay-mode').textContent = mode;
    }
    
    checkOverlayMode();
    window.addEventListener('resize', checkOverlayMode);

    // 初始化显示
    setTimeout(() => {
      // 显示初始值
      document.getElementById('range-init1-result').innerHTML = 
        '<span class="value-display">09:00 至 18:00</span>';
      document.getElementById('range-init2-result').innerHTML = 
        '<span class="value-display">08:00 至 17:00</span>';
    }, 100);

    console.log('时间选择器完整功能测试页面已加载');
    console.log('测试内容包括：');
    console.log('1. 初始值设置（单个/范围）');
    console.log('2. 预设功能（单个/范围/12小时制）');
    console.log('3. 即时生效模式');
    console.log('4. 完整配置组合');
    console.log('5. 响应式自适应');
  </script>
</body>
</html>