<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Time Picker Test</title>
  <script type="module" src="./dist/ldesign/ldesign.esm.js"></script>
  <link rel="stylesheet" href="./dist/ldesign/ldesign.css">
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      padding: 20px;
      max-width: 1200px;
      margin: 0 auto;
    }
    .test-section {
      margin-bottom: 40px;
      padding: 20px;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
    }
    .test-title {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 16px;
      color: #333;
    }
    .test-description {
      color: #666;
      margin-bottom: 12px;
      font-size: 14px;
    }
    .test-result {
      margin-top: 12px;
      padding: 8px;
      background: #f5f5f5;
      border-radius: 4px;
      font-size: 14px;
      min-height: 32px;
    }
    .test-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
      gap: 20px;
    }
  </style>
</head>
<body>
  <h1>Time Picker 组件测试</h1>

  <div class="test-grid">
    <!-- 测试1: 即时生效 (confirm=false) -->
    <div class="test-section">
      <div class="test-title">1. 即时生效测试</div>
      <div class="test-description">设置 confirm="false"，选择后应立即更新值</div>
      <ldesign-time-picker 
        id="test1" 
        confirm="false" 
        placeholder="选择时间（即时生效）"
      ></ldesign-time-picker>
      <div class="test-result" id="result1">当前值: 未选择</div>
    </div>

    <!-- 测试2: 12小时制 -->
    <div class="test-section">
      <div class="test-title">2. 12小时制测试</div>
      <div class="test-description">输出格式为12小时制，显示 AM/PM</div>
      <ldesign-time-picker 
        id="test2" 
        output-format="12h" 
        placeholder="12小时制"
        default-value="14:30:00"
      ></ldesign-time-picker>
      <div class="test-result" id="result2">当前值: 02:30:00 PM</div>
    </div>

    <!-- 测试3: 12小时制即时生效 -->
    <div class="test-section">
      <div class="test-title">3. 12小时制即时生效</div>
      <div class="test-description">12小时制 + confirm="false"</div>
      <ldesign-time-picker 
        id="test3" 
        output-format="12h" 
        confirm="false"
        show-seconds="false"
        placeholder="12h 即时生效"
      ></ldesign-time-picker>
      <div class="test-result" id="result3">当前值: 未选择</div>
    </div>

    <!-- 测试4: 时间范围限制 -->
    <div class="test-section">
      <div class="test-title">4. 时间范围限制</div>
      <div class="test-description">限制 09:30 - 18:00</div>
      <ldesign-time-picker 
        id="test4" 
        min-time="09:30:00"
        max-time="18:00:00"
        placeholder="09:30 - 18:00"
      ></ldesign-time-picker>
      <div class="test-result" id="result4">当前值: 未选择</div>
    </div>

    <!-- 测试5: 禁用特定小时 -->
    <div class="test-section">
      <div class="test-title">5. 禁用特定小时</div>
      <div class="test-description">禁用 0,1,2,22,23 点</div>
      <ldesign-time-picker 
        id="test5" 
        disabled-hours='[0,1,2,22,23]'
        placeholder="部分小时已禁用"
      ></ldesign-time-picker>
      <div class="test-result" id="result5">当前值: 未选择</div>
    </div>

    <!-- 测试6: 时间步进 -->
    <div class="test-section">
      <div class="test-title">6. 时间步进设置</div>
      <div class="test-description">时2小时, 分15分钟, 秒30秒</div>
      <ldesign-time-picker 
        id="test6" 
        hour-step="2"
        minute-step="15"
        second-step="30"
        placeholder="步进: 2h/15m/30s"
      ></ldesign-time-picker>
      <div class="test-result" id="result6">当前值: 未选择</div>
    </div>

    <!-- 测试7: 组合测试 -->
    <div class="test-section">
      <div class="test-title">7. 组合测试</div>
      <div class="test-description">范围+禁用+步进+12小时制</div>
      <ldesign-time-picker 
        id="test7" 
        output-format="12h"
        min-time="09:00:00"
        max-time="20:00:00"
        disabled-hours='[13,14]'
        minute-step="5"
        show-seconds="false"
        placeholder="复杂配置"
      ></ldesign-time-picker>
      <div class="test-result" id="result7">当前值: 未选择</div>
    </div>

    <!-- 测试8: 清空功能 -->
    <div class="test-section">
      <div class="test-title">8. 清空功能测试</div>
      <div class="test-description">可清空 + 默认值</div>
      <ldesign-time-picker 
        id="test8" 
        clearable="true"
        default-value="10:30:45"
        placeholder="可清空"
      ></ldesign-time-picker>
      <div class="test-result" id="result8">当前值: 10:30:45</div>
    </div>

    <!-- 测试9: 预设时间 -->
    <div class="test-section">
      <div class="test-title">9. 预设时间测试</div>
      <div class="test-description">提供快速选择选项</div>
      <ldesign-time-picker 
        id="test9" 
        placeholder="选择或使用预设"
      ></ldesign-time-picker>
      <div class="test-result" id="result9">当前值: 未选择</div>
    </div>

    <!-- 测试10: 内联模式 -->
    <div class="test-section">
      <div class="test-title">10. 内联模式</div>
      <div class="test-description">直接显示面板</div>
      <ldesign-time-picker 
        id="test10" 
        inline="true"
        show-seconds="false"
        confirm="false"
      ></ldesign-time-picker>
      <div class="test-result" id="result10">当前值: 未选择</div>
    </div>

    <!-- 测试11: 时间范围选择 -->
    <div class="test-section">
      <div class="test-title">11. 时间范围选择</div>
      <div class="test-description">选择开始和结束时间</div>
      <ldesign-time-picker 
        id="test11" 
        range="true"
        placeholder="选择时间范围"
      ></ldesign-time-picker>
      <div class="test-result" id="result11">开始: - 结束: -</div>
    </div>

    <!-- 测试12: 12小时制AM/PM在前 -->
    <div class="test-section">
      <div class="test-title">12. 12小时制 (AM/PM在最前)</div>
      <div class="test-description">验证AM/PM选择器位置</div>
      <ldesign-time-picker 
        id="test12" 
        output-format="12h"
        placeholder="AM/PM在最前"
      ></ldesign-time-picker>
      <div class="test-result" id="result12">当前值: 未选择</div>
    </div>
  </div>

  <script>
    // 通用事件监听函数
    function setupListener(id, resultId) {
      const picker = document.getElementById(id);
      const result = document.getElementById(resultId);
      
      picker.addEventListener('ldesignChange', (e) => {
        result.textContent = `当前值: ${e.detail || '未选择'}`;
        console.log(`${id} changed:`, e.detail);
      });

      picker.addEventListener('ldesignPick', (e) => {
        console.log(`${id} picked:`, e.detail);
      });
    }

    // 设置所有监听器
    for (let i = 1; i <= 10; i++) {
      setupListener(`test${i}`, `result${i}`);
    }
    
    // 特殊处理范围选择器
    const rangePicker = document.getElementById('test11');
    const rangeResult = document.getElementById('result11');
    rangePicker.addEventListener('ldesignChange', (e) => {
      if (e.detail && typeof e.detail === 'object') {
        rangeResult.textContent = `开始: ${e.detail.start || '-'} 结束: ${e.detail.end || '-'}`;
      } else {
        rangeResult.textContent = `开始: - 结束: -`;
      }
    });
    
    // 设置test12监听器
    setupListener('test12', 'result12');

    // 设置预设时间
    const preset = document.getElementById('test9');
    preset.presets = [
      { label: '早上9点', value: '09:00:00' },
      { label: '中午12点', value: '12:00:00' },
      { label: '下午3点', value: '15:00:00' },
      { label: '下午6点', value: '18:00:00' },
      { label: '晚上9点', value: '21:00:00' }
    ];

    // 测试程序化设置值
    setTimeout(() => {
      console.log('程序化设置test3的值为 08:15 AM');
      document.getElementById('test3').value = '08:15 AM';
    }, 2000);

    // 显示所有配置信息
    console.log('Time Picker 测试页面已加载');
    console.log('测试项目:');
    console.log('1. 即时生效 (confirm=false)');
    console.log('2. 12小时制显示');
    console.log('3. 时间范围限制');
    console.log('4. 禁用特定时间');
    console.log('5. 时间步进设置');
    console.log('6. 组合功能测试');
    console.log('7. 时间范围选择');
    console.log('8. 12小时制AM/PM位置');
    console.log('9. 移动端自适应');
    
    // 测试移动端检测
    if (window.innerWidth < 768) {
      console.log('检测到移动端设备，将使用drawer模式');
    } else {
      console.log('检测到PC端，使用popup模式');
    }
  </script>
</body>
</html>