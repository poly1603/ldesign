/**
 * Button 按钮组件样式
 * 使用BEM命名规范和CSS变量
 */

.ldesign-button {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border: 1px solid transparent;
  border-radius: var(--ls-border-radius-base);
  font-family: inherit;
  font-weight: 400;
  text-align: center;
  text-decoration: none;
  vertical-align: middle;
  cursor: pointer;
  user-select: none;
  background-image: none;
  white-space: nowrap;
  transition: all 0.2s cubic-bezier(0.38, 0, 0.24, 1);
  outline: none;

  /* 基础色彩变量（用于 outline / dashed / text / link / ghost） */
  --ld-btn-color: var(--ldesign-brand-color);
  --ld-btn-hover: var(--ldesign-brand-color-hover);
  --ld-btn-active: var(--ldesign-brand-color-active);
  --ld-btn-focus: var(--ldesign-brand-color-focus);

  &:focus-visible {
    outline: 2px solid var(--ldesign-brand-color-focus);
    outline-offset: 2px;
  }

  // 尺寸变体
  &--small {
    height: var(--ls-button-height-small);
    padding: 0 var(--ls-spacing-sm);
    font-size: var(--ls-font-size-xs);
    line-height: 1;

    .ldesign-button__icon {
      width: var(--ls-icon-size-small);
      height: var(--ls-icon-size-small);
    }
  }

  &--medium,
  &--middle {
    height: var(--ls-button-height-medium);
    padding: 0 var(--ls-spacing-base);
    font-size: var(--ls-font-size-sm);
    line-height: 1;

    .ldesign-button__icon {
      width: var(--ls-icon-size-medium);
      height: var(--ls-icon-size-medium);
    }
  }

  &--large {
    height: var(--ls-button-height-large);
    padding: 0 var(--ls-spacing-lg);
    font-size: var(--ls-font-size-base);
    line-height: 1;

    .ldesign-button__icon {
      width: var(--ls-icon-size-large);
      height: var(--ls-icon-size-large);
    }
  }

  // 形状变体
  &--rectangle {
    border-radius: var(--ls-border-radius-base);
  }

  &--round {
    border-radius: var(--ls-border-radius-xl);
  }

  &--circle {
    border-radius: var(--ls-border-radius-full);
    width: var(--ls-button-height-medium);
    padding: 0;

    &.ldesign-button--small {
      width: var(--ls-button-height-small);
    }

    &.ldesign-button--large {
      width: var(--ls-button-height-large);
    }
  }

  // 新增：正方形（宽高相等）
  &--square {
    border-radius: var(--ls-border-radius-base);
    width: var(--ls-button-height-medium);
    padding: 0;

    &.ldesign-button--small {
      width: var(--ls-button-height-small);
    }

    &.ldesign-button--large {
      width: var(--ls-button-height-large);
    }
  }

  // 类型变体
  &--primary {
    color: var(--ldesign-font-white-1);
    background-color: var(--ldesign-brand-color);
    border-color: var(--ldesign-brand-color);

    &:hover:not(.ldesign-button--disabled):not(.ldesign-button--loading) {
      background-color: var(--ldesign-brand-color-hover);
      border-color: var(--ldesign-brand-color-hover);
    }

    &:active:not(.ldesign-button--disabled):not(.ldesign-button--loading) {
      background-color: var(--ldesign-brand-color-active);
      border-color: var(--ldesign-brand-color-active);
    }
  }

  &--default,
  &--secondary {
    color: var(--ldesign-text-color-primary);
    background-color: var(--ldesign-bg-color-component);
    border-color: var(--ldesign-border-color);

    &:hover:not(.ldesign-button--disabled):not(.ldesign-button--loading) {
      color: var(--ldesign-text-color-primary);
      background-color: var(--ldesign-bg-color-component-hover);
      border-color: var(--ldesign-border-color-hover);
    }

    &:active:not(.ldesign-button--disabled):not(.ldesign-button--loading) {
      color: var(--ldesign-text-color-primary);
      background-color: var(--ldesign-bg-color-component-active);
      border-color: var(--ldesign-border-color-hover);
    }
  }

  // 形态：描边（支持 color 修饰）
  &--outline {
    color: var(--ld-btn-color);
    background-color: transparent;
    border-color: var(--ld-btn-color);

    &:hover:not(.ldesign-button--disabled):not(.ldesign-button--loading) {
      color: var(--ld-btn-hover);
      background-color: var(--ld-btn-focus);
      border-color: var(--ld-btn-hover);
    }

    &:active:not(.ldesign-button--disabled):not(.ldesign-button--loading) {
      color: var(--ld-btn-active);
      background-color: var(--ld-btn-focus);
      border-color: var(--ld-btn-active);
    }

    // 中性色（默认灰）
    &.ldesign-button--color-default {
      color: var(--ldesign-text-color-primary);
      border-color: var(--ldesign-border-color);

      &:hover:not(.ldesign-button--disabled):not(.ldesign-button--loading) {
        color: var(--ldesign-text-color-primary);
        background-color: var(--ldesign-bg-color-component-hover);
        border-color: var(--ldesign-border-color-hover);
      }

      &:active:not(.ldesign-button--disabled):not(.ldesign-button--loading) {
        color: var(--ldesign-text-color-primary);
        background-color: var(--ldesign-bg-color-component-active);
        border-color: var(--ldesign-border-color-hover);
      }
    }
  }

  // 形态：文字（支持 color 修饰）
  &--text {
    color: var(--ld-btn-color);
    background-color: transparent;
    border-color: transparent;

    &:hover:not(.ldesign-button--disabled):not(.ldesign-button--loading) {
      color: var(--ld-btn-hover);
      background-color: var(--ld-btn-focus);
    }

    &:active:not(.ldesign-button--disabled):not(.ldesign-button--loading) {
      color: var(--ld-btn-active);
      background-color: var(--ld-btn-focus);
    }

    &.ldesign-button--color-default {
      color: var(--ldesign-text-color-primary);
      &:hover:not(.ldesign-button--disabled):not(.ldesign-button--loading) {
        background-color: var(--ldesign-bg-color-component-hover);
        color: var(--ldesign-text-color-primary);
      }
      &:active:not(.ldesign-button--disabled):not(.ldesign-button--loading) {
        background-color: var(--ldesign-bg-color-component-active);
        color: var(--ldesign-text-color-primary);
      }
    }
  }

  &--danger {
    color: var(--ldesign-font-white-1);
    background-color: var(--ldesign-error-color);
    border-color: var(--ldesign-error-color);

    &:hover:not(.ldesign-button--disabled):not(.ldesign-button--loading) {
      background-color: var(--ldesign-error-color-hover);
      border-color: var(--ldesign-error-color-hover);
    }

    &:active:not(.ldesign-button--disabled):not(.ldesign-button--loading) {
      background-color: var(--ldesign-error-color-active);
      border-color: var(--ldesign-error-color-active);
    }
  }

  // 新增：成功类型
  &--success {
    color: var(--ldesign-font-white-1);
    background-color: var(--ldesign-success-color);
    border-color: var(--ldesign-success-color);

    &:hover:not(.ldesign-button--disabled):not(.ldesign-button--loading) {
      background-color: var(--ldesign-success-color-hover);
      border-color: var(--ldesign-success-color-hover);
    }

    &:active:not(.ldesign-button--disabled):not(.ldesign-button--loading) {
      background-color: var(--ldesign-success-color-active);
      border-color: var(--ldesign-success-color-active);
    }
  }

  // 新增：警告类型
  &--warning {
    color: var(--ldesign-font-white-1);
    background-color: var(--ldesign-warning-color);
    border-color: var(--ldesign-warning-color);

    &:hover:not(.ldesign-button--disabled):not(.ldesign-button--loading) {
      background-color: var(--ldesign-warning-color-hover);
      border-color: var(--ldesign-warning-color-hover);
    }

    &:active:not(.ldesign-button--disabled):not(.ldesign-button--loading) {
      background-color: var(--ldesign-warning-color-active);
      border-color: var(--ldesign-warning-color-active);
    }
  }

  // 新增：链接样式（支持 color 修饰）
  &--link {
    color: var(--ld-btn-color);
    background-color: transparent;
    border-color: transparent;
    text-decoration: none;

    &:hover:not(.ldesign-button--disabled):not(.ldesign-button--loading) {
      color: var(--ld-btn-hover);
      text-decoration: none;
      background-color: transparent;
    }

    &:active:not(.ldesign-button--disabled):not(.ldesign-button--loading) {
      color: var(--ld-btn-active);
      text-decoration: none;
      background-color: transparent;
    }

    &.ldesign-button--color-default {
      color: var(--ldesign-text-color-primary);
      &:hover:not(.ldesign-button--disabled):not(.ldesign-button--loading) {
        color: var(--ldesign-text-color-primary);
      }
    }
  }

  /* 对齐 AntD：危险态组合样式 */
  &--dangerous.ldesign-button--primary {
    color: var(--ldesign-font-white-1);
    background-color: var(--ldesign-error-color);
    border-color: var(--ldesign-error-color);
    &:hover:not(.ldesign-button--disabled):not(.ldesign-button--loading) {
      background-color: var(--ldesign-error-color-hover);
      border-color: var(--ldesign-error-color-hover);
    }
    &:active:not(.ldesign-button--disabled):not(.ldesign-button--loading) {
      background-color: var(--ldesign-error-color-active);
      border-color: var(--ldesign-error-color-active);
    }
  }
  &--dangerous.ldesign-button--default,
  &--dangerous.ldesign-button--secondary {
    color: var(--ldesign-error-color);
    background-color: var(--ldesign-bg-color-component);
    border-color: var(--ldesign-error-color);
    &:hover:not(.ldesign-button--disabled):not(.ldesign-button--loading) {
      color: var(--ldesign-error-color-hover);
      border-color: var(--ldesign-error-color-hover);
      background-color: var(--ldesign-error-color-focus);
    }
    &:active:not(.ldesign-button--disabled):not(.ldesign-button--loading) {
      color: var(--ldesign-error-color-active);
      border-color: var(--ldesign-error-color-active);
      background-color: var(--ldesign-error-color-1);
    }
  }
  &--dangerous.ldesign-button--dashed {
    color: var(--ldesign-error-color);
    border-color: var(--ldesign-error-color);
    border-style: dashed;
    &:hover:not(.ldesign-button--disabled):not(.ldesign-button--loading) {
      color: var(--ldesign-error-color-hover);
      border-color: var(--ldesign-error-color-hover);
      background-color: var(--ldesign-error-color-focus);
    }
    &:active:not(.ldesign-button--disabled):not(.ldesign-button--loading) {
      color: var(--ldesign-error-color-active);
      border-color: var(--ldesign-error-color-active);
      background-color: var(--ldesign-error-color-1);
    }
  }
  &--dangerous.ldesign-button--text {
    color: var(--ldesign-error-color);
    background-color: transparent;
    &:hover:not(.ldesign-button--disabled):not(.ldesign-button--loading) {
      color: var(--ldesign-error-color-hover);
      background-color: var(--ldesign-error-color-focus);
    }
    &:active:not(.ldesign-button--disabled):not(.ldesign-button--loading) {
      color: var(--ldesign-error-color-active);
      background-color: var(--ldesign-error-color-1);
    }
  }
  &--dangerous.ldesign-button--link {
    color: var(--ldesign-error-color);
    text-decoration-color: var(--ldesign-error-color);
    &:hover:not(.ldesign-button--disabled):not(.ldesign-button--loading) {
      color: var(--ldesign-error-color-hover);
      text-decoration-color: var(--ldesign-error-color-hover);
    }
    &:active:not(.ldesign-button--disabled):not(.ldesign-button--loading) {
      color: var(--ldesign-error-color-active);
      text-decoration-color: var(--ldesign-error-color-active);
    }
  }
  &--dangerous.ldesign-button--ghost {
    color: var(--ldesign-error-color);
    border-color: var(--ldesign-error-color);
    background-color: transparent;
    &:hover:not(.ldesign-button--disabled):not(.ldesign-button--loading) {
      color: var(--ldesign-error-color-hover);
      border-color: var(--ldesign-error-color-hover);
      background-color: var(--ldesign-error-color-focus);
    }
    &:active:not(.ldesign-button--disabled):not(.ldesign-button--loading) {
      color: var(--ldesign-error-color-active);
      border-color: var(--ldesign-error-color-active);
      background-color: var(--ldesign-error-color-1);
    }
  }

  // 新增：虚线边框样式（支持 color 修饰）
  &--dashed {
    color: var(--ld-btn-color);
    background-color: transparent;
    border-color: var(--ld-btn-color);
    border-style: dashed;

    &:hover:not(.ldesign-button--disabled):not(.ldesign-button--loading) {
      color: var(--ld-btn-hover);
      background-color: var(--ld-btn-focus);
      border-color: var(--ld-btn-hover);
      border-style: dashed;
    }

    &:active:not(.ldesign-button--disabled):not(.ldesign-button--loading) {
      color: var(--ld-btn-active);
      background-color: var(--ld-btn-focus);
      border-color: var(--ld-btn-active);
      border-style: dashed;
    }

    &.ldesign-button--color-default {
      color: var(--ldesign-text-color-primary);
      border-color: var(--ldesign-border-color);
      &:hover:not(.ldesign-button--disabled):not(.ldesign-button--loading) {
        background-color: var(--ldesign-bg-color-component-hover);
        border-color: var(--ldesign-border-color-hover);
        color: var(--ldesign-text-color-primary);
      }
      &:active:not(.ldesign-button--disabled):not(.ldesign-button--loading) {
        background-color: var(--ldesign-bg-color-component-active);
        border-color: var(--ldesign-border-color-hover);
        color: var(--ldesign-text-color-primary);
      }
    }
  }

  // 新增：渐变填充按钮（支持 color 修饰）
  &--gradient {
    --ld-btn-grad-from: var(--ldesign-brand-color-6);
    --ld-btn-grad-to: var(--ldesign-brand-color-8);
    --ld-btn-grad-from-hover: var(--ldesign-brand-color-5);
    --ld-btn-grad-to-hover: var(--ldesign-brand-color-7);
    --ld-btn-grad-from-active: var(--ldesign-brand-color-7);
    --ld-btn-grad-to-active: var(--ldesign-brand-color-9);

    color: var(--ldesign-font-white-1);
    background-image: linear-gradient(135deg, var(--ld-btn-grad-from), var(--ld-btn-grad-to));
    border-color: transparent;

    &:hover:not(.ldesign-button--disabled):not(.ldesign-button--loading) {
      background-image: linear-gradient(135deg, var(--ld-btn-grad-from-hover), var(--ld-btn-grad-to-hover));
      border-color: transparent;
    }

    &:active:not(.ldesign-button--disabled):not(.ldesign-button--loading) {
      background-image: linear-gradient(135deg, var(--ld-btn-grad-from-active), var(--ld-btn-grad-to-active));
      border-color: transparent;
    }

    // 语义色梯度
    &.ldesign-button--color-success {
      --ld-btn-grad-from: var(--ldesign-success-color-4);
      --ld-btn-grad-to: var(--ldesign-success-color-6);
      --ld-btn-grad-from-hover: var(--ldesign-success-color-3);
      --ld-btn-grad-to-hover: var(--ldesign-success-color-5);
      --ld-btn-grad-from-active: var(--ldesign-success-color-5);
      --ld-btn-grad-to-active: var(--ldesign-success-color-7);
    }

    &.ldesign-button--color-warning {
      --ld-btn-grad-from: var(--ldesign-warning-color-4);
      --ld-btn-grad-to: var(--ldesign-warning-color-6);
      --ld-btn-grad-from-hover: var(--ldesign-warning-color-3);
      --ld-btn-grad-to-hover: var(--ldesign-warning-color-5);
      --ld-btn-grad-from-active: var(--ldesign-warning-color-5);
      --ld-btn-grad-to-active: var(--ldesign-warning-color-7);
    }

    &.ldesign-button--color-danger {
      --ld-btn-grad-from: var(--ldesign-error-color-4);
      --ld-btn-grad-to: var(--ldesign-error-color-6);
      --ld-btn-grad-from-hover: var(--ldesign-error-color-3);
      --ld-btn-grad-to-hover: var(--ldesign-error-color-5);
      --ld-btn-grad-from-active: var(--ldesign-error-color-5);
      --ld-btn-grad-to-active: var(--ldesign-error-color-7);
    }

    &.ldesign-button--color-default {
      color: var(--ldesign-text-color-primary);
      background-image: linear-gradient(135deg, var(--ldesign-gray-color-1), var(--ldesign-gray-color-3));
      border-color: var(--ldesign-border-color);
      &:hover:not(.ldesign-button--disabled):not(.ldesign-button--loading) {
        background-image: linear-gradient(135deg, var(--ldesign-gray-color-1), var(--ldesign-gray-color-2));
        border-color: var(--ldesign-border-color-hover);
      }
      &:active:not(.ldesign-button--disabled):not(.ldesign-button--loading) {
        background-image: linear-gradient(135deg, var(--ldesign-gray-color-2), var(--ldesign-gray-color-4));
        border-color: var(--ldesign-border-color-hover);
      }
    }
  }

  // 状态变体
  &--disabled {
    cursor: not-allowed;
    opacity: 0.6;
    pointer-events: none;

    &.ldesign-button--primary {
      background-color: var(--ldesign-brand-color-disabled);
      border-color: var(--ldesign-brand-color-disabled);
    }

    &.ldesign-button--secondary {
      background-color: var(--ldesign-bg-color-component-disabled);
      border-color: var(--ldesign-border-color);
      color: var(--ldesign-text-color-disabled);
    }

    &.ldesign-button--outline {
      border-color: var(--ldesign-brand-color-disabled);
      color: var(--ldesign-brand-color-disabled);

      &.ldesign-button--color-success { border-color: var(--ldesign-success-color-disabled); color: var(--ldesign-success-color-disabled); }
      &.ldesign-button--color-warning { border-color: var(--ldesign-warning-color-disabled); color: var(--ldesign-warning-color-disabled); }
      &.ldesign-button--color-danger { border-color: var(--ldesign-error-color-disabled); color: var(--ldesign-error-color-disabled); }
      &.ldesign-button--color-default { border-color: var(--ldesign-border-color); color: var(--ldesign-text-color-disabled); }
    }

    &.ldesign-button--text {
      color: var(--ldesign-text-color-disabled);

      &.ldesign-button--color-success { color: var(--ldesign-success-color-disabled); }
      &.ldesign-button--color-warning { color: var(--ldesign-warning-color-disabled); }
      &.ldesign-button--color-danger { color: var(--ldesign-error-color-disabled); }
    }

    &.ldesign-button--link {
      color: var(--ldesign-text-color-disabled);
      text-decoration-color: var(--ldesign-text-color-disabled);

      &.ldesign-button--color-success { color: var(--ldesign-success-color-disabled); text-decoration-color: var(--ldesign-success-color-disabled); }
      &.ldesign-button--color-warning { color: var(--ldesign-warning-color-disabled); text-decoration-color: var(--ldesign-warning-color-disabled); }
      &.ldesign-button--color-danger { color: var(--ldesign-error-color-disabled); text-decoration-color: var(--ldesign-error-color-disabled); }
    }

    &.ldesign-button--dashed {
      border-color: var(--ldesign-brand-color-disabled);
      color: var(--ldesign-brand-color-disabled);

      &.ldesign-button--color-success { border-color: var(--ldesign-success-color-disabled); color: var(--ldesign-success-color-disabled); }
      &.ldesign-button--color-warning { border-color: var(--ldesign-warning-color-disabled); color: var(--ldesign-warning-color-disabled); }
      &.ldesign-button--color-danger { border-color: var(--ldesign-error-color-disabled); color: var(--ldesign-error-color-disabled); }
      &.ldesign-button--color-default { border-color: var(--ldesign-border-color); color: var(--ldesign-text-color-disabled); }
    }

    &.ldesign-button--danger {
      background-color: var(--ldesign-error-color-disabled);
      border-color: var(--ldesign-error-color-disabled);
    }

    &.ldesign-button--success {
      background-color: var(--ldesign-success-color-disabled);
      border-color: var(--ldesign-success-color-disabled);
    }

    &.ldesign-button--warning {
      background-color: var(--ldesign-warning-color-disabled);
      border-color: var(--ldesign-warning-color-disabled);
    }

    &.ldesign-button--ghost {
      border-color: var(--ldesign-border-color);
      color: var(--ldesign-text-color-disabled);
    }
  }

  &--loading {
    cursor: default;
    pointer-events: none;
  }

  &--block {
    display: flex;
    width: 100%;
  }

  // 内容样式
  &__content {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--ls-spacing-xs);
  }

  &__icon {
    flex-shrink: 0;

    &--loading {
      animation: ldesign-button-loading 1s linear infinite;
    }
  }

  &__text {
    flex: 1;
  }

  /* 颜色修饰（为 outline/dashed/text/link/ghost 提供变量） */
  &.ldesign-button--color-primary {
    --ld-btn-color: var(--ldesign-brand-color);
    --ld-btn-hover: var(--ldesign-brand-color-hover);
    --ld-btn-active: var(--ldesign-brand-color-active);
    --ld-btn-focus: var(--ldesign-brand-color-focus);
  }
  &.ldesign-button--color-success {
    --ld-btn-color: var(--ldesign-success-color);
    --ld-btn-hover: var(--ldesign-success-color-hover);
    --ld-btn-active: var(--ldesign-success-color-active);
    --ld-btn-focus: var(--ldesign-success-color-focus);
  }
  &.ldesign-button--color-warning {
    --ld-btn-color: var(--ldesign-warning-color);
    --ld-btn-hover: var(--ldesign-warning-color-hover);
    --ld-btn-active: var(--ldesign-warning-color-active);
    --ld-btn-focus: var(--ldesign-warning-color-focus);
  }
  &.ldesign-button--color-danger {
    --ld-btn-color: var(--ldesign-error-color);
    --ld-btn-hover: var(--ldesign-error-color-hover);
    --ld-btn-active: var(--ldesign-error-color-active);
    --ld-btn-focus: var(--ldesign-error-color-focus);
  }
  &.ldesign-button--color-default {
    --ld-btn-color: var(--ldesign-text-color-primary);
    --ld-btn-hover: var(--ldesign-text-color-primary);
    --ld-btn-active: var(--ldesign-text-color-primary);
    --ld-btn-focus: var(--ldesign-bg-color-component-hover);
  }

  /* 幽灵按钮（一般用于深色背景）。默认白色，不跟随 color；显式指定 color 或危险态时覆盖 */
  &--ghost {
    background-color: transparent;
    color: var(--ldesign-font-white-1);
    border-color: var(--ldesign-font-white-1);

    &:hover:not(.ldesign-button--disabled):not(.ldesign-button--loading) {
      background-color: rgba(255, 255, 255, 0.08);
      color: var(--ldesign-font-white-1);
      border-color: var(--ldesign-font-white-1);
    }

    &:active:not(.ldesign-button--disabled):not(.ldesign-button--loading) {
      background-color: rgba(255, 255, 255, 0.12);
      color: var(--ldesign-font-white-1);
      border-color: var(--ldesign-font-white-1);
    }

    // 显式 color 时使用语义色
    &.ldesign-button--color-primary { color: var(--ldesign-brand-color); border-color: var(--ldesign-brand-color); }
    &.ldesign-button--color-success { color: var(--ldesign-success-color); border-color: var(--ldesign-success-color); }
    &.ldesign-button--color-warning { color: var(--ldesign-warning-color); border-color: var(--ldesign-warning-color); }
    &.ldesign-button--color-danger { color: var(--ldesign-error-color); border-color: var(--ldesign-error-color); }
  }
}

// 加载动画
@keyframes ldesign-button-loading {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
