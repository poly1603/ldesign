@prefix: ldesign-split;

.@{prefix} {
  position: relative;
  display: flex;
  width: 100%;
  height: 100%;
  --ld-splitter-size: 8px; // 更接近参考样式
  --ld-split-value: .5; // 0~1，起始面板比例
  user-select: none;

  &--vertical { flex-direction: row; }
  &--horizontal { flex-direction: column; }

  &--disabled { cursor: not-allowed; }

  &__pane {
    min-width: 0; // 允许内容收缩
    min-height: 0;
    overflow: auto;
  }

  /* 起始面板：用 calc((100% - splitter) * value) 计算基准尺寸 */
  &--vertical &__pane--start { flex: 0 0 calc((100% - var(--ld-splitter-size)) * var(--ld-split-value)); }
  &--vertical &__pane--end { flex: 1 1 0; }

  &--horizontal &__pane--start { flex: 0 0 calc((100% - var(--ld-splitter-size)) * var(--ld-split-value)); }
  &--horizontal &__pane--end { flex: 1 1 0; }

  &__splitter {
    position: relative;
    flex: 0 0 var(--ld-splitter-size);
    background: var(--ld-splitter-bg, #eef1f5);
    z-index: 1;
  }

  /* 边框阴影：两侧细线，符合截图的凹槽效果 */
  &--vertical &__splitter {
    box-shadow: inset 1px 0 0 var(--ld-splitter-border, #dfe3ea), inset -1px 0 0 var(--ld-splitter-border, #dfe3ea);
    cursor: col-resize;
  }
  &--horizontal &__splitter {
    box-shadow: inset 0 1px 0 var(--ld-splitter-border, #dfe3ea), inset 0 -1px 0 var(--ld-splitter-border, #dfe3ea);
    cursor: row-resize;
  }

  /* 把手：3x3 方点阵，置于中间 */
  &__splitter::after {
    content: '';
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    width: 3px;
    height: 3px;
    background: var(--ld-splitter-handle, #1f2937);
    border-radius: 2px;
    /* 8 个阴影生成 3x3 网格 */
    box-shadow:
      -6px 0 0 0 var(--ld-splitter-handle, #1f2937),
       6px 0 0 0 var(--ld-splitter-handle, #1f2937),
       0 -6px 0 0 var(--ld-splitter-handle, #1f2937),
      -6px -6px 0 0 var(--ld-splitter-handle, #1f2937),
       6px -6px 0 0 var(--ld-splitter-handle, #1f2937),
       0  6px 0 0 var(--ld-splitter-handle, #1f2937),
      -6px  6px 0 0 var(--ld-splitter-handle, #1f2937),
       6px  6px 0 0 var(--ld-splitter-handle, #1f2937);
    opacity: .9;
    pointer-events: none;
  }

  &--dragging &__splitter {
    background: var(--ld-splitter-bg-active, #e4e8ee);
  }
}
