<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Drawer ç»„ä»¶æµ‹è¯• - ç§»åŠ¨ç«¯é€‚é…</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #f0f2f5;
      padding: 20px;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    
    .header {
      background: white;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }
    
    .header h1 {
      font-size: 24px;
      color: #1f2937;
      margin-bottom: 10px;
    }
    
    .device-info {
      font-size: 14px;
      color: #6b7280;
      background: #f9fafb;
      padding: 8px 12px;
      border-radius: 4px;
      margin-bottom: 10px;
    }
    
    .controls {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }
    
    .control-group {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    
    .control-group label {
      font-size: 14px;
      font-weight: 500;
      color: #374151;
    }
    
    button {
      padding: 10px 16px;
      background: #3b82f6;
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 14px;
      cursor: pointer;
      transition: background 0.2s;
    }
    
    button:hover {
      background: #2563eb;
    }
    
    button:active {
      transform: scale(0.98);
    }
    
    button.secondary {
      background: #6b7280;
    }
    
    button.secondary:hover {
      background: #4b5563;
    }
    
    select, input {
      padding: 8px 12px;
      border: 1px solid #d1d5db;
      border-radius: 4px;
      font-size: 14px;
    }
    
    .drawer-content {
      padding: 20px;
    }
    
    .drawer-content h2 {
      margin-bottom: 15px;
      color: #1f2937;
    }
    
    .drawer-content p {
      color: #4b5563;
      line-height: 1.6;
      margin-bottom: 10px;
    }
    
    .test-content {
      height: 1500px;
      background: linear-gradient(to bottom, #f0f9ff, #e0f2fe);
      padding: 20px;
      border-radius: 8px;
    }
    
    @media (max-width: 768px) {
      .controls {
        grid-template-columns: 1fr;
      }
      
      body {
        padding: 10px;
      }
      
      .header h1 {
        font-size: 20px;
      }
    }
  </style>
  <script type="module" src="/build/ldesign-webcomponent.esm.js"></script>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ğŸ¨ Drawer ç»„ä»¶æµ‹è¯• - ç§»åŠ¨ç«¯é€‚é…</h1>
      <div class="device-info" id="deviceInfo">
        æ£€æµ‹è®¾å¤‡ä¿¡æ¯ä¸­...
      </div>
      <div class="device-info">
        å½“å‰è§†å£: <span id="viewportSize">-</span>
      </div>
    </div>
    
    <div class="controls">
      <div class="control-group">
        <label>æ–¹å‘ (Placement)</label>
        <select id="placement">
          <option value="right">å³ä¾§ (right)</option>
          <option value="left">å·¦ä¾§ (left)</option>
          <option value="top">é¡¶éƒ¨ (top)</option>
          <option value="bottom">åº•éƒ¨ (bottom)</option>
        </select>
      </div>
      
      <div class="control-group">
        <label>å°ºå¯¸ (Size)</label>
        <input type="text" id="size" value="360" placeholder="360 æˆ– 80%">
        <button onclick="testPresetSizes()">æµ‹è¯•é¢„è®¾å°ºå¯¸</button>
      </div>
      
      <div class="control-group">
        <label>æµ‹è¯•é€‰é¡¹</label>
        <button onclick="toggleDrawer()">æ‰“å¼€/å…³é—­æŠ½å±‰</button>
        <button onclick="testAllDirections()" class="secondary">æµ‹è¯•æ‰€æœ‰æ–¹å‘</button>
        <button onclick="testMobileFeatures()">æµ‹è¯•ç§»åŠ¨ç«¯ç‰¹æ€§</button>
      </div>
      
      <div class="control-group">
        <label>åŠŸèƒ½å¼€å…³</label>
        <label style="font-weight: normal;">
          <input type="checkbox" id="resizable" checked> å¯è°ƒæ•´å¤§å°
        </label>
        <label style="font-weight: normal;">
          <input type="checkbox" id="swipeToClose" checked> æ»‘åŠ¨å…³é—­
        </label>
        <label style="font-weight: normal;">
          <input type="checkbox" id="rounded" checked> åœ†è§’
        </label>
        <label style="font-weight: normal;">
          <input type="checkbox" id="mask" checked> æ˜¾ç¤ºé®ç½©
        </label>
      </div>
    </div>
  </div>
  
  <!-- Drawer ç»„ä»¶ -->
  <ldesign-drawer id="testDrawer">
    <div class="drawer-content">
      <h2 id="drawerTitle">æµ‹è¯•æŠ½å±‰</h2>
      <p id="drawerInfo">-</p>
      <div class="test-content">
        <h3>æ»šåŠ¨æµ‹è¯•å†…å®¹</h3>
        <p>è¿™æ˜¯ä¸€ä¸ªå¾ˆé•¿çš„å†…å®¹åŒºåŸŸï¼Œç”¨äºæµ‹è¯•æ»šåŠ¨åŠŸèƒ½ã€‚</p>
        <p>è¯·å°è¯•æ»šåŠ¨è¿™ä¸ªåŒºåŸŸï¼ŒéªŒè¯æ»šåŠ¨æ˜¯å¦æ­£å¸¸ã€‚</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit...</p>
      </div>
    </div>
  </ldesign-drawer>
  
  <script>
    // è·å–è®¾å¤‡ä¿¡æ¯
    function getDeviceInfo() {
      const ua = navigator.userAgent;
      const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(ua);
      const isIOS = /iPhone|iPad|iPod/i.test(ua);
      const isAndroid = /Android/i.test(ua);
      const width = window.innerWidth;
      const height = window.innerHeight;
      
      let deviceType = 'Desktop';
      if (isMobile) {
        if (width <= 768) {
          deviceType = 'Mobile';
        } else {
          deviceType = 'Tablet';
        }
      }
      
      return {
        type: deviceType,
        os: isIOS ? 'iOS' : isAndroid ? 'Android' : 'Other',
        width,
        height,
        orientation: width > height ? 'landscape' : 'portrait',
        pixelRatio: window.devicePixelRatio || 1
      };
    }
    
    // æ›´æ–°è®¾å¤‡ä¿¡æ¯æ˜¾ç¤º
    function updateDeviceInfo() {
      const info = getDeviceInfo();
      document.getElementById('deviceInfo').innerHTML = `
        è®¾å¤‡: ${info.type} | 
        ç³»ç»Ÿ: ${info.os} | 
        æ–¹å‘: ${info.orientation} | 
        DPR: ${info.pixelRatio}
      `;
      document.getElementById('viewportSize').textContent = `${info.width} x ${info.height}px`;
    }
    
    // ç›‘å¬çª—å£å¤§å°å˜åŒ–
    window.addEventListener('resize', updateDeviceInfo);
    window.addEventListener('orientationchange', updateDeviceInfo);
    updateDeviceInfo();
    
    // è·å–æŠ½å±‰ç»„ä»¶
    const drawer = document.getElementById('testDrawer');
    
    // åˆ‡æ¢æŠ½å±‰
    function toggleDrawer() {
      const placement = document.getElementById('placement').value;
      const size = document.getElementById('size').value;
      const resizable = document.getElementById('resizable').checked;
      const swipeToClose = document.getElementById('swipeToClose').checked;
      const rounded = document.getElementById('rounded').checked;
      const mask = document.getElementById('mask').checked;
      
      drawer.placement = placement;
      drawer.size = isNaN(size) ? size : parseInt(size);
      drawer.resizable = resizable;
      drawer.swipeToClose = swipeToClose;
      drawer.rounded = rounded;
      drawer.mask = mask;
      drawer.drawerTitle = `${placement.toUpperCase()} æ–¹å‘æŠ½å±‰`;
      drawer.closable = true;
      drawer.visible = !drawer.visible;
      
      // æ›´æ–°æŠ½å±‰å†…ä¿¡æ¯
      updateDrawerInfo();
    }
    
    // æ›´æ–°æŠ½å±‰å†…çš„ä¿¡æ¯
    function updateDrawerInfo() {
      const info = getDeviceInfo();
      const drawerInfo = document.getElementById('drawerInfo');
      if (drawerInfo) {
        drawerInfo.innerHTML = `
          <strong>é…ç½®ä¿¡æ¯:</strong><br>
          æ–¹å‘: ${drawer.placement}<br>
          å°ºå¯¸: ${drawer.size}<br>
          è§†å£: ${info.width} x ${info.height}px<br>
          è®¾å¤‡ç±»å‹: ${info.type}<br>
          <br>
          <strong>åŠŸèƒ½çŠ¶æ€:</strong><br>
          å¯è°ƒæ•´å¤§å°: ${drawer.resizable ? 'âœ“' : 'âœ—'}<br>
          æ»‘åŠ¨å…³é—­: ${drawer.swipeToClose ? 'âœ“' : 'âœ—'}<br>
          åœ†è§’: ${drawer.rounded ? 'âœ“' : 'âœ—'}
        `;
      }
    }
    
    // æµ‹è¯•æ‰€æœ‰æ–¹å‘
    async function testAllDirections() {
      const placements = ['right', 'left', 'top', 'bottom'];
      const size = document.getElementById('size').value;
      
      for (const placement of placements) {
        drawer.placement = placement;
        drawer.size = isNaN(size) ? size : parseInt(size);
        drawer.drawerTitle = `${placement.toUpperCase()} æ–¹å‘æµ‹è¯•`;
        drawer.visible = true;
        updateDrawerInfo();
        
        await new Promise(resolve => setTimeout(resolve, 1500));
        drawer.visible = false;
        await new Promise(resolve => setTimeout(resolve, 500));
      }
    }
    
    // æµ‹è¯•é¢„è®¾å°ºå¯¸
    async function testPresetSizes() {
      const info = getDeviceInfo();
      const placement = document.getElementById('placement').value;
      
      // æ ¹æ®è®¾å¤‡ç±»å‹é€‰æ‹©æµ‹è¯•å°ºå¯¸
      let sizes;
      if (info.type === 'Mobile') {
        sizes = ['100%', '90%', '80%', '300px', '250px'];
      } else if (info.type === 'Tablet') {
        sizes = ['80%', '60%', '500px', '400px'];
      } else {
        sizes = ['50%', '40%', '600px', '400px', '360px'];
      }
      
      for (const size of sizes) {
        drawer.placement = placement;
        drawer.size = size;
        drawer.drawerTitle = `å°ºå¯¸æµ‹è¯•: ${size}`;
        drawer.visible = true;
        updateDrawerInfo();
        
        await new Promise(resolve => setTimeout(resolve, 1500));
        drawer.visible = false;
        await new Promise(resolve => setTimeout(resolve, 300));
      }
    }
    
    // æµ‹è¯•ç§»åŠ¨ç«¯ç‰¹æ€§
    function testMobileFeatures() {
      const info = getDeviceInfo();
      
      // æ ¹æ®è®¾å¤‡ç±»å‹è®¾ç½®åˆé€‚çš„é…ç½®
      if (info.type === 'Mobile') {
        // ç§»åŠ¨ç«¯é…ç½®
        drawer.size = '85%';
        drawer.swipeToClose = true;
        drawer.swipeTriggerArea = 'handle';
        drawer.resizable = true;
        drawer.resizeMode = 'edge';
        drawer.rounded = true;
        drawer.borderRadius = '16px';
        drawer.showResizeHint = true;
        drawer.damping = true;
        drawer.animationDuration = 250;
      } else {
        // æ¡Œé¢ç«¯é…ç½®
        drawer.size = '400px';
        drawer.swipeToClose = false;
        drawer.resizable = true;
        drawer.resizeMode = 'edge';
        drawer.rounded = true;
        drawer.borderRadius = '8px';
        drawer.animationDuration = 300;
      }
      
      drawer.drawerTitle = `${info.type} ä¼˜åŒ–é…ç½®`;
      drawer.visible = true;
      updateDrawerInfo();
    }
    
    // ç›‘å¬æŠ½å±‰äº‹ä»¶
    drawer.addEventListener('ldesignVisibleChange', (e) => {
      console.log('Visibility changed:', e.detail);
    });
    
    drawer.addEventListener('ldesignSizeChange', (e) => {
      console.log('Size changed:', e.detail);
      document.getElementById('size').value = e.detail.size;
    });
    
    drawer.addEventListener('ldesignClose', () => {
      console.log('Drawer closed');
    });
  </script>
</body>
</html>