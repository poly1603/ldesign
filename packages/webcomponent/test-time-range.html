<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Time Range Picker Test</title>
  <script type="module" src="./dist/ldesign/ldesign.esm.js"></script>
  <link rel="stylesheet" href="./dist/ldesign/ldesign.css">
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      padding: 20px;
      max-width: 800px;
      margin: 0 auto;
    }
    h1 {
      color: #333;
    }
    .test-section {
      margin-bottom: 30px;
      padding: 20px;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      background: #fff;
    }
    .test-title {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 12px;
      color: #333;
    }
    .test-description {
      color: #666;
      margin-bottom: 16px;
      font-size: 14px;
    }
    .test-result {
      margin-top: 16px;
      padding: 12px;
      background: #f5f5f5;
      border-radius: 4px;
      font-size: 14px;
    }
    .status {
      display: inline-block;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      margin-left: 8px;
    }
    .status-success {
      background: #d4edda;
      color: #155724;
    }
    .status-info {
      background: #d1ecf1;
      color: #0c5460;
    }
    .log-panel {
      background: #1e1e1e;
      color: #d4d4d4;
      padding: 12px;
      border-radius: 4px;
      font-family: 'Courier New', monospace;
      font-size: 12px;
      max-height: 200px;
      overflow-y: auto;
      margin-top: 12px;
    }
    .log-entry {
      margin-bottom: 4px;
    }
    .log-time {
      color: #858585;
      margin-right: 8px;
    }
    .log-label {
      color: #569cd6;
      margin-right: 8px;
    }
    .log-value {
      color: #ce9178;
    }
  </style>
</head>
<body>
  <h1>时间范围选择器测试</h1>

  <!-- 测试1: 基础范围选择 -->
  <div class="test-section">
    <div class="test-title">基础范围选择</div>
    <div class="test-description">
      测试开始时间和结束时间的独立选择
    </div>
    <ldesign-time-picker 
      id="range1" 
      range="true"
      placeholder="选择时间范围"
    ></ldesign-time-picker>
    <div class="test-result">
      <div>开始时间: <span id="start1">未选择</span></div>
      <div>结束时间: <span id="end1">未选择</span></div>
      <div>当前编辑: <span id="panel1" class="status status-info">等待打开</span></div>
    </div>
    <div class="log-panel" id="log1"></div>
  </div>

  <!-- 测试2: 带确认按钮的范围选择 -->
  <div class="test-section">
    <div class="test-title">带确认按钮的范围选择</div>
    <div class="test-description">
      需要点击确认按钮才会提交值
    </div>
    <ldesign-time-picker 
      id="range2" 
      range="true"
      confirm="true"
      show-seconds="false"
      placeholder="选择工作时间"
    ></ldesign-time-picker>
    <div class="test-result">
      <div>时间范围: <span id="range2-result">未选择</span></div>
    </div>
  </div>

  <!-- 测试3: 即时生效的范围选择 -->
  <div class="test-section">
    <div class="test-title">即时生效的范围选择</div>
    <div class="test-description">
      不需要确认，选择后立即生效 (confirm="false")
    </div>
    <ldesign-time-picker 
      id="range3" 
      range="true"
      confirm="false"
      placeholder="即时生效范围"
    ></ldesign-time-picker>
    <div class="test-result">
      <div>实时值: <span id="range3-result">未选择</span></div>
    </div>
  </div>

  <!-- 测试4: 12小时制范围选择 -->
  <div class="test-section">
    <div class="test-title">12小时制范围选择</div>
    <div class="test-description">
      测试12小时制格式下的范围选择，AM/PM在最前
    </div>
    <ldesign-time-picker 
      id="range4" 
      range="true"
      output-format="12h"
      show-seconds="false"
      placeholder="12小时制范围"
    ></ldesign-time-picker>
    <div class="test-result">
      <div>范围: <span id="range4-result">未选择</span></div>
    </div>
  </div>

  <!-- 测试5: 带限制的范围选择 -->
  <div class="test-section">
    <div class="test-title">带时间限制的范围选择</div>
    <div class="test-description">
      限制范围：09:00 - 18:00，步进：小时2，分钟15
    </div>
    <ldesign-time-picker 
      id="range5" 
      range="true"
      min-time="09:00:00"
      max-time="18:00:00"
      hour-step="2"
      minute-step="15"
      show-seconds="false"
      placeholder="工作时间段"
    ></ldesign-time-picker>
    <div class="test-result">
      <div>选择结果: <span id="range5-result">未选择</span></div>
    </div>
  </div>

  <script>
    // 日志记录函数
    function addLog(panelId, label, value) {
      const panel = document.getElementById(panelId);
      const time = new Date().toLocaleTimeString();
      const entry = document.createElement('div');
      entry.className = 'log-entry';
      entry.innerHTML = `<span class="log-time">${time}</span><span class="log-label">${label}:</span><span class="log-value">${JSON.stringify(value)}</span>`;
      panel.appendChild(entry);
      panel.scrollTop = panel.scrollHeight;
    }

    // 测试1: 详细日志记录
    const picker1 = document.getElementById('range1');
    const start1 = document.getElementById('start1');
    const end1 = document.getElementById('end1');
    const panel1 = document.getElementById('panel1');

    picker1.addEventListener('ldesignChange', (e) => {
      addLog('log1', 'Change', e.detail);
      if (e.detail && typeof e.detail === 'object') {
        start1.textContent = e.detail.start || '未选择';
        end1.textContent = e.detail.end || '未选择';
      }
    });

    picker1.addEventListener('ldesignPick', (e) => {
      addLog('log1', 'Pick', e.detail);
    });

    picker1.addEventListener('ldesignOpen', () => {
      addLog('log1', 'Open', '选择器已打开');
      panel1.textContent = '开始时间';
      panel1.className = 'status status-success';
    });

    picker1.addEventListener('ldesignClose', () => {
      addLog('log1', 'Close', '选择器已关闭');
      panel1.textContent = '已关闭';
      panel1.className = 'status status-info';
    });

    // 测试2: 带确认的范围选择
    const picker2 = document.getElementById('range2');
    const result2 = document.getElementById('range2-result');

    picker2.addEventListener('ldesignChange', (e) => {
      if (e.detail && typeof e.detail === 'object') {
        result2.textContent = `${e.detail.start || '--:--'} 至 ${e.detail.end || '--:--'}`;
      } else {
        result2.textContent = '未选择';
      }
      console.log('Range2 change:', e.detail);
    });

    // 测试3: 即时生效
    const picker3 = document.getElementById('range3');
    const result3 = document.getElementById('range3-result');

    picker3.addEventListener('ldesignChange', (e) => {
      if (e.detail && typeof e.detail === 'object') {
        result3.textContent = `${e.detail.start || '--:--:--'} ~ ${e.detail.end || '--:--:--'}`;
        result3.style.color = '#28a745';
      } else {
        result3.textContent = '未选择';
        result3.style.color = '#666';
      }
    });

    // 测试4: 12小时制
    const picker4 = document.getElementById('range4');
    const result4 = document.getElementById('range4-result');

    picker4.addEventListener('ldesignChange', (e) => {
      if (e.detail && typeof e.detail === 'object') {
        result4.textContent = `${e.detail.start} to ${e.detail.end}`;
      } else {
        result4.textContent = '未选择';
      }
    });

    // 测试5: 带限制
    const picker5 = document.getElementById('range5');
    const result5 = document.getElementById('range5-result');

    picker5.addEventListener('ldesignChange', (e) => {
      if (e.detail && typeof e.detail === 'object') {
        result5.textContent = `${e.detail.start} - ${e.detail.end}`;
      } else {
        result5.textContent = '未选择';
      }
    });

    // 程序化设置测试
    setTimeout(() => {
      console.log('程序化设置range2的初始值');
      const picker = document.getElementById('range2');
      picker.startValue = '09:00';
      picker.endValue = '17:30';
    }, 1000);

    console.log('时间范围选择器测试页面已加载');
    console.log('可以测试以下功能:');
    console.log('1. 切换开始/结束时间面板');
    console.log('2. 独立设置开始和结束时间');
    console.log('3. 即时生效模式');
    console.log('4. 12小时制范围选择');
    console.log('5. 时间限制和步进');
  </script>
</body>
</html>