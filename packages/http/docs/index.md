---
layout: home

hero:
 name: '@ldesign/http'
 text: 'å¼ºå¤§çš„ TypeScript HTTP å®¢æˆ·ç«¯'
 tagline: 'ç±»å‹å®‰å…¨ â€¢ å¤šé€‚é…å™¨ â€¢ æ™ºèƒ½é‡è¯• â€¢ é“¾è·¯è¿½è¸ª â€¢ Vue é›†æˆ
 actions:
  - theme: brand
   text: å¿«é€Ÿå¼€å§‹
   link: /guide/quick-start
  - theme: alt
   text: æŸ¥çœ‹ç¤ºä¾‹
   link: /examples/
  - theme: alt
   text: GitHub
   link: https://github.com/ldesign-lab/ldesign

features:
 - icon: ğŸš€
  title: é›¶é…ç½®å¼€å§‹
  details: å¼€ç®±å³ç”¨ï¼Œæ— éœ€å¤æ‚é…ç½®ã€‚åŒæ—¶æ”¯æŒ Fetchã€Axiosã€Alova ä¸‰ç§é€‚é…å™¨ï¼Œè‡ªåŠ¨é€‰æ‹©æœ€ä½³æ–¹æ¡ˆã€‚

 - icon: ğŸ¯
  title: å®Œæ•´ TypeScript æ”¯æŒ
  details: å…¨é¢çš„ç±»å‹å®šä¹‰å’Œç±»å‹æ¨å¯¼ï¼Œæ™ºèƒ½ä»£ç æç¤ºï¼Œç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥ï¼Œè®©ä½ çš„ä»£ç æ›´å®‰å…¨ã€‚

 - icon: âš¡
  title: æ™ºèƒ½é‡è¯•ç­–ç•¥
  details: æ ¹æ® HTTP çŠ¶æ€ç å’Œé”™è¯¯ç±»å‹æ™ºèƒ½å†³å®šé‡è¯•ç­–ç•¥ï¼Œæ”¯æŒæŒ‡æ•°é€€é¿ã€çº¿æ€§é€€é¿ç­‰å¤šç§ç­–ç•¥ã€‚

 - icon: ğŸ”
  title: è¯·æ±‚é“¾è·¯è¿½è¸ª
  details: å®Œæ•´çš„ trace ç³»ç»Ÿï¼Œç”Ÿæˆ trace ID å’Œ span IDï¼Œè½»æ¾è¿½è¸ªè¯·æ±‚å…¨é“¾è·¯ï¼Œå¿«é€Ÿå®šä½é—®é¢˜ã€‚

 - icon: ğŸ“¡
  title: ç½‘ç»œçŠ¶æ€æ„ŸçŸ¥
  details: å®æ—¶ç›‘å¬ç½‘ç»œçŠ¶æ€å˜åŒ–ï¼Œç¦»çº¿æ—¶è‡ªåŠ¨æš‚åœè¯·æ±‚ï¼Œåœ¨çº¿æ—¶è‡ªåŠ¨é‡è¯•ï¼Œæ™ºèƒ½åˆ¤æ–­ç½‘ç»œè´¨é‡ã€‚

 - icon: ğŸ”„
  title: è‡ªåŠ¨æ•°æ®è½¬æ¢
  details: è‡ªåŠ¨è½¬æ¢æ—¥æœŸå­—ç¬¦ä¸²ä¸º Date å¯¹è±¡ï¼Œå¤§æ•°å­—è½¬ BigIntï¼Œnull/undefined è½¬æ¢ï¼Œå¼€å‘æ›´ä¾¿æ·ã€‚

 - icon: ğŸ’¾
  title: å¼ºå¤§çš„ç¼“å­˜ç³»ç»Ÿ
  details: æ”¯æŒå†…å­˜ç¼“å­˜å’Œ LocalStorage ç¼“å­˜ï¼Œè‡ªåŠ¨å»é‡ç›¸åŒè¯·æ±‚ï¼ŒLRU ç­–ç•¥ï¼Œè¿‡æœŸæ—¶é—´æ§åˆ¶ã€‚

 - icon: ğŸª
  title: ä¹è§‚æ›´æ–°
  details: å…ˆæ›´æ–° UIï¼Œåå‘è¯·æ±‚ï¼Œå¤±è´¥è‡ªåŠ¨å›æ»šã€‚æä¾›åˆ—è¡¨ä¸“ç”¨çš„ useOptimisticListï¼Œå¢åˆ æ”¹å¼€ç®±å³ç”¨ã€‚

 - icon: ğŸ”Œ
  title: ä¸°å¯Œçš„æ‹¦æˆªå™¨
  details: å†…ç½® 10+ ç§å¸¸ç”¨æ‹¦æˆªå™¨ï¼šè®¤è¯ã€æ—¥å¿—ã€é‡è¯•ã€ç¼“å­˜ã€è¶…æ—¶ç­‰ï¼Œè½»æ¾æ‰©å±•è‡ªå®šä¹‰æ‹¦æˆªå™¨ã€‚

 - icon: ğŸ“¦
  title: Vue 3 æ·±åº¦é›†æˆ
  details: æä¾› 20+ ä¸ª Composablesï¼ŒuseGetã€usePostã€usePollingã€useNetworkStatus ç­‰ï¼Œå¼€å‘ä½“éªŒæä½³ã€‚

 - icon: ğŸŒ
  title: GraphQL & WebSocket
  details: ä¸ä»…æ”¯æŒ RESTful APIï¼Œè¿˜å†…ç½® GraphQL å®¢æˆ·ç«¯å’Œ WebSocket æ”¯æŒï¼Œæ»¡è¶³å„ç§åœºæ™¯éœ€æ±‚ã€‚

 - icon: ğŸ“Š
  title: æ€§èƒ½ç›‘æ§
  details: å†…ç½®è¯·æ±‚ç›‘æ§ã€æ€§èƒ½ç»Ÿè®¡ã€DevTools é›†æˆï¼Œå®æ—¶æŸ¥çœ‹è¯·æ±‚çŠ¶æ€ã€è€—æ—¶ã€é”™è¯¯ç‡ç­‰æŒ‡æ ‡ã€‚
---

## å¿«é€Ÿä½“éªŒ

### å®‰è£…

::: code-group
```bash [pnpm]
pnpm add @ldesign/http
```

```bash [npm]
npm install @ldesign/http
```

```bash [yarn]
yarn add @ldesign/http
```
:::

### åŸºç¡€ä½¿ç”¨

```typescript
import { createHttpClient } from '@ldesign/http'

// åˆ›å»ºå®¢æˆ·ç«¯
const client = createHttpClient({
 baseURL: 'https://api.example.com',
})

// å‘èµ·è¯·æ±‚
const response = await client.get('/users')
console.log(response.data)
```

### Vue é›†æˆ

```vue
<script setup lang="ts">
import { useGet, usePost } from '@ldesign/http'

// GET è¯·æ±‚ - è‡ªåŠ¨æ‰§è¡Œ
const { data: users, loading, error } = useGet('/api/users')

// POST è¯·æ±‚ - æ‰‹åŠ¨è§¦å‘
const { execute: createUser } = usePost('/api/users', {}, { immediate: false })

async function handleCreate() {
 await createUser({ name: 'John', age: 25 })
}
</script>

<template>
 <div v-if="loading">åŠ è½½ä¸­...</div>
 <div v-else-if="error">é”™è¯¯: {{ error.message }}</div>
 <ul v-else>
  <li v-for="user in users" :key="user.id">{{ user.name }}</li>
 </ul>
 <button @click="handleCreate">æ·»åŠ ç”¨æˆ·</button>
</template>
```

## æ ¸å¿ƒç‰¹æ€§

### ğŸ¯ æ™ºèƒ½é‡è¯•

```typescript
import { createHttpClient, createSmartRetryInterceptor } from '@ldesign/http'

const client = createHttpClient()

// æ·»åŠ æ™ºèƒ½é‡è¯•æ‹¦æˆªå™¨
const retryInterceptor = createSmartRetryInterceptor({
 maxRetries: 3,
 checkNetworkStatus: true, // ç¦»çº¿æ—¶ä¸é‡è¯•
})

// ç°åœ¨æ‰€æœ‰è¯·æ±‚éƒ½ä¼šæ™ºèƒ½é‡è¯•
// - 429 Too Many Requests: æŒ‡æ•°é€€é¿é‡è¯•
// - 503 Service Unavailable: çº¿æ€§é€€é¿é‡è¯•
// - 504 Gateway Timeout: å›ºå®šå»¶è¿Ÿé‡è¯•
// - ç½‘ç»œé”™è¯¯: æŒ‡æ•°é€€é¿é‡è¯•
```

### ğŸ” é“¾è·¯è¿½è¸ª

```typescript
import { createHttpClient, createTraceInterceptor, consoleExporter } from '@ldesign/http'

const client = createHttpClient()

// æ·»åŠ è¿½è¸ªæ‹¦æˆªå™¨
const traceInterceptor = createTraceInterceptor({
 exporter: consoleExporter, // è¾“å‡ºåˆ°æ§åˆ¶å°
 propagateTraceId: true, // åœ¨ Header ä¸­ä¼ é€’ trace ID
})

// æ¯ä¸ªè¯·æ±‚éƒ½ä¼šç”Ÿæˆå”¯ä¸€çš„ trace ID
// ğŸ” Trace: trace-abc123-1634567890
//  âœ… GET /api/users (150ms)
//   Type: http
//   Tags: { http.method: 'GET', http.url: '/api/users', http.status: 200 }
```

### ğŸ“¡ ç½‘ç»œçŠ¶æ€æ„ŸçŸ¥

```vue
<script setup>
import { useNetworkStatus } from '@ldesign/http'

const {
 isOnline,
 isOffline,
 isSuitableForLargeTransfer,
 isWifi,
 isCellular,
 isMetered
} = useNetworkStatus()
</script>

<template>
 <div v-if="isOffline" class="alert alert-warning">
  âš ï¸ æ‚¨å½“å‰å¤„äºç¦»çº¿çŠ¶æ€
 </div>
 <div v-if="!isSuitableForLargeTransfer" class="alert alert-info">
  â„¹ï¸ å½“å‰ç½‘ç»œçŠ¶å†µä¸ä½³ï¼Œå»ºè®®ç¨åä¸Šä¼ æ–‡ä»¶
 </div>
 <div v-if="isMetered" class="alert alert-warning">
  ğŸ“± å½“å‰ä½¿ç”¨ç§»åŠ¨æ•°æ®ç½‘ç»œ
 </div>
</template>
```

### ğŸ”„ è‡ªåŠ¨æ•°æ®è½¬æ¢

```typescript
import { createHttpClient, createDataTransformInterceptor } from '@ldesign/http'

const client = createHttpClient()

// æ·»åŠ æ•°æ®è½¬æ¢æ‹¦æˆªå™¨
const transformInterceptor = createDataTransformInterceptor({
 transformDates: true,   // '2024-01-01T00:00:00Z' â†’ Date å¯¹è±¡
 transformBigInt: true,  // '9007199254740991' â†’ BigInt
 nullToUndefined: true,  // null â†’ undefined
})

// å“åº”æ•°æ®è‡ªåŠ¨è½¬æ¢
const response = await client.get('/api/user/123')
console.log(response.data.createdAt) // Date å¯¹è±¡ï¼Œè€Œä¸æ˜¯å­—ç¬¦ä¸²
console.log(response.data.balance)  // BigIntï¼Œè€Œä¸æ˜¯å­—ç¬¦ä¸²
```

### ğŸª ä¹è§‚æ›´æ–°

```typescript
import { useOptimisticList } from '@ldesign/http'

const todos = ref([])
const { add, update, remove } = useOptimisticList(client, todos)

// ç‚¹å‡»æ·»åŠ  - UI ç«‹å³æ˜¾ç¤ºï¼Œå¤±è´¥è‡ªåŠ¨å›æ»š
await add(
 { url: '/api/todos', method: 'POST', data: newTodo },
 newTodo
)

// ç‚¹å‡»åˆ é™¤ - UI ç«‹å³ç§»é™¤ï¼Œå¤±è´¥è‡ªåŠ¨æ¢å¤
await remove(
 { url: '/api/todos/1', method: 'DELETE' },
 1
)
```

### ğŸ“Š è½®è¯¢è¯·æ±‚

```vue
<script setup>
import { usePolling } from '@ldesign/http'

// æ¯3ç§’è½®è¯¢ä»»åŠ¡çŠ¶æ€ï¼Œç›´åˆ°å®Œæˆ
const { data: task, isPolling, stop } = usePolling(
 { url: '/api/tasks/123' },
 {
  interval: 3000,
  stopWhen: (task) => task.status === 'completed',
  pauseWhenHidden: true, // é¡µé¢ä¸å¯è§æ—¶æš‚åœ
  pauseWhenOffline: true, // ç¦»çº¿æ—¶æš‚åœ
 }
)
</script>

<template>
 <div>
  <div v-if="task">
   è¿›åº¦: {{ task.progress }}%
   <progress :value="task.progress" max="100" />
  </div>
  <button v-if="isPolling" @click="stop">åœæ­¢è½®è¯¢</button>
 </div>
</template>
```

## ä¸ºä»€ä¹ˆé€‰æ‹© @ldesign/httpï¼Ÿ

### vs Axios

| ç‰¹æ€§ | @ldesign/http | Axios |
|------|----------------|---------|
| TypeScript æ”¯æŒ | âœ… å®Œæ•´ | âš ï¸ åŸºç¡€ |
| é€‚é…å™¨ç³»ç»Ÿ | âœ… 3 ç§ | âŒ 1 ç§ |
| æ™ºèƒ½é‡è¯• | âœ… å†…ç½® | âŒ éœ€æ’ä»¶ |
| é“¾è·¯è¿½è¸ª | âœ… å†…ç½® | âŒ æ—  |
| ç½‘ç»œæ„ŸçŸ¥ | âœ… å†…ç½® | âŒ æ—  |
| æ•°æ®è½¬æ¢ | âœ… è‡ªåŠ¨ | âŒ æ‰‹åŠ¨ |
| Vue é›†æˆ | âœ… 20+ Hooks | âŒ æ—  |
| åŒ…å¤§å° | ~100KB | ~13KB |

### vs Fetch

| ç‰¹æ€§ | @ldesign/http | Fetch |
|------|----------------|---------|
| æ‹¦æˆªå™¨ | âœ… å†…ç½® | âŒ æ—  |
| é‡è¯• | âœ… æ™ºèƒ½ | âŒ æ—  |
| ç¼“å­˜ | âœ… é«˜çº§ | âš ï¸ ç®€å• |
| è¶…æ—¶ | âœ… å†…ç½® | âš ï¸ éœ€ AbortController |
| è¿›åº¦ | âœ… å†…ç½® | âš ï¸ å¤æ‚ |
| é”™è¯¯å¤„ç† | âœ… ç»Ÿä¸€ | âŒ ç¹ç |

## ç”Ÿæ€ç³»ç»Ÿ

- **[@ldesign/api](/packages/api)** - API å±‚å°è£…ï¼Œæä¾›æ’ä»¶åŒ–èƒ½åŠ›
- **[@ldesign/crypto](/packages/crypto)** - åŠ å¯†å·¥å…·åº“
- **[@ldesign/device](/packages/device)** - è®¾å¤‡ä¿¡æ¯æ£€æµ‹
- **[@ldesign/color](/packages/color)** - é¢œè‰²å¤„ç†å·¥å…·

## ç¤¾åŒº

- [GitHub ä»“åº“](https://github.com/ldesign-lab/ldesign)
- [é—®é¢˜åé¦ˆ](https://github.com/ldesign-lab/ldesign/issues)
- [å˜æ›´æ—¥å¿—](https://github.com/ldesign-lab/ldesign/blob/master/packages/http/CHANGELOG.md)

## è®¸å¯è¯

[MIT License](https://github.com/ldesign-lab/ldesign/blob/master/LICENSE) Â© 2024 LDesign Lab
