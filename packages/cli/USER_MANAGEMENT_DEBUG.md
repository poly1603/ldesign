# ç”¨æˆ·ç®¡ç†é—®é¢˜è¯Šæ–­æŒ‡å—

## ğŸ› é—®é¢˜æè¿°

æ·»åŠ ç”¨æˆ·ååˆ·æ–°é¡µé¢ç”¨æˆ·æ¶ˆå¤±äº†ã€‚

## ğŸ” å¯èƒ½çš„åŸå› 

### 1. **Verdaccio æ˜¯å¤–éƒ¨å¯åŠ¨çš„**
ä»æˆªå›¾çœ‹åˆ° "PID: å¤–éƒ¨ç®¡ç†"ï¼Œè¯´æ˜ Verdaccio ä¸æ˜¯é€šè¿‡æˆ‘ä»¬çš„ä»£ç å¯åŠ¨çš„ã€‚å¤–éƒ¨å¯åŠ¨çš„ Verdaccio å¯èƒ½ä½¿ç”¨ä¸åŒçš„é…ç½®æ–‡ä»¶å’Œ htpasswd è·¯å¾„ã€‚

### 2. **htpasswd æ–‡ä»¶è·¯å¾„ä¸åŒ¹é…**
æˆ‘ä»¬çš„ä»£ç å†™å…¥çš„è·¯å¾„ï¼š`~/.ldesign/verdaccio/htpasswd`
å¤–éƒ¨ Verdaccio è¯»å–çš„è·¯å¾„ï¼šå¯èƒ½æ˜¯å…¶ä»–ä½ç½®

### 3. **Verdaccio æ²¡æœ‰é‡æ–°åŠ è½½é…ç½®**
å³ä½¿ htpasswd æ–‡ä»¶æ›´æ–°äº†ï¼ŒVerdaccio ä¹Ÿéœ€è¦é‡å¯æ‰èƒ½è¯†åˆ«æ–°ç”¨æˆ·ã€‚

## ğŸ› ï¸ è¯Šæ–­æ­¥éª¤

### æ­¥éª¤ 1: æ£€æŸ¥ htpasswd æ–‡ä»¶

è¿è¡Œæµ‹è¯•è„šæœ¬ï¼š

```bash
node test-user-management.js
```

è¿™å°†æ˜¾ç¤ºï¼š
- htpasswd æ–‡ä»¶ä½ç½®
- æ–‡ä»¶æ˜¯å¦å­˜åœ¨
- æ–‡ä»¶å†…å®¹
- ç”¨æˆ·åˆ—è¡¨

### æ­¥éª¤ 2: æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—

å¯åŠ¨å¼€å‘æœåŠ¡å™¨å¹¶æ·»åŠ ç”¨æˆ·æ—¶ï¼ŒæŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºï¼š

```bash
pnpm run dev
```

ç°åœ¨æ—¥å¿—ä¼šæ˜¾ç¤ºï¼š
```
[Verdaccio] [æ·»åŠ ç”¨æˆ·] å¼€å§‹æ·»åŠ ç”¨æˆ·: testuser
[Verdaccio] [æ·»åŠ ç”¨æˆ·] htpasswd æ–‡ä»¶è·¯å¾„: C:\Users\swiml\.ldesign\verdaccio\htpasswd
[Verdaccio] [æ·»åŠ ç”¨æˆ·] é…ç½®ç›®å½•: C:\Users\swiml\.ldesign\verdaccio
[Verdaccio] [æ·»åŠ ç”¨æˆ·] é…ç½®æ–‡ä»¶: C:\Users\swiml\.ldesign\verdaccio\config.yaml
[Verdaccio] [æ·»åŠ ç”¨æˆ·] å½“å‰ç”¨æˆ·æ•°: 0
[Verdaccio] [æ·»åŠ ç”¨æˆ·] å‡†å¤‡å†™å…¥ï¼Œæ€»ç”¨æˆ·æ•°: 1
[Verdaccio] [æ·»åŠ ç”¨æˆ·] htpasswd æ–‡ä»¶å†…å®¹:
testuser:{SHA256}xxxxx
[Verdaccio] [æ·»åŠ ç”¨æˆ·] ç”¨æˆ·å·²æ·»åŠ : testuser
```

### æ­¥éª¤ 3: æ£€æŸ¥ Verdaccio é…ç½®

æ‰¾åˆ° Verdaccio ä½¿ç”¨çš„é…ç½®æ–‡ä»¶ï¼š

```bash
# å¦‚æœ Verdaccio æ­£åœ¨è¿è¡Œï¼ŒæŸ¥çœ‹è¿›ç¨‹
Get-Process | Where-Object { $_.Name -like "*verdaccio*" -or $_.Name -like "*node*" }

# æŸ¥çœ‹å¯èƒ½çš„é…ç½®æ–‡ä»¶ä½ç½®
Get-ChildItem -Path "$env:USERPROFILE\.config\verdaccio" -Recurse -ErrorAction SilentlyContinue
Get-ChildItem -Path "$env:USERPROFILE\.verdaccio" -Recurse -ErrorAction SilentlyContinue
Get-ChildItem -Path "$env:USERPROFILE\.ldesign\verdaccio" -Recurse -ErrorAction SilentlyContinue
```

### æ­¥éª¤ 4: æ‰‹åŠ¨éªŒè¯æ–‡ä»¶å†™å…¥

1. é€šè¿‡ UI æ·»åŠ ä¸€ä¸ªæµ‹è¯•ç”¨æˆ·ï¼ˆå¦‚ï¼š`testuser`ï¼‰
2. ç«‹å³è¿è¡Œæµ‹è¯•è„šæœ¬æŸ¥çœ‹æ–‡ä»¶å†…å®¹
3. åˆ·æ–°é¡µé¢å‰å…ˆæŸ¥çœ‹æ—¥å¿—è¾“å‡º

## ğŸ”§ è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1: ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„ Verdaccio å®ä¾‹ âœ…

**åœæ­¢å¤–éƒ¨ Verdaccioï¼Œä½¿ç”¨æˆ‘ä»¬çš„ä»£ç å¯åŠ¨ï¼š**

1. åœæ­¢å¤–éƒ¨ Verdaccio è¿›ç¨‹ï¼š
   ```bash
   # æŸ¥æ‰¾ Verdaccio è¿›ç¨‹
   Get-Process | Where-Object { $_.Name -like "*verdaccio*" -or $_.Name -like "*node*" }
   
   # åœæ­¢è¿›ç¨‹ï¼ˆæ›¿æ¢ PIDï¼‰
   Stop-Process -Id <PID> -Force
   ```

2. åœ¨ç§æœ‰åŒ…ç®¡ç†é¡µé¢ç‚¹å‡»"å¯åŠ¨æœåŠ¡"æŒ‰é’®

3. ç¡®ä¿çœ‹åˆ° PID æ˜¾ç¤ºå…·ä½“æ•°å­—è€Œä¸æ˜¯"å¤–éƒ¨ç®¡ç†"

### æ–¹æ¡ˆ 2: é‡å¯ Verdaccio æœåŠ¡ âœ…

æ·»åŠ ç”¨æˆ·åï¼Œ**å¿…é¡»é‡å¯ Verdaccio æœåŠ¡**æ‰èƒ½è®©æ–°ç”¨æˆ·ç”Ÿæ•ˆï¼š

1. åœ¨ç§æœ‰åŒ…ç®¡ç†é¡µé¢ç‚¹å‡»"é‡å¯"æŒ‰é’®
2. ç­‰å¾…æœåŠ¡é‡å¯å®Œæˆ
3. åˆ·æ–°ç”¨æˆ·åˆ—è¡¨

### æ–¹æ¡ˆ 3: ä¿®æ”¹ä»£ç è‡ªåŠ¨é‡å¯ Verdaccio

æˆ‘å¯ä»¥ä¿®æ”¹ä»£ç ï¼Œè®©æ·»åŠ /åˆ é™¤/ä¿®æ”¹ç”¨æˆ·åè‡ªåŠ¨é‡å¯ Verdaccio æœåŠ¡ã€‚

## ğŸ“‹ éªŒè¯æ¸…å•

å®Œæˆä»¥ä¸‹æ­¥éª¤ä»¥ç¡®è®¤é—®é¢˜å·²è§£å†³ï¼š

- [ ] åœæ­¢æ‰€æœ‰å¤–éƒ¨ Verdaccio è¿›ç¨‹
- [ ] é€šè¿‡ UI å¯åŠ¨ Verdaccioï¼ˆç¡®ä¿ PID æ˜¾ç¤ºæ•°å­—ï¼‰
- [ ] æ·»åŠ æµ‹è¯•ç”¨æˆ·
- [ ] è¿è¡Œ `node test-user-management.js` ç¡®è®¤æ–‡ä»¶å·²å†™å…¥
- [ ] é‡å¯ Verdaccio æœåŠ¡
- [ ] åˆ·æ–°ç”¨æˆ·åˆ—è¡¨ï¼Œç¡®è®¤ç”¨æˆ·ä»ç„¶å­˜åœ¨
- [ ] å°è¯•ç”¨æ–°ç”¨æˆ·ç™»å½•ï¼š
  ```bash
  npm adduser --registry http://127.0.0.1:4873
  ```

## ğŸ¯ é¢„æœŸè¡Œä¸º

æ­£ç¡®çš„æµç¨‹åº”è¯¥æ˜¯ï¼š

1. **æ·»åŠ ç”¨æˆ·** â†’ htpasswd æ–‡ä»¶ç«‹å³æ›´æ–°
2. **é‡å¯ Verdaccio** â†’ æœåŠ¡è¯»å–æ–°çš„ htpasswd æ–‡ä»¶
3. **åˆ·æ–°é¡µé¢** â†’ ç”¨æˆ·åˆ—è¡¨æ˜¾ç¤ºæ–°ç”¨æˆ·
4. **npm ç™»å½•** â†’ å¯ä»¥ä½¿ç”¨æ–°ç”¨æˆ·ç™»å½•

## ğŸ“Š è°ƒè¯•ä¿¡æ¯æ”¶é›†

å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œè¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š

1. **æµ‹è¯•è„šæœ¬è¾“å‡º**ï¼š
   ```bash
   node test-user-management.js
   ```

2. **æ·»åŠ ç”¨æˆ·æ—¶çš„æ—¥å¿—**ï¼ˆä»å¼€å‘æœåŠ¡å™¨æ§åˆ¶å°å¤åˆ¶ï¼‰

3. **Verdaccio è¿›ç¨‹ä¿¡æ¯**ï¼š
   ```bash
   Get-Process | Where-Object { $_.Name -like "*node*" } | Select-Object Id, Name, Path
   ```

4. **é…ç½®æ–‡ä»¶å†…å®¹**ï¼š
   ```bash
   Get-Content "$env:USERPROFILE\.ldesign\verdaccio\config.yaml"
   ```

5. **htpasswd æ–‡ä»¶å†…å®¹**ï¼š
   ```bash
   Get-Content "$env:USERPROFILE\.ldesign\verdaccio\htpasswd"
   ```

## ğŸ’¡ ä¸´æ—¶è§£å†³æ–¹æ¡ˆ

åœ¨é—®é¢˜å½»åº•è§£å†³å‰ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š

1. **æ¯æ¬¡æ·»åŠ ç”¨æˆ·åæ‰‹åŠ¨é‡å¯ Verdaccio**
2. **ä½¿ç”¨å‘½ä»¤è¡Œæ·»åŠ ç”¨æˆ·**ï¼š
   ```bash
   npm adduser --registry http://127.0.0.1:4873
   ```

## ğŸ”„ ä¸‹ä¸€æ­¥ä¼˜åŒ–

æˆ‘ä¼šè¿›è¡Œä»¥ä¸‹æ”¹è¿›ï¼š

1. âœ… æ·»åŠ è¯¦ç»†çš„è°ƒè¯•æ—¥å¿—ï¼ˆå·²å®Œæˆï¼‰
2. âœ… ä½¿ç”¨ç»å¯¹è·¯å¾„é…ç½® htpasswdï¼ˆå·²å®Œæˆï¼‰
3. ğŸ”„ æ·»åŠ ç”¨æˆ·åè‡ªåŠ¨é‡å¯ Verdaccioï¼ˆå¾…å®ç°ï¼‰
4. ğŸ”„ æ·»åŠ "é‡æ–°åŠ è½½é…ç½®"åŠŸèƒ½ï¼ˆå¾…å®ç°ï¼‰
5. ğŸ”„ æ£€æµ‹ htpasswd æ–‡ä»¶å˜åŒ–å¹¶æç¤ºç”¨æˆ·é‡å¯ï¼ˆå¾…å®ç°ï¼‰

---

è¯·å…ˆå°è¯•**æ–¹æ¡ˆ 1 å’Œæ–¹æ¡ˆ 2**ï¼Œç„¶åå‘Šè¯‰æˆ‘ç»“æœã€‚å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œæˆ‘ä¼šç»§ç»­ä¼˜åŒ–ä»£ç ã€‚
