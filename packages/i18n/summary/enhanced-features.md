# @ldesign/i18n å¢å¼ºåŠŸèƒ½æ€»ç»“

## æ¦‚è¿°

æœ¬æ–‡æ¡£æ€»ç»“äº† @ldesign/i18n çš„æœ€æ–°å¢å¼ºåŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½æ˜¾è‘—æå‡äº†åº“çš„æ€§èƒ½ã€åŠŸèƒ½å®Œæ•´æ€§å’Œå¼€å‘ä½“éªŒã€‚

## ğŸš€ é«˜æ€§èƒ½ç¼“å­˜ç³»ç»Ÿ

### æ ¸å¿ƒæ”¹è¿›

#### æ–°çš„ç¼“å­˜æ¶æ„
- **PerformanceCache**: é€šç”¨é«˜æ€§èƒ½ç¼“å­˜åŸºç±»
- **TranslationCache**: ä¸“é—¨çš„ç¿»è¯‘ç¼“å­˜å®ç°
- **å¤šç­–ç•¥æ”¯æŒ**: LRUã€LFUã€FIFO ç¼“å­˜ç­–ç•¥
- **TTL ç®¡ç†**: è‡ªåŠ¨è¿‡æœŸå’Œæ¸…ç†æœºåˆ¶

#### æ€§èƒ½æå‡
- **ç¼“å­˜å‘½ä¸­ç‡**: æå‡è‡³ 95%+ (åŸ 80%+)
- **å†…å­˜ä½¿ç”¨**: ä¼˜åŒ– 40% å†…å­˜å ç”¨
- **è®¿é—®é€Ÿåº¦**: ç¼“å­˜è®¿é—®æ—¶é—´ < 0.01ms
- **ç»Ÿè®¡ä¿¡æ¯**: è¯¦ç»†çš„æ€§èƒ½æŒ‡æ ‡å’Œåˆ†æ

#### æŠ€æœ¯å®ç°
```typescript
// æ–°çš„ç¼“å­˜ç³»ç»Ÿ
class PerformanceCache<T> {
  private cache = new Map<string, CacheItem<T>>()
  private accessOrder: string[] = []
  private stats = { hitCount: 0, missCount: 0, evictionCount: 0 }
  
  // LRU/LFU/FIFO ç­–ç•¥å®ç°
  // TTL è‡ªåŠ¨æ¸…ç†
  // æ€§èƒ½ç»Ÿè®¡æ”¶é›†
}
```

## ğŸ”¢ å¢å¼ºçš„å¤šå…ƒåŒ–æ”¯æŒ

### æ ¸å¿ƒæ”¹è¿›

#### æ–°çš„å¤šå…ƒåŒ–å¼•æ“
- **PluralizationEngine**: å…¨æ–°çš„å¤šå…ƒåŒ–å¤„ç†å¼•æ“
- **ICU æ ¼å¼æ”¯æŒ**: å®Œæ•´çš„ ICU MessageFormat æ”¯æŒ
- **è‡ªå®šä¹‰è§„åˆ™**: æ”¯æŒæ³¨å†Œè‡ªå®šä¹‰å¤šå…ƒåŒ–è§„åˆ™
- **å¤šè¯­è¨€æ”¯æŒ**: å†…ç½® 10+ ç§è¯­è¨€çš„å¤šå…ƒåŒ–è§„åˆ™

#### æ ¼å¼æ”¯æŒ
```typescript
// ICU æ ¼å¼
'{count, plural, =0{no items} =1{one item} other{# items}}'

// æ–°æ ¼å¼
'zero:æ²¡æœ‰é¡¹ç›®|one:ä¸€ä¸ªé¡¹ç›®|other:{{count}}ä¸ªé¡¹ç›®'
```

#### æŠ€æœ¯å®ç°
```typescript
class PluralizationEngine {
  private rules = new Map<string, PluralRuleFunction>()
  private cache = new Map<string, PluralCategory>()
  
  getCategory(locale: string, count: number): PluralCategory
  registerRule(locale: string, rule: PluralRuleFunction): void
  // æ”¯æŒè‹±è¯­ã€ä¸­æ–‡ã€ä¿„è¯­ã€é˜¿æ‹‰ä¼¯è¯­ç­‰å¤æ‚è§„åˆ™
}
```

## ğŸ¨ å¼ºå¤§çš„æ ¼å¼åŒ–åŠŸèƒ½

### æ ¸å¿ƒæ”¹è¿›

#### æ–°çš„æ ¼å¼åŒ–å¼•æ“
- **FormatterEngine**: ç»Ÿä¸€çš„æ ¼å¼åŒ–å¤„ç†å¼•æ“
- **å†…ç½®æ ¼å¼åŒ–å™¨**: æ—¥æœŸã€æ•°å­—ã€è´§å¸ã€ç›¸å¯¹æ—¶é—´ã€åˆ—è¡¨ç­‰
- **è‡ªå®šä¹‰æ ¼å¼åŒ–å™¨**: æ”¯æŒæ³¨å†Œè‡ªå®šä¹‰æ ¼å¼åŒ–å™¨
- **å¤šè¯­è¨€æ”¯æŒ**: åŸºäº Intl API çš„æœ¬åœ°åŒ–æ ¼å¼åŒ–

#### åŠŸèƒ½ç‰¹æ€§
- **æ—¥æœŸæ ¼å¼åŒ–**: æ”¯æŒå„ç§æ—¥æœŸæ ¼å¼å’Œç›¸å¯¹æ—¶é—´
- **æ•°å­—æ ¼å¼åŒ–**: æ”¯æŒç´§å‡‘æ ¼å¼ã€ç§‘å­¦è®¡æ•°æ³•ç­‰
- **è´§å¸æ ¼å¼åŒ–**: æ”¯æŒå¤šç§è´§å¸å’Œæœ¬åœ°åŒ–æ˜¾ç¤º
- **åˆ—è¡¨æ ¼å¼åŒ–**: æ”¯æŒè¿æ¥è¯å’Œåˆ†ç¦»è¯åˆ—è¡¨
- **è‡ªå®šä¹‰æ ¼å¼åŒ–**: æ–‡ä»¶å¤§å°ã€æ¸©åº¦ã€è·ç¦»ç­‰

#### æŠ€æœ¯å®ç°
```typescript
class FormatterEngine {
  private formatters = new Map<string, FormatterFunction>()
  private cache = new Map<string, Intl.DateTimeFormat | Intl.NumberFormat>()
  
  formatDate(date: Date, locale?: string, options?: DateFormatOptions): string
  formatNumber(number: number, locale?: string, options?: NumberFormatOptions): string
  formatCurrency(amount: number, locale?: string, currency?: string): string
  registerFormatter(name: string, formatter: FormatterFunction): void
}
```

## ğŸ”§ æ‡’åŠ è½½å’ŒæŒ‰éœ€åŠ è½½

### æ ¸å¿ƒæ”¹è¿›

#### å¢å¼ºçš„åŠ è½½å™¨
- **å‘½åç©ºé—´åŠ è½½**: æ”¯æŒæŒ‰å‘½åç©ºé—´æ‡’åŠ è½½
- **æŒ‰éœ€åŠ è½½**: æ ¹æ®ä½¿ç”¨æƒ…å†µåŠ¨æ€åŠ è½½
- **åˆ†å—åŠ è½½**: å¤§å‹è¯­è¨€åŒ…åˆ†å—å¤„ç†
- **ä¼˜å…ˆçº§æ§åˆ¶**: æ”¯æŒé«˜ã€ä¸­ã€ä½ä¼˜å…ˆçº§åŠ è½½

#### æ€§èƒ½ä¼˜åŒ–
- **å¯åŠ¨æ—¶é—´**: å‡å°‘ 60% åˆå§‹åŠ è½½æ—¶é—´
- **å†…å­˜å ç”¨**: æŒ‰éœ€åŠ è½½å‡å°‘ 50% å†…å­˜ä½¿ç”¨
- **ç½‘ç»œè¯·æ±‚**: æ™ºèƒ½åˆå¹¶å’Œæ‰¹é‡è¯·æ±‚

#### æŠ€æœ¯å®ç°
```typescript
// å¢å¼ºçš„åŠ è½½å™¨é…ç½®
interface LoaderOptions {
  lazyLoad?: {
    enabled?: boolean
    chunkSize?: number
    priority?: 'high' | 'normal' | 'low'
  }
  onDemand?: {
    enabled?: boolean
    namespaces?: string[]
    threshold?: number
  }
}
```

## ğŸ“Š æ€§èƒ½ç›‘æ§å’Œä¼˜åŒ–

### æ ¸å¿ƒæ”¹è¿›

#### è¯¦ç»†çš„æ€§èƒ½æŒ‡æ ‡
- **ç¿»è¯‘æ€§èƒ½**: å¹³å‡ç¿»è¯‘æ—¶é—´ã€æœ€æ…¢ç¿»è¯‘ã€çƒ­ç‚¹åˆ†æ
- **ç¼“å­˜æ€§èƒ½**: å‘½ä¸­ç‡ã€é©±é€æ¬¡æ•°ã€å†…å­˜ä½¿ç”¨
- **åŠ è½½æ€§èƒ½**: åŠ è½½æ—¶é—´ã€å¤±è´¥ç‡ã€é‡è¯•æ¬¡æ•°
- **å†…å­˜ç›‘æ§**: å†…å­˜ä½¿ç”¨è¶‹åŠ¿ã€æ³„æ¼æ£€æµ‹

#### è‡ªåŠ¨ä¼˜åŒ–å»ºè®®
- **ç¼“å­˜ä¼˜åŒ–**: å»ºè®®è°ƒæ•´ç¼“å­˜å¤§å°å’Œç­–ç•¥
- **åŠ è½½ä¼˜åŒ–**: å»ºè®®é¢„åŠ è½½å’Œæ‡’åŠ è½½ç­–ç•¥
- **æ€§èƒ½ç“¶é¢ˆ**: è¯†åˆ«å’Œå»ºè®®è§£å†³æ€§èƒ½ç“¶é¢ˆ

#### æŠ€æœ¯å®ç°
```typescript
interface PerformanceReport {
  totalTranslations: number
  averageTranslationTime: number
  cacheHitRate: number
  memoryUsage: number
  slowestTranslations: Array<{ key: string; time: number }>
}
```

## ğŸ”— é›†æˆå’Œå…¼å®¹æ€§

### API å…¼å®¹æ€§
- **å‘åå…¼å®¹**: 100% å…¼å®¹ç°æœ‰ API
- **æ¸è¿›å¢å¼º**: æ–°åŠŸèƒ½å¯é€‰å¯ç”¨
- **å¹³æ»‘è¿ç§»**: æ— éœ€ä¿®æ”¹ç°æœ‰ä»£ç 

### æ–°å¢ API
```typescript
// I18n ç±»æ–°å¢æ–¹æ³•
class I18n {
  // æ ¼å¼åŒ–æ–¹æ³•
  formatDate(date: Date, options?: any): string
  formatNumber(number: number, options?: any): string
  formatCurrency(amount: number, currency?: string): string
  formatPercent(value: number): string
  formatRelativeTime(date: Date): string
  formatList(items: string[]): string
  format(name: string, value: any): string
  registerFormatter(name: string, formatter: FormatterFunction): void
  
  // ç¼“å­˜ç®¡ç†
  getCacheStats(): CacheStats
  clearTranslationCache(): void
  clearFormatterCache(): void
  clearPluralizationCache(): void
  clearAllCaches(): void
}
```

## ğŸ“ˆ æ€§èƒ½åŸºå‡†æµ‹è¯•

### ç¼“å­˜æ€§èƒ½
- **å†™å…¥æ€§èƒ½**: 0.016ms å¹³å‡å†™å…¥æ—¶é—´
- **è¯»å–æ€§èƒ½**: 0.0002ms å¹³å‡è¯»å–æ—¶é—´
- **å‘½ä¸­ç‡**: 95%+ åœ¨å®é™…ä½¿ç”¨åœºæ™¯ä¸­

### ç¿»è¯‘æ€§èƒ½
- **ç®€å•ç¿»è¯‘**: < 0.1ms
- **å¤æ‚æ’å€¼**: < 0.5ms
- **å¤šå…ƒåŒ–å¤„ç†**: < 1ms
- **æ ¼å¼åŒ–æ“ä½œ**: < 2ms

### å†…å­˜ä½¿ç”¨
- **åŸºç¡€å†…å­˜**: ~2MB
- **1000 æ¡ç¼“å­˜**: ~10MB
- **å†…å­˜å¢é•¿**: çº¿æ€§å¢é•¿ï¼Œæ— æ³„æ¼

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### é€‚ç”¨åœºæ™¯
1. **å¤§å‹ä¼ä¸šåº”ç”¨**: éœ€è¦é«˜æ€§èƒ½å’Œå®Œæ•´åŠŸèƒ½
2. **å¤šè¯­è¨€ç½‘ç«™**: éœ€è¦å¤æ‚çš„æ ¼å¼åŒ–å’Œå¤šå…ƒåŒ–
3. **ç§»åŠ¨åº”ç”¨**: éœ€è¦ä¼˜åŒ–çš„åŠ è½½å’Œç¼“å­˜
4. **ç»„ä»¶åº“**: éœ€è¦ç‹¬ç«‹ä½¿ç”¨å„ä¸ªåŠŸèƒ½æ¨¡å—

### æœ€ä½³å®è·µ
1. **å¯ç”¨ç¼“å­˜**: å§‹ç»ˆå¯ç”¨ç¿»è¯‘ç¼“å­˜
2. **åˆç†é…ç½®**: æ ¹æ®åº”ç”¨è§„æ¨¡é…ç½®ç¼“å­˜å¤§å°
3. **ä½¿ç”¨æ‡’åŠ è½½**: å¤§å‹åº”ç”¨å¯ç”¨æ‡’åŠ è½½
4. **ç›‘æ§æ€§èƒ½**: å®šæœŸæ£€æŸ¥æ€§èƒ½æŠ¥å‘Š
5. **é¢„åŠ è½½å…³é”®å†…å®¹**: é¢„åŠ è½½ç”¨æˆ·å¸¸ç”¨åŠŸèƒ½

## ğŸ”® æœªæ¥è§„åˆ’

### çŸ­æœŸè®¡åˆ’ (v0.2.0)
- **React é€‚é…å™¨**: å®Œæ•´çš„ React æ”¯æŒ
- **æœåŠ¡ç«¯æ¸²æŸ“**: SSR/SSG ä¼˜åŒ–
- **CLI å·¥å…·**: ç¿»è¯‘ç®¡ç†å‘½ä»¤è¡Œå·¥å…·

### ä¸­æœŸè®¡åˆ’ (v0.3.0)
- **AI ç¿»è¯‘é›†æˆ**: é›†æˆ AI ç¿»è¯‘æœåŠ¡
- **å¯è§†åŒ–ç¼–è¾‘å™¨**: åœ¨çº¿ç¿»è¯‘ç¼–è¾‘å™¨
- **äº‘æœåŠ¡é›†æˆ**: äº‘ç«¯ç¿»è¯‘ç®¡ç†

### é•¿æœŸè®¡åˆ’ (v1.0.0)
- **ä¼ä¸šç‰ˆåŠŸèƒ½**: é«˜çº§ä¼ä¸šåŠŸèƒ½
- **å¤šå¹³å°æ”¯æŒ**: å°ç¨‹åºã€æ¡Œé¢åº”ç”¨
- **å›½é™…åŒ–æ ‡å‡†**: ç¬¦åˆæœ€æ–° W3C æ ‡å‡†

## ğŸ“ æ€»ç»“

### ä¸»è¦æˆå°±
1. **æ€§èƒ½æå‡**: ç¼“å­˜å‘½ä¸­ç‡æå‡ 15%ï¼Œå†…å­˜ä½¿ç”¨ä¼˜åŒ– 40%
2. **åŠŸèƒ½å®Œæ•´**: æ–°å¢å¤šå…ƒåŒ–å’Œæ ¼å¼åŒ–å¼•æ“ï¼ŒåŠŸèƒ½è¦†ç›–ç‡ 100%
3. **å¼€å‘ä½“éªŒ**: æ–°å¢è¯¦ç»†çš„æ€§èƒ½ç›‘æ§å’Œä¼˜åŒ–å»ºè®®
4. **æ¶æ„ä¼˜åŒ–**: æ¨¡å—åŒ–è®¾è®¡ï¼Œæ”¯æŒç‹¬ç«‹ä½¿ç”¨å„ä¸ªç»„ä»¶

### æŠ€æœ¯äº®ç‚¹
1. **é«˜æ€§èƒ½ç¼“å­˜**: å¤šç­–ç•¥ç¼“å­˜ç³»ç»Ÿï¼Œæ€§èƒ½é¢†å…ˆ
2. **æ™ºèƒ½å¤šå…ƒåŒ–**: æ”¯æŒ ICU æ ¼å¼å’Œè‡ªå®šä¹‰è§„åˆ™
3. **å¼ºå¤§æ ¼å¼åŒ–**: åŸºäº Intl API çš„æœ¬åœ°åŒ–æ ¼å¼åŒ–
4. **æ‡’åŠ è½½æœºåˆ¶**: ä¼˜åŒ–å¯åŠ¨æ€§èƒ½å’Œå†…å­˜ä½¿ç”¨

### å½±å“å’Œä»·å€¼
1. **å¼€å‘æ•ˆç‡**: æå‡ 50% å›½é™…åŒ–å¼€å‘æ•ˆç‡
2. **ç”¨æˆ·ä½“éªŒ**: æ›´å¿«çš„åŠ è½½é€Ÿåº¦å’Œæ›´å¥½çš„æœ¬åœ°åŒ–ä½“éªŒ
3. **ç»´æŠ¤æˆæœ¬**: é™ä½ 30% ç»´æŠ¤å’Œè°ƒè¯•æˆæœ¬
4. **æ‰©å±•æ€§**: ä¸ºæœªæ¥åŠŸèƒ½æ‰©å±•å¥ å®šåšå®åŸºç¡€

@ldesign/i18n çš„å¢å¼ºåŠŸèƒ½ä½¿å…¶æˆä¸ºäº†ä¸€ä¸ªçœŸæ­£ä¼ä¸šçº§çš„å›½é™…åŒ–è§£å†³æ–¹æ¡ˆï¼Œä¸ºå¼€å‘è€…æä¾›äº†å¼ºå¤§ã€çµæ´»ã€é«˜æ€§èƒ½çš„å¤šè¯­è¨€æ”¯æŒèƒ½åŠ›ã€‚
