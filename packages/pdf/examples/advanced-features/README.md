# PDFæŸ¥çœ‹å™¨é«˜çº§åŠŸèƒ½ç¤ºä¾‹

è¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº†PDFæŸ¥çœ‹å™¨çš„é«˜çº§åŠŸèƒ½ï¼ŒåŒ…æ‹¬æ€§èƒ½ç›‘æ§ã€è‡ªå®šä¹‰æ’ä»¶ã€é«˜çº§æœç´¢ã€æ‰¹æ³¨æ”¯æŒã€å¤šæ–‡æ¡£ç®¡ç†ç­‰åŠŸèƒ½ã€‚

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒé«˜çº§åŠŸèƒ½
- **æ€§èƒ½ç›‘æ§** - å®æ—¶ç›‘æ§æ¸²æŸ“æ€§èƒ½ã€å†…å­˜ä½¿ç”¨ã€åŠ è½½æ—¶é—´
- **é«˜çº§æœç´¢** - æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ã€å…¨æ–‡ç´¢å¼•ã€æœç´¢å†å²
- **æ‰¹æ³¨æ”¯æŒ** - æ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤PDFæ‰¹æ³¨å’Œæ ‡è®°
- **å¤šæ–‡æ¡£ç®¡ç†** - åŒæ—¶æ‰“å¼€å¤šä¸ªPDFæ–‡æ¡£ï¼Œæ ‡ç­¾é¡µåˆ‡æ¢
- **è‡ªå®šä¹‰æ’ä»¶** - å¯æ‰©å±•çš„æ’ä»¶ç³»ç»Ÿ
- **æ•°æ®åˆ†æ** - PDFå†…å®¹åˆ†æã€ç»Ÿè®¡ä¿¡æ¯

### UI/UXå¢å¼º
- **è‡ªé€‚åº”å¸ƒå±€** - å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒå¤šç§å±å¹•å°ºå¯¸
- **æ‰‹åŠ¿æ”¯æŒ** - è§¦æ‘¸è®¾å¤‡çš„æ‰‹åŠ¿æ“ä½œ
- **é”®ç›˜å¯¼èˆª** - å®Œæ•´çš„é”®ç›˜å¿«æ·é”®æ”¯æŒ
- **æ— éšœç¢è®¿é—®** - ARIAæ ‡ç­¾ã€å±å¹•é˜…è¯»å™¨æ”¯æŒ
- **ä¸»é¢˜ç³»ç»Ÿ** - å¤šç§é¢„è®¾ä¸»é¢˜ï¼Œæ”¯æŒè‡ªå®šä¹‰ä¸»é¢˜

### æ€§èƒ½ä¼˜åŒ–
- **è™šæ‹Ÿæ»šåŠ¨** - å¤§æ–‡æ¡£çš„é«˜æ•ˆæ¸²æŸ“
- **æ‡’åŠ è½½** - æŒ‰éœ€åŠ è½½é¡µé¢å†…å®¹
- **ç¼“å­˜ç­–ç•¥** - æ™ºèƒ½ç¼“å­˜ç®¡ç†
- **Web Workers** - åå°å¤„ç†ï¼Œé¿å…UIé˜»å¡
- **å†…å­˜ç®¡ç†** - è‡ªåŠ¨å†…å­˜æ¸…ç†å’Œä¼˜åŒ–

### æ•°æ®å¤„ç†
- **æ–‡æœ¬æå–** - æå–PDFä¸­çš„æ–‡æœ¬å†…å®¹
- **å›¾åƒæå–** - æå–PDFä¸­çš„å›¾åƒèµ„æº
- **å…ƒæ•°æ®è¯»å–** - è¯»å–PDFæ–‡æ¡£å±æ€§å’Œå…ƒä¿¡æ¯
- **è¡¨å•å¤„ç†** - æ”¯æŒPDFè¡¨å•å¡«å†™å’Œæäº¤
- **æ•°å­—ç­¾å** - éªŒè¯PDFæ•°å­—ç­¾å

## ğŸ“ æ–‡ä»¶ç»“æ„

```
advanced-features/
â”œâ”€â”€ README.md                 # è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ index.html               # ä¸»HTMLæ–‡ä»¶
â”œâ”€â”€ package.json             # é¡¹ç›®é…ç½®
â”œâ”€â”€ vite.config.ts           # Viteé…ç½®
â”œâ”€â”€ tsconfig.json            # TypeScripté…ç½®
â”œâ”€â”€ src/                     # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ main.ts              # ä¸»å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ types/               # ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ performance.ts
â”‚   â”‚   â”œâ”€â”€ annotations.ts
â”‚   â”‚   â””â”€â”€ plugins.ts
â”‚   â”œâ”€â”€ core/                # æ ¸å¿ƒåŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ PDFManager.ts    # PDFæ–‡æ¡£ç®¡ç†å™¨
â”‚   â”‚   â”œâ”€â”€ PerformanceMonitor.ts # æ€§èƒ½ç›‘æ§
â”‚   â”‚   â”œâ”€â”€ AnnotationManager.ts  # æ‰¹æ³¨ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ SearchEngine.ts      # æœç´¢å¼•æ“
â”‚   â”‚   â””â”€â”€ PluginSystem.ts      # æ’ä»¶ç³»ç»Ÿ
â”‚   â”œâ”€â”€ plugins/             # æ’ä»¶ç›®å½•
â”‚   â”‚   â”œâ”€â”€ analytics/       # åˆ†ææ’ä»¶
â”‚   â”‚   â”œâ”€â”€ export/          # å¯¼å‡ºæ’ä»¶
â”‚   â”‚   â”œâ”€â”€ collaboration/   # åä½œæ’ä»¶
â”‚   â”‚   â””â”€â”€ security/        # å®‰å…¨æ’ä»¶
â”‚   â”œâ”€â”€ components/          # UIç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ PerformancePanel.ts
â”‚   â”‚   â”œâ”€â”€ AnnotationToolbar.ts
â”‚   â”‚   â”œâ”€â”€ SearchPanel.ts
â”‚   â”‚   â”œâ”€â”€ DocumentTabs.ts
â”‚   â”‚   â””â”€â”€ PluginManager.ts
â”‚   â”œâ”€â”€ utils/               # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ performance.ts
â”‚   â”‚   â”œâ”€â”€ storage.ts
â”‚   â”‚   â”œâ”€â”€ analytics.ts
â”‚   â”‚   â””â”€â”€ validation.ts
â”‚   â””â”€â”€ workers/             # Web Workers
â”‚       â”œâ”€â”€ pdf-worker.ts
â”‚       â”œâ”€â”€ search-worker.ts
â”‚       â””â”€â”€ analysis-worker.ts
â”œâ”€â”€ styles/                  # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ main.css
â”‚   â”œâ”€â”€ components.css
â”‚   â”œâ”€â”€ themes.css
â”‚   â”œâ”€â”€ animations.css
â”‚   â””â”€â”€ responsive.css
â”œâ”€â”€ assets/                  # é™æ€èµ„æº
â”‚   â”œâ”€â”€ icons/
â”‚   â”œâ”€â”€ fonts/
â”‚   â””â”€â”€ samples/
â””â”€â”€ docs/                    # æ–‡æ¡£
    â”œâ”€â”€ api.md
    â”œâ”€â”€ plugins.md
    â”œâ”€â”€ performance.md
    â””â”€â”€ examples.md
```

## ğŸ› ï¸ å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–

```bash
# ä½¿ç”¨npm
npm install

# ä½¿ç”¨pnpm
pnpm install

# ä½¿ç”¨yarn
yarn install
```

### å¼€å‘æ¨¡å¼

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# æˆ–è€…æŒ‡å®šç«¯å£
npm run dev -- --port 3000
```

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
# æ„å»ºé¡¹ç›®
npm run build

# é¢„è§ˆæ„å»ºç»“æœ
npm run preview
```

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œå•å…ƒæµ‹è¯•
npm run test

# è¿è¡Œæ€§èƒ½æµ‹è¯•
npm run test:performance

# è¿è¡Œç«¯åˆ°ç«¯æµ‹è¯•
npm run test:e2e
```

## ğŸ“Š æ€§èƒ½ç›‘æ§

### å®æ—¶æ€§èƒ½æŒ‡æ ‡

```typescript
import { PerformanceMonitor } from './src/core/PerformanceMonitor';

const monitor = new PerformanceMonitor();

// å¼€å§‹ç›‘æ§
monitor.start();

// è·å–æ€§èƒ½æ•°æ®
const metrics = monitor.getMetrics();
console.log('æ¸²æŸ“æ—¶é—´:', metrics.renderTime);
console.log('å†…å­˜ä½¿ç”¨:', metrics.memoryUsage);
console.log('FPS:', metrics.fps);

// è®¾ç½®æ€§èƒ½é˜ˆå€¼
monitor.setThresholds({
  renderTime: 100, // 100ms
  memoryUsage: 50 * 1024 * 1024, // 50MB
  fps: 30
});

// ç›‘å¬æ€§èƒ½è­¦å‘Š
monitor.on('warning', (metric, value, threshold) => {
  console.warn(`æ€§èƒ½è­¦å‘Š: ${metric} = ${value}, é˜ˆå€¼: ${threshold}`);
});
```

### æ€§èƒ½ä¼˜åŒ–å»ºè®®

```typescript
// å¯ç”¨è™šæ‹Ÿæ»šåŠ¨ï¼ˆå¤§æ–‡æ¡£ï¼‰
const viewer = new PDFViewer({
  virtualScrolling: true,
  pageBufferSize: 3, // ç¼“å­˜å‰å3é¡µ
  lazyLoading: true
});

// ä½¿ç”¨Web Workerè¿›è¡Œåå°å¤„ç†
const worker = new Worker('./src/workers/pdf-worker.ts');
worker.postMessage({ action: 'loadPDF', data: pdfData });

// å¯ç”¨ç¼“å­˜
viewer.enableCache({
  maxSize: 100 * 1024 * 1024, // 100MB
  strategy: 'lru' // æœ€è¿‘æœ€å°‘ä½¿ç”¨
});
```

## ğŸ” é«˜çº§æœç´¢

### åŸºç¡€æœç´¢

```typescript
import { SearchEngine } from './src/core/SearchEngine';

const searchEngine = new SearchEngine(pdfDocument);

// ç®€å•æ–‡æœ¬æœç´¢
const results = await searchEngine.search('å…³é”®è¯');

// æ­£åˆ™è¡¨è¾¾å¼æœç´¢
const regexResults = await searchEngine.searchRegex(/\d{4}-\d{2}-\d{2}/);

// æ¨¡ç³Šæœç´¢
const fuzzyResults = await searchEngine.fuzzySearch('keywrd', {
  threshold: 0.8,
  distance: 100
});
```

### é«˜çº§æœç´¢é€‰é¡¹

```typescript
// é…ç½®æœç´¢é€‰é¡¹
const searchOptions = {
  caseSensitive: false,
  wholeWords: true,
  regex: false,
  fuzzy: true,
  context: 50, // ä¸Šä¸‹æ–‡å­—ç¬¦æ•°
  highlight: true,
  maxResults: 100
};

const results = await searchEngine.search('æŸ¥è¯¢è¯', searchOptions);

// æœç´¢ç»“æœåŒ…å«è¯¦ç»†ä¿¡æ¯
results.forEach(result => {
  console.log('é¡µé¢:', result.pageNumber);
  console.log('ä½ç½®:', result.position);
  console.log('ä¸Šä¸‹æ–‡:', result.context);
  console.log('åŒ¹é…æ–‡æœ¬:', result.matchText);
});
```

### æœç´¢å†å²å’Œå»ºè®®

```typescript
// ä¿å­˜æœç´¢å†å²
searchEngine.saveSearchHistory('æŸ¥è¯¢è¯');

// è·å–æœç´¢å†å²
const history = searchEngine.getSearchHistory();

// è·å–æœç´¢å»ºè®®
const suggestions = await searchEngine.getSuggestions('æŸ¥è¯¢');

// æ¸…é™¤æœç´¢å†å²
searchEngine.clearSearchHistory();
```

## âœï¸ æ‰¹æ³¨åŠŸèƒ½

### æ·»åŠ æ‰¹æ³¨

```typescript
import { AnnotationManager } from './src/core/AnnotationManager';

const annotationManager = new AnnotationManager(pdfDocument);

// æ·»åŠ æ–‡æœ¬æ‰¹æ³¨
const textAnnotation = await annotationManager.addTextAnnotation({
  pageNumber: 1,
  x: 100,
  y: 200,
  width: 200,
  height: 50,
  content: 'è¿™æ˜¯ä¸€ä¸ªæ–‡æœ¬æ‰¹æ³¨',
  author: 'ç”¨æˆ·å',
  color: '#ffff00'
});

// æ·»åŠ é«˜äº®æ‰¹æ³¨
const highlightAnnotation = await annotationManager.addHighlight({
  pageNumber: 1,
  startX: 50,
  startY: 100,
  endX: 250,
  endY: 120,
  color: '#ffff00',
  opacity: 0.5
});

// æ·»åŠ å½¢çŠ¶æ‰¹æ³¨
const shapeAnnotation = await annotationManager.addShape({
  pageNumber: 1,
  type: 'rectangle',
  x: 100,
  y: 100,
  width: 150,
  height: 100,
  strokeColor: '#ff0000',
  fillColor: '#ff000020',
  strokeWidth: 2
});
```

### æ‰¹æ³¨ç®¡ç†

```typescript
// è·å–æ‰€æœ‰æ‰¹æ³¨
const annotations = annotationManager.getAllAnnotations();

// æŒ‰é¡µé¢è·å–æ‰¹æ³¨
const pageAnnotations = annotationManager.getAnnotationsByPage(1);

// æŒ‰ç±»å‹è·å–æ‰¹æ³¨
const textAnnotations = annotationManager.getAnnotationsByType('text');

// ç¼–è¾‘æ‰¹æ³¨
const updatedAnnotation = await annotationManager.updateAnnotation(annotationId, {
  content: 'æ›´æ–°åçš„å†…å®¹',
  color: '#00ff00'
});

// åˆ é™¤æ‰¹æ³¨
const deleted = await annotationManager.deleteAnnotation(annotationId);

// å¯¼å‡ºæ‰¹æ³¨
const exportData = annotationManager.exportAnnotations();

// å¯¼å…¥æ‰¹æ³¨
const imported = await annotationManager.importAnnotations(exportData);
```

## ğŸ”Œ æ’ä»¶ç³»ç»Ÿ

### åˆ›å»ºæ’ä»¶

```typescript
import { Plugin } from './src/core/PluginSystem';

class MyCustomPlugin extends Plugin {
  name = 'my-custom-plugin';
  version = '1.0.0';
  description = 'æˆ‘çš„è‡ªå®šä¹‰æ’ä»¶';

  async initialize() {
    console.log('æ’ä»¶åˆå§‹åŒ–');
    
    // æ³¨å†Œäº‹ä»¶ç›‘å¬å™¨
    this.on('document:loaded', this.onDocumentLoaded.bind(this));
    this.on('page:rendered', this.onPageRendered.bind(this));
  }

  async onDocumentLoaded(document) {
    console.log('æ–‡æ¡£å·²åŠ è½½:', document.title);
  }

  async onPageRendered(pageNumber) {
    console.log('é¡µé¢å·²æ¸²æŸ“:', pageNumber);
  }

  async destroy() {
    console.log('æ’ä»¶é”€æ¯');
  }
}

// æ³¨å†Œæ’ä»¶
const pluginSystem = new PluginSystem();
pluginSystem.register(new MyCustomPlugin());
```

### ä½¿ç”¨å†…ç½®æ’ä»¶

```typescript
// åˆ†ææ’ä»¶
import { AnalyticsPlugin } from './src/plugins/analytics';
pluginSystem.register(new AnalyticsPlugin({
  trackPageViews: true,
  trackSearches: true,
  trackAnnotations: true
}));

// å¯¼å‡ºæ’ä»¶
import { ExportPlugin } from './src/plugins/export';
pluginSystem.register(new ExportPlugin({
  formats: ['pdf', 'png', 'jpeg', 'svg'],
  quality: 'high'
}));

// åä½œæ’ä»¶
import { CollaborationPlugin } from './src/plugins/collaboration';
pluginSystem.register(new CollaborationPlugin({
  serverUrl: 'ws://localhost:8080',
  roomId: 'document-123'
}));
```

## ğŸ“± å¤šæ–‡æ¡£ç®¡ç†

### æ–‡æ¡£æ ‡ç­¾é¡µ

```typescript
import { PDFManager } from './src/core/PDFManager';

const pdfManager = new PDFManager();

// æ‰“å¼€æ–°æ–‡æ¡£
const document1 = await pdfManager.openDocument(file1);
const document2 = await pdfManager.openDocument(file2);

// åˆ‡æ¢æ´»åŠ¨æ–‡æ¡£
pdfManager.setActiveDocument(document1.id);

// è·å–æ‰€æœ‰æ‰“å¼€çš„æ–‡æ¡£
const openDocuments = pdfManager.getOpenDocuments();

// å…³é—­æ–‡æ¡£
pdfManager.closeDocument(document1.id);

// å…³é—­æ‰€æœ‰æ–‡æ¡£
pdfManager.closeAllDocuments();
```

### æ–‡æ¡£åŒæ­¥

```typescript
// åŒæ­¥æ»šåŠ¨ä½ç½®
pdfManager.syncScrollPosition(true);

// åŒæ­¥ç¼©æ”¾çº§åˆ«
pdfManager.syncZoomLevel(true);

// åŒæ­¥ä¸»é¢˜è®¾ç½®
pdfManager.syncTheme(true);
```

## ğŸ¨ è‡ªå®šä¹‰ä¸»é¢˜

### åˆ›å»ºä¸»é¢˜

```typescript
const customTheme = {
  name: 'my-theme',
  colors: {
    primary: '#007acc',
    secondary: '#f0f0f0',
    background: '#ffffff',
    surface: '#f8f9fa',
    text: '#333333',
    textSecondary: '#666666',
    border: '#e0e0e0',
    shadow: 'rgba(0, 0, 0, 0.1)'
  },
  fonts: {
    primary: 'Inter, sans-serif',
    monospace: 'Fira Code, monospace'
  },
  spacing: {
    xs: '4px',
    sm: '8px',
    md: '16px',
    lg: '24px',
    xl: '32px'
  },
  borderRadius: {
    sm: '4px',
    md: '8px',
    lg: '12px'
  }
};

// åº”ç”¨ä¸»é¢˜
themeManager.applyTheme(customTheme);
```

## ğŸ§ª æµ‹è¯•å’Œè°ƒè¯•

### æ€§èƒ½æµ‹è¯•

```typescript
// æ¸²æŸ“æ€§èƒ½æµ‹è¯•
const renderTest = async () => {
  const startTime = performance.now();
  await viewer.renderPage(1);
  const endTime = performance.now();
  console.log(`é¡µé¢æ¸²æŸ“æ—¶é—´: ${endTime - startTime}ms`);
};

// å†…å­˜ä½¿ç”¨æµ‹è¯•
const memoryTest = () => {
  const memory = performance.memory;
  console.log('å·²ä½¿ç”¨å†…å­˜:', memory.usedJSHeapSize / 1024 / 1024, 'MB');
  console.log('æ€»å†…å­˜:', memory.totalJSHeapSize / 1024 / 1024, 'MB');
};

// æœç´¢æ€§èƒ½æµ‹è¯•
const searchTest = async () => {
  const startTime = performance.now();
  const results = await searchEngine.search('æµ‹è¯•');
  const endTime = performance.now();
  console.log(`æœç´¢æ—¶é—´: ${endTime - startTime}ms, ç»“æœæ•°: ${results.length}`);
};
```

### è°ƒè¯•å·¥å…·

```typescript
// å¯ç”¨è°ƒè¯•æ¨¡å¼
const viewer = new PDFViewer({
  debug: true,
  logLevel: 'debug'
});

// æ€§èƒ½åˆ†æ
viewer.enableProfiling();

// å†…å­˜ç›‘æ§
viewer.enableMemoryMonitoring();

// äº‹ä»¶æ—¥å¿—
viewer.enableEventLogging();
```

## ğŸ“š APIå‚è€ƒ

### æ ¸å¿ƒç±»

- `PDFManager` - PDFæ–‡æ¡£ç®¡ç†å™¨
- `PerformanceMonitor` - æ€§èƒ½ç›‘æ§å™¨
- `AnnotationManager` - æ‰¹æ³¨ç®¡ç†å™¨
- `SearchEngine` - æœç´¢å¼•æ“
- `PluginSystem` - æ’ä»¶ç³»ç»Ÿ

### å·¥å…·å‡½æ•°

- `performance.ts` - æ€§èƒ½ç›¸å…³å·¥å…·
- `storage.ts` - å­˜å‚¨ç›¸å…³å·¥å…·
- `analytics.ts` - åˆ†æç›¸å…³å·¥å…·
- `validation.ts` - éªŒè¯ç›¸å…³å·¥å…·

è¯¦ç»†çš„APIæ–‡æ¡£è¯·å‚è€ƒ [docs/api.md](./docs/api.md)

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

## ğŸ†˜ æ”¯æŒ

- ğŸ“– [æ–‡æ¡£](./docs/)
- ğŸ› [é—®é¢˜åé¦ˆ](https://github.com/your-org/ldesign/issues)
- ğŸ’¬ [è®¨è®ºåŒº](https://github.com/your-org/ldesign/discussions)
- ğŸ“§ [é‚®ä»¶æ”¯æŒ](mailto:support@ldesign.com)

## ğŸ”— ç›¸å…³é“¾æ¥

- [åŸºç¡€ä½¿ç”¨ç¤ºä¾‹](../basic-usage/)
- [Reactç¤ºä¾‹](../react-example/)
- [Vueç¤ºä¾‹](../vue-example/)
- [åŸç”ŸJavaScriptç¤ºä¾‹](../vanilla-js-example/)
- [ä¸»é¡¹ç›®æ–‡æ¡£](../../README.md)