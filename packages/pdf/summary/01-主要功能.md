# @ldesign/pdf 主要功能

## 项目概述

@ldesign/pdf 是一个基于 PDF.js 的现代化 PDF 预览器库，提供了完整的 PDF 文档查看和交互功能。经过最新的架构优化和 Vue 3 响应式兼容性修复，现已成为一个稳定可靠的企业级 PDF 解决方案，支持多种框架集成，具有出色的性能表现和开发体验。

## 核心功能特性

### 1. 文档加载与管理

#### 多种输入方式支持
- **URL加载**：支持从远程URL加载PDF文档
- **File对象**：支持用户上传的本地文件
- **ArrayBuffer**：支持二进制数据直接加载
- **Uint8Array**：支持类型化数组数据

#### 文档验证与处理
- **格式验证**：自动检测PDF文件格式的有效性
- **元数据提取**：获取文档标题、作者、创建日期等信息
- **错误处理**：完善的错误处理机制，提供详细的错误信息

### 2. 页面渲染与显示

#### 多种渲染模式
- **Canvas渲染**：高性能的Canvas 2D渲染，支持高DPI显示
- **SVG渲染**：矢量图形渲染，支持无损缩放
- **纯文本模式**：仅显示文本内容，适用于特殊场景

#### 渲染优化
- **智能缓存**：页面级缓存机制，避免重复渲染
- **懒加载**：按需加载页面内容，提升初始加载速度
- **内存管理**：自动清理不需要的渲染资源

### 3. 页面导航功能

#### 基础导航
- **上一页/下一页**：支持键盘快捷键和按钮操作
- **页面跳转**：直接跳转到指定页面
- **页面指示器**：显示当前页面和总页数

#### 高级导航
- **缩略图导航**：生成页面缩略图，支持快速跳转
- **书签导航**：解析PDF书签结构，提供目录导航
- **历史记录**：记录浏览历史，支持前进后退

### 4. 缩放控制系统

#### 智能缩放模式
- **适应宽度**：自动调整到容器宽度
- **适应页面**：完整显示整个页面
- **自动模式**：根据内容自动选择最佳缩放
- **自定义缩放**：支持任意缩放比例

#### 缩放操作
- **放大/缩小**：支持鼠标滚轮和按钮操作
- **缩放限制**：设置最小和最大缩放比例
- **平滑缩放**：流畅的缩放动画效果

### 5. 页面旋转功能

#### 旋转控制
- **90度旋转**：支持顺时针90度旋转
- **任意角度**：支持0°、90°、180°、270°旋转
- **旋转记忆**：记住每页的旋转状态

#### 旋转优化
- **实时预览**：旋转操作实时生效
- **性能优化**：旋转时保持渲染性能
- **状态同步**：旋转状态与其他功能协调

### 6. 文本搜索功能

#### 搜索能力
- **全文搜索**：在整个文档中搜索文本
- **正则表达式**：支持高级搜索模式
- **大小写敏感**：可选的大小写匹配
- **全词匹配**：精确的单词匹配

#### 搜索体验
- **高亮显示**：搜索结果高亮标记
- **结果导航**：在搜索结果间快速跳转
- **搜索统计**：显示匹配数量和当前位置
- **搜索历史**：记录搜索历史

### 7. 全屏预览模式

#### 全屏功能
- **沉浸式体验**：隐藏浏览器界面，专注阅读
- **工具栏悬浮**：全屏时显示悬浮工具栏
- **快捷键支持**：ESC键退出全屏
- **状态记忆**：记住全屏前的状态

#### 全屏优化
- **性能优化**：全屏模式下的渲染优化
- **响应式适配**：适应不同屏幕尺寸
- **交互保持**：全屏时保持所有交互功能

### 8. 下载与打印功能

#### 下载功能
- **原文件下载**：下载原始PDF文件
- **自定义文件名**：支持自定义下载文件名
- **批量下载**：支持多文档批量下载
- **进度显示**：显示下载进度

#### 打印功能
- **页面范围**：选择打印页面范围
- **打印质量**：选择打印质量等级
- **页面设置**：支持页面方向和尺寸设置
- **预览打印**：打印前预览效果

### 9. 缩略图系统

#### 缩略图生成
- **自动生成**：自动为所有页面生成缩略图
- **尺寸控制**：可配置缩略图尺寸
- **质量优化**：平衡质量和性能
- **缓存机制**：缓存生成的缩略图

#### 缩略图导航
- **侧边栏显示**：在侧边栏显示缩略图列表
- **快速跳转**：点击缩略图快速跳转
- **当前页标记**：高亮显示当前页面
- **滚动同步**：缩略图与主视图同步滚动

### 10. 注释与标记

#### 注释支持
- **链接注释**：支持PDF中的超链接
- **文本注释**：显示文本注释内容
- **表单字段**：支持PDF表单字段显示
- **多媒体注释**：支持音频、视频等多媒体注释

#### 交互功能
- **点击响应**：注释的点击交互
- **悬停提示**：鼠标悬停显示注释信息
- **样式定制**：可定制注释的显示样式

## 性能特性

### 1. 渲染性能
- **Canvas加速**：使用Canvas 2D API进行硬件加速渲染
- **WebGL支持**：在支持的浏览器中使用WebGL加速
- **分层渲染**：文本层、注释层分离渲染
- **视口裁剪**：只渲染可见区域内容

### 2. 内存管理
- **智能缓存**：LRU缓存策略，自动清理旧缓存
- **内存监控**：监控内存使用情况
- **资源回收**：及时回收不需要的资源
- **内存泄漏防护**：防止内存泄漏的设计

### 3. 加载优化
- **流式加载**：支持PDF文档的流式加载
- **预加载策略**：智能预加载相邻页面
- **压缩传输**：支持gzip等压缩传输
- **CDN优化**：支持CDN加速分发

## 兼容性特性

### 1. 浏览器支持
- **现代浏览器**：支持Chrome 88+、Firefox 78+、Safari 14+、Edge 88+
- **移动端优化**：针对移动设备的特殊优化
- **渐进增强**：在不支持的浏览器中提供基础功能

### 2. 框架集成
- **框架无关**：核心库不依赖任何框架
- **Vue 3集成**：提供完整的Vue 3组件和Hooks
- **React支持**：计划支持React集成
- **Angular支持**：计划支持Angular集成

### 3. 设备适配
- **响应式设计**：自动适应不同屏幕尺寸
- **触摸支持**：支持触摸设备的手势操作
- **高DPI支持**：支持高分辨率显示设备
- **无障碍访问**：支持屏幕阅读器等辅助技术

## 安全特性

### 1. 内容安全
- **XSS防护**：防止跨站脚本攻击
- **内容隔离**：PDF内容与页面内容隔离
- **安全渲染**：安全的PDF内容渲染

### 2. 隐私保护
- **本地处理**：支持完全本地处理PDF文件
- **数据不上传**：不向服务器上传用户数据
- **隐私模式**：支持隐私浏览模式

这些功能特性使得@ldesign/pdf成为一个功能完整、性能优秀、安全可靠的PDF预览解决方案，能够满足各种Web应用的PDF预览需求。
