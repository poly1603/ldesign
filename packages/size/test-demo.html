<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>@ldesign/size 功能测试</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      margin: 0;
      padding: 20px;
      background: #f5f5f5;
    }
    
    .container {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      padding: var(--ls-spacing-lg, 24px);
      border-radius: var(--ls-border-radius-lg, 8px);
      box-shadow: var(--ls-shadow-base, 0 2px 8px rgba(0,0,0,0.1));
    }
    
    .header {
      text-align: center;
      margin-bottom: var(--ls-spacing-xl, 32px);
    }
    
    .header h1 {
      font-size: var(--ls-font-size-h1, 32px);
      color: #333;
      margin: 0 0 var(--ls-spacing-sm, 8px);
    }
    
    .header p {
      font-size: var(--ls-font-size-base, 16px);
      color: #666;
      margin: 0;
    }
    
    .controls {
      display: flex;
      justify-content: center;
      gap: var(--ls-spacing-sm, 8px);
      margin-bottom: var(--ls-spacing-xl, 32px);
      flex-wrap: wrap;
    }
    
    .btn {
      padding: var(--ls-spacing-xs, 4px) var(--ls-spacing-base, 16px);
      font-size: var(--ls-font-size-sm, 14px);
      border: 1px solid #1890ff;
      border-radius: var(--ls-border-radius-base, 4px);
      background: white;
      color: #1890ff;
      cursor: pointer;
      transition: all 0.2s ease;
      min-height: var(--ls-button-height-medium, 36px);
    }
    
    .btn:hover {
      background: #1890ff;
      color: white;
    }
    
    .btn.active {
      background: #1890ff;
      color: white;
    }
    
    .demo-section {
      margin-bottom: var(--ls-spacing-xl, 32px);
      padding: var(--ls-spacing-lg, 24px);
      background: #f8f9fa;
      border-radius: var(--ls-border-radius-base, 4px);
    }
    
    .demo-section h2 {
      font-size: var(--ls-font-size-xl, 20px);
      margin: 0 0 var(--ls-spacing-base, 16px);
      color: #333;
    }
    
    .demo-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: var(--ls-spacing-base, 16px);
    }
    
    .demo-card {
      padding: var(--ls-spacing-base, 16px);
      background: white;
      border-radius: var(--ls-border-radius-base, 4px);
      border: 1px solid #e0e0e0;
    }
    
    .demo-card h3 {
      font-size: var(--ls-font-size-lg, 18px);
      margin: 0 0 var(--ls-spacing-sm, 8px);
      color: #333;
    }
    
    .demo-card p {
      font-size: var(--ls-font-size-sm, 14px);
      color: #666;
      margin: 0;
    }
    
    .status {
      margin-top: var(--ls-spacing-lg, 24px);
      padding: var(--ls-spacing-base, 16px);
      background: #e6f7ff;
      border: 1px solid #91d5ff;
      border-radius: var(--ls-border-radius-base, 4px);
    }
    
    .status h3 {
      font-size: var(--ls-font-size-base, 16px);
      margin: 0 0 var(--ls-spacing-sm, 8px);
      color: #0050b3;
    }
    
    .status-item {
      display: flex;
      justify-content: space-between;
      margin-bottom: var(--ls-spacing-xs, 4px);
      font-size: var(--ls-font-size-sm, 14px);
    }
    
    .status-value {
      font-family: monospace;
      background: rgba(255,255,255,0.8);
      padding: 2px 6px;
      border-radius: 2px;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>@ldesign/size 功能测试</h1>
      <p>测试页面尺寸缩放功能的各种特性</p>
    </div>
    
    <div class="controls">
      <button class="btn" data-mode="small">小尺寸 (Small)</button>
      <button class="btn active" data-mode="medium">中尺寸 (Medium)</button>
      <button class="btn" data-mode="large">大尺寸 (Large)</button>
      <button class="btn" data-mode="extra-large">超大尺寸 (Extra Large)</button>
    </div>
    
    <div class="demo-section">
      <h2>字体尺寸演示</h2>
      <div class="demo-grid">
        <div class="demo-card">
          <h3>标题文字</h3>
          <p>这是正文内容，展示不同尺寸模式下的字体大小变化。</p>
        </div>
        <div class="demo-card">
          <h3>内容区域</h3>
          <p>通过切换尺寸模式，可以看到所有文字都会相应调整大小。</p>
        </div>
        <div class="demo-card">
          <h3>响应式设计</h3>
          <p>这种设计特别适合需要支持不同用户群体的应用。</p>
        </div>
      </div>
    </div>
    
    <div class="demo-section">
      <h2>间距和布局演示</h2>
      <div class="demo-grid">
        <div class="demo-card">
          <h3>间距调整</h3>
          <p>注意观察卡片的内边距和外边距如何随尺寸模式变化。</p>
        </div>
        <div class="demo-card">
          <h3>布局适配</h3>
          <p>整个页面的布局都会根据选择的尺寸模式进行调整。</p>
        </div>
      </div>
    </div>
    
    <div class="status">
      <h3>当前状态</h3>
      <div class="status-item">
        <span>当前模式:</span>
        <span class="status-value" id="currentMode">medium</span>
      </div>
      <div class="status-item">
        <span>基础字体:</span>
        <span class="status-value" id="baseFontSize">16px</span>
      </div>
      <div class="status-item">
        <span>基础间距:</span>
        <span class="status-value" id="baseSpacing">16px</span>
      </div>
      <div class="status-item">
        <span>按钮高度:</span>
        <span class="status-value" id="buttonHeight">36px</span>
      </div>
    </div>
  </div>

  <script type="module">
    // 模拟核心功能（简化版本）
    const sizeConfigs = {
      small: {
        fontSize: { base: '12px', sm: '11px', lg: '14px', xl: '16px', h1: '24px' },
        spacing: { xs: '2px', sm: '4px', base: '8px', lg: '12px', xl: '16px' },
        buttonHeight: { medium: '28px' },
        borderRadius: { base: '2px', lg: '4px' },
        shadow: { base: '0 1px 3px rgba(0,0,0,0.1)' }
      },
      medium: {
        fontSize: { base: '16px', sm: '14px', lg: '18px', xl: '20px', h1: '32px' },
        spacing: { xs: '4px', sm: '8px', base: '16px', lg: '24px', xl: '32px' },
        buttonHeight: { medium: '36px' },
        borderRadius: { base: '4px', lg: '8px' },
        shadow: { base: '0 2px 8px rgba(0,0,0,0.1)' }
      },
      large: {
        fontSize: { base: '18px', sm: '16px', lg: '20px', xl: '22px', h1: '36px' },
        spacing: { xs: '6px', sm: '10px', base: '20px', lg: '30px', xl: '40px' },
        buttonHeight: { medium: '44px' },
        borderRadius: { base: '6px', lg: '12px' },
        shadow: { base: '0 4px 12px rgba(0,0,0,0.15)' }
      },
      'extra-large': {
        fontSize: { base: '20px', sm: '18px', lg: '22px', xl: '24px', h1: '40px' },
        spacing: { xs: '8px', sm: '12px', base: '24px', lg: '36px', xl: '48px' },
        buttonHeight: { medium: '52px' },
        borderRadius: { base: '8px', lg: '16px' },
        shadow: { base: '0 6px 16px rgba(0,0,0,0.2)' }
      }
    }
    
    let currentMode = 'medium'
    
    function generateCSSVariables(mode) {
      const config = sizeConfigs[mode]
      const variables = {}
      
      // 生成字体变量
      Object.entries(config.fontSize).forEach(([key, value]) => {
        variables[`--ls-font-size-${key}`] = value
      })
      
      // 生成间距变量
      Object.entries(config.spacing).forEach(([key, value]) => {
        variables[`--ls-spacing-${key}`] = value
      })
      
      // 生成按钮变量
      Object.entries(config.buttonHeight).forEach(([key, value]) => {
        variables[`--ls-button-height-${key}`] = value
      })
      
      // 生成边框变量
      Object.entries(config.borderRadius).forEach(([key, value]) => {
        variables[`--ls-border-radius-${key}`] = value
      })
      
      // 生成阴影变量
      Object.entries(config.shadow).forEach(([key, value]) => {
        variables[`--ls-shadow-${key}`] = value
      })
      
      return variables
    }
    
    function injectCSS(variables) {
      // 移除旧样式
      const oldStyle = document.getElementById('ldesign-size-variables')
      if (oldStyle) {
        oldStyle.remove()
      }
      
      // 创建新样式
      const style = document.createElement('style')
      style.id = 'ldesign-size-variables'
      
      const cssText = ':root {\n' + 
        Object.entries(variables)
          .map(([name, value]) => `  ${name}: ${value};`)
          .join('\n') + 
        '\n}'
      
      style.textContent = cssText
      document.head.appendChild(style)
    }
    
    function setMode(mode) {
      if (!sizeConfigs[mode]) return
      
      currentMode = mode
      const variables = generateCSSVariables(mode)
      injectCSS(variables)
      updateUI()
      updateButtons()
    }
    
    function updateUI() {
      const config = sizeConfigs[currentMode]
      document.getElementById('currentMode').textContent = currentMode
      document.getElementById('baseFontSize').textContent = config.fontSize.base
      document.getElementById('baseSpacing').textContent = config.spacing.base
      document.getElementById('buttonHeight').textContent = config.buttonHeight.medium
    }
    
    function updateButtons() {
      document.querySelectorAll('.btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.mode === currentMode)
      })
    }
    
    // 初始化
    setMode('medium')
    
    // 绑定事件
    document.querySelectorAll('.btn').forEach(btn => {
      btn.addEventListener('click', () => {
        setMode(btn.dataset.mode)
      })
    })
    
    console.log('✅ @ldesign/size 功能测试页面加载完成')
    console.log('🎯 当前功能状态:')
    console.log('  - 尺寸模式切换: 正常')
    console.log('  - CSS变量生成: 正常') 
    console.log('  - 样式注入: 正常')
    console.log('  - UI更新: 正常')
  </script>
</body>
</html>
