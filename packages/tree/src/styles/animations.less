/**
 * 树形组件动画样式
 */

@import './variables.less';

// 展开收起动画
.@{tree-prefix} {
  &__node {
    &-children {
      overflow: hidden;
      transition: height @tree-transition-duration @tree-transition-timing;

      &--expanding {
        animation: tree-expand @tree-transition-duration @tree-transition-timing;
      }

      &--collapsing {
        animation: tree-collapse @tree-transition-duration @tree-transition-timing;
      }
    }

    &-expand-icon {
      transition: transform @tree-transition-duration @tree-transition-timing;

      &--expanded {
        transform: rotate(90deg);
      }
    }
  }
}

// 展开动画
@keyframes tree-expand {
  0% {
    height: 0;
    opacity: 0;
  }
  100% {
    height: auto;
    opacity: 1;
  }
}

// 收起动画
@keyframes tree-collapse {
  0% {
    height: auto;
    opacity: 1;
  }
  100% {
    height: 0;
    opacity: 0;
  }
}

// 淡入动画
@keyframes tree-fade-in {
  0% {
    opacity: 0;
    transform: translateY(-4px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

// 淡出动画
@keyframes tree-fade-out {
  0% {
    opacity: 1;
    transform: translateY(0);
  }
  100% {
    opacity: 0;
    transform: translateY(-4px);
  }
}

// 滑入动画
@keyframes tree-slide-in {
  0% {
    transform: translateX(-100%);
    opacity: 0;
  }
  100% {
    transform: translateX(0);
    opacity: 1;
  }
}

// 滑出动画
@keyframes tree-slide-out {
  0% {
    transform: translateX(0);
    opacity: 1;
  }
  100% {
    transform: translateX(-100%);
    opacity: 0;
  }
}

// 缩放动画
@keyframes tree-scale-in {
  0% {
    transform: scale(0.8);
    opacity: 0;
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

// 缩放出动画
@keyframes tree-scale-out {
  0% {
    transform: scale(1);
    opacity: 1;
  }
  100% {
    transform: scale(0.8);
    opacity: 0;
  }
}

// 弹跳动画
@keyframes tree-bounce {
  0%, 20%, 53%, 80%, 100% {
    transform: translate3d(0, 0, 0);
  }
  40%, 43% {
    transform: translate3d(0, -8px, 0);
  }
  70% {
    transform: translate3d(0, -4px, 0);
  }
  90% {
    transform: translate3d(0, -2px, 0);
  }
}

// 摇摆动画
@keyframes tree-shake {
  0%, 100% {
    transform: translateX(0);
  }
  10%, 30%, 50%, 70%, 90% {
    transform: translateX(-2px);
  }
  20%, 40%, 60%, 80% {
    transform: translateX(2px);
  }
}

// 脉冲动画
@keyframes tree-pulse {
  0% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.05);
    opacity: 0.8;
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

// 旋转动画
@keyframes tree-rotate {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

// 加载动画
@keyframes tree-loading {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

// 高亮动画
@keyframes tree-highlight {
  0%, 100% {
    background-color: transparent;
  }
  50% {
    background-color: @tree-search-highlight-bg;
  }
}

// 动画类
.@{tree-prefix} {
  // 淡入淡出
  &__fade-enter {
    animation: tree-fade-in @tree-transition-duration @tree-transition-timing;
  }

  &__fade-leave {
    animation: tree-fade-out @tree-transition-duration @tree-transition-timing;
  }

  // 滑动
  &__slide-enter {
    animation: tree-slide-in @tree-transition-duration @tree-transition-timing;
  }

  &__slide-leave {
    animation: tree-slide-out @tree-transition-duration @tree-transition-timing;
  }

  // 缩放
  &__scale-enter {
    animation: tree-scale-in @tree-transition-duration @tree-transition-timing;
  }

  &__scale-leave {
    animation: tree-scale-out @tree-transition-duration @tree-transition-timing;
  }

  // 弹跳
  &__bounce {
    animation: tree-bounce 0.6s ease-in-out;
  }

  // 摇摆
  &__shake {
    animation: tree-shake 0.5s ease-in-out;
  }

  // 脉冲
  &__pulse {
    animation: tree-pulse 1s ease-in-out infinite;
  }

  // 旋转
  &__rotate {
    animation: tree-rotate 1s linear infinite;
  }

  // 高亮
  &__highlight {
    animation: tree-highlight 1s ease-in-out 3;
  }

  // 禁用动画
  &--no-animation {
    * {
      animation: none !important;
      transition: none !important;
    }
  }

  // 减少动画
  &--reduced-motion {
    * {
      animation-duration: 0.1s !important;
      transition-duration: 0.1s !important;
    }
  }
}

// 媒体查询：尊重用户的动画偏好
@media (prefers-reduced-motion: reduce) {
  .@{tree-prefix} {
    * {
      animation-duration: 0.1s !important;
      transition-duration: 0.1s !important;
    }
  }
}
