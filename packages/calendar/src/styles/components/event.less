/**
 * äº‹ä»¶ç»„ä»¶æ ·å¼
 */

// ==================== åŸºç¡€äº‹ä»¶æ ·å¼ ====================

.ldesign-calendar-event {
  position: relative;
  background-color: @calendar-primary-color;
  color: white;
  border-radius: @calendar-event-border-radius;
  padding: @calendar-event-padding;
  margin-bottom: 1px;
  font-size: @calendar-font-size-xs;
  line-height: 1.2;
  cursor: pointer;
  border: @calendar-event-border-width solid transparent;
  overflow: hidden;
  .transition(all);

  // æ‚¬æµ®æ•ˆæœ
  &:hover {
    transform: translateY(-1px);
    box-shadow: @calendar-shadow-2;
    z-index: @calendar-z-index-event + 1;
  }

  // é€‰ä¸­çŠ¶ï¿½?  &.is-selected {
  border-color: @calendar-text-color-primary;
  box-shadow: @calendar-shadow-2;
  z-index: @calendar-z-index-event +2;
}

// æ‹–æ‹½çŠ¶ï¿½?  &.is-dragging {
opacity: 0.8;
transform: rotate(2deg);
z-index: @calendar-z-index-popup;
}

// è°ƒæ•´å¤§å°çŠ¶ï¿½?  &.is-resizing {
z-index: @calendar-z-index-event +3;
}
}

// ==================== äº‹ä»¶å†…å®¹ ====================

.ldesign-calendar-event-title {
  font-weight: 500;
  margin-bottom: 2px;
  .text-ellipsis();
}

.ldesign-calendar-event-time {
  font-size: 10px;
  opacity: 0.9;
  .text-ellipsis();
}

.ldesign-calendar-event-description {
  font-size: 10px;
  opacity: 0.8;
  margin-top: 2px;
  .text-ellipsis-multiline(2);
}

.ldesign-calendar-event-location {
  font-size: 10px;
  opacity: 0.8;
  margin-top: 2px;
  .text-ellipsis();

  &::before {
    content: 'ğŸ“ ';
    margin-right: 2px;
  }
}

// ==================== äº‹ä»¶ç±»å‹æ ·å¼ ====================

.ldesign-calendar-event {

  // å…¨å¤©äº‹ä»¶
  &.all-day {
    background-color: @calendar-primary-color;
    border-radius: @calendar-border-radius-sm;
    padding: 2px 6px;
    margin-bottom: 2px;

    .ldesign-calendar-event-time {
      display: none;
    }
  }

  // å¤šæ—¥äº‹ä»¶
  &.multi-day {
    border-radius: 0;
    margin-bottom: 1px;

    &.multi-day-start {
      border-top-left-radius: @calendar-event-border-radius;
      border-bottom-left-radius: @calendar-event-border-radius;
    }

    &.multi-day-end {
      border-top-right-radius: @calendar-event-border-radius;
      border-bottom-right-radius: @calendar-event-border-radius;
    }
  }

  // é‡å¤äº‹ä»¶
  &.recurring {
    &::after {
      content: 'ğŸ”„';
      position: absolute;
      top: 2px;
      right: 4px;
      font-size: 8px;
      opacity: 0.7;
    }
  }

  // ç§äººäº‹ä»¶
  &.private {
    background: repeating-linear-gradient(45deg,
        @calendar-primary-color,
        @calendar-primary-color 2px,
        rgba(255, 255, 255, 0.1) 2px,
        rgba(255, 255, 255, 0.1) 4px);

    &::after {
      content: 'ğŸ”’';
      position: absolute;
      top: 2px;
      right: 4px;
      font-size: 8px;
      opacity: 0.7;
    }
  }

  // é‡è¦äº‹ä»¶
  &.important {
    border: 2px solid @calendar-warning-color;

    &::after {
      content: 'ï¿½?;
 position: absolute;
      top: 2px;
      right: 4px;
      font-size: 8px;
    }
  }
}

// ==================== äº‹ä»¶çŠ¶æ€æ ·ï¿½?====================

.ldesign-calendar-event {
  // å·²ç¡®ï¿½?  &.status-confirmed {
  background-color: @calendar-success-color;
}

// å¾…å®š
&.status-tentative {
  background-color: @calendar-warning-color;
  opacity: 0.8;
}

// å·²å–ï¿½?  &.status-cancelled {
background-color: @calendar-error-color;
text-decoration: line-through;
opacity: 0.7;
}

// å¿™ç¢Œ
&.status-busy {
  background-color: @calendar-error-color;
}

// ç©ºé—²
&.status-free {
  background-color: @calendar-success-color;
  opacity: 0.6;
}
}

// ==================== äº‹ä»¶ä¼˜å…ˆçº§æ ·ï¿½?====================

.ldesign-calendar-event {

  // é«˜ä¼˜å…ˆçº§
  &.priority-high {
    border-left: 4px solid @calendar-error-color;
  }

  // ä¸­ä¼˜å…ˆçº§
  &.priority-medium {
    border-left: 4px solid @calendar-warning-color;
  }

  // ä½ä¼˜å…ˆçº§
  &.priority-low {
    border-left: 4px solid @calendar-success-color;
  }
}

// ==================== äº‹ä»¶åˆ†ç±»æ ·å¼ ====================

.ldesign-calendar-event {

  // å·¥ä½œäº‹ä»¶
  &.category-work {
    background-color: #1890ff;
  }

  // ä¸ªäººäº‹ä»¶
  &.category-personal {
    background-color: #52c41a;
  }

  // å®¶åº­äº‹ä»¶
  &.category-family {
    background-color: #fa8c16;
  }

  // å¥åº·äº‹ä»¶
  &.category-health {
    background-color: #eb2f96;
  }

  // å­¦ä¹ äº‹ä»¶
  &.category-study {
    background-color: #722ed1;
  }

  // æ—…è¡Œäº‹ä»¶
  &.category-travel {
    background-color: #13c2c2;
  }
}

// ==================== è°ƒæ•´å¤§å°æ‰‹æŸ„ ====================

.ldesign-calendar-event {
  &.resizable {
    .resize-handle {
      position: absolute;
      background-color: rgba(255, 255, 255, 0.3);
      cursor: ns-resize;
      opacity: 0;
      .transition(opacity);

      &.resize-handle-top {
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        cursor: n-resize;
      }

      &.resize-handle-bottom {
        bottom: 0;
        left: 0;
        right: 0;
        height: 4px;
        cursor: s-resize;
      }
    }

    &:hover .resize-handle {
      opacity: 1;
    }
  }
}

// ==================== äº‹ä»¶å†²çªæ ·å¼ ====================

.ldesign-calendar-event {
  &.has-conflict {
    border: 2px solid @calendar-warning-color;
    background: repeating-linear-gradient(45deg,
        @calendar-primary-color,
        @calendar-primary-color 3px,
        @calendar-warning-color 3px,
        @calendar-warning-color 6px);

    &::after {
      content: 'âš ï¸';
      position: absolute;
      top: 2px;
      right: 4px;
      font-size: 8px;
    }
  }
}

// ==================== äº‹ä»¶æé†’æ ·å¼ ====================

.ldesign-calendar-event {
  &.has-reminder {
    &::before {
      content: 'ğŸ””';
      position: absolute;
      top: 2px;
      left: 4px;
      font-size: 8px;
      opacity: 0.7;
    }
  }

  &.reminder-active {
    animation: reminder-pulse 2s infinite;
  }
}

@keyframes reminder-pulse {

  0%,
  100% {
    box-shadow: 0 0 0 0 rgba(red(@calendar-warning-color), green(@calendar-warning-color), blue(@calendar-warning-color), 0.7);
  }

  50% {
    box-shadow: 0 0 0 8px rgba(red(@calendar-warning-color), green(@calendar-warning-color), blue(@calendar-warning-color), 0);
  }
}

// ==================== å“åº”å¼äº‹ä»¶æ ·ï¿½?====================

.ldesign-calendar-event {
  @media (max-width: @calendar-breakpoint-sm) {
    padding: 2px 4px;
    font-size: 10px;

    .ldesign-calendar-event-title {
      margin-bottom: 0;
    }

    .ldesign-calendar-event-time,
    .ldesign-calendar-event-description,
    .ldesign-calendar-event-location {
      display: none;
    }
  }

  @media (min-width: @calendar-breakpoint-sm) and (max-width: @calendar-breakpoint-md) {
    .ldesign-calendar-event-description {
      display: none;
    }
  }
}

// ==================== ç´§å‡‘æ¨¡å¼äº‹ä»¶æ ·å¼ ====================

.ldesign-calendar.compact {
  .ldesign-calendar-event {
    padding: 1px 4px;
    font-size: 10px;

    .ldesign-calendar-event-time,
    .ldesign-calendar-event-description,
    .ldesign-calendar-event-location {
      display: none;
    }
  }
}

// ==================== äº‹ä»¶å·¥å…·æç¤º ====================

.ldesign-calendar-event-tooltip {
  position: absolute;
  background-color: rgba(0, 0, 0, 0.9);
  color: white;
  padding: @calendar-padding-sm;
  border-radius: @calendar-border-radius-base;
  font-size: @calendar-font-size-xs;
  max-width: 200px;
  z-index: @calendar-z-index-popup;
  pointer-events: none;
  opacity: 0;
  .transition(opacity);

  &.visible {
    opacity: 1;
  }

  .tooltip-title {
    font-weight: 600;
    margin-bottom: 4px;
  }

  .tooltip-time {
    color: rgba(255, 255, 255, 0.8);
    margin-bottom: 4px;
  }

  .tooltip-description {
    line-height: 1.4;
  }
}