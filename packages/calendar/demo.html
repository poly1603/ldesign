<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LDesign Calendar - ç°ä»£åŒ–æ—¥å†ç»„ä»¶æ¼”ç¤º</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .demo-container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .demo-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .demo-title {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .demo-subtitle {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 20px;
        }

        .demo-features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .feature-tag {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            text-align: center;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .demo-controls {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .demo-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .demo-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        .demo-btn.active {
            background: linear-gradient(135deg, #764ba2, #667eea);
        }

        .calendar-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            min-height: 600px;
        }

        .demo-instructions {
            background: rgba(102, 126, 234, 0.1);
            border-left: 4px solid #667eea;
            padding: 20px;
            border-radius: 10px;
            margin-top: 30px;
        }

        .demo-instructions h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .demo-instructions ul {
            list-style: none;
            padding-left: 0;
        }

        .demo-instructions li {
            margin-bottom: 10px;
            padding-left: 20px;
            position: relative;
        }

        .demo-instructions li:before {
            content: "âœ¨";
            position: absolute;
            left: 0;
        }

        @media (max-width: 768px) {
            .demo-container {
                padding: 20px;
                margin: 10px;
            }

            .demo-title {
                font-size: 2rem;
            }

            .demo-controls {
                justify-content: center;
            }

            .demo-btn {
                padding: 10px 20px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <div class="demo-container">
        <div class="demo-header">
            <h1 class="demo-title">LDesign Calendar</h1>
            <p class="demo-subtitle">ç°ä»£åŒ–æ—¥å†JavaScriptæ’ä»¶ - åŠŸèƒ½å®Œæ•´ç‰ˆæ¼”ç¤º</p>
            
            <div class="demo-features">
                <div class="feature-tag">ğŸ¯ å³é”®èœå•</div>
                <div class="feature-tag">ğŸ“… å†œå†ä¿¡æ¯</div>
                <div class="feature-tag">ğŸŒŸ å¤©å¹²åœ°æ”¯</div>
                <div class="feature-tag">âœ¨ å®œå¿Œæ˜¾ç¤º</div>
                <div class="feature-tag">ğŸ¨ å¤šç§è§†å›¾</div>
                <div class="feature-tag">ğŸ“± å“åº”å¼è®¾è®¡</div>
                <div class="feature-tag">ğŸŒ å›½é™…åŒ–</div>
                <div class="feature-tag">ğŸ­ ä¸»é¢˜åˆ‡æ¢</div>
            </div>
        </div>

        <div class="demo-controls">
            <button class="demo-btn active" onclick="switchView('month')">æœˆè§†å›¾</button>
            <button class="demo-btn" onclick="switchView('week')">å‘¨è§†å›¾</button>
            <button class="demo-btn" onclick="switchView('day')">æ—¥è§†å›¾</button>
            <button class="demo-btn" onclick="switchView('desk')">å°å†è§†å›¾</button>
            <button class="demo-btn" onclick="switchTheme()">åˆ‡æ¢ä¸»é¢˜</button>
            <button class="demo-btn" onclick="addSampleEvents()">æ·»åŠ ç¤ºä¾‹äº‹ä»¶</button>
            <button class="demo-btn" onclick="toggleLunar()">å†œå†æ˜¾ç¤º</button>
        </div>

        <div id="calendar" class="calendar-container"></div>

        <div class="demo-instructions">
            <h3>ğŸ® ä½¿ç”¨è¯´æ˜</h3>
            <ul>
                <li><strong>å³é”®ç‚¹å‡»æ—¥æœŸ</strong> - æ˜¾ç¤ºä¸Šä¸‹æ–‡èœå•ï¼Œå¯æ–°å»ºæ—¥ç¨‹ã€æŸ¥çœ‹è¯¦æƒ…</li>
                <li><strong>å³é”®ç‚¹å‡»äº‹ä»¶</strong> - ç¼–è¾‘ã€åˆ é™¤æˆ–å¤åˆ¶äº‹ä»¶</li>
                <li><strong>åŒå‡»æ—¥æœŸ</strong> - å¿«é€ŸæŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ï¼ˆå†œå†ã€å®œå¿Œç­‰ï¼‰</li>
                <li><strong>æ‹–æ‹½äº‹ä»¶</strong> - ç§»åŠ¨äº‹ä»¶åˆ°å…¶ä»–æ—¥æœŸ</li>
                <li><strong>é”®ç›˜å¯¼èˆª</strong> - æ–¹å‘é”®å¯¼èˆªï¼ŒEnteré€‰æ‹©ï¼ŒSpaceåˆ‡æ¢è§†å›¾</li>
                <li><strong>å°å†è§†å›¾</strong> - æ˜¾ç¤ºè¯¦ç»†çš„å†œå†ä¿¡æ¯ã€å¤©å¹²åœ°æ”¯ã€å®œå¿Œ</li>
                <li><strong>ä¸»é¢˜åˆ‡æ¢</strong> - æ”¯æŒå¤šç§ä¸»é¢˜é£æ ¼</li>
                <li><strong>å†œå†åŠŸèƒ½</strong> - æ˜¾ç¤ºå†œå†æ—¥æœŸã€èŠ‚æ°”ã€ä¼ ç»ŸèŠ‚æ—¥</li>
            </ul>
        </div>
    </div>

    <!-- å¼•å…¥æ—¥å†æ ·å¼å’Œè„šæœ¬ -->
    <link rel="stylesheet" href="./src/index.css">
    <script type="module">
        // æ¨¡æ‹ŸCalendarç±»å’Œç›¸å…³åŠŸèƒ½
        class MockCalendar {
            constructor(container, options = {}) {
                this.container = typeof container === 'string' ? document.querySelector(container) : container;
                this.options = options;
                this.currentView = options.view || 'month';
                this.currentDate = new Date();
                this.showLunar = options.showLunar !== false;
                this.theme = options.theme || 'default';
                this.events = [];
                
                this.init();
            }

            init() {
                this.render();
                this.bindEvents();
            }

            render() {
                if (this.currentView === 'desk') {
                    this.renderDeskView();
                } else {
                    this.renderCalendarView();
                }
            }

            renderCalendarView() {
                const today = new Date();
                const year = this.currentDate.getFullYear();
                const month = this.currentDate.getMonth();
                
                let html = `
                    <div class="ldesign-calendar">
                        <div class="ldesign-calendar-header">
                            <div class="ldesign-calendar-nav">
                                <button class="ldesign-calendar-btn ldesign-calendar-prev-btn">â€¹</button>
                                <h2 class="ldesign-calendar-title">${year}å¹´${month + 1}æœˆ</h2>
                                <button class="ldesign-calendar-btn ldesign-calendar-next-btn">â€º</button>
                            </div>
                            <div class="ldesign-calendar-toolbar">
                                <button class="ldesign-calendar-btn ldesign-calendar-today-btn">ä»Šå¤©</button>
                            </div>
                        </div>
                        <div class="ldesign-calendar-body">
                `;

                if (this.currentView === 'month') {
                    html += this.renderMonthView(year, month);
                } else if (this.currentView === 'week') {
                    html += this.renderWeekView();
                } else if (this.currentView === 'day') {
                    html += this.renderDayView();
                }

                html += `
                        </div>
                    </div>
                `;

                this.container.innerHTML = html;
            }

            renderMonthView(year, month) {
                const firstDay = new Date(year, month, 1);
                const lastDay = new Date(year, month + 1, 0);
                const startDate = new Date(firstDay);
                startDate.setDate(startDate.getDate() - firstDay.getDay());

                let html = `
                    <div class="ldesign-calendar-month-view">
                        <div class="ldesign-calendar-weekdays">
                            <div class="ldesign-calendar-weekday">æ—¥</div>
                            <div class="ldesign-calendar-weekday">ä¸€</div>
                            <div class="ldesign-calendar-weekday">äºŒ</div>
                            <div class="ldesign-calendar-weekday">ä¸‰</div>
                            <div class="ldesign-calendar-weekday">å››</div>
                            <div class="ldesign-calendar-weekday">äº”</div>
                            <div class="ldesign-calendar-weekday">å…­</div>
                        </div>
                        <div class="ldesign-calendar-dates">
                `;

                for (let i = 0; i < 42; i++) {
                    const date = new Date(startDate);
                    date.setDate(startDate.getDate() + i);
                    
                    const isCurrentMonth = date.getMonth() === month;
                    const isToday = date.toDateString() === new Date().toDateString();
                    const lunarInfo = this.getLunarInfo(date);
                    
                    let classes = ['ldesign-calendar-date'];
                    if (!isCurrentMonth) classes.push('other-month');
                    if (isToday) classes.push('today');
                    
                    html += `
                        <div class="${classes.join(' ')}" data-date="${date.toISOString()}">
                            <div class="ldesign-calendar-date-number">${date.getDate()}</div>
                            ${this.showLunar ? `<div class="ldesign-calendar-lunar-info">${lunarInfo}</div>` : ''}
                            ${this.renderDateEvents(date)}
                        </div>
                    `;
                }

                html += `
                        </div>
                    </div>
                `;

                return html;
            }

            renderWeekView() {
                return `
                    <div class="ldesign-calendar-week-view">
                        <div class="ldesign-calendar-week-header">
                            <div class="ldesign-calendar-time-column"></div>
                            ${this.getWeekDays().map(day => `
                                <div class="ldesign-calendar-week-day">
                                    <div class="ldesign-calendar-week-day-name">${day.name}</div>
                                    <div class="ldesign-calendar-week-day-number">${day.number}</div>
                                </div>
                            `).join('')}
                        </div>
                        <div class="ldesign-calendar-week-body">
                            <div class="ldesign-calendar-time-slots">
                                ${Array.from({length: 24}, (_, i) => `
                                    <div class="ldesign-calendar-time-slot">
                                        <span class="ldesign-calendar-time-label">${i.toString().padStart(2, '0')}:00</span>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                `;
            }

            renderDayView() {
                const date = this.currentDate;
                const lunarInfo = this.getLunarInfo(date);
                
                return `
                    <div class="ldesign-calendar-day-view">
                        <div class="ldesign-calendar-day-header">
                            <h3>${date.getFullYear()}å¹´${date.getMonth() + 1}æœˆ${date.getDate()}æ—¥</h3>
                            <div class="ldesign-calendar-day-lunar">${lunarInfo}</div>
                        </div>
                        <div class="ldesign-calendar-day-body">
                            ${Array.from({length: 24}, (_, i) => `
                                <div class="ldesign-calendar-hour-slot">
                                    <span class="ldesign-calendar-hour-label">${i.toString().padStart(2, '0')}:00</span>
                                    <div class="ldesign-calendar-hour-content"></div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }

            renderDeskView() {
                const date = this.currentDate;
                const lunarInfo = this.getLunarInfo(date);
                const ganzhi = this.getGanzhi(date);
                const suitable = this.getSuitable(date);
                const avoid = this.getAvoid(date);
                
                this.container.innerHTML = `
                    <div class="ldesign-calendar-desk-view">
                        <div class="ldesign-calendar-desk-container">
                            <div class="ldesign-calendar-desk-header">
                                <div class="ldesign-calendar-desk-date">${date.getDate()}</div>
                                <div class="ldesign-calendar-desk-weekday">${this.getWeekdayName(date)}</div>
                                <div class="ldesign-calendar-desk-month-year">${date.getFullYear()}å¹´${date.getMonth() + 1}æœˆ</div>
                            </div>
                            <div class="ldesign-calendar-desk-body">
                                <div class="ldesign-calendar-desk-lunar-section">
                                    <h3 class="ldesign-calendar-desk-section-title">å†œå†ä¿¡æ¯</h3>
                                    <div class="ldesign-calendar-desk-lunar-date">${lunarInfo}</div>
                                    <div class="ldesign-calendar-desk-ganzhi">${ganzhi}</div>
                                    <div class="ldesign-calendar-desk-zodiac">ç”Ÿè‚–ï¼š${this.getZodiac(date)}</div>
                                    <div class="ldesign-calendar-desk-suitable-avoid">
                                        <div class="ldesign-calendar-desk-suitable">
                                            <div class="ldesign-calendar-desk-suitable-title">å®œ</div>
                                            <div class="ldesign-calendar-desk-suitable-list">${suitable.join('ã€')}</div>
                                        </div>
                                        <div class="ldesign-calendar-desk-avoid">
                                            <div class="ldesign-calendar-desk-avoid-title">å¿Œ</div>
                                            <div class="ldesign-calendar-desk-avoid-list">${avoid.join('ã€')}</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="ldesign-calendar-desk-events-section">
                                    <h3 class="ldesign-calendar-desk-section-title">ä»Šæ—¥æ—¥ç¨‹</h3>
                                    ${this.renderTodayEvents()}
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }

            renderDateEvents(date) {
                const dayEvents = this.events.filter(event => {
                    const eventDate = new Date(event.start);
                    return eventDate.toDateString() === date.toDateString();
                });

                if (dayEvents.length === 0) return '';

                return `
                    <div class="ldesign-calendar-date-events">
                        ${dayEvents.slice(0, 2).map(event => `
                            <div class="ldesign-calendar-event" data-event-id="${event.id}" style="background-color: ${event.color}">
                                ${event.title}
                            </div>
                        `).join('')}
                        ${dayEvents.length > 2 ? `<div class="ldesign-calendar-more-events">+${dayEvents.length - 2}æ›´å¤š</div>` : ''}
                    </div>
                `;
            }

            renderTodayEvents() {
                const todayEvents = this.events.filter(event => {
                    const eventDate = new Date(event.start);
                    return eventDate.toDateString() === this.currentDate.toDateString();
                });

                if (todayEvents.length === 0) {
                    return '<div class="ldesign-calendar-desk-no-events">ä»Šæ—¥æš‚æ— æ—¥ç¨‹å®‰æ’</div>';
                }

                return todayEvents.map(event => `
                    <div class="ldesign-calendar-desk-event" style="border-left-color: ${event.color}">
                        <div class="ldesign-calendar-desk-event-title">${event.title}</div>
                        <div class="ldesign-calendar-desk-event-time">${this.formatEventTime(event)}</div>
                        ${event.description ? `<div class="ldesign-calendar-desk-event-description">${event.description}</div>` : ''}
                    </div>
                `).join('');
            }

            bindEvents() {
                // å³é”®èœå•
                this.container.addEventListener('contextmenu', (e) => {
                    e.preventDefault();
                    this.showContextMenu(e);
                });

                // åŒå‡»æŸ¥çœ‹è¯¦æƒ…
                this.container.addEventListener('dblclick', (e) => {
                    const dateEl = e.target.closest('.ldesign-calendar-date');
                    if (dateEl) {
                        this.showDetailModal(new Date(dateEl.dataset.date));
                    }
                });

                // å¯¼èˆªæŒ‰é’®
                this.container.addEventListener('click', (e) => {
                    if (e.target.classList.contains('ldesign-calendar-prev-btn')) {
                        this.prev();
                    } else if (e.target.classList.contains('ldesign-calendar-next-btn')) {
                        this.next();
                    } else if (e.target.classList.contains('ldesign-calendar-today-btn')) {
                        this.goToToday();
                    }
                });
            }

            showContextMenu(e) {
                const menu = document.createElement('div');
                menu.className = 'ldesign-calendar-context-menu';
                menu.style.left = e.clientX + 'px';
                menu.style.top = e.clientY + 'px';
                
                const dateEl = e.target.closest('.ldesign-calendar-date');
                if (dateEl) {
                    menu.innerHTML = `
                        <div class="ldesign-calendar-context-menu-item" onclick="calendar.createEvent('${dateEl.dataset.date}')">
                            <span>â• æ–°å»ºæ—¥ç¨‹</span>
                        </div>
                        <div class="ldesign-calendar-context-menu-item" onclick="calendar.showDetailModal('${dateEl.dataset.date}')">
                            <span>ğŸ“… æŸ¥çœ‹è¯¦æƒ…</span>
                        </div>
                        <div class="ldesign-calendar-context-menu-divider"></div>
                        <div class="ldesign-calendar-context-menu-item" onclick="calendar.goToToday()">
                            <span>ğŸ  å›åˆ°ä»Šå¤©</span>
                        </div>
                    `;
                }

                document.body.appendChild(menu);
                
                // ç‚¹å‡»å…¶ä»–åœ°æ–¹å…³é—­èœå•
                setTimeout(() => {
                    document.addEventListener('click', () => {
                        menu.remove();
                    }, { once: true });
                }, 0);
            }

            createEvent(dateStr) {
                const title = prompt('è¯·è¾“å…¥æ—¥ç¨‹æ ‡é¢˜:');
                if (title) {
                    const event = {
                        id: 'event-' + Date.now(),
                        title,
                        start: new Date(dateStr),
                        end: new Date(new Date(dateStr).getTime() + 60 * 60 * 1000),
                        color: '#722ED1',
                        description: ''
                    };
                    this.events.push(event);
                    this.render();
                }
            }

            showDetailModal(dateStr) {
                const date = new Date(dateStr);
                const lunarInfo = this.getLunarInfo(date);
                const ganzhi = this.getGanzhi(date);
                const suitable = this.getSuitable(date);
                const avoid = this.getAvoid(date);
                
                alert(`æ—¥æœŸè¯¦æƒ…ï¼š
${date.getFullYear()}å¹´${date.getMonth() + 1}æœˆ${date.getDate()}æ—¥
å†œå†ï¼š${lunarInfo}
å¤©å¹²åœ°æ”¯ï¼š${ganzhi}
å®œï¼š${suitable.join('ã€')}
å¿Œï¼š${avoid.join('ã€')}`);
            }

            // å·¥å…·æ–¹æ³•
            getLunarInfo(date) {
                const lunarDays = ['åˆä¸€', 'åˆäºŒ', 'åˆä¸‰', 'åˆå››', 'åˆäº”', 'åˆå…­', 'åˆä¸ƒ', 'åˆå…«', 'åˆä¹', 'åˆå',
                                 'åä¸€', 'åäºŒ', 'åä¸‰', 'åå››', 'åäº”', 'åå…­', 'åä¸ƒ', 'åå…«', 'åä¹', 'äºŒå',
                                 'å»¿ä¸€', 'å»¿äºŒ', 'å»¿ä¸‰', 'å»¿å››', 'å»¿äº”', 'å»¿å…­', 'å»¿ä¸ƒ', 'å»¿å…«', 'å»¿ä¹', 'ä¸‰å'];
                return lunarDays[date.getDate() % 30];
            }

            getGanzhi(date) {
                const stems = ['ç”²', 'ä¹™', 'ä¸™', 'ä¸', 'æˆŠ', 'å·±', 'åºš', 'è¾›', 'å£¬', 'ç™¸'];
                const branches = ['å­', 'ä¸‘', 'å¯…', 'å¯', 'è¾°', 'å·³', 'åˆ', 'æœª', 'ç”³', 'é…‰', 'æˆŒ', 'äº¥'];
                const year = date.getFullYear();
                return stems[(year - 4) % 10] + branches[(year - 4) % 12] + 'å¹´';
            }

            getZodiac(date) {
                const zodiacs = ['é¼ ', 'ç‰›', 'è™', 'å…”', 'é¾™', 'è›‡', 'é©¬', 'ç¾Š', 'çŒ´', 'é¸¡', 'ç‹—', 'çŒª'];
                return zodiacs[(date.getFullYear() - 4) % 12];
            }

            getSuitable(date) {
                const activities = ['ç¥­ç¥€', 'ç¥ˆç¦', 'å¼€å…‰', 'å‡ºè¡Œ', 'å«å¨¶', 'åŠ¨åœŸ', 'å¼€ä¸š', 'äº¤æ˜“'];
                return activities.slice(0, 3 + (date.getDate() % 3));
            }

            getAvoid(date) {
                const activities = ['å®‰è‘¬', 'ç ´åœŸ', 'ä¿®é€ ', 'æ¬å®¶', 'å¼€å¸‚'];
                return activities.slice(0, 2 + (date.getDate() % 2));
            }

            getWeekdayName(date) {
                const days = ['æ˜ŸæœŸæ—¥', 'æ˜ŸæœŸä¸€', 'æ˜ŸæœŸäºŒ', 'æ˜ŸæœŸä¸‰', 'æ˜ŸæœŸå››', 'æ˜ŸæœŸäº”', 'æ˜ŸæœŸå…­'];
                return days[date.getDay()];
            }

            getWeekDays() {
                const days = [];
                const start = new Date(this.currentDate);
                start.setDate(start.getDate() - start.getDay());
                
                for (let i = 0; i < 7; i++) {
                    const day = new Date(start);
                    day.setDate(start.getDate() + i);
                    days.push({
                        name: ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'][i],
                        number: day.getDate()
                    });
                }
                return days;
            }

            formatEventTime(event) {
                const start = new Date(event.start);
                const end = new Date(event.end);
                return `${start.getHours().toString().padStart(2, '0')}:${start.getMinutes().toString().padStart(2, '0')} - ${end.getHours().toString().padStart(2, '0')}:${end.getMinutes().toString().padStart(2, '0')}`;
            }

            // å…¬å…±æ–¹æ³•
            changeView(view) {
                this.currentView = view;
                this.render();
            }

            prev() {
                if (this.currentView === 'month') {
                    this.currentDate.setMonth(this.currentDate.getMonth() - 1);
                } else if (this.currentView === 'week') {
                    this.currentDate.setDate(this.currentDate.getDate() - 7);
                } else {
                    this.currentDate.setDate(this.currentDate.getDate() - 1);
                }
                this.render();
            }

            next() {
                if (this.currentView === 'month') {
                    this.currentDate.setMonth(this.currentDate.getMonth() + 1);
                } else if (this.currentView === 'week') {
                    this.currentDate.setDate(this.currentDate.getDate() + 7);
                } else {
                    this.currentDate.setDate(this.currentDate.getDate() + 1);
                }
                this.render();
            }

            goToToday() {
                this.currentDate = new Date();
                this.render();
            }

            setTheme(theme) {
                this.theme = theme;
                this.container.className = `calendar-container theme-${theme}`;
            }

            toggleLunar() {
                this.showLunar = !this.showLunar;
                this.render();
            }
        }

        // å…¨å±€å˜é‡å’Œå‡½æ•°
        let calendar;
        let currentTheme = 'default';
        const themes = ['default', 'blue', 'dark', 'green'];

        // åˆå§‹åŒ–æ—¥å†
        calendar = new MockCalendar('#calendar', {
            view: 'month',
            showLunar: true,
            theme: 'default'
        });

        // å…¨å±€å‡½æ•°
        window.switchView = function(view) {
            calendar.changeView(view);
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.demo-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        };

        window.switchTheme = function() {
            const currentIndex = themes.indexOf(currentTheme);
            currentTheme = themes[(currentIndex + 1) % themes.length];
            calendar.setTheme(currentTheme);
        };

        window.addSampleEvents = function() {
            const sampleEvents = [
                { title: 'å›¢é˜Ÿä¼šè®®', start: new Date(), color: '#722ED1' },
                { title: 'é¡¹ç›®è¯„å®¡', start: new Date(Date.now() + 86400000), color: '#52C41A' },
                { title: 'å®¢æˆ·æ‹œè®¿', start: new Date(Date.now() + 172800000), color: '#FA8C16' }
            ];
            
            sampleEvents.forEach(event => {
                event.id = 'event-' + Date.now() + Math.random();
                event.end = new Date(event.start.getTime() + 60 * 60 * 1000);
                calendar.events.push(event);
            });
            
            calendar.render();
        };

        window.toggleLunar = function() {
            calendar.toggleLunar();
        };

        // æ·»åŠ é”®ç›˜å¯¼èˆª
        document.addEventListener('keydown', (e) => {
            switch(e.key) {
                case 'ArrowLeft':
                    calendar.prev();
                    break;
                case 'ArrowRight':
                    calendar.next();
                    break;
                case ' ':
                    e.preventDefault();
                    const views = ['month', 'week', 'day', 'desk'];
                    const currentIndex = views.indexOf(calendar.currentView);
                    const nextView = views[(currentIndex + 1) % views.length];
                    calendar.changeView(nextView);
                    break;
                case 'Home':
                    calendar.goToToday();
                    break;
            }
        });
    </script>
</body>
</html>
