# ä¾èµ–å®‰å…¨æ‰«ææŒ‡å—

æœ¬æ–‡æ¡£ä»‹ç» LDesign é¡¹ç›®çš„ä¾èµ–å®‰å…¨æ‰«ææœºåˆ¶å’Œä½¿ç”¨æ–¹æ³•ã€‚

---

## ğŸ“‹ ç›®å½•

- [è‡ªåŠ¨åŒ–æ‰«æ](#è‡ªåŠ¨åŒ–æ‰«æ)
- [æ‰‹åŠ¨æ‰«æ](#æ‰‹åŠ¨æ‰«æ)
- [æŸ¥çœ‹æŠ¥å‘Š](#æŸ¥çœ‹æŠ¥å‘Š)
- [å¤„ç†å®‰å…¨é—®é¢˜](#å¤„ç†å®‰å…¨é—®é¢˜)
- [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)

---

## ğŸ¤– è‡ªåŠ¨åŒ–æ‰«æ

### 1. æ¯å‘¨å®šæ—¶æ‰«æ

**è§¦å‘æ—¶é—´**: æ¯å‘¨ä¸€æ—©ä¸Š 8:00 (åŒ—äº¬æ—¶é—´)

**æ‰«æå†…å®¹**:
- âœ… ä¾èµ–å®‰å…¨æ¼æ´å®¡è®¡
- âœ… è®¸å¯è¯åˆè§„æ€§æ£€æŸ¥
- âœ… è¿‡æ—¶ä¾èµ–æ£€æŸ¥

**æŸ¥çœ‹ç»“æœ**:
1. è®¿é—® GitHub Actions é¡µé¢
2. æŸ¥æ‰¾ "Security Scan" workflow
3. ç‚¹å‡»æœ€æ–°çš„è¿è¡Œè®°å½•
4. æŸ¥çœ‹ Summary å’Œ Artifacts

### 2. PR ä¾èµ–å®¡æŸ¥

**è§¦å‘æ¡ä»¶**: å½“ PR ä¿®æ”¹äº†ä»¥ä¸‹æ–‡ä»¶æ—¶è‡ªåŠ¨è¿è¡Œ
- `**/package.json`
- `**/pnpm-lock.yaml`

**æ£€æŸ¥å†…å®¹**:
- âœ… æ–°å¢ä¾èµ–çš„å®‰å…¨æ¼æ´
- âœ… è®¸å¯è¯å…¼å®¹æ€§
- âœ… ä¾èµ–å˜æ›´å½±å“åˆ†æ
- âœ… æ‰“åŒ…ä½“ç§¯å½±å“è¯„ä¼°

**å®¡æŸ¥æ ‡å‡†**:
- âŒ æ‹’ç»: GPL-2.0, GPL-3.0, AGPL-3.0 è®¸å¯è¯
- âœ… å…è®¸: MIT, Apache-2.0, BSD-2-Clause, BSD-3-Clause, ISC
- âš ï¸ è­¦å‘Š: é«˜å±æˆ–ä¸¥é‡å®‰å…¨æ¼æ´

### 3. Dependabot è‡ªåŠ¨æ›´æ–°

**æ›´æ–°é¢‘ç‡**: æ¯å‘¨ä¸€æ—©ä¸Š 8:00 (åŒ—äº¬æ—¶é—´)

**æ›´æ–°ç­–ç•¥**:
- **è¡¥ä¸ç‰ˆæœ¬** (x.x.X): è‡ªåŠ¨åˆ›å»º PR
- **æ¬¡è¦ç‰ˆæœ¬** (x.X.x): åˆ†ç»„åˆ›å»º PR
- **ä¸»è¦ç‰ˆæœ¬** (X.x.x): å¿½ç•¥,éœ€æ‰‹åŠ¨å®¡æŸ¥

**åˆ†ç»„ç­–ç•¥**:
- `dev-dependencies`: å¼€å‘ä¾èµ– (@types/*, eslint*, vitest, etc.)
- `production-dependencies`: ç”Ÿäº§ä¾èµ– (vue, react, etc.)

---

## ğŸ” æ‰‹åŠ¨æ‰«æ

### æœ¬åœ°å®‰å…¨å®¡è®¡

```bash
# è¿è¡Œ pnpm audit
pnpm audit

# ä»…æ˜¾ç¤ºé«˜å±åŠä»¥ä¸Šæ¼æ´
pnpm audit --audit-level=high

# ç”Ÿæˆ JSON æŠ¥å‘Š
pnpm audit --json > audit-report.json

# è‡ªåŠ¨ä¿®å¤å¯ä¿®å¤çš„æ¼æ´
pnpm audit --fix
```

### æ£€æŸ¥è¿‡æ—¶ä¾èµ–

```bash
# æ£€æŸ¥æ‰€æœ‰è¿‡æ—¶çš„ä¾èµ–
pnpm outdated

# æ£€æŸ¥ç‰¹å®šåŒ…
pnpm outdated vue

# é€’å½’æ£€æŸ¥æ‰€æœ‰å­åŒ…
pnpm -r outdated
```

### è®¸å¯è¯æ£€æŸ¥

```bash
# å®‰è£… license-checker
pnpm add -g license-checker

# æ£€æŸ¥æ‰€æœ‰ä¾èµ–çš„è®¸å¯è¯
license-checker

# ç”Ÿæˆ JSON æŠ¥å‘Š
license-checker --json --out licenses.json

# ä»…æ˜¾ç¤ºæ‘˜è¦
license-checker --summary

# æ£€æŸ¥ç‰¹å®šè®¸å¯è¯
license-checker --onlyAllow "MIT;Apache-2.0;BSD-3-Clause"
```

### æ‰‹åŠ¨è§¦å‘ GitHub Actions

1. è®¿é—® GitHub Actions é¡µé¢
2. é€‰æ‹© "Security Scan" workflow
3. ç‚¹å‡» "Run workflow" æŒ‰é’®
4. é€‰æ‹©åˆ†æ”¯å¹¶è¿è¡Œ

---

## ğŸ“Š æŸ¥çœ‹æŠ¥å‘Š

### GitHub Actions Summary

æ¯æ¬¡æ‰«æå,åœ¨ Actions è¿è¡Œé¡µé¢çš„ Summary ä¸­å¯ä»¥çœ‹åˆ°:

- **ä¾èµ–å®‰å…¨å®¡è®¡æŠ¥å‘Š**: æ¼æ´è¯¦æƒ…å’Œä¸¥é‡ç¨‹åº¦
- **è®¸å¯è¯åˆè§„æ€§æ£€æŸ¥**: è®¸å¯è¯æ‘˜è¦å’Œä¸å…¼å®¹é¡¹
- **è¿‡æ—¶ä¾èµ–æ£€æŸ¥**: å¯æ›´æ–°çš„ä¾èµ–åˆ—è¡¨

### ä¸‹è½½è¯¦ç»†æŠ¥å‘Š

åœ¨ Actions è¿è¡Œé¡µé¢çš„ Artifacts éƒ¨åˆ†å¯ä»¥ä¸‹è½½:

- `security-audit-report`: å®‰å…¨å®¡è®¡ JSON æŠ¥å‘Š
- `license-report`: è®¸å¯è¯è¯¦ç»†æŠ¥å‘Š
- `outdated-report`: è¿‡æ—¶ä¾èµ– JSON æŠ¥å‘Š

**æŠ¥å‘Šä¿ç•™æœŸ**: 30 å¤©

---

## ğŸ› ï¸ å¤„ç†å®‰å…¨é—®é¢˜

### 1. è¯„ä¼°ä¸¥é‡ç¨‹åº¦

| çº§åˆ« | è¯´æ˜ | å¤„ç†æ—¶é—´ |
|------|------|----------|
| **Critical** | ä¸¥é‡æ¼æ´ | ç«‹å³ä¿®å¤ (24å°æ—¶å†…) |
| **High** | é«˜å±æ¼æ´ | ç´§æ€¥ä¿®å¤ (1å‘¨å†…) |
| **Moderate** | ä¸­å±æ¼æ´ | è®¡åˆ’ä¿®å¤ (1æœˆå†…) |
| **Low** | ä½å±æ¼æ´ | å¯é€‰ä¿®å¤ |

### 2. ä¿®å¤æ­¥éª¤

**è‡ªåŠ¨ä¿®å¤** (æ¨è):
```bash
# è‡ªåŠ¨ä¿®å¤å¯ä¿®å¤çš„æ¼æ´
pnpm audit --fix

# æäº¤ä¿®å¤
git add pnpm-lock.yaml
git commit -m "fix(deps): ä¿®å¤å®‰å…¨æ¼æ´"
```

**æ‰‹åŠ¨æ›´æ–°**:
```bash
# æ›´æ–°ç‰¹å®šä¾èµ–åˆ°å®‰å…¨ç‰ˆæœ¬
pnpm update <package-name>

# æˆ–è€…æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬
pnpm update <package-name> --latest
```

**æ— æ³•ä¿®å¤çš„æƒ…å†µ**:
1. æ£€æŸ¥æ˜¯å¦æœ‰æ›¿ä»£æ–¹æ¡ˆ
2. è¯„ä¼°å®é™…é£é™©
3. å¦‚æœé£é™©å¯æ¥å—,æ·»åŠ åˆ°å¿½ç•¥åˆ—è¡¨
4. å®šæœŸé‡æ–°è¯„ä¼°

### 3. è®¸å¯è¯é—®é¢˜å¤„ç†

**å‘ç°ä¸å…¼å®¹è®¸å¯è¯**:
1. æ£€æŸ¥æ˜¯å¦ä¸ºç›´æ¥ä¾èµ–
2. å¦‚æœæ˜¯ç›´æ¥ä¾èµ–,å¯»æ‰¾æ›¿ä»£åŒ…
3. å¦‚æœæ˜¯é—´æ¥ä¾èµ–,è”ç³»ä¸Šæ¸¸åŒ…ç»´æŠ¤è€…
4. è¯„ä¼°æ³•å¾‹é£é™©å¹¶å’¨è¯¢æ³•åŠ¡

---

## âœ… æœ€ä½³å®è·µ

### å¼€å‘é˜¶æ®µ

1. **æ·»åŠ æ–°ä¾èµ–å‰**:
   ```bash
   # æ£€æŸ¥åŒ…çš„è®¸å¯è¯
   npm view <package-name> license
   
   # æ£€æŸ¥åŒ…çš„å®‰å…¨è®°å½•
   npm view <package-name> vulnerabilities
   ```

2. **å®šæœŸæ›´æ–°ä¾èµ–**:
   ```bash
   # æ¯æœˆè‡³å°‘è¿è¡Œä¸€æ¬¡
   pnpm outdated
   pnpm update
   ```

3. **å®¡æŸ¥ Dependabot PR**:
   - æŸ¥çœ‹å˜æ›´æ—¥å¿—
   - è¿è¡Œæµ‹è¯•
   - æ£€æŸ¥ç ´åæ€§å˜æ›´

### CI/CD é›†æˆ

1. **åœ¨ CI ä¸­è¿è¡Œå®¡è®¡**:
   ```yaml
   - name: Security audit
     run: pnpm audit --audit-level=high
   ```

2. **è®¾ç½®è´¨é‡é—¨ç¦**:
   - é«˜å±æ¼æ´: é˜»æ­¢åˆå¹¶
   - ä¸­å±æ¼æ´: è­¦å‘Šä½†å…è®¸åˆå¹¶
   - ä½å±æ¼æ´: ä»…è®°å½•

3. **å®šæœŸç”ŸæˆæŠ¥å‘Š**:
   - æ¯å‘¨ç”Ÿæˆå®‰å…¨æŠ¥å‘Š
   - æ¯æœˆç”Ÿæˆä¾èµ–å¥åº·æŠ¥å‘Š
   - æ¯å­£åº¦è¿›è¡Œå…¨é¢å®¡æŸ¥

### å›¢é˜Ÿåä½œ

1. **æŒ‡å®šå®‰å…¨è´Ÿè´£äºº**: è´Ÿè´£å®¡æŸ¥å’Œå¤„ç†å®‰å…¨é—®é¢˜
2. **å»ºç«‹å“åº”æµç¨‹**: å®šä¹‰ä¸åŒçº§åˆ«æ¼æ´çš„å¤„ç†æµç¨‹
3. **å®šæœŸåŸ¹è®­**: æå‡å›¢é˜Ÿå®‰å…¨æ„è¯†
4. **æ–‡æ¡£è®°å½•**: è®°å½•æ‰€æœ‰å®‰å…¨å†³ç­–å’Œä¾‹å¤–æƒ…å†µ

---

## ğŸ“š ç›¸å…³èµ„æº

- [pnpm audit æ–‡æ¡£](https://pnpm.io/cli/audit)
- [GitHub Dependency Review](https://docs.github.com/en/code-security/supply-chain-security/understanding-your-software-supply-chain/about-dependency-review)
- [Dependabot é…ç½®](https://docs.github.com/en/code-security/dependabot/dependabot-version-updates/configuration-options-for-the-dependabot.yml-file)
- [OWASP ä¾èµ–æ£€æŸ¥](https://owasp.org/www-project-dependency-check/)

---

**æœ€åæ›´æ–°**: 2025-11-24  
**ç»´æŠ¤è€…**: LDesign Team

