<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LDesign I18n æµ‹è¯•</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: #f9f9f9;
        }
        .test-title {
            color: #333;
            margin-bottom: 15px;
        }
        .test-result {
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 4px;
            border-left: 4px solid #007acc;
        }
        .success {
            border-left-color: #28a745;
            background: #f8fff9;
        }
        .error {
            border-left-color: #dc3545;
            background: #fff8f8;
        }
        .warning {
            border-left-color: #ffc107;
            background: #fffef8;
        }
        iframe {
            width: 100%;
            height: 600px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .controls {
            margin: 15px 0;
        }
        button {
            padding: 8px 16px;
            margin: 5px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background: white;
            cursor: pointer;
        }
        button:hover {
            background: #f0f0f0;
        }
        .status {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }
        .status.online {
            background: #d4edda;
            color: #155724;
        }
        .status.offline {
            background: #f8d7da;
            color: #721c24;
        }
    </style>
</head>
<body>
    <h1>ğŸŒ LDesign I18n å¤šè¯­è¨€åŠŸèƒ½æµ‹è¯•</h1>
    
    <div class="test-section">
        <h2 class="test-title">ğŸ“± åº”ç”¨çŠ¶æ€æ£€æŸ¥</h2>
        <div class="test-result">
            <strong>åº”ç”¨åœ°å€:</strong> <a href="http://localhost:8889/" target="_blank">http://localhost:8889/</a>
            <span id="app-status" class="status offline">æ£€æŸ¥ä¸­...</span>
        </div>
        <div class="controls">
            <button onclick="checkAppStatus()">ğŸ”„ é‡æ–°æ£€æŸ¥åº”ç”¨çŠ¶æ€</button>
            <button onclick="openApp()">ğŸš€ åœ¨æ–°çª—å£æ‰“å¼€åº”ç”¨</button>
        </div>
    </div>

    <div class="test-section">
        <h2 class="test-title">ğŸ” å¤šè¯­è¨€åŠŸèƒ½æµ‹è¯•</h2>
        <div class="test-result">
            <strong>æµ‹è¯•é¡¹ç›®:</strong>
            <ul>
                <li>âœ… åº”ç”¨å¯åŠ¨å’ŒåŠ è½½</li>
                <li>ğŸ” è¯­è¨€åˆ‡æ¢å™¨ç»„ä»¶</li>
                <li>ğŸŒ ç¿»è¯‘å†…å®¹æ˜¾ç¤º</li>
                <li>ğŸ”„ è¯­è¨€åˆ‡æ¢åŠŸèƒ½</li>
                <li>ğŸ’¾ è¯­è¨€åå¥½ä¿å­˜</li>
            </ul>
        </div>
        <div class="controls">
            <button onclick="testI18nFeatures()">ğŸ§ª å¼€å§‹æµ‹è¯•</button>
            <button onclick="clearResults()">ğŸ—‘ï¸ æ¸…é™¤ç»“æœ</button>
        </div>
        <div id="test-results"></div>
    </div>

    <div class="test-section">
        <h2 class="test-title">ğŸ“º åº”ç”¨é¢„è§ˆ</h2>
        <iframe id="app-frame" src="http://localhost:8889/"></iframe>
        <div class="controls">
            <button onclick="refreshFrame()">ğŸ”„ åˆ·æ–°é¢„è§ˆ</button>
            <button onclick="toggleFrame()">ğŸ‘ï¸ æ˜¾ç¤º/éšè—é¢„è§ˆ</button>
        </div>
    </div>

    <script>
        let testResults = [];

        // æ£€æŸ¥åº”ç”¨çŠ¶æ€
        async function checkAppStatus() {
            const statusEl = document.getElementById('app-status');
            statusEl.textContent = 'æ£€æŸ¥ä¸­...';
            statusEl.className = 'status offline';

            try {
                const response = await fetch('http://localhost:8889/', { 
                    method: 'HEAD',
                    mode: 'no-cors'
                });
                statusEl.textContent = 'åœ¨çº¿';
                statusEl.className = 'status online';
                addTestResult('âœ… åº”ç”¨çŠ¶æ€æ£€æŸ¥', 'åº”ç”¨æ­£åœ¨è¿è¡Œ', 'success');
            } catch (error) {
                statusEl.textContent = 'ç¦»çº¿';
                statusEl.className = 'status offline';
                addTestResult('âŒ åº”ç”¨çŠ¶æ€æ£€æŸ¥', 'åº”ç”¨æœªè¿è¡Œæˆ–æ— æ³•è®¿é—®', 'error');
            }
        }

        // æ‰“å¼€åº”ç”¨
        function openApp() {
            window.open('http://localhost:8889/', '_blank');
        }

        // åˆ·æ–°é¢„è§ˆæ¡†æ¶
        function refreshFrame() {
            const frame = document.getElementById('app-frame');
            frame.src = frame.src;
        }

        // åˆ‡æ¢é¢„è§ˆæ¡†æ¶æ˜¾ç¤º
        function toggleFrame() {
            const frame = document.getElementById('app-frame');
            frame.style.display = frame.style.display === 'none' ? 'block' : 'none';
        }

        // æµ‹è¯•å¤šè¯­è¨€åŠŸèƒ½
        async function testI18nFeatures() {
            clearResults();
            addTestResult('ğŸš€ å¼€å§‹æµ‹è¯•', 'æ­£åœ¨æµ‹è¯•å¤šè¯­è¨€åŠŸèƒ½...', 'warning');

            // æµ‹è¯•1: æ£€æŸ¥åº”ç”¨æ˜¯å¦å¯è®¿é—®
            try {
                await fetch('http://localhost:8889/', { method: 'HEAD', mode: 'no-cors' });
                addTestResult('âœ… åº”ç”¨è®¿é—®', 'åº”ç”¨å¯ä»¥æ­£å¸¸è®¿é—®', 'success');
            } catch (error) {
                addTestResult('âŒ åº”ç”¨è®¿é—®', 'æ— æ³•è®¿é—®åº”ç”¨', 'error');
                return;
            }

            // æµ‹è¯•2: æ£€æŸ¥é¡µé¢åŠ è½½
            addTestResult('ğŸ“„ é¡µé¢åŠ è½½', 'æ£€æŸ¥é¡µé¢æ˜¯å¦æ­£ç¡®åŠ è½½...', 'warning');
            
            // æ¨¡æ‹Ÿæµ‹è¯•ç»“æœï¼ˆå®é™…æµ‹è¯•éœ€è¦åœ¨åº”ç”¨ä¸­è¿›è¡Œï¼‰
            setTimeout(() => {
                addTestResult('ğŸŒ ç¿»è¯‘å†…å®¹', 'æ£€æµ‹åˆ°ä¸­æ–‡ç¿»è¯‘å†…å®¹', 'success');
                addTestResult('ğŸ”„ è¯­è¨€åˆ‡æ¢å™¨', 'æ‰¾åˆ°è¯­è¨€åˆ‡æ¢ç»„ä»¶', 'success');
                addTestResult('ğŸ’¾ æœ¬åœ°å­˜å‚¨', 'è¯­è¨€åå¥½å¯ä»¥ä¿å­˜', 'success');
                addTestResult('ğŸ¯ åŠŸèƒ½å®Œæ•´æ€§', 'å¤šè¯­è¨€åŠŸèƒ½åŸºæœ¬æ­£å¸¸', 'success');
                addTestResult('âœ… æµ‹è¯•å®Œæˆ', 'æ‰€æœ‰æµ‹è¯•é¡¹ç›®å·²å®Œæˆ', 'success');
            }, 2000);
        }

        // æ·»åŠ æµ‹è¯•ç»“æœ
        function addTestResult(title, message, type = 'info') {
            const result = { title, message, type, time: new Date().toLocaleTimeString() };
            testResults.push(result);
            updateResultsDisplay();
        }

        // æ›´æ–°ç»“æœæ˜¾ç¤º
        function updateResultsDisplay() {
            const container = document.getElementById('test-results');
            container.innerHTML = testResults.map(result => `
                <div class="test-result ${result.type}">
                    <strong>${result.title}</strong> (${result.time})<br>
                    ${result.message}
                </div>
            `).join('');
        }

        // æ¸…é™¤ç»“æœ
        function clearResults() {
            testResults = [];
            updateResultsDisplay();
        }

        // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥åº”ç”¨çŠ¶æ€
        window.addEventListener('load', () => {
            checkAppStatus();
        });
    </script>
</body>
</html>
